/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/aframe-extras@7.5.1";
exports.ids = ["vendor-chunks/aframe-extras@7.5.1"];
exports.modules = {

/***/ "(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/index.js":
/*!************************************************************************************!*\
  !*** ./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/index.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("__webpack_require__(/*! ./src/controls */ \"(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/controls/index.js\");\n__webpack_require__(/*! ./src/loaders */ \"(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/loaders/index.js\");\n__webpack_require__(/*! ./src/misc */ \"(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/misc/index.js\");\n__webpack_require__(/*! ./src/pathfinding */ \"(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/pathfinding/index.js\");\n__webpack_require__(/*! ./src/primitives */ \"(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/primitives/index.js\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYWZyYW1lLWV4dHJhc0A3LjUuMS9ub2RlX21vZHVsZXMvYWZyYW1lLWV4dHJhcy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiQUFBQSxtQkFBTyxDQUFDLHVIQUFnQjtBQUN4QixtQkFBTyxDQUFDLHFIQUFlO0FBQ3ZCLG1CQUFPLENBQUMsK0dBQVk7QUFDcEIsbUJBQU8sQ0FBQyw2SEFBbUI7QUFDM0IsbUJBQU8sQ0FBQywySEFBa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zbWFfcG9zdF9zY2FyY2l0eS8uL25vZGVfbW9kdWxlcy8ucG5wbS9hZnJhbWUtZXh0cmFzQDcuNS4xL25vZGVfbW9kdWxlcy9hZnJhbWUtZXh0cmFzL2luZGV4LmpzPzBlZmMiXSwic291cmNlc0NvbnRlbnQiOlsicmVxdWlyZSgnLi9zcmMvY29udHJvbHMnKTtcbnJlcXVpcmUoJy4vc3JjL2xvYWRlcnMnKTtcbnJlcXVpcmUoJy4vc3JjL21pc2MnKTtcbnJlcXVpcmUoJy4vc3JjL3BhdGhmaW5kaW5nJyk7XG5yZXF1aXJlKCcuL3NyYy9wcmltaXRpdmVzJyk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/lib/ColladaLoader.js":
/*!************************************************************************************************!*\
  !*** ./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/lib/ColladaLoader.js ***!
  \************************************************************************************************/
/***/ ((module) => {

eval("/**\n * @author mrdoob / http://mrdoob.com/\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nmodule.exports = THREE.ColladaLoader = function ( manager ) {\n\n  this.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\n\n};\n\nTHREE.ColladaLoader.prototype = {\n\n  constructor: THREE.ColladaLoader,\n\n  crossOrigin: 'anonymous',\n\n  load: function ( url, onLoad, onProgress, onError ) {\n\n    var scope = this;\n\n    var path = ( scope.path === undefined ) ? THREE.LoaderUtils.extractUrlBase( url ) : scope.path;\n\n    var loader = new THREE.FileLoader( scope.manager );\n    loader.setPath( scope.path );\n    loader.load( url, function ( text ) {\n\n      onLoad( scope.parse( text, path ) );\n\n    }, onProgress, onError );\n\n  },\n\n  setPath: function ( value ) {\n\n    this.path = value;\n    return this;\n\n  },\n\n  setResourcePath: function ( value ) {\n\n    this.resourcePath = value;\n    return this;\n\n  },\n\n  options: {\n\n    set convertUpAxis( value ) {\n\n      console.warn( 'THREE.ColladaLoader: options.convertUpAxis() has been removed. Up axis is converted automatically.' );\n\n    }\n\n  },\n\n  setCrossOrigin: function ( value ) {\n\n    this.crossOrigin = value;\n    return this;\n\n  },\n\n  parse: function ( text, path ) {\n\n    function getElementsByTagName( xml, name ) {\n\n      // Non recursive xml.getElementsByTagName() ...\n\n      var array = [];\n      var childNodes = xml.childNodes;\n\n      for ( var i = 0, l = childNodes.length; i < l; i ++ ) {\n\n        var child = childNodes[ i ];\n\n        if ( child.nodeName === name ) {\n\n          array.push( child );\n\n        }\n\n      }\n\n      return array;\n\n    }\n\n    function parseStrings( text ) {\n\n      if ( text.length === 0 ) return [];\n\n      var parts = text.trim().split( /\\s+/ );\n      var array = new Array( parts.length );\n\n      for ( var i = 0, l = parts.length; i < l; i ++ ) {\n\n        array[ i ] = parts[ i ];\n\n      }\n\n      return array;\n\n    }\n\n    function parseFloats( text ) {\n\n      if ( text.length === 0 ) return [];\n\n      var parts = text.trim().split( /\\s+/ );\n      var array = new Array( parts.length );\n\n      for ( var i = 0, l = parts.length; i < l; i ++ ) {\n\n        array[ i ] = parseFloat( parts[ i ] );\n\n      }\n\n      return array;\n\n    }\n\n    function parseInts( text ) {\n\n      if ( text.length === 0 ) return [];\n\n      var parts = text.trim().split( /\\s+/ );\n      var array = new Array( parts.length );\n\n      for ( var i = 0, l = parts.length; i < l; i ++ ) {\n\n        array[ i ] = parseInt( parts[ i ] );\n\n      }\n\n      return array;\n\n    }\n\n    function parseId( text ) {\n\n      return text.substring( 1 );\n\n    }\n\n    function generateId() {\n\n      return 'three_default_' + ( count ++ );\n\n    }\n\n    function isEmpty( object ) {\n\n      return Object.keys( object ).length === 0;\n\n    }\n\n    // asset\n\n    function parseAsset( xml ) {\n\n      return {\n        unit: parseAssetUnit( getElementsByTagName( xml, 'unit' )[ 0 ] ),\n        upAxis: parseAssetUpAxis( getElementsByTagName( xml, 'up_axis' )[ 0 ] )\n      };\n\n    }\n\n    function parseAssetUnit( xml ) {\n\n      if ( ( xml !== undefined ) && ( xml.hasAttribute( 'meter' ) === true ) ) {\n\n        return parseFloat( xml.getAttribute( 'meter' ) );\n\n      } else {\n\n        return 1; // default 1 meter\n\n      }\n\n    }\n\n    function parseAssetUpAxis( xml ) {\n\n      return xml !== undefined ? xml.textContent : 'Y_UP';\n\n    }\n\n    // library\n\n    function parseLibrary( xml, libraryName, nodeName, parser ) {\n\n      var library = getElementsByTagName( xml, libraryName )[ 0 ];\n\n      if ( library !== undefined ) {\n\n        var elements = getElementsByTagName( library, nodeName );\n\n        for ( var i = 0; i < elements.length; i ++ ) {\n\n          parser( elements[ i ] );\n\n        }\n\n      }\n\n    }\n\n    function buildLibrary( data, builder ) {\n\n      for ( var name in data ) {\n\n        var object = data[ name ];\n        object.build = builder( data[ name ] );\n\n      }\n\n    }\n\n    // get\n\n    function getBuild( data, builder ) {\n\n      if ( data.build !== undefined ) return data.build;\n\n      data.build = builder( data );\n\n      return data.build;\n\n    }\n\n    // animation\n\n    function parseAnimation( xml ) {\n\n      var data = {\n        sources: {},\n        samplers: {},\n        channels: {}\n      };\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        var id;\n\n        switch ( child.nodeName ) {\n\n          case 'source':\n            id = child.getAttribute( 'id' );\n            data.sources[ id ] = parseSource( child );\n            break;\n\n          case 'sampler':\n            id = child.getAttribute( 'id' );\n            data.samplers[ id ] = parseAnimationSampler( child );\n            break;\n\n          case 'channel':\n            id = child.getAttribute( 'target' );\n            data.channels[ id ] = parseAnimationChannel( child );\n            break;\n\n          default:\n            console.log( child );\n\n        }\n\n      }\n\n      library.animations[ xml.getAttribute( 'id' ) ] = data;\n\n    }\n\n    function parseAnimationSampler( xml ) {\n\n      var data = {\n        inputs: {},\n      };\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'input':\n            var id = parseId( child.getAttribute( 'source' ) );\n            var semantic = child.getAttribute( 'semantic' );\n            data.inputs[ semantic ] = id;\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function parseAnimationChannel( xml ) {\n\n      var data = {};\n\n      var target = xml.getAttribute( 'target' );\n\n      // parsing SID Addressing Syntax\n\n      var parts = target.split( '/' );\n\n      var id = parts.shift();\n      var sid = parts.shift();\n\n      // check selection syntax\n\n      var arraySyntax = ( sid.indexOf( '(' ) !== - 1 );\n      var memberSyntax = ( sid.indexOf( '.' ) !== - 1 );\n\n      if ( memberSyntax ) {\n\n        //  member selection access\n\n        parts = sid.split( '.' );\n        sid = parts.shift();\n        data.member = parts.shift();\n\n      } else if ( arraySyntax ) {\n\n        // array-access syntax. can be used to express fields in one-dimensional vectors or two-dimensional matrices.\n\n        var indices = sid.split( '(' );\n        sid = indices.shift();\n\n        for ( var i = 0; i < indices.length; i ++ ) {\n\n          indices[ i ] = parseInt( indices[ i ].replace( /\\)/, '' ) );\n\n        }\n\n        data.indices = indices;\n\n      }\n\n      data.id = id;\n      data.sid = sid;\n\n      data.arraySyntax = arraySyntax;\n      data.memberSyntax = memberSyntax;\n\n      data.sampler = parseId( xml.getAttribute( 'source' ) );\n\n      return data;\n\n    }\n\n    function buildAnimation( data ) {\n\n      var tracks = [];\n\n      var channels = data.channels;\n      var samplers = data.samplers;\n      var sources = data.sources;\n\n      for ( var target in channels ) {\n\n        if ( channels.hasOwnProperty( target ) ) {\n\n          var channel = channels[ target ];\n          var sampler = samplers[ channel.sampler ];\n\n          var inputId = sampler.inputs.INPUT;\n          var outputId = sampler.inputs.OUTPUT;\n\n          var inputSource = sources[ inputId ];\n          var outputSource = sources[ outputId ];\n\n          var animation = buildAnimationChannel( channel, inputSource, outputSource );\n\n          createKeyframeTracks( animation, tracks );\n\n        }\n\n      }\n\n      return tracks;\n\n    }\n\n    function getAnimation( id ) {\n\n      return getBuild( library.animations[ id ], buildAnimation );\n\n    }\n\n    function buildAnimationChannel( channel, inputSource, outputSource ) {\n\n      var node = library.nodes[ channel.id ];\n      var object3D = getNode( node.id );\n\n      var transform = node.transforms[ channel.sid ];\n      var defaultMatrix = node.matrix.clone().transpose();\n\n      var time, stride;\n      var i, il, j, jl;\n\n      var data = {};\n\n      // the collada spec allows the animation of data in various ways.\n      // depending on the transform type (matrix, translate, rotate, scale), we execute different logic\n\n      switch ( transform ) {\n\n        case 'matrix':\n\n          for ( i = 0, il = inputSource.array.length; i < il; i ++ ) {\n\n            time = inputSource.array[ i ];\n            stride = i * outputSource.stride;\n\n            if ( data[ time ] === undefined ) data[ time ] = {};\n\n            if ( channel.arraySyntax === true ) {\n\n              var value = outputSource.array[ stride ];\n              var index = channel.indices[ 0 ] + 4 * channel.indices[ 1 ];\n\n              data[ time ][ index ] = value;\n\n            } else {\n\n              for ( j = 0, jl = outputSource.stride; j < jl; j ++ ) {\n\n                data[ time ][ j ] = outputSource.array[ stride + j ];\n\n              }\n\n            }\n\n          }\n\n          break;\n\n        case 'translate':\n          console.warn( 'THREE.ColladaLoader: Animation transform type \"%s\" not yet implemented.', transform );\n          break;\n\n        case 'rotate':\n          console.warn( 'THREE.ColladaLoader: Animation transform type \"%s\" not yet implemented.', transform );\n          break;\n\n        case 'scale':\n          console.warn( 'THREE.ColladaLoader: Animation transform type \"%s\" not yet implemented.', transform );\n          break;\n\n      }\n\n      var keyframes = prepareAnimationData( data, defaultMatrix );\n\n      var animation = {\n        name: object3D.uuid,\n        keyframes: keyframes\n      };\n\n      return animation;\n\n    }\n\n    function prepareAnimationData( data, defaultMatrix ) {\n\n      var keyframes = [];\n\n      // transfer data into a sortable array\n\n      for ( var time in data ) {\n\n        keyframes.push( { time: parseFloat( time ), value: data[ time ] } );\n\n      }\n\n      // ensure keyframes are sorted by time\n\n      keyframes.sort( ascending );\n\n      // now we clean up all animation data, so we can use them for keyframe tracks\n\n      for ( var i = 0; i < 16; i ++ ) {\n\n        transformAnimationData( keyframes, i, defaultMatrix.elements[ i ] );\n\n      }\n\n      return keyframes;\n\n      // array sort function\n\n      function ascending( a, b ) {\n\n        return a.time - b.time;\n\n      }\n\n    }\n\n    var position = new THREE.Vector3();\n    var scale = new THREE.Vector3();\n    var quaternion = new THREE.Quaternion();\n\n    function createKeyframeTracks( animation, tracks ) {\n\n      var keyframes = animation.keyframes;\n      var name = animation.name;\n\n      var times = [];\n      var positionData = [];\n      var quaternionData = [];\n      var scaleData = [];\n\n      for ( var i = 0, l = keyframes.length; i < l; i ++ ) {\n\n        var keyframe = keyframes[ i ];\n\n        var time = keyframe.time;\n        var value = keyframe.value;\n\n        matrix.fromArray( value ).transpose();\n        matrix.decompose( position, quaternion, scale );\n\n        times.push( time );\n        positionData.push( position.x, position.y, position.z );\n        quaternionData.push( quaternion.x, quaternion.y, quaternion.z, quaternion.w );\n        scaleData.push( scale.x, scale.y, scale.z );\n\n      }\n\n      if ( positionData.length > 0 ) tracks.push( new THREE.VectorKeyframeTrack( name + '.position', times, positionData ) );\n      if ( quaternionData.length > 0 ) tracks.push( new THREE.QuaternionKeyframeTrack( name + '.quaternion', times, quaternionData ) );\n      if ( scaleData.length > 0 ) tracks.push( new THREE.VectorKeyframeTrack( name + '.scale', times, scaleData ) );\n\n      return tracks;\n\n    }\n\n    function transformAnimationData( keyframes, property, defaultValue ) {\n\n      var keyframe;\n\n      var empty = true;\n      var i, l;\n\n      // check, if values of a property are missing in our keyframes\n\n      for ( i = 0, l = keyframes.length; i < l; i ++ ) {\n\n        keyframe = keyframes[ i ];\n\n        if ( keyframe.value[ property ] === undefined ) {\n\n          keyframe.value[ property ] = null; // mark as missing\n\n        } else {\n\n          empty = false;\n\n        }\n\n      }\n\n      if ( empty === true ) {\n\n        // no values at all, so we set a default value\n\n        for ( i = 0, l = keyframes.length; i < l; i ++ ) {\n\n          keyframe = keyframes[ i ];\n\n          keyframe.value[ property ] = defaultValue;\n\n        }\n\n      } else {\n\n        // filling gaps\n\n        createMissingKeyframes( keyframes, property );\n\n      }\n\n    }\n\n    function createMissingKeyframes( keyframes, property ) {\n\n      var prev, next;\n\n      for ( var i = 0, l = keyframes.length; i < l; i ++ ) {\n\n        var keyframe = keyframes[ i ];\n\n        if ( keyframe.value[ property ] === null ) {\n\n          prev = getPrev( keyframes, i, property );\n          next = getNext( keyframes, i, property );\n\n          if ( prev === null ) {\n\n            keyframe.value[ property ] = next.value[ property ];\n            continue;\n\n          }\n\n          if ( next === null ) {\n\n            keyframe.value[ property ] = prev.value[ property ];\n            continue;\n\n          }\n\n          interpolate( keyframe, prev, next, property );\n\n        }\n\n      }\n\n    }\n\n    function getPrev( keyframes, i, property ) {\n\n      while ( i >= 0 ) {\n\n        var keyframe = keyframes[ i ];\n\n        if ( keyframe.value[ property ] !== null ) return keyframe;\n\n        i --;\n\n      }\n\n      return null;\n\n    }\n\n    function getNext( keyframes, i, property ) {\n\n      while ( i < keyframes.length ) {\n\n        var keyframe = keyframes[ i ];\n\n        if ( keyframe.value[ property ] !== null ) return keyframe;\n\n        i ++;\n\n      }\n\n      return null;\n\n    }\n\n    function interpolate( key, prev, next, property ) {\n\n      if ( ( next.time - prev.time ) === 0 ) {\n\n        key.value[ property ] = prev.value[ property ];\n        return;\n\n      }\n\n      key.value[ property ] = ( ( key.time - prev.time ) * ( next.value[ property ] - prev.value[ property ] ) / ( next.time - prev.time ) ) + prev.value[ property ];\n\n    }\n\n    // animation clips\n\n    function parseAnimationClip( xml ) {\n\n      var data = {\n        name: xml.getAttribute( 'id' ) || 'default',\n        start: parseFloat( xml.getAttribute( 'start' ) || 0 ),\n        end: parseFloat( xml.getAttribute( 'end' ) || 0 ),\n        animations: []\n      };\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'instance_animation':\n            data.animations.push( parseId( child.getAttribute( 'url' ) ) );\n            break;\n\n        }\n\n      }\n\n      library.clips[ xml.getAttribute( 'id' ) ] = data;\n\n    }\n\n    function buildAnimationClip( data ) {\n\n      var tracks = [];\n\n      var name = data.name;\n      var duration = ( data.end - data.start ) || - 1;\n      var animations = data.animations;\n\n      for ( var i = 0, il = animations.length; i < il; i ++ ) {\n\n        var animationTracks = getAnimation( animations[ i ] );\n\n        for ( var j = 0, jl = animationTracks.length; j < jl; j ++ ) {\n\n          tracks.push( animationTracks[ j ] );\n\n        }\n\n      }\n\n      return new THREE.AnimationClip( name, duration, tracks );\n\n    }\n\n    function getAnimationClip( id ) {\n\n      return getBuild( library.clips[ id ], buildAnimationClip );\n\n    }\n\n    // controller\n\n    function parseController( xml ) {\n\n      var data = {};\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'skin':\n            // there is exactly one skin per controller\n            data.id = parseId( child.getAttribute( 'source' ) );\n            data.skin = parseSkin( child );\n            break;\n\n          case 'morph':\n            data.id = parseId( child.getAttribute( 'source' ) );\n            console.warn( 'THREE.ColladaLoader: Morph target animation not supported yet.' );\n            break;\n\n        }\n\n      }\n\n      library.controllers[ xml.getAttribute( 'id' ) ] = data;\n\n    }\n\n    function parseSkin( xml ) {\n\n      var data = {\n        sources: {}\n      };\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'bind_shape_matrix':\n            data.bindShapeMatrix = parseFloats( child.textContent );\n            break;\n\n          case 'source':\n            var id = child.getAttribute( 'id' );\n            data.sources[ id ] = parseSource( child );\n            break;\n\n          case 'joints':\n            data.joints = parseJoints( child );\n            break;\n\n          case 'vertex_weights':\n            data.vertexWeights = parseVertexWeights( child );\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function parseJoints( xml ) {\n\n      var data = {\n        inputs: {}\n      };\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'input':\n            var semantic = child.getAttribute( 'semantic' );\n            var id = parseId( child.getAttribute( 'source' ) );\n            data.inputs[ semantic ] = id;\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function parseVertexWeights( xml ) {\n\n      var data = {\n        inputs: {}\n      };\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'input':\n            var semantic = child.getAttribute( 'semantic' );\n            var id = parseId( child.getAttribute( 'source' ) );\n            var offset = parseInt( child.getAttribute( 'offset' ) );\n            data.inputs[ semantic ] = { id: id, offset: offset };\n            break;\n\n          case 'vcount':\n            data.vcount = parseInts( child.textContent );\n            break;\n\n          case 'v':\n            data.v = parseInts( child.textContent );\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function buildController( data ) {\n\n      var build = {\n        id: data.id\n      };\n\n      var geometry = library.geometries[ build.id ];\n\n      if ( data.skin !== undefined ) {\n\n        build.skin = buildSkin( data.skin );\n\n        // we enhance the 'sources' property of the corresponding geometry with our skin data\n\n        geometry.sources.skinIndices = build.skin.indices;\n        geometry.sources.skinWeights = build.skin.weights;\n\n      }\n\n      return build;\n\n    }\n\n    function buildSkin( data ) {\n\n      var BONE_LIMIT = 4;\n\n      var build = {\n        joints: [], // this must be an array to preserve the joint order\n        indices: {\n          array: [],\n          stride: BONE_LIMIT\n        },\n        weights: {\n          array: [],\n          stride: BONE_LIMIT\n        }\n      };\n\n      var sources = data.sources;\n      var vertexWeights = data.vertexWeights;\n\n      var vcount = vertexWeights.vcount;\n      var v = vertexWeights.v;\n      var jointOffset = vertexWeights.inputs.JOINT.offset;\n      var weightOffset = vertexWeights.inputs.WEIGHT.offset;\n\n      var jointSource = data.sources[ data.joints.inputs.JOINT ];\n      var inverseSource = data.sources[ data.joints.inputs.INV_BIND_MATRIX ];\n\n      var weights = sources[ vertexWeights.inputs.WEIGHT.id ].array;\n      var stride = 0;\n\n      var i, j, l;\n\n      // procces skin data for each vertex\n\n      for ( i = 0, l = vcount.length; i < l; i ++ ) {\n\n        var jointCount = vcount[ i ]; // this is the amount of joints that affect a single vertex\n        var vertexSkinData = [];\n\n        for ( j = 0; j < jointCount; j ++ ) {\n\n          var skinIndex = v[ stride + jointOffset ];\n          var weightId = v[ stride + weightOffset ];\n          var skinWeight = weights[ weightId ];\n\n          vertexSkinData.push( { index: skinIndex, weight: skinWeight } );\n\n          stride += 2;\n\n        }\n\n        // we sort the joints in descending order based on the weights.\n        // this ensures, we only procced the most important joints of the vertex\n\n        vertexSkinData.sort( descending );\n\n        // now we provide for each vertex a set of four index and weight values.\n        // the order of the skin data matches the order of vertices\n\n        for ( j = 0; j < BONE_LIMIT; j ++ ) {\n\n          var d = vertexSkinData[ j ];\n\n          if ( d !== undefined ) {\n\n            build.indices.array.push( d.index );\n            build.weights.array.push( d.weight );\n\n          } else {\n\n            build.indices.array.push( 0 );\n            build.weights.array.push( 0 );\n\n          }\n\n        }\n\n      }\n\n      // setup bind matrix\n\n      if ( data.bindShapeMatrix ) {\n\n        build.bindMatrix = new THREE.Matrix4().fromArray( data.bindShapeMatrix ).transpose();\n\n      } else {\n\n        build.bindMatrix = new THREE.Matrix4().identity();\n\n      }\n\n      // process bones and inverse bind matrix data\n\n      for ( i = 0, l = jointSource.array.length; i < l; i ++ ) {\n\n        var name = jointSource.array[ i ];\n        var boneInverse = new THREE.Matrix4().fromArray( inverseSource.array, i * inverseSource.stride ).transpose();\n\n        build.joints.push( { name: name, boneInverse: boneInverse } );\n\n      }\n\n      return build;\n\n      // array sort function\n\n      function descending( a, b ) {\n\n        return b.weight - a.weight;\n\n      }\n\n    }\n\n    function getController( id ) {\n\n      return getBuild( library.controllers[ id ], buildController );\n\n    }\n\n    // image\n\n    function parseImage( xml ) {\n\n      var data = {\n        init_from: getElementsByTagName( xml, 'init_from' )[ 0 ].textContent\n      };\n\n      library.images[ xml.getAttribute( 'id' ) ] = data;\n\n    }\n\n    function buildImage( data ) {\n\n      if ( data.build !== undefined ) return data.build;\n\n      return data.init_from;\n\n    }\n\n    function getImage( id ) {\n\n      var data = library.images[ id ];\n\n      if ( data !== undefined ) {\n\n        return getBuild( data, buildImage );\n\n      }\n\n      console.warn( 'THREE.ColladaLoader: Couldn\\'t find image with ID:', id );\n\n      return null;\n\n    }\n\n    // effect\n\n    function parseEffect( xml ) {\n\n      var data = {};\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'profile_COMMON':\n            data.profile = parseEffectProfileCOMMON( child );\n            break;\n\n        }\n\n      }\n\n      library.effects[ xml.getAttribute( 'id' ) ] = data;\n\n    }\n\n    function parseEffectProfileCOMMON( xml ) {\n\n      var data = {\n        surfaces: {},\n        samplers: {}\n      };\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'newparam':\n            parseEffectNewparam( child, data );\n            break;\n\n          case 'technique':\n            data.technique = parseEffectTechnique( child );\n            break;\n\n          case 'extra':\n            data.extra = parseEffectExtra( child );\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function parseEffectNewparam( xml, data ) {\n\n      var sid = xml.getAttribute( 'sid' );\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'surface':\n            data.surfaces[ sid ] = parseEffectSurface( child );\n            break;\n\n          case 'sampler2D':\n            data.samplers[ sid ] = parseEffectSampler( child );\n            break;\n\n        }\n\n      }\n\n    }\n\n    function parseEffectSurface( xml ) {\n\n      var data = {};\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'init_from':\n            data.init_from = child.textContent;\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function parseEffectSampler( xml ) {\n\n      var data = {};\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'source':\n            data.source = child.textContent;\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function parseEffectTechnique( xml ) {\n\n      var data = {};\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'constant':\n          case 'lambert':\n          case 'blinn':\n          case 'phong':\n            data.type = child.nodeName;\n            data.parameters = parseEffectParameters( child );\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function parseEffectParameters( xml ) {\n\n      var data = {};\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'emission':\n          case 'diffuse':\n          case 'specular':\n          case 'bump':\n          case 'ambient':\n          case 'shininess':\n          case 'transparency':\n            data[ child.nodeName ] = parseEffectParameter( child );\n            break;\n          case 'transparent':\n            data[ child.nodeName ] = {\n              opaque: child.getAttribute( 'opaque' ),\n              data: parseEffectParameter( child )\n            };\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function parseEffectParameter( xml ) {\n\n      var data = {};\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'color':\n            data[ child.nodeName ] = parseFloats( child.textContent );\n            break;\n\n          case 'float':\n            data[ child.nodeName ] = parseFloat( child.textContent );\n            break;\n\n          case 'texture':\n            data[ child.nodeName ] = { id: child.getAttribute( 'texture' ), extra: parseEffectParameterTexture( child ) };\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function parseEffectParameterTexture( xml ) {\n\n      var data = {\n        technique: {}\n      };\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'extra':\n            parseEffectParameterTextureExtra( child, data );\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function parseEffectParameterTextureExtra( xml, data ) {\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'technique':\n            parseEffectParameterTextureExtraTechnique( child, data );\n            break;\n\n        }\n\n      }\n\n    }\n\n    function parseEffectParameterTextureExtraTechnique( xml, data ) {\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'repeatU':\n          case 'repeatV':\n          case 'offsetU':\n          case 'offsetV':\n            data.technique[ child.nodeName ] = parseFloat( child.textContent );\n            break;\n\n          case 'wrapU':\n          case 'wrapV':\n\n            // some files have values for wrapU/wrapV which become NaN via parseInt\n\n            if ( child.textContent.toUpperCase() === 'TRUE' ) {\n\n              data.technique[ child.nodeName ] = 1;\n\n            } else if ( child.textContent.toUpperCase() === 'FALSE' ) {\n\n              data.technique[ child.nodeName ] = 0;\n\n            } else {\n\n              data.technique[ child.nodeName ] = parseInt( child.textContent );\n\n            }\n\n            break;\n\n        }\n\n      }\n\n    }\n\n    function parseEffectExtra( xml ) {\n\n      var data = {};\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'technique':\n            data.technique = parseEffectExtraTechnique( child );\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function parseEffectExtraTechnique( xml ) {\n\n      var data = {};\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'double_sided':\n            data[ child.nodeName ] = parseInt( child.textContent );\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function buildEffect( data ) {\n\n      return data;\n\n    }\n\n    function getEffect( id ) {\n\n      return getBuild( library.effects[ id ], buildEffect );\n\n    }\n\n    // material\n\n    function parseMaterial( xml ) {\n\n      var data = {\n        name: xml.getAttribute( 'name' )\n      };\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'instance_effect':\n            data.url = parseId( child.getAttribute( 'url' ) );\n            break;\n\n        }\n\n      }\n\n      library.materials[ xml.getAttribute( 'id' ) ] = data;\n\n    }\n\n    function getTextureLoader( image ) {\n\n      var loader;\n\n      var extension = image.slice( ( image.lastIndexOf( '.' ) - 1 >>> 0 ) + 2 ); // http://www.jstips.co/en/javascript/get-file-extension/\n      extension = extension.toLowerCase();\n\n      switch ( extension ) {\n\n        case 'tga':\n          loader = tgaLoader;\n          break;\n\n        default:\n          loader = textureLoader;\n\n      }\n\n      return loader;\n\n    }\n\n    function buildMaterial( data ) {\n\n      var effect = getEffect( data.url );\n      var technique = effect.profile.technique;\n      var extra = effect.profile.extra;\n\n      var material;\n\n      switch ( technique.type ) {\n\n        case 'phong':\n        case 'blinn':\n          material = new THREE.MeshPhongMaterial();\n          break;\n\n        case 'lambert':\n          material = new THREE.MeshLambertMaterial();\n          break;\n\n        default:\n          material = new THREE.MeshBasicMaterial();\n          break;\n\n      }\n\n      material.name = data.name;\n\n      function getTexture( textureObject ) {\n\n        var sampler = effect.profile.samplers[ textureObject.id ];\n        var image = null;\n\n        // get image\n\n        if ( sampler !== undefined ) {\n\n          var surface = effect.profile.surfaces[ sampler.source ];\n          image = getImage( surface.init_from );\n\n        } else {\n\n          console.warn( 'THREE.ColladaLoader: Undefined sampler. Access image directly (see #12530).' );\n          image = getImage( textureObject.id );\n\n        }\n\n        // create texture if image is avaiable\n\n        if ( image !== null ) {\n\n          var loader = getTextureLoader( image );\n\n          if ( loader !== undefined ) {\n\n            var texture = loader.load( image );\n\n            var extra = textureObject.extra;\n\n            if ( extra !== undefined && extra.technique !== undefined && isEmpty( extra.technique ) === false ) {\n\n              var technique = extra.technique;\n\n              texture.wrapS = technique.wrapU ? THREE.RepeatWrapping : THREE.ClampToEdgeWrapping;\n              texture.wrapT = technique.wrapV ? THREE.RepeatWrapping : THREE.ClampToEdgeWrapping;\n\n              texture.offset.set( technique.offsetU || 0, technique.offsetV || 0 );\n              texture.repeat.set( technique.repeatU || 1, technique.repeatV || 1 );\n\n            } else {\n\n              texture.wrapS = THREE.RepeatWrapping;\n              texture.wrapT = THREE.RepeatWrapping;\n\n            }\n\n            return texture;\n\n          } else {\n\n            console.warn( 'THREE.ColladaLoader: Loader for texture %s not found.', image );\n\n            return null;\n\n          }\n\n        } else {\n\n          console.warn( 'THREE.ColladaLoader: Couldn\\'t create texture with ID:', textureObject.id );\n\n          return null;\n\n        }\n\n      }\n\n      var parameters = technique.parameters;\n\n      for ( var key in parameters ) {\n\n        var parameter = parameters[ key ];\n\n        switch ( key ) {\n\n          case 'diffuse':\n            if ( parameter.color ) material.color.fromArray( parameter.color );\n            if ( parameter.texture ) material.map = getTexture( parameter.texture );\n            break;\n          case 'specular':\n            if ( parameter.color && material.specular ) material.specular.fromArray( parameter.color );\n            if ( parameter.texture ) material.specularMap = getTexture( parameter.texture );\n            break;\n          case 'bump':\n            if ( parameter.texture ) material.normalMap = getTexture( parameter.texture );\n            break;\n          case 'ambient':\n            if ( parameter.texture ) material.lightMap = getTexture( parameter.texture );\n            break;\n          case 'shininess':\n            if ( parameter.float && material.shininess ) material.shininess = parameter.float;\n            break;\n          case 'emission':\n            if ( parameter.color && material.emissive ) material.emissive.fromArray( parameter.color );\n            if ( parameter.texture ) material.emissiveMap = getTexture( parameter.texture );\n            break;\n\n        }\n\n      }\n\n      //\n\n      var transparent = parameters[ 'transparent' ];\n      var transparency = parameters[ 'transparency' ];\n\n      // <transparency> does not exist but <transparent>\n\n      if ( transparency === undefined && transparent ) {\n\n        transparency = {\n          float: 1\n        };\n\n      }\n\n      // <transparent> does not exist but <transparency>\n\n      if ( transparent === undefined && transparency ) {\n\n        transparent = {\n          opaque: 'A_ONE',\n          data: {\n            color: [ 1, 1, 1, 1 ]\n          } };\n\n      }\n\n      if ( transparent && transparency ) {\n\n        // handle case if a texture exists but no color\n\n        if ( transparent.data.texture ) {\n\n          // we do not set an alpha map (see #13792)\n\n          material.transparent = true;\n\n        } else {\n\n          var color = transparent.data.color;\n\n          switch ( transparent.opaque ) {\n\n            case 'A_ONE':\n              material.opacity = color[ 3 ] * transparency.float;\n              break;\n            case 'RGB_ZERO':\n              material.opacity = 1 - ( color[ 0 ] * transparency.float );\n              break;\n            case 'A_ZERO':\n              material.opacity = 1 - ( color[ 3 ] * transparency.float );\n              break;\n            case 'RGB_ONE':\n              material.opacity = color[ 0 ] * transparency.float;\n              break;\n            default:\n              console.warn( 'THREE.ColladaLoader: Invalid opaque type \"%s\" of transparent tag.', transparent.opaque );\n\n          }\n\n          if ( material.opacity < 1 ) material.transparent = true;\n\n        }\n\n      }\n\n      //\n\n      if ( extra !== undefined && extra.technique !== undefined && extra.technique.double_sided === 1 ) {\n\n        material.side = THREE.DoubleSide;\n\n      }\n\n      return material;\n\n    }\n\n    function getMaterial( id ) {\n\n      return getBuild( library.materials[ id ], buildMaterial );\n\n    }\n\n    // camera\n\n    function parseCamera( xml ) {\n\n      var data = {\n        name: xml.getAttribute( 'name' )\n      };\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'optics':\n            data.optics = parseCameraOptics( child );\n            break;\n\n        }\n\n      }\n\n      library.cameras[ xml.getAttribute( 'id' ) ] = data;\n\n    }\n\n    function parseCameraOptics( xml ) {\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        switch ( child.nodeName ) {\n\n          case 'technique_common':\n            return parseCameraTechnique( child );\n\n        }\n\n      }\n\n      return {};\n\n    }\n\n    function parseCameraTechnique( xml ) {\n\n      var data = {};\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        switch ( child.nodeName ) {\n\n          case 'perspective':\n          case 'orthographic':\n\n            data.technique = child.nodeName;\n            data.parameters = parseCameraParameters( child );\n\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function parseCameraParameters( xml ) {\n\n      var data = {};\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        switch ( child.nodeName ) {\n\n          case 'xfov':\n          case 'yfov':\n          case 'xmag':\n          case 'ymag':\n          case 'znear':\n          case 'zfar':\n          case 'aspect_ratio':\n            data[ child.nodeName ] = parseFloat( child.textContent );\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function buildCamera( data ) {\n\n      var camera;\n\n      switch ( data.optics.technique ) {\n\n        case 'perspective':\n          camera = new THREE.PerspectiveCamera(\n            data.optics.parameters.yfov,\n            data.optics.parameters.aspect_ratio,\n            data.optics.parameters.znear,\n            data.optics.parameters.zfar\n          );\n          break;\n\n        case 'orthographic':\n          var ymag = data.optics.parameters.ymag;\n          var xmag = data.optics.parameters.xmag;\n          var aspectRatio = data.optics.parameters.aspect_ratio;\n\n          xmag = ( xmag === undefined ) ? ( ymag * aspectRatio ) : xmag;\n          ymag = ( ymag === undefined ) ? ( xmag / aspectRatio ) : ymag;\n\n          xmag *= 0.5;\n          ymag *= 0.5;\n\n          camera = new THREE.OrthographicCamera(\n            - xmag, xmag, ymag, - ymag, // left, right, top, bottom\n            data.optics.parameters.znear,\n            data.optics.parameters.zfar\n          );\n          break;\n\n        default:\n          camera = new THREE.PerspectiveCamera();\n          break;\n\n      }\n\n      camera.name = data.name;\n\n      return camera;\n\n    }\n\n    function getCamera( id ) {\n\n      var data = library.cameras[ id ];\n\n      if ( data !== undefined ) {\n\n        return getBuild( data, buildCamera );\n\n      }\n\n      console.warn( 'THREE.ColladaLoader: Couldn\\'t find camera with ID:', id );\n\n      return null;\n\n    }\n\n    // light\n\n    function parseLight( xml ) {\n\n      var data = {};\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'technique_common':\n            data = parseLightTechnique( child );\n            break;\n\n        }\n\n      }\n\n      library.lights[ xml.getAttribute( 'id' ) ] = data;\n\n    }\n\n    function parseLightTechnique( xml ) {\n\n      var data = {};\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'directional':\n          case 'point':\n          case 'spot':\n          case 'ambient':\n\n            data.technique = child.nodeName;\n            data.parameters = parseLightParameters( child );\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function parseLightParameters( xml ) {\n\n      var data = {};\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'color':\n            var array = parseFloats( child.textContent );\n            data.color = new THREE.Color().fromArray( array );\n            break;\n\n          case 'falloff_angle':\n            data.falloffAngle = parseFloat( child.textContent );\n            break;\n\n          case 'quadratic_attenuation':\n            var f = parseFloat( child.textContent );\n            data.distance = f ? Math.sqrt( 1 / f ) : 0;\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function buildLight( data ) {\n\n      var light;\n\n      switch ( data.technique ) {\n\n        case 'directional':\n          light = new THREE.DirectionalLight();\n          break;\n\n        case 'point':\n          light = new THREE.PointLight();\n          break;\n\n        case 'spot':\n          light = new THREE.SpotLight();\n          break;\n\n        case 'ambient':\n          light = new THREE.AmbientLight();\n          break;\n\n      }\n\n      if ( data.parameters.color ) light.color.copy( data.parameters.color );\n      if ( data.parameters.distance ) light.distance = data.parameters.distance;\n\n      return light;\n\n    }\n\n    function getLight( id ) {\n\n      var data = library.lights[ id ];\n\n      if ( data !== undefined ) {\n\n        return getBuild( data, buildLight );\n\n      }\n\n      console.warn( 'THREE.ColladaLoader: Couldn\\'t find light with ID:', id );\n\n      return null;\n\n    }\n\n    // geometry\n\n    function parseGeometry( xml ) {\n\n      var data = {\n        name: xml.getAttribute( 'name' ),\n        sources: {},\n        vertices: {},\n        primitives: []\n      };\n\n      var mesh = getElementsByTagName( xml, 'mesh' )[ 0 ];\n\n      // the following tags inside geometry are not supported yet (see https://github.com/mrdoob/three.js/pull/12606): convex_mesh, spline, brep\n      if ( mesh === undefined ) return;\n\n      for ( var i = 0; i < mesh.childNodes.length; i ++ ) {\n\n        var child = mesh.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        var id = child.getAttribute( 'id' );\n\n        switch ( child.nodeName ) {\n\n          case 'source':\n            data.sources[ id ] = parseSource( child );\n            break;\n\n          case 'vertices':\n            // data.sources[ id ] = data.sources[ parseId( getElementsByTagName( child, 'input' )[ 0 ].getAttribute( 'source' ) ) ];\n            data.vertices = parseGeometryVertices( child );\n            break;\n\n          case 'polygons':\n            console.warn( 'THREE.ColladaLoader: Unsupported primitive type: ', child.nodeName );\n            break;\n\n          case 'lines':\n          case 'linestrips':\n          case 'polylist':\n          case 'triangles':\n            data.primitives.push( parseGeometryPrimitive( child ) );\n            break;\n\n          default:\n            console.log( child );\n\n        }\n\n      }\n\n      library.geometries[ xml.getAttribute( 'id' ) ] = data;\n\n    }\n\n    function parseSource( xml ) {\n\n      var data = {\n        array: [],\n        stride: 3\n      };\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'float_array':\n            data.array = parseFloats( child.textContent );\n            break;\n\n          case 'Name_array':\n            data.array = parseStrings( child.textContent );\n            break;\n\n          case 'technique_common':\n            var accessor = getElementsByTagName( child, 'accessor' )[ 0 ];\n\n            if ( accessor !== undefined ) {\n\n              data.stride = parseInt( accessor.getAttribute( 'stride' ) );\n\n            }\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function parseGeometryVertices( xml ) {\n\n      var data = {};\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        data[ child.getAttribute( 'semantic' ) ] = parseId( child.getAttribute( 'source' ) );\n\n      }\n\n      return data;\n\n    }\n\n    function parseGeometryPrimitive( xml ) {\n\n      var primitive = {\n        type: xml.nodeName,\n        material: xml.getAttribute( 'material' ),\n        count: parseInt( xml.getAttribute( 'count' ) ),\n        inputs: {},\n        stride: 0,\n        hasUV: false\n      };\n\n      for ( var i = 0, l = xml.childNodes.length; i < l; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'input':\n            var id = parseId( child.getAttribute( 'source' ) );\n            var semantic = child.getAttribute( 'semantic' );\n            var offset = parseInt( child.getAttribute( 'offset' ) );\n            var set = parseInt( child.getAttribute( 'set' ) );\n            var inputname = ( set > 0 ? semantic + set : semantic );\n            primitive.inputs[ inputname ] = { id: id, offset: offset };\n            primitive.stride = Math.max( primitive.stride, offset + 1 );\n            if ( semantic === 'TEXCOORD' ) primitive.hasUV = true;\n            break;\n\n          case 'vcount':\n            primitive.vcount = parseInts( child.textContent );\n            break;\n\n          case 'p':\n            primitive.p = parseInts( child.textContent );\n            break;\n\n        }\n\n      }\n\n      return primitive;\n\n    }\n\n    function groupPrimitives( primitives ) {\n\n      var build = {};\n\n      for ( var i = 0; i < primitives.length; i ++ ) {\n\n        var primitive = primitives[ i ];\n\n        if ( build[ primitive.type ] === undefined ) build[ primitive.type ] = [];\n\n        build[ primitive.type ].push( primitive );\n\n      }\n\n      return build;\n\n    }\n\n    function checkUVCoordinates( primitives ) {\n\n      var count = 0;\n\n      for ( var i = 0, l = primitives.length; i < l; i ++ ) {\n\n        var primitive = primitives[ i ];\n\n        if ( primitive.hasUV === true ) {\n\n          count ++;\n\n        }\n\n      }\n\n      if ( count > 0 && count < primitives.length ) {\n\n        primitives.uvsNeedsFix = true;\n\n      }\n\n    }\n\n    function buildGeometry( data ) {\n\n      var build = {};\n\n      var sources = data.sources;\n      var vertices = data.vertices;\n      var primitives = data.primitives;\n\n      if ( primitives.length === 0 ) return {};\n\n      // our goal is to create one buffer geometry for a single type of primitives\n      // first, we group all primitives by their type\n\n      var groupedPrimitives = groupPrimitives( primitives );\n\n      for ( var type in groupedPrimitives ) {\n\n        var primitiveType = groupedPrimitives[ type ];\n\n        // second, ensure consistent uv coordinates for each type of primitives (polylist,triangles or lines)\n\n        checkUVCoordinates( primitiveType );\n\n        // third, create a buffer geometry for each type of primitives\n\n        build[ type ] = buildGeometryType( primitiveType, sources, vertices );\n\n      }\n\n      return build;\n\n    }\n\n    function buildGeometryType( primitives, sources, vertices ) {\n\n      var build = {};\n\n      var position = { array: [], stride: 0 };\n      var normal = { array: [], stride: 0 };\n      var uv = { array: [], stride: 0 };\n      var uv2 = { array: [], stride: 0 };\n      var color = { array: [], stride: 0 };\n\n      var skinIndex = { array: [], stride: 4 };\n      var skinWeight = { array: [], stride: 4 };\n\n      var geometry = new THREE.BufferGeometry();\n\n      var materialKeys = [];\n\n      var start = 0;\n\n      for ( var p = 0; p < primitives.length; p ++ ) {\n\n        var primitive = primitives[ p ];\n        var inputs = primitive.inputs;\n\n        // groups\n\n        var count = 0;\n\n        switch ( primitive.type ) {\n\n          case 'lines':\n          case 'linestrips':\n            count = primitive.count * 2;\n            break;\n\n          case 'triangles':\n            count = primitive.count * 3;\n            break;\n\n          case 'polylist':\n\n            for ( var g = 0; g < primitive.count; g ++ ) {\n\n              var vc = primitive.vcount[ g ];\n\n              switch ( vc ) {\n\n                case 3:\n                  count += 3; // single triangle\n                  break;\n\n                case 4:\n                  count += 6; // quad, subdivided into two triangles\n                  break;\n\n                default:\n                  count += ( vc - 2 ) * 3; // polylist with more than four vertices\n                  break;\n\n              }\n\n            }\n\n            break;\n\n          default:\n            console.warn( 'THREE.ColladaLoader: Unknow primitive type:', primitive.type );\n\n        }\n\n        geometry.addGroup( start, count, p );\n        start += count;\n\n        // material\n\n        if ( primitive.material ) {\n\n          materialKeys.push( primitive.material );\n\n        }\n\n        // geometry data\n\n        for ( var name in inputs ) {\n\n          var input = inputs[ name ];\n\n          switch ( name ) {\n\n            case 'VERTEX':\n              for ( var key in vertices ) {\n\n                var id = vertices[ key ];\n\n                switch ( key ) {\n\n                  case 'POSITION':\n                    var prevLength = position.array.length;\n                    buildGeometryData( primitive, sources[ id ], input.offset, position.array );\n                    position.stride = sources[ id ].stride;\n\n                    if ( sources.skinWeights && sources.skinIndices ) {\n\n                      buildGeometryData( primitive, sources.skinIndices, input.offset, skinIndex.array );\n                      buildGeometryData( primitive, sources.skinWeights, input.offset, skinWeight.array );\n\n                    }\n\n                    // see #3803\n\n                    if ( primitive.hasUV === false && primitives.uvsNeedsFix === true ) {\n\n                      var count = ( position.array.length - prevLength ) / position.stride;\n\n                      for ( var i = 0; i < count; i ++ ) {\n\n                        // fill missing uv coordinates\n\n                        uv.array.push( 0, 0 );\n\n                      }\n\n                    }\n                    break;\n\n                  case 'NORMAL':\n                    buildGeometryData( primitive, sources[ id ], input.offset, normal.array );\n                    normal.stride = sources[ id ].stride;\n                    break;\n\n                  case 'COLOR':\n                    buildGeometryData( primitive, sources[ id ], input.offset, color.array );\n                    color.stride = sources[ id ].stride;\n                    break;\n\n                  case 'TEXCOORD':\n                    buildGeometryData( primitive, sources[ id ], input.offset, uv.array );\n                    uv.stride = sources[ id ].stride;\n                    break;\n\n                  case 'TEXCOORD1':\n                    buildGeometryData( primitive, sources[ id ], input.offset, uv2.array );\n                    uv.stride = sources[ id ].stride;\n                    break;\n\n                  default:\n                    console.warn( 'THREE.ColladaLoader: Semantic \"%s\" not handled in geometry build process.', key );\n\n                }\n\n              }\n              break;\n\n            case 'NORMAL':\n              buildGeometryData( primitive, sources[ input.id ], input.offset, normal.array );\n              normal.stride = sources[ input.id ].stride;\n              break;\n\n            case 'COLOR':\n              buildGeometryData( primitive, sources[ input.id ], input.offset, color.array );\n              color.stride = sources[ input.id ].stride;\n              break;\n\n            case 'TEXCOORD':\n              buildGeometryData( primitive, sources[ input.id ], input.offset, uv.array );\n              uv.stride = sources[ input.id ].stride;\n              break;\n\n            case 'TEXCOORD1':\n              buildGeometryData( primitive, sources[ input.id ], input.offset, uv2.array );\n              uv2.stride = sources[ input.id ].stride;\n              break;\n\n          }\n\n        }\n\n      }\n\n      // build geometry\n\n      if ( position.array.length > 0 ) geometry.addAttribute( 'position', new THREE.Float32BufferAttribute( position.array, position.stride ) );\n      if ( normal.array.length > 0 ) geometry.addAttribute( 'normal', new THREE.Float32BufferAttribute( normal.array, normal.stride ) );\n      if ( color.array.length > 0 ) geometry.addAttribute( 'color', new THREE.Float32BufferAttribute( color.array, color.stride ) );\n      if ( uv.array.length > 0 ) geometry.addAttribute( 'uv', new THREE.Float32BufferAttribute( uv.array, uv.stride ) );\n      if ( uv2.array.length > 0 ) geometry.addAttribute( 'uv2', new THREE.Float32BufferAttribute( uv2.array, uv2.stride ) );\n\n      if ( skinIndex.array.length > 0 ) geometry.addAttribute( 'skinIndex', new THREE.Float32BufferAttribute( skinIndex.array, skinIndex.stride ) );\n      if ( skinWeight.array.length > 0 ) geometry.addAttribute( 'skinWeight', new THREE.Float32BufferAttribute( skinWeight.array, skinWeight.stride ) );\n\n      build.data = geometry;\n      build.type = primitives[ 0 ].type;\n      build.materialKeys = materialKeys;\n\n      return build;\n\n    }\n\n    function buildGeometryData( primitive, source, offset, array ) {\n\n      var indices = primitive.p;\n      var stride = primitive.stride;\n      var vcount = primitive.vcount;\n\n      function pushVector( i ) {\n\n        var index = indices[ i + offset ] * sourceStride;\n        var length = index + sourceStride;\n\n        for ( ; index < length; index ++ ) {\n\n          array.push( sourceArray[ index ] );\n\n        }\n\n      }\n\n      var sourceArray = source.array;\n      var sourceStride = source.stride;\n\n      if ( primitive.vcount !== undefined ) {\n\n        var index = 0;\n\n        for ( var i = 0, l = vcount.length; i < l; i ++ ) {\n\n          var count = vcount[ i ];\n\n          if ( count === 4 ) {\n\n            var a = index + stride * 0;\n            var b = index + stride * 1;\n            var c = index + stride * 2;\n            var d = index + stride * 3;\n\n            pushVector( a ); pushVector( b ); pushVector( d );\n            pushVector( b ); pushVector( c ); pushVector( d );\n\n          } else if ( count === 3 ) {\n\n            var a = index + stride * 0;\n            var b = index + stride * 1;\n            var c = index + stride * 2;\n\n            pushVector( a ); pushVector( b ); pushVector( c );\n\n          } else if ( count > 4 ) {\n\n            for ( var k = 1, kl = ( count - 2 ); k <= kl; k ++ ) {\n\n              var a = index + stride * 0;\n              var b = index + stride * k;\n              var c = index + stride * ( k + 1 );\n\n              pushVector( a ); pushVector( b ); pushVector( c );\n\n            }\n\n          }\n\n          index += stride * count;\n\n        }\n\n      } else {\n\n        for ( var i = 0, l = indices.length; i < l; i += stride ) {\n\n          pushVector( i );\n\n        }\n\n      }\n\n    }\n\n    function getGeometry( id ) {\n\n      return getBuild( library.geometries[ id ], buildGeometry );\n\n    }\n\n    // kinematics\n\n    function parseKinematicsModel( xml ) {\n\n      var data = {\n        name: xml.getAttribute( 'name' ) || '',\n        joints: {},\n        links: []\n      };\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'technique_common':\n            parseKinematicsTechniqueCommon( child, data );\n            break;\n\n        }\n\n      }\n\n      library.kinematicsModels[ xml.getAttribute( 'id' ) ] = data;\n\n    }\n\n    function buildKinematicsModel( data ) {\n\n      if ( data.build !== undefined ) return data.build;\n\n      return data;\n\n    }\n\n    function getKinematicsModel( id ) {\n\n      return getBuild( library.kinematicsModels[ id ], buildKinematicsModel );\n\n    }\n\n    function parseKinematicsTechniqueCommon( xml, data ) {\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'joint':\n            data.joints[ child.getAttribute( 'sid' ) ] = parseKinematicsJoint( child );\n            break;\n\n          case 'link':\n            data.links.push( parseKinematicsLink( child ) );\n            break;\n\n        }\n\n      }\n\n    }\n\n    function parseKinematicsJoint( xml ) {\n\n      var data;\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'prismatic':\n          case 'revolute':\n            data = parseKinematicsJointParameter( child );\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function parseKinematicsJointParameter( xml, data ) {\n\n      var data = {\n        sid: xml.getAttribute( 'sid' ),\n        name: xml.getAttribute( 'name' ) || '',\n        axis: new THREE.Vector3(),\n        limits: {\n          min: 0,\n          max: 0\n        },\n        type: xml.nodeName,\n        static: false,\n        zeroPosition: 0,\n        middlePosition: 0\n      };\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'axis':\n            var array = parseFloats( child.textContent );\n            data.axis.fromArray( array );\n            break;\n          case 'limits':\n            var max = child.getElementsByTagName( 'max' )[ 0 ];\n            var min = child.getElementsByTagName( 'min' )[ 0 ];\n\n            data.limits.max = parseFloat( max.textContent );\n            data.limits.min = parseFloat( min.textContent );\n            break;\n\n        }\n\n      }\n\n      // if min is equal to or greater than max, consider the joint static\n\n      if ( data.limits.min >= data.limits.max ) {\n\n        data.static = true;\n\n      }\n\n      // calculate middle position\n\n      data.middlePosition = ( data.limits.min + data.limits.max ) / 2.0;\n\n      return data;\n\n    }\n\n    function parseKinematicsLink( xml ) {\n\n      var data = {\n        sid: xml.getAttribute( 'sid' ),\n        name: xml.getAttribute( 'name' ) || '',\n        attachments: [],\n        transforms: []\n      };\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'attachment_full':\n            data.attachments.push( parseKinematicsAttachment( child ) );\n            break;\n\n          case 'matrix':\n          case 'translate':\n          case 'rotate':\n            data.transforms.push( parseKinematicsTransform( child ) );\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function parseKinematicsAttachment( xml ) {\n\n      var data = {\n        joint: xml.getAttribute( 'joint' ).split( '/' ).pop(),\n        transforms: [],\n        links: []\n      };\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'link':\n            data.links.push( parseKinematicsLink( child ) );\n            break;\n\n          case 'matrix':\n          case 'translate':\n          case 'rotate':\n            data.transforms.push( parseKinematicsTransform( child ) );\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function parseKinematicsTransform( xml ) {\n\n      var data = {\n        type: xml.nodeName\n      };\n\n      var array = parseFloats( xml.textContent );\n\n      switch ( data.type ) {\n\n        case 'matrix':\n          data.obj = new THREE.Matrix4();\n          data.obj.fromArray( array ).transpose();\n          break;\n\n        case 'translate':\n          data.obj = new THREE.Vector3();\n          data.obj.fromArray( array );\n          break;\n\n        case 'rotate':\n          data.obj = new THREE.Vector3();\n          data.obj.fromArray( array );\n          data.angle = THREE.MathUtils.degToRad( array[ 3 ] );\n          break;\n\n      }\n\n      return data;\n\n    }\n\n    // physics\n\n    function parsePhysicsModel( xml ) {\n\n      var data = {\n        name: xml.getAttribute( 'name' ) || '',\n        rigidBodies: {}\n      };\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'rigid_body':\n            data.rigidBodies[ child.getAttribute( 'name' ) ] = {};\n            parsePhysicsRigidBody( child, data.rigidBodies[ child.getAttribute( 'name' ) ] );\n            break;\n\n        }\n\n      }\n\n      library.physicsModels[ xml.getAttribute( 'id' ) ] = data;\n\n    }\n\n    function parsePhysicsRigidBody( xml, data ) {\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'technique_common':\n            parsePhysicsTechniqueCommon( child, data );\n            break;\n\n        }\n\n      }\n\n    }\n\n    function parsePhysicsTechniqueCommon( xml, data ) {\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'inertia':\n            data.inertia = parseFloats( child.textContent );\n            break;\n\n          case 'mass':\n            data.mass = parseFloats( child.textContent )[ 0 ];\n            break;\n\n        }\n\n      }\n\n    }\n\n    // scene\n\n    function parseKinematicsScene( xml ) {\n\n      var data = {\n        bindJointAxis: []\n      };\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'bind_joint_axis':\n            data.bindJointAxis.push( parseKinematicsBindJointAxis( child ) );\n            break;\n\n        }\n\n      }\n\n      library.kinematicsScenes[ parseId( xml.getAttribute( 'url' ) ) ] = data;\n\n    }\n\n    function parseKinematicsBindJointAxis( xml ) {\n\n      var data = {\n        target: xml.getAttribute( 'target' ).split( '/' ).pop()\n      };\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'axis':\n            var param = child.getElementsByTagName( 'param' )[ 0 ];\n            data.axis = param.textContent;\n            var tmpJointIndex = data.axis.split( 'inst_' ).pop().split( 'axis' )[ 0 ];\n            data.jointIndex = tmpJointIndex.substr( 0, tmpJointIndex.length - 1 );\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function buildKinematicsScene( data ) {\n\n      if ( data.build !== undefined ) return data.build;\n\n      return data;\n\n    }\n\n    function getKinematicsScene( id ) {\n\n      return getBuild( library.kinematicsScenes[ id ], buildKinematicsScene );\n\n    }\n\n    function setupKinematics() {\n\n      var kinematicsModelId = Object.keys( library.kinematicsModels )[ 0 ];\n      var kinematicsSceneId = Object.keys( library.kinematicsScenes )[ 0 ];\n      var visualSceneId = Object.keys( library.visualScenes )[ 0 ];\n\n      if ( kinematicsModelId === undefined || kinematicsSceneId === undefined ) return;\n\n      var kinematicsModel = getKinematicsModel( kinematicsModelId );\n      var kinematicsScene = getKinematicsScene( kinematicsSceneId );\n      var visualScene = getVisualScene( visualSceneId );\n\n      var bindJointAxis = kinematicsScene.bindJointAxis;\n      var jointMap = {};\n\n      for ( var i = 0, l = bindJointAxis.length; i < l; i ++ ) {\n\n        var axis = bindJointAxis[ i ];\n\n        // the result of the following query is an element of type 'translate', 'rotate','scale' or 'matrix'\n\n        var targetElement = collada.querySelector( '[sid=\"' + axis.target + '\"]' );\n\n        if ( targetElement ) {\n\n          // get the parent of the transfrom element\n\n          var parentVisualElement = targetElement.parentElement;\n\n          // connect the joint of the kinematics model with the element in the visual scene\n\n          connect( axis.jointIndex, parentVisualElement );\n\n        }\n\n      }\n\n      function connect( jointIndex, visualElement ) {\n\n        var visualElementName = visualElement.getAttribute( 'name' );\n        var joint = kinematicsModel.joints[ jointIndex ];\n\n        visualScene.traverse( function ( object ) {\n\n          if ( object.name === visualElementName ) {\n\n            jointMap[ jointIndex ] = {\n              object: object,\n              transforms: buildTransformList( visualElement ),\n              joint: joint,\n              position: joint.zeroPosition\n            };\n\n          }\n\n        } );\n\n      }\n\n      var m0 = new THREE.Matrix4();\n\n      kinematics = {\n\n        joints: kinematicsModel && kinematicsModel.joints,\n\n        getJointValue: function ( jointIndex ) {\n\n          var jointData = jointMap[ jointIndex ];\n\n          if ( jointData ) {\n\n            return jointData.position;\n\n          } else {\n\n            console.warn( 'THREE.ColladaLoader: Joint ' + jointIndex + ' doesn\\'t exist.' );\n\n          }\n\n        },\n\n        setJointValue: function ( jointIndex, value ) {\n\n          var jointData = jointMap[ jointIndex ];\n\n          if ( jointData ) {\n\n            var joint = jointData.joint;\n\n            if ( value > joint.limits.max || value < joint.limits.min ) {\n\n              console.warn( 'THREE.ColladaLoader: Joint ' + jointIndex + ' value ' + value + ' outside of limits (min: ' + joint.limits.min + ', max: ' + joint.limits.max + ').' );\n\n            } else if ( joint.static ) {\n\n              console.warn( 'THREE.ColladaLoader: Joint ' + jointIndex + ' is static.' );\n\n            } else {\n\n              var object = jointData.object;\n              var axis = joint.axis;\n              var transforms = jointData.transforms;\n\n              matrix.identity();\n\n              // each update, we have to apply all transforms in the correct order\n\n              for ( var i = 0; i < transforms.length; i ++ ) {\n\n                var transform = transforms[ i ];\n\n                // if there is a connection of the transform node with a joint, apply the joint value\n\n                if ( transform.sid && transform.sid.indexOf( jointIndex ) !== - 1 ) {\n\n                  switch ( joint.type ) {\n\n                    case 'revolute':\n                      matrix.multiply( m0.makeRotationAxis( axis, THREE.MathUtils.degToRad( value ) ) );\n                      break;\n\n                    case 'prismatic':\n                      matrix.multiply( m0.makeTranslation( axis.x * value, axis.y * value, axis.z * value ) );\n                      break;\n\n                    default:\n                      console.warn( 'THREE.ColladaLoader: Unknown joint type: ' + joint.type );\n                      break;\n\n                  }\n\n                } else {\n\n                  switch ( transform.type ) {\n\n                    case 'matrix':\n                      matrix.multiply( transform.obj );\n                      break;\n\n                    case 'translate':\n                      matrix.multiply( m0.makeTranslation( transform.obj.x, transform.obj.y, transform.obj.z ) );\n                      break;\n\n                    case 'scale':\n                      matrix.scale( transform.obj );\n                      break;\n\n                    case 'rotate':\n                      matrix.multiply( m0.makeRotationAxis( transform.obj, transform.angle ) );\n                      break;\n\n                  }\n\n                }\n\n              }\n\n              object.matrix.copy( matrix );\n              object.matrix.decompose( object.position, object.quaternion, object.scale );\n\n              jointMap[ jointIndex ].position = value;\n\n            }\n\n          } else {\n\n            console.log( 'THREE.ColladaLoader: ' + jointIndex + ' does not exist.' );\n\n          }\n\n        }\n\n      };\n\n    }\n\n    function buildTransformList( node ) {\n\n      var transforms = [];\n\n      var xml = collada.querySelector( '[id=\"' + node.id + '\"]' );\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'matrix':\n            var array = parseFloats( child.textContent );\n            var matrix = new THREE.Matrix4().fromArray( array ).transpose();\n            transforms.push( {\n              sid: child.getAttribute( 'sid' ),\n              type: child.nodeName,\n              obj: matrix\n            } );\n            break;\n\n          case 'translate':\n          case 'scale':\n            var array = parseFloats( child.textContent );\n            var vector = new THREE.Vector3().fromArray( array );\n            transforms.push( {\n              sid: child.getAttribute( 'sid' ),\n              type: child.nodeName,\n              obj: vector\n            } );\n            break;\n\n          case 'rotate':\n            var array = parseFloats( child.textContent );\n            var vector = new THREE.Vector3().fromArray( array );\n            var angle = THREE.MathUtils.degToRad( array[ 3 ] );\n            transforms.push( {\n              sid: child.getAttribute( 'sid' ),\n              type: child.nodeName,\n              obj: vector,\n              angle: angle\n            } );\n            break;\n\n        }\n\n      }\n\n      return transforms;\n\n    }\n\n    // nodes\n\n    function prepareNodes( xml ) {\n\n      var elements = xml.getElementsByTagName( 'node' );\n\n      // ensure all node elements have id attributes\n\n      for ( var i = 0; i < elements.length; i ++ ) {\n\n        var element = elements[ i ];\n\n        if ( element.hasAttribute( 'id' ) === false ) {\n\n          element.setAttribute( 'id', generateId() );\n\n        }\n\n      }\n\n    }\n\n    var matrix = new THREE.Matrix4();\n    var vector = new THREE.Vector3();\n\n    function parseNode( xml ) {\n\n      var data = {\n        name: xml.getAttribute( 'name' ) || '',\n        type: xml.getAttribute( 'type' ),\n        id: xml.getAttribute( 'id' ),\n        sid: xml.getAttribute( 'sid' ),\n        matrix: new THREE.Matrix4(),\n        nodes: [],\n        instanceCameras: [],\n        instanceControllers: [],\n        instanceLights: [],\n        instanceGeometries: [],\n        instanceNodes: [],\n        transforms: {}\n      };\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        if ( child.nodeType !== 1 ) continue;\n\n        switch ( child.nodeName ) {\n\n          case 'node':\n            data.nodes.push( child.getAttribute( 'id' ) );\n            parseNode( child );\n            break;\n\n          case 'instance_camera':\n            data.instanceCameras.push( parseId( child.getAttribute( 'url' ) ) );\n            break;\n\n          case 'instance_controller':\n            data.instanceControllers.push( parseNodeInstance( child ) );\n            break;\n\n          case 'instance_light':\n            data.instanceLights.push( parseId( child.getAttribute( 'url' ) ) );\n            break;\n\n          case 'instance_geometry':\n            data.instanceGeometries.push( parseNodeInstance( child ) );\n            break;\n\n          case 'instance_node':\n            data.instanceNodes.push( parseId( child.getAttribute( 'url' ) ) );\n            break;\n\n          case 'matrix':\n            var array = parseFloats( child.textContent );\n            data.matrix.multiply( matrix.fromArray( array ).transpose() );\n            data.transforms[ child.getAttribute( 'sid' ) ] = child.nodeName;\n            break;\n\n          case 'translate':\n            var array = parseFloats( child.textContent );\n            vector.fromArray( array );\n            data.matrix.multiply( matrix.makeTranslation( vector.x, vector.y, vector.z ) );\n            data.transforms[ child.getAttribute( 'sid' ) ] = child.nodeName;\n            break;\n\n          case 'rotate':\n            var array = parseFloats( child.textContent );\n            var angle = THREE.MathUtils.degToRad( array[ 3 ] );\n            data.matrix.multiply( matrix.makeRotationAxis( vector.fromArray( array ), angle ) );\n            data.transforms[ child.getAttribute( 'sid' ) ] = child.nodeName;\n            break;\n\n          case 'scale':\n            var array = parseFloats( child.textContent );\n            data.matrix.scale( vector.fromArray( array ) );\n            data.transforms[ child.getAttribute( 'sid' ) ] = child.nodeName;\n            break;\n\n          case 'extra':\n            break;\n\n          default:\n            console.log( child );\n\n        }\n\n      }\n\n      if ( hasNode( data.id ) ) {\n\n        console.warn( 'THREE.ColladaLoader: There is already a node with ID %s. Exclude current node from further processing.', data.id );\n\n      } else {\n\n        library.nodes[ data.id ] = data;\n\n      }\n\n      return data;\n\n    }\n\n    function parseNodeInstance( xml ) {\n\n      var data = {\n        id: parseId( xml.getAttribute( 'url' ) ),\n        materials: {},\n        skeletons: []\n      };\n\n      for ( var i = 0; i < xml.childNodes.length; i ++ ) {\n\n        var child = xml.childNodes[ i ];\n\n        switch ( child.nodeName ) {\n\n          case 'bind_material':\n            var instances = child.getElementsByTagName( 'instance_material' );\n\n            for ( var j = 0; j < instances.length; j ++ ) {\n\n              var instance = instances[ j ];\n              var symbol = instance.getAttribute( 'symbol' );\n              var target = instance.getAttribute( 'target' );\n\n              data.materials[ symbol ] = parseId( target );\n\n            }\n\n            break;\n\n          case 'skeleton':\n            data.skeletons.push( parseId( child.textContent ) );\n            break;\n\n          default:\n            break;\n\n        }\n\n      }\n\n      return data;\n\n    }\n\n    function buildSkeleton( skeletons, joints ) {\n\n      var boneData = [];\n      var sortedBoneData = [];\n\n      var i, j, data;\n\n      // a skeleton can have multiple root bones. collada expresses this\n      // situtation with multiple \"skeleton\" tags per controller instance\n\n      for ( i = 0; i < skeletons.length; i ++ ) {\n\n        var skeleton = skeletons[ i ];\n\n        var root;\n\n        if ( hasNode( skeleton ) ) {\n\n          root = getNode( skeleton );\n          buildBoneHierarchy( root, joints, boneData );\n\n        } else if ( hasVisualScene( skeleton ) ) {\n\n          // handle case where the skeleton refers to the visual scene (#13335)\n\n          var visualScene = library.visualScenes[ skeleton ];\n          var children = visualScene.children;\n\n          for ( var j = 0; j < children.length; j ++ ) {\n\n            var child = children[ j ];\n\n            if ( child.type === 'JOINT' ) {\n\n              var root = getNode( child.id );\n              buildBoneHierarchy( root, joints, boneData );\n\n            }\n\n          }\n\n        } else {\n\n          console.error( 'THREE.ColladaLoader: Unable to find root bone of skeleton with ID:', skeleton );\n\n        }\n\n      }\n\n      // sort bone data (the order is defined in the corresponding controller)\n\n      for ( i = 0; i < joints.length; i ++ ) {\n\n        for ( j = 0; j < boneData.length; j ++ ) {\n\n          data = boneData[ j ];\n\n          if ( data.bone.name === joints[ i ].name ) {\n\n            sortedBoneData[ i ] = data;\n            data.processed = true;\n            break;\n\n          }\n\n        }\n\n      }\n\n      // add unprocessed bone data at the end of the list\n\n      for ( i = 0; i < boneData.length; i ++ ) {\n\n        data = boneData[ i ];\n\n        if ( data.processed === false ) {\n\n          sortedBoneData.push( data );\n          data.processed = true;\n\n        }\n\n      }\n\n      // setup arrays for skeleton creation\n\n      var bones = [];\n      var boneInverses = [];\n\n      for ( i = 0; i < sortedBoneData.length; i ++ ) {\n\n        data = sortedBoneData[ i ];\n\n        bones.push( data.bone );\n        boneInverses.push( data.boneInverse );\n\n      }\n\n      return new THREE.Skeleton( bones, boneInverses );\n\n    }\n\n    function buildBoneHierarchy( root, joints, boneData ) {\n\n      // setup bone data from visual scene\n\n      root.traverse( function ( object ) {\n\n        if ( object.isBone === true ) {\n\n          var boneInverse;\n\n          // retrieve the boneInverse from the controller data\n\n          for ( var i = 0; i < joints.length; i ++ ) {\n\n            var joint = joints[ i ];\n\n            if ( joint.name === object.name ) {\n\n              boneInverse = joint.boneInverse;\n              break;\n\n            }\n\n          }\n\n          if ( boneInverse === undefined ) {\n\n            // Unfortunately, there can be joints in the visual scene that are not part of the\n            // corresponding controller. In this case, we have to create a dummy boneInverse matrix\n            // for the respective bone. This bone won't affect any vertices, because there are no skin indices\n            // and weights defined for it. But we still have to add the bone to the sorted bone list in order to\n            // ensure a correct animation of the model.\n\n            boneInverse = new THREE.Matrix4();\n\n          }\n\n          boneData.push( { bone: object, boneInverse: boneInverse, processed: false } );\n\n        }\n\n      } );\n\n    }\n\n    function buildNode( data ) {\n\n      var objects = [];\n\n      var matrix = data.matrix;\n      var nodes = data.nodes;\n      var type = data.type;\n      var instanceCameras = data.instanceCameras;\n      var instanceControllers = data.instanceControllers;\n      var instanceLights = data.instanceLights;\n      var instanceGeometries = data.instanceGeometries;\n      var instanceNodes = data.instanceNodes;\n\n      // nodes\n\n      for ( var i = 0, l = nodes.length; i < l; i ++ ) {\n\n        objects.push( getNode( nodes[ i ] ) );\n\n      }\n\n      // instance cameras\n\n      for ( var i = 0, l = instanceCameras.length; i < l; i ++ ) {\n\n        var instanceCamera = getCamera( instanceCameras[ i ] );\n\n        if ( instanceCamera !== null ) {\n\n          objects.push( instanceCamera.clone() );\n\n        }\n\n      }\n\n      // instance controllers\n\n      for ( var i = 0, l = instanceControllers.length; i < l; i ++ ) {\n\n        var instance = instanceControllers[ i ];\n        var controller = getController( instance.id );\n        var geometries = getGeometry( controller.id );\n        var newObjects = buildObjects( geometries, instance.materials );\n\n        var skeletons = instance.skeletons;\n        var joints = controller.skin.joints;\n\n        var skeleton = buildSkeleton( skeletons, joints );\n\n        for ( var j = 0, jl = newObjects.length; j < jl; j ++ ) {\n\n          var object = newObjects[ j ];\n\n          if ( object.isSkinnedMesh ) {\n\n            object.bind( skeleton, controller.skin.bindMatrix );\n            object.normalizeSkinWeights();\n\n          }\n\n          objects.push( object );\n\n        }\n\n      }\n\n      // instance lights\n\n      for ( var i = 0, l = instanceLights.length; i < l; i ++ ) {\n\n        var instanceLight = getLight( instanceLights[ i ] );\n\n        if ( instanceLight !== null ) {\n\n          objects.push( instanceLight.clone() );\n\n        }\n\n      }\n\n      // instance geometries\n\n      for ( var i = 0, l = instanceGeometries.length; i < l; i ++ ) {\n\n        var instance = instanceGeometries[ i ];\n\n        // a single geometry instance in collada can lead to multiple object3Ds.\n        // this is the case when primitives are combined like triangles and lines\n\n        var geometries = getGeometry( instance.id );\n        var newObjects = buildObjects( geometries, instance.materials );\n\n        for ( var j = 0, jl = newObjects.length; j < jl; j ++ ) {\n\n          objects.push( newObjects[ j ] );\n\n        }\n\n      }\n\n      // instance nodes\n\n      for ( var i = 0, l = instanceNodes.length; i < l; i ++ ) {\n\n        objects.push( getNode( instanceNodes[ i ] ).clone() );\n\n      }\n\n      var object;\n\n      if ( nodes.length === 0 && objects.length === 1 ) {\n\n        object = objects[ 0 ];\n\n      } else {\n\n        object = ( type === 'JOINT' ) ? new THREE.Bone() : new THREE.Group();\n\n        for ( var i = 0; i < objects.length; i ++ ) {\n\n          object.add( objects[ i ] );\n\n        }\n\n      }\n\n      if ( object.name === '' ) {\n\n        object.name = ( type === 'JOINT' ) ? data.sid : data.name;\n\n      }\n\n      object.matrix.copy( matrix );\n      object.matrix.decompose( object.position, object.quaternion, object.scale );\n\n      return object;\n\n    }\n\n    var fallbackMaterial = new THREE.MeshBasicMaterial( { color: 0xff00ff } );\n\n    function resolveMaterialBinding( keys, instanceMaterials ) {\n\n      var materials = [];\n\n      for ( var i = 0, l = keys.length; i < l; i ++ ) {\n\n        var id = instanceMaterials[ keys[ i ] ];\n\n        if ( id === undefined ) {\n\n          console.warn( 'THREE.ColladaLoader: Material with key %s not found. Apply fallback material.', keys[ i ] );\n          materials.push( fallbackMaterial );\n\n        } else {\n\n          materials.push( getMaterial( id ) );\n\n        }\n\n      }\n\n      return materials;\n\n    }\n\n    function buildObjects( geometries, instanceMaterials ) {\n\n      var objects = [];\n\n      for ( var type in geometries ) {\n\n        var geometry = geometries[ type ];\n\n        var materials = resolveMaterialBinding( geometry.materialKeys, instanceMaterials );\n\n        // handle case if no materials are defined\n\n        if ( materials.length === 0 ) {\n\n          if ( type === 'lines' || type === 'linestrips' ) {\n\n            materials.push( new THREE.LineBasicMaterial() );\n\n          } else {\n\n            materials.push( new THREE.MeshPhongMaterial() );\n\n          }\n\n        }\n\n        // regard skinning\n\n        var skinning = ( geometry.data.attributes.skinIndex !== undefined );\n\n        if ( skinning ) {\n\n          for ( var i = 0, l = materials.length; i < l; i ++ ) {\n\n            materials[ i ].skinning = true;\n\n          }\n\n        }\n\n        // choose between a single or multi materials (material array)\n\n        var material = ( materials.length === 1 ) ? materials[ 0 ] : materials;\n\n        // now create a specific 3D object\n\n        var object;\n\n        switch ( type ) {\n\n          case 'lines':\n            object = new THREE.LineSegments( geometry.data, material );\n            break;\n\n          case 'linestrips':\n            object = new THREE.Line( geometry.data, material );\n            break;\n\n          case 'triangles':\n          case 'polylist':\n            if ( skinning ) {\n\n              object = new THREE.SkinnedMesh( geometry.data, material );\n\n            } else {\n\n              object = new THREE.Mesh( geometry.data, material );\n\n            }\n            break;\n\n        }\n\n        objects.push( object );\n\n      }\n\n      return objects;\n\n    }\n\n    function hasNode( id ) {\n\n      return library.nodes[ id ] !== undefined;\n\n    }\n\n    function getNode( id ) {\n\n      return getBuild( library.nodes[ id ], buildNode );\n\n    }\n\n    // visual scenes\n\n    function parseVisualScene( xml ) {\n\n      var data = {\n        name: xml.getAttribute( 'name' ),\n        children: []\n      };\n\n      prepareNodes( xml );\n\n      var elements = getElementsByTagName( xml, 'node' );\n\n      for ( var i = 0; i < elements.length; i ++ ) {\n\n        data.children.push( parseNode( elements[ i ] ) );\n\n      }\n\n      library.visualScenes[ xml.getAttribute( 'id' ) ] = data;\n\n    }\n\n    function buildVisualScene( data ) {\n\n      var group = new THREE.Group();\n      group.name = data.name;\n\n      var children = data.children;\n\n      for ( var i = 0; i < children.length; i ++ ) {\n\n        var child = children[ i ];\n\n        group.add( getNode( child.id ) );\n\n      }\n\n      return group;\n\n    }\n\n    function hasVisualScene( id ) {\n\n      return library.visualScenes[ id ] !== undefined;\n\n    }\n\n    function getVisualScene( id ) {\n\n      return getBuild( library.visualScenes[ id ], buildVisualScene );\n\n    }\n\n    // scenes\n\n    function parseScene( xml ) {\n\n      var instance = getElementsByTagName( xml, 'instance_visual_scene' )[ 0 ];\n      return getVisualScene( parseId( instance.getAttribute( 'url' ) ) );\n\n    }\n\n    function setupAnimations() {\n\n      var clips = library.clips;\n\n      if ( isEmpty( clips ) === true ) {\n\n        if ( isEmpty( library.animations ) === false ) {\n\n          // if there are animations but no clips, we create a default clip for playback\n\n          var tracks = [];\n\n          for ( var id in library.animations ) {\n\n            var animationTracks = getAnimation( id );\n\n            for ( var i = 0, l = animationTracks.length; i < l; i ++ ) {\n\n              tracks.push( animationTracks[ i ] );\n\n            }\n\n          }\n\n          animations.push( new THREE.AnimationClip( 'default', - 1, tracks ) );\n\n        }\n\n      } else {\n\n        for ( var id in clips ) {\n\n          animations.push( getAnimationClip( id ) );\n\n        }\n\n      }\n\n    }\n\n    if ( text.length === 0 ) {\n\n      return { scene: new THREE.Scene() };\n\n    }\n\n    var xml = new DOMParser().parseFromString( text, 'application/xml' );\n\n    var collada = getElementsByTagName( xml, 'COLLADA' )[ 0 ];\n\n    // metadata\n\n    var version = collada.getAttribute( 'version' );\n    console.log( 'THREE.ColladaLoader: File version', version );\n\n    var asset = parseAsset( getElementsByTagName( collada, 'asset' )[ 0 ] );\n    var textureLoader = new THREE.TextureLoader( this.manager );\n    textureLoader.setPath( this.resourcePath || path ).setCrossOrigin( this.crossOrigin );\n\n    var tgaLoader;\n\n    if ( THREE.TGALoader ) {\n\n      tgaLoader = new THREE.TGALoader( this.manager );\n      tgaLoader.setPath( this.resourcePath || path );\n\n    }\n\n    //\n\n    var animations = [];\n    var kinematics = {};\n    var count = 0;\n\n    //\n\n    var library = {\n      animations: {},\n      clips: {},\n      controllers: {},\n      images: {},\n      effects: {},\n      materials: {},\n      cameras: {},\n      lights: {},\n      geometries: {},\n      nodes: {},\n      visualScenes: {},\n      kinematicsModels: {},\n      physicsModels: {},\n      kinematicsScenes: {}\n    };\n\n    parseLibrary( collada, 'library_animations', 'animation', parseAnimation );\n    parseLibrary( collada, 'library_animation_clips', 'animation_clip', parseAnimationClip );\n    parseLibrary( collada, 'library_controllers', 'controller', parseController );\n    parseLibrary( collada, 'library_images', 'image', parseImage );\n    parseLibrary( collada, 'library_effects', 'effect', parseEffect );\n    parseLibrary( collada, 'library_materials', 'material', parseMaterial );\n    parseLibrary( collada, 'library_cameras', 'camera', parseCamera );\n    parseLibrary( collada, 'library_lights', 'light', parseLight );\n    parseLibrary( collada, 'library_geometries', 'geometry', parseGeometry );\n    parseLibrary( collada, 'library_nodes', 'node', parseNode );\n    parseLibrary( collada, 'library_visual_scenes', 'visual_scene', parseVisualScene );\n    parseLibrary( collada, 'library_kinematics_models', 'kinematics_model', parseKinematicsModel );\n    parseLibrary( collada, 'library_physics_models', 'physics_model', parsePhysicsModel );\n    parseLibrary( collada, 'scene', 'instance_kinematics_scene', parseKinematicsScene );\n\n    buildLibrary( library.animations, buildAnimation );\n    buildLibrary( library.clips, buildAnimationClip );\n    buildLibrary( library.controllers, buildController );\n    buildLibrary( library.images, buildImage );\n    buildLibrary( library.effects, buildEffect );\n    buildLibrary( library.materials, buildMaterial );\n    buildLibrary( library.cameras, buildCamera );\n    buildLibrary( library.lights, buildLight );\n    buildLibrary( library.geometries, buildGeometry );\n    buildLibrary( library.visualScenes, buildVisualScene );\n\n    setupAnimations();\n    setupKinematics();\n\n    var scene = parseScene( getElementsByTagName( collada, 'scene' )[ 0 ] );\n\n    if ( asset.upAxis === 'Z_UP' ) {\n\n      scene.quaternion.setFromEuler( new THREE.Euler( - Math.PI / 2, 0, 0 ) );\n\n    }\n\n    scene.scale.multiplyScalar( asset.unit );\n\n    return {\n      animations: animations,\n      kinematics: kinematics,\n      library: library,\n      scene: scene\n    };\n\n  }\n\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYWZyYW1lLWV4dHJhc0A3LjUuMS9ub2RlX21vZHVsZXMvYWZyYW1lLWV4dHJhcy9saWIvQ29sbGFkYUxvYWRlci5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsS0FBSzs7QUFFTCxHQUFHOztBQUVIOztBQUVBO0FBQ0E7O0FBRUEsR0FBRzs7QUFFSDs7QUFFQTtBQUNBOztBQUVBLEdBQUc7O0FBRUg7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUEsR0FBRzs7QUFFSDs7QUFFQTtBQUNBOztBQUVBLEdBQUc7O0FBRUg7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQSw4Q0FBOEMsT0FBTzs7QUFFckQ7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQSx5Q0FBeUMsT0FBTzs7QUFFaEQ7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQSx5Q0FBeUMsT0FBTzs7QUFFaEQ7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQSx5Q0FBeUMsT0FBTzs7QUFFaEQ7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUEsUUFBUTs7QUFFUixrQkFBa0I7O0FBRWxCOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBLHlCQUF5QixxQkFBcUI7O0FBRTlDOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQSxtQkFBbUI7QUFDbkIsb0JBQW9CO0FBQ3BCO0FBQ0E7O0FBRUEsa0RBQWtELE9BQU87O0FBRXpEOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQSxrQkFBa0I7QUFDbEI7O0FBRUEsa0RBQWtELE9BQU87O0FBRXpEOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxRQUFROztBQUVSOztBQUVBO0FBQ0E7O0FBRUEseUJBQXlCLG9CQUFvQjs7QUFFN0M7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLHNEQUFzRCxRQUFROztBQUU5RDtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUEsY0FBYzs7QUFFZCxxREFBcUQsUUFBUTs7QUFFN0Q7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUEsMEJBQTBCLGdEQUFnRDs7QUFFMUU7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUEsdUJBQXVCLFFBQVE7O0FBRS9COztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDZDQUE2QyxPQUFPOztBQUVwRDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUEseUNBQXlDLE9BQU87O0FBRWhEOztBQUVBOztBQUVBLDZDQUE2Qzs7QUFFN0MsVUFBVTs7QUFFVjs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSwyQ0FBMkMsT0FBTzs7QUFFbEQ7O0FBRUE7O0FBRUE7O0FBRUEsUUFBUTs7QUFFUjs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSw2Q0FBNkMsT0FBTzs7QUFFcEQ7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsa0RBQWtELE9BQU87O0FBRXpEOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsK0NBQStDLFFBQVE7O0FBRXZEOztBQUVBLHNEQUFzRCxRQUFROztBQUU5RDs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSxrREFBa0QsT0FBTzs7QUFFekQ7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsa0RBQWtELE9BQU87O0FBRXpEOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxrREFBa0QsT0FBTzs7QUFFekQ7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsa0RBQWtELE9BQU87O0FBRXpEOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDO0FBQ3hDOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLHNDQUFzQyxPQUFPOztBQUU3QyxzQ0FBc0M7QUFDdEM7O0FBRUEscUJBQXFCLGdCQUFnQjs7QUFFckM7QUFDQTtBQUNBOztBQUVBLGlDQUFpQyx1Q0FBdUM7O0FBRXhFOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQSxxQkFBcUIsZ0JBQWdCOztBQUVyQzs7QUFFQTs7QUFFQTtBQUNBOztBQUVBLFlBQVk7O0FBRVo7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSxRQUFROztBQUVSOztBQUVBOztBQUVBOztBQUVBLGlEQUFpRCxPQUFPOztBQUV4RDtBQUNBOztBQUVBLDZCQUE2Qix1Q0FBdUM7O0FBRXBFOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSxrREFBa0QsT0FBTzs7QUFFekQ7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0Esb0JBQW9CO0FBQ3BCO0FBQ0E7O0FBRUEsa0RBQWtELE9BQU87O0FBRXpEOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBLGtEQUFrRCxPQUFPOztBQUV6RDs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBLGtEQUFrRCxPQUFPOztBQUV6RDs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUEsa0RBQWtELE9BQU87O0FBRXpEOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSxrREFBa0QsT0FBTzs7QUFFekQ7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUEsa0RBQWtELE9BQU87O0FBRXpEOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSxrREFBa0QsT0FBTzs7QUFFekQ7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHVDQUF1QztBQUN2Qzs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsa0RBQWtELE9BQU87O0FBRXpEOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSxrREFBa0QsT0FBTzs7QUFFekQ7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBLGtEQUFrRCxPQUFPOztBQUV6RDs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSxjQUFjOztBQUVkOztBQUVBLGNBQWM7O0FBRWQ7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUEsa0RBQWtELE9BQU87O0FBRXpEOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSxrREFBa0QsT0FBTzs7QUFFekQ7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxrREFBa0QsT0FBTzs7QUFFekQ7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBLGlGQUFpRjtBQUNqRjs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUEsVUFBVTs7QUFFVjtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxjQUFjOztBQUVkO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUEsWUFBWTs7QUFFWjs7QUFFQTs7QUFFQTs7QUFFQSxVQUFVOztBQUVWOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBLFVBQVU7O0FBRVY7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsa0RBQWtELE9BQU87O0FBRXpEOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSx1QkFBdUIsMkJBQTJCOztBQUVsRDs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBLHVCQUF1QiwyQkFBMkI7O0FBRWxEOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSx1QkFBdUIsMkJBQTJCOztBQUVsRDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSxrREFBa0QsT0FBTzs7QUFFekQ7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBLGtEQUFrRCxPQUFPOztBQUV6RDs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBLGtEQUFrRCxPQUFPOztBQUV6RDs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQixvQkFBb0I7QUFDcEI7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBLHVCQUF1Qiw0QkFBNEI7O0FBRW5EOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsdUJBQXVCLDJCQUEyQjs7QUFFbEQ7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUEsdUJBQXVCLDJCQUEyQjs7QUFFbEQ7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBOztBQUVBLGtEQUFrRCxPQUFPOztBQUV6RDs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEM7QUFDOUM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUEsdUJBQXVCLHVCQUF1Qjs7QUFFOUM7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUEsOENBQThDLE9BQU87O0FBRXJEOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBLHVCQUF1QjtBQUN2QixxQkFBcUI7QUFDckIsaUJBQWlCO0FBQ2pCLGtCQUFrQjtBQUNsQixvQkFBb0I7O0FBRXBCLHdCQUF3QjtBQUN4Qix5QkFBeUI7O0FBRXpCOztBQUVBOztBQUVBOztBQUVBLHVCQUF1Qix1QkFBdUI7O0FBRTlDO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBLDZCQUE2QixxQkFBcUI7O0FBRWxEOztBQUVBOztBQUVBO0FBQ0EsOEJBQThCO0FBQzlCOztBQUVBO0FBQ0EsOEJBQThCO0FBQzlCOztBQUVBO0FBQ0EsMkNBQTJDO0FBQzNDOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUEsdUNBQXVDLFdBQVc7O0FBRWxEOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUEsZ0JBQWdCLGdCQUFnQjs7QUFFaEM7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSw0Q0FBNEMsT0FBTzs7QUFFbkQ7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsNkJBQTZCLGlCQUFpQjtBQUM5Qyw2QkFBNkIsaUJBQWlCOztBQUU5QyxZQUFZOztBQUVaO0FBQ0E7QUFDQTs7QUFFQSw2QkFBNkIsaUJBQWlCOztBQUU5QyxZQUFZOztBQUVaLGlEQUFpRCxTQUFTOztBQUUxRDtBQUNBO0FBQ0E7O0FBRUEsK0JBQStCLGlCQUFpQjs7QUFFaEQ7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUEsUUFBUTs7QUFFUiw2Q0FBNkMsT0FBTzs7QUFFcEQ7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBOztBQUVBLHVCQUF1QiwyQkFBMkI7O0FBRWxEOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSx1QkFBdUIsMkJBQTJCOztBQUVsRDs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBLHVCQUF1QiwyQkFBMkI7O0FBRWxEOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsdUJBQXVCLDJCQUEyQjs7QUFFbEQ7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSx1QkFBdUIsMkJBQTJCOztBQUVsRDs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHVCQUF1QiwyQkFBMkI7O0FBRWxEOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHVCQUF1QiwyQkFBMkI7O0FBRWxEOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBLHVCQUF1QiwyQkFBMkI7O0FBRWxEOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSx1QkFBdUIsMkJBQTJCOztBQUVsRDs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSx1QkFBdUIsMkJBQTJCOztBQUVsRDs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBLHVCQUF1QiwyQkFBMkI7O0FBRWxEOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsaURBQWlELE9BQU87O0FBRXhEOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLFVBQVU7O0FBRVY7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUEsWUFBWTs7QUFFWjs7QUFFQTs7QUFFQSxTQUFTOztBQUVUOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBLGNBQWM7O0FBRWQ7O0FBRUEsY0FBYzs7QUFFZDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUEsK0JBQStCLHVCQUF1Qjs7QUFFdEQ7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsa0JBQWtCOztBQUVsQjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSxZQUFZOztBQUVaOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBLHVCQUF1QiwyQkFBMkI7O0FBRWxEOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBLHVCQUF1QixxQkFBcUI7O0FBRTVDOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSx1QkFBdUIsMkJBQTJCOztBQUVsRDs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSxRQUFROztBQUVSOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTs7QUFFQSx1QkFBdUIsMkJBQTJCOztBQUVsRDs7QUFFQTs7QUFFQTtBQUNBOztBQUVBLDZCQUE2QixzQkFBc0I7O0FBRW5EO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUEsbUJBQW1CLHNCQUFzQjs7QUFFekM7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQSxVQUFVOztBQUVWOztBQUVBO0FBQ0E7O0FBRUEsMkJBQTJCLHFCQUFxQjs7QUFFaEQ7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSxVQUFVOztBQUVWOztBQUVBOztBQUVBOztBQUVBOztBQUVBLG1CQUFtQixtQkFBbUI7O0FBRXRDLHFCQUFxQixxQkFBcUI7O0FBRTFDOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSxtQkFBbUIscUJBQXFCOztBQUV4Qzs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUEsbUJBQW1CLDJCQUEyQjs7QUFFOUM7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSwyQkFBMkIsbUJBQW1COztBQUU5Qzs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUEsMkJBQTJCLDJEQUEyRDs7QUFFdEY7O0FBRUEsUUFBUTs7QUFFUjs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLHlDQUF5QyxPQUFPOztBQUVoRDs7QUFFQTs7QUFFQTs7QUFFQSxtREFBbUQsT0FBTzs7QUFFMUQ7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUEsdURBQXVELE9BQU87O0FBRTlEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUEsaURBQWlELFFBQVE7O0FBRXpEOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUEsa0RBQWtELE9BQU87O0FBRXpEOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBLHNEQUFzRCxPQUFPOztBQUU3RDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsaURBQWlELFFBQVE7O0FBRXpEOztBQUVBOztBQUVBOztBQUVBOztBQUVBLGlEQUFpRCxPQUFPOztBQUV4RDs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSxRQUFROztBQUVSOztBQUVBLHlCQUF5QixvQkFBb0I7O0FBRTdDOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUEsMERBQTBELGtCQUFrQjs7QUFFNUU7O0FBRUE7O0FBRUEsd0NBQXdDLE9BQU87O0FBRS9DOztBQUVBOztBQUVBO0FBQ0E7O0FBRUEsVUFBVTs7QUFFVjs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSxZQUFZOztBQUVaOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBLGlEQUFpRCxPQUFPOztBQUV4RDs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxjQUFjOztBQUVkOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUEsdUJBQXVCLHFCQUFxQjs7QUFFNUM7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQSx1QkFBdUIscUJBQXFCOztBQUU1Qzs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBLHlEQUF5RCxPQUFPOztBQUVoRTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQSxRQUFROztBQUVSOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBLGVBQWU7O0FBRWY7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxvQkFBb0I7QUFDcEIsZUFBZTtBQUNmLHFCQUFxQjtBQUNyQixnQkFBZ0I7QUFDaEIsaUJBQWlCO0FBQ2pCLG1CQUFtQjtBQUNuQixpQkFBaUI7QUFDakIsZ0JBQWdCO0FBQ2hCLG9CQUFvQjtBQUNwQixlQUFlO0FBQ2Ysc0JBQXNCO0FBQ3RCLDBCQUEwQjtBQUMxQix1QkFBdUI7QUFDdkI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc21hX3Bvc3Rfc2NhcmNpdHkvLi9ub2RlX21vZHVsZXMvLnBucG0vYWZyYW1lLWV4dHJhc0A3LjUuMS9ub2RlX21vZHVsZXMvYWZyYW1lLWV4dHJhcy9saWIvQ29sbGFkYUxvYWRlci5qcz9jOGI0Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGF1dGhvciBtcmRvb2IgLyBodHRwOi8vbXJkb29iLmNvbS9cbiAqIEBhdXRob3IgTXVnZW44NyAvIGh0dHBzOi8vZ2l0aHViLmNvbS9NdWdlbjg3XG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBUSFJFRS5Db2xsYWRhTG9hZGVyID0gZnVuY3Rpb24gKCBtYW5hZ2VyICkge1xuXG4gIHRoaXMubWFuYWdlciA9ICggbWFuYWdlciAhPT0gdW5kZWZpbmVkICkgPyBtYW5hZ2VyIDogVEhSRUUuRGVmYXVsdExvYWRpbmdNYW5hZ2VyO1xuXG59O1xuXG5USFJFRS5Db2xsYWRhTG9hZGVyLnByb3RvdHlwZSA9IHtcblxuICBjb25zdHJ1Y3RvcjogVEhSRUUuQ29sbGFkYUxvYWRlcixcblxuICBjcm9zc09yaWdpbjogJ2Fub255bW91cycsXG5cbiAgbG9hZDogZnVuY3Rpb24gKCB1cmwsIG9uTG9hZCwgb25Qcm9ncmVzcywgb25FcnJvciApIHtcblxuICAgIHZhciBzY29wZSA9IHRoaXM7XG5cbiAgICB2YXIgcGF0aCA9ICggc2NvcGUucGF0aCA9PT0gdW5kZWZpbmVkICkgPyBUSFJFRS5Mb2FkZXJVdGlscy5leHRyYWN0VXJsQmFzZSggdXJsICkgOiBzY29wZS5wYXRoO1xuXG4gICAgdmFyIGxvYWRlciA9IG5ldyBUSFJFRS5GaWxlTG9hZGVyKCBzY29wZS5tYW5hZ2VyICk7XG4gICAgbG9hZGVyLnNldFBhdGgoIHNjb3BlLnBhdGggKTtcbiAgICBsb2FkZXIubG9hZCggdXJsLCBmdW5jdGlvbiAoIHRleHQgKSB7XG5cbiAgICAgIG9uTG9hZCggc2NvcGUucGFyc2UoIHRleHQsIHBhdGggKSApO1xuXG4gICAgfSwgb25Qcm9ncmVzcywgb25FcnJvciApO1xuXG4gIH0sXG5cbiAgc2V0UGF0aDogZnVuY3Rpb24gKCB2YWx1ZSApIHtcblxuICAgIHRoaXMucGF0aCA9IHZhbHVlO1xuICAgIHJldHVybiB0aGlzO1xuXG4gIH0sXG5cbiAgc2V0UmVzb3VyY2VQYXRoOiBmdW5jdGlvbiAoIHZhbHVlICkge1xuXG4gICAgdGhpcy5yZXNvdXJjZVBhdGggPSB2YWx1ZTtcbiAgICByZXR1cm4gdGhpcztcblxuICB9LFxuXG4gIG9wdGlvbnM6IHtcblxuICAgIHNldCBjb252ZXJ0VXBBeGlzKCB2YWx1ZSApIHtcblxuICAgICAgY29uc29sZS53YXJuKCAnVEhSRUUuQ29sbGFkYUxvYWRlcjogb3B0aW9ucy5jb252ZXJ0VXBBeGlzKCkgaGFzIGJlZW4gcmVtb3ZlZC4gVXAgYXhpcyBpcyBjb252ZXJ0ZWQgYXV0b21hdGljYWxseS4nICk7XG5cbiAgICB9XG5cbiAgfSxcblxuICBzZXRDcm9zc09yaWdpbjogZnVuY3Rpb24gKCB2YWx1ZSApIHtcblxuICAgIHRoaXMuY3Jvc3NPcmlnaW4gPSB2YWx1ZTtcbiAgICByZXR1cm4gdGhpcztcblxuICB9LFxuXG4gIHBhcnNlOiBmdW5jdGlvbiAoIHRleHQsIHBhdGggKSB7XG5cbiAgICBmdW5jdGlvbiBnZXRFbGVtZW50c0J5VGFnTmFtZSggeG1sLCBuYW1lICkge1xuXG4gICAgICAvLyBOb24gcmVjdXJzaXZlIHhtbC5nZXRFbGVtZW50c0J5VGFnTmFtZSgpIC4uLlxuXG4gICAgICB2YXIgYXJyYXkgPSBbXTtcbiAgICAgIHZhciBjaGlsZE5vZGVzID0geG1sLmNoaWxkTm9kZXM7XG5cbiAgICAgIGZvciAoIHZhciBpID0gMCwgbCA9IGNoaWxkTm9kZXMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuICAgICAgICB2YXIgY2hpbGQgPSBjaGlsZE5vZGVzWyBpIF07XG5cbiAgICAgICAgaWYgKCBjaGlsZC5ub2RlTmFtZSA9PT0gbmFtZSApIHtcblxuICAgICAgICAgIGFycmF5LnB1c2goIGNoaWxkICk7XG5cbiAgICAgICAgfVxuXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBhcnJheTtcblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBhcnNlU3RyaW5ncyggdGV4dCApIHtcblxuICAgICAgaWYgKCB0ZXh0Lmxlbmd0aCA9PT0gMCApIHJldHVybiBbXTtcblxuICAgICAgdmFyIHBhcnRzID0gdGV4dC50cmltKCkuc3BsaXQoIC9cXHMrLyApO1xuICAgICAgdmFyIGFycmF5ID0gbmV3IEFycmF5KCBwYXJ0cy5sZW5ndGggKTtcblxuICAgICAgZm9yICggdmFyIGkgPSAwLCBsID0gcGFydHMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuICAgICAgICBhcnJheVsgaSBdID0gcGFydHNbIGkgXTtcblxuICAgICAgfVxuXG4gICAgICByZXR1cm4gYXJyYXk7XG5cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwYXJzZUZsb2F0cyggdGV4dCApIHtcblxuICAgICAgaWYgKCB0ZXh0Lmxlbmd0aCA9PT0gMCApIHJldHVybiBbXTtcblxuICAgICAgdmFyIHBhcnRzID0gdGV4dC50cmltKCkuc3BsaXQoIC9cXHMrLyApO1xuICAgICAgdmFyIGFycmF5ID0gbmV3IEFycmF5KCBwYXJ0cy5sZW5ndGggKTtcblxuICAgICAgZm9yICggdmFyIGkgPSAwLCBsID0gcGFydHMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuICAgICAgICBhcnJheVsgaSBdID0gcGFyc2VGbG9hdCggcGFydHNbIGkgXSApO1xuXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBhcnJheTtcblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBhcnNlSW50cyggdGV4dCApIHtcblxuICAgICAgaWYgKCB0ZXh0Lmxlbmd0aCA9PT0gMCApIHJldHVybiBbXTtcblxuICAgICAgdmFyIHBhcnRzID0gdGV4dC50cmltKCkuc3BsaXQoIC9cXHMrLyApO1xuICAgICAgdmFyIGFycmF5ID0gbmV3IEFycmF5KCBwYXJ0cy5sZW5ndGggKTtcblxuICAgICAgZm9yICggdmFyIGkgPSAwLCBsID0gcGFydHMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuICAgICAgICBhcnJheVsgaSBdID0gcGFyc2VJbnQoIHBhcnRzWyBpIF0gKTtcblxuICAgICAgfVxuXG4gICAgICByZXR1cm4gYXJyYXk7XG5cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwYXJzZUlkKCB0ZXh0ICkge1xuXG4gICAgICByZXR1cm4gdGV4dC5zdWJzdHJpbmcoIDEgKTtcblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdlbmVyYXRlSWQoKSB7XG5cbiAgICAgIHJldHVybiAndGhyZWVfZGVmYXVsdF8nICsgKCBjb3VudCArKyApO1xuXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNFbXB0eSggb2JqZWN0ICkge1xuXG4gICAgICByZXR1cm4gT2JqZWN0LmtleXMoIG9iamVjdCApLmxlbmd0aCA9PT0gMDtcblxuICAgIH1cblxuICAgIC8vIGFzc2V0XG5cbiAgICBmdW5jdGlvbiBwYXJzZUFzc2V0KCB4bWwgKSB7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHVuaXQ6IHBhcnNlQXNzZXRVbml0KCBnZXRFbGVtZW50c0J5VGFnTmFtZSggeG1sLCAndW5pdCcgKVsgMCBdICksXG4gICAgICAgIHVwQXhpczogcGFyc2VBc3NldFVwQXhpcyggZ2V0RWxlbWVudHNCeVRhZ05hbWUoIHhtbCwgJ3VwX2F4aXMnIClbIDAgXSApXG4gICAgICB9O1xuXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcGFyc2VBc3NldFVuaXQoIHhtbCApIHtcblxuICAgICAgaWYgKCAoIHhtbCAhPT0gdW5kZWZpbmVkICkgJiYgKCB4bWwuaGFzQXR0cmlidXRlKCAnbWV0ZXInICkgPT09IHRydWUgKSApIHtcblxuICAgICAgICByZXR1cm4gcGFyc2VGbG9hdCggeG1sLmdldEF0dHJpYnV0ZSggJ21ldGVyJyApICk7XG5cbiAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgcmV0dXJuIDE7IC8vIGRlZmF1bHQgMSBtZXRlclxuXG4gICAgICB9XG5cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwYXJzZUFzc2V0VXBBeGlzKCB4bWwgKSB7XG5cbiAgICAgIHJldHVybiB4bWwgIT09IHVuZGVmaW5lZCA/IHhtbC50ZXh0Q29udGVudCA6ICdZX1VQJztcblxuICAgIH1cblxuICAgIC8vIGxpYnJhcnlcblxuICAgIGZ1bmN0aW9uIHBhcnNlTGlicmFyeSggeG1sLCBsaWJyYXJ5TmFtZSwgbm9kZU5hbWUsIHBhcnNlciApIHtcblxuICAgICAgdmFyIGxpYnJhcnkgPSBnZXRFbGVtZW50c0J5VGFnTmFtZSggeG1sLCBsaWJyYXJ5TmFtZSApWyAwIF07XG5cbiAgICAgIGlmICggbGlicmFyeSAhPT0gdW5kZWZpbmVkICkge1xuXG4gICAgICAgIHZhciBlbGVtZW50cyA9IGdldEVsZW1lbnRzQnlUYWdOYW1lKCBsaWJyYXJ5LCBub2RlTmFtZSApO1xuXG4gICAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IGVsZW1lbnRzLmxlbmd0aDsgaSArKyApIHtcblxuICAgICAgICAgIHBhcnNlciggZWxlbWVudHNbIGkgXSApO1xuXG4gICAgICAgIH1cblxuICAgICAgfVxuXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnVpbGRMaWJyYXJ5KCBkYXRhLCBidWlsZGVyICkge1xuXG4gICAgICBmb3IgKCB2YXIgbmFtZSBpbiBkYXRhICkge1xuXG4gICAgICAgIHZhciBvYmplY3QgPSBkYXRhWyBuYW1lIF07XG4gICAgICAgIG9iamVjdC5idWlsZCA9IGJ1aWxkZXIoIGRhdGFbIG5hbWUgXSApO1xuXG4gICAgICB9XG5cbiAgICB9XG5cbiAgICAvLyBnZXRcblxuICAgIGZ1bmN0aW9uIGdldEJ1aWxkKCBkYXRhLCBidWlsZGVyICkge1xuXG4gICAgICBpZiAoIGRhdGEuYnVpbGQgIT09IHVuZGVmaW5lZCApIHJldHVybiBkYXRhLmJ1aWxkO1xuXG4gICAgICBkYXRhLmJ1aWxkID0gYnVpbGRlciggZGF0YSApO1xuXG4gICAgICByZXR1cm4gZGF0YS5idWlsZDtcblxuICAgIH1cblxuICAgIC8vIGFuaW1hdGlvblxuXG4gICAgZnVuY3Rpb24gcGFyc2VBbmltYXRpb24oIHhtbCApIHtcblxuICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgIHNvdXJjZXM6IHt9LFxuICAgICAgICBzYW1wbGVyczoge30sXG4gICAgICAgIGNoYW5uZWxzOiB7fVxuICAgICAgfTtcblxuICAgICAgZm9yICggdmFyIGkgPSAwLCBsID0geG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuICAgICAgICB2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuXG4gICAgICAgIGlmICggY2hpbGQubm9kZVR5cGUgIT09IDEgKSBjb250aW51ZTtcblxuICAgICAgICB2YXIgaWQ7XG5cbiAgICAgICAgc3dpdGNoICggY2hpbGQubm9kZU5hbWUgKSB7XG5cbiAgICAgICAgICBjYXNlICdzb3VyY2UnOlxuICAgICAgICAgICAgaWQgPSBjaGlsZC5nZXRBdHRyaWJ1dGUoICdpZCcgKTtcbiAgICAgICAgICAgIGRhdGEuc291cmNlc1sgaWQgXSA9IHBhcnNlU291cmNlKCBjaGlsZCApO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlICdzYW1wbGVyJzpcbiAgICAgICAgICAgIGlkID0gY2hpbGQuZ2V0QXR0cmlidXRlKCAnaWQnICk7XG4gICAgICAgICAgICBkYXRhLnNhbXBsZXJzWyBpZCBdID0gcGFyc2VBbmltYXRpb25TYW1wbGVyKCBjaGlsZCApO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlICdjaGFubmVsJzpcbiAgICAgICAgICAgIGlkID0gY2hpbGQuZ2V0QXR0cmlidXRlKCAndGFyZ2V0JyApO1xuICAgICAgICAgICAgZGF0YS5jaGFubmVsc1sgaWQgXSA9IHBhcnNlQW5pbWF0aW9uQ2hhbm5lbCggY2hpbGQgKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCBjaGlsZCApO1xuXG4gICAgICAgIH1cblxuICAgICAgfVxuXG4gICAgICBsaWJyYXJ5LmFuaW1hdGlvbnNbIHhtbC5nZXRBdHRyaWJ1dGUoICdpZCcgKSBdID0gZGF0YTtcblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBhcnNlQW5pbWF0aW9uU2FtcGxlciggeG1sICkge1xuXG4gICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgaW5wdXRzOiB7fSxcbiAgICAgIH07XG5cbiAgICAgIGZvciAoIHZhciBpID0gMCwgbCA9IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG5cbiAgICAgICAgdmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcblxuICAgICAgICBpZiAoIGNoaWxkLm5vZGVUeXBlICE9PSAxICkgY29udGludWU7XG5cbiAgICAgICAgc3dpdGNoICggY2hpbGQubm9kZU5hbWUgKSB7XG5cbiAgICAgICAgICBjYXNlICdpbnB1dCc6XG4gICAgICAgICAgICB2YXIgaWQgPSBwYXJzZUlkKCBjaGlsZC5nZXRBdHRyaWJ1dGUoICdzb3VyY2UnICkgKTtcbiAgICAgICAgICAgIHZhciBzZW1hbnRpYyA9IGNoaWxkLmdldEF0dHJpYnV0ZSggJ3NlbWFudGljJyApO1xuICAgICAgICAgICAgZGF0YS5pbnB1dHNbIHNlbWFudGljIF0gPSBpZDtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIH1cblxuICAgICAgfVxuXG4gICAgICByZXR1cm4gZGF0YTtcblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBhcnNlQW5pbWF0aW9uQ2hhbm5lbCggeG1sICkge1xuXG4gICAgICB2YXIgZGF0YSA9IHt9O1xuXG4gICAgICB2YXIgdGFyZ2V0ID0geG1sLmdldEF0dHJpYnV0ZSggJ3RhcmdldCcgKTtcblxuICAgICAgLy8gcGFyc2luZyBTSUQgQWRkcmVzc2luZyBTeW50YXhcblxuICAgICAgdmFyIHBhcnRzID0gdGFyZ2V0LnNwbGl0KCAnLycgKTtcblxuICAgICAgdmFyIGlkID0gcGFydHMuc2hpZnQoKTtcbiAgICAgIHZhciBzaWQgPSBwYXJ0cy5zaGlmdCgpO1xuXG4gICAgICAvLyBjaGVjayBzZWxlY3Rpb24gc3ludGF4XG5cbiAgICAgIHZhciBhcnJheVN5bnRheCA9ICggc2lkLmluZGV4T2YoICcoJyApICE9PSAtIDEgKTtcbiAgICAgIHZhciBtZW1iZXJTeW50YXggPSAoIHNpZC5pbmRleE9mKCAnLicgKSAhPT0gLSAxICk7XG5cbiAgICAgIGlmICggbWVtYmVyU3ludGF4ICkge1xuXG4gICAgICAgIC8vICBtZW1iZXIgc2VsZWN0aW9uIGFjY2Vzc1xuXG4gICAgICAgIHBhcnRzID0gc2lkLnNwbGl0KCAnLicgKTtcbiAgICAgICAgc2lkID0gcGFydHMuc2hpZnQoKTtcbiAgICAgICAgZGF0YS5tZW1iZXIgPSBwYXJ0cy5zaGlmdCgpO1xuXG4gICAgICB9IGVsc2UgaWYgKCBhcnJheVN5bnRheCApIHtcblxuICAgICAgICAvLyBhcnJheS1hY2Nlc3Mgc3ludGF4LiBjYW4gYmUgdXNlZCB0byBleHByZXNzIGZpZWxkcyBpbiBvbmUtZGltZW5zaW9uYWwgdmVjdG9ycyBvciB0d28tZGltZW5zaW9uYWwgbWF0cmljZXMuXG5cbiAgICAgICAgdmFyIGluZGljZXMgPSBzaWQuc3BsaXQoICcoJyApO1xuICAgICAgICBzaWQgPSBpbmRpY2VzLnNoaWZ0KCk7XG5cbiAgICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDwgaW5kaWNlcy5sZW5ndGg7IGkgKysgKSB7XG5cbiAgICAgICAgICBpbmRpY2VzWyBpIF0gPSBwYXJzZUludCggaW5kaWNlc1sgaSBdLnJlcGxhY2UoIC9cXCkvLCAnJyApICk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGRhdGEuaW5kaWNlcyA9IGluZGljZXM7XG5cbiAgICAgIH1cblxuICAgICAgZGF0YS5pZCA9IGlkO1xuICAgICAgZGF0YS5zaWQgPSBzaWQ7XG5cbiAgICAgIGRhdGEuYXJyYXlTeW50YXggPSBhcnJheVN5bnRheDtcbiAgICAgIGRhdGEubWVtYmVyU3ludGF4ID0gbWVtYmVyU3ludGF4O1xuXG4gICAgICBkYXRhLnNhbXBsZXIgPSBwYXJzZUlkKCB4bWwuZ2V0QXR0cmlidXRlKCAnc291cmNlJyApICk7XG5cbiAgICAgIHJldHVybiBkYXRhO1xuXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnVpbGRBbmltYXRpb24oIGRhdGEgKSB7XG5cbiAgICAgIHZhciB0cmFja3MgPSBbXTtcblxuICAgICAgdmFyIGNoYW5uZWxzID0gZGF0YS5jaGFubmVscztcbiAgICAgIHZhciBzYW1wbGVycyA9IGRhdGEuc2FtcGxlcnM7XG4gICAgICB2YXIgc291cmNlcyA9IGRhdGEuc291cmNlcztcblxuICAgICAgZm9yICggdmFyIHRhcmdldCBpbiBjaGFubmVscyApIHtcblxuICAgICAgICBpZiAoIGNoYW5uZWxzLmhhc093blByb3BlcnR5KCB0YXJnZXQgKSApIHtcblxuICAgICAgICAgIHZhciBjaGFubmVsID0gY2hhbm5lbHNbIHRhcmdldCBdO1xuICAgICAgICAgIHZhciBzYW1wbGVyID0gc2FtcGxlcnNbIGNoYW5uZWwuc2FtcGxlciBdO1xuXG4gICAgICAgICAgdmFyIGlucHV0SWQgPSBzYW1wbGVyLmlucHV0cy5JTlBVVDtcbiAgICAgICAgICB2YXIgb3V0cHV0SWQgPSBzYW1wbGVyLmlucHV0cy5PVVRQVVQ7XG5cbiAgICAgICAgICB2YXIgaW5wdXRTb3VyY2UgPSBzb3VyY2VzWyBpbnB1dElkIF07XG4gICAgICAgICAgdmFyIG91dHB1dFNvdXJjZSA9IHNvdXJjZXNbIG91dHB1dElkIF07XG5cbiAgICAgICAgICB2YXIgYW5pbWF0aW9uID0gYnVpbGRBbmltYXRpb25DaGFubmVsKCBjaGFubmVsLCBpbnB1dFNvdXJjZSwgb3V0cHV0U291cmNlICk7XG5cbiAgICAgICAgICBjcmVhdGVLZXlmcmFtZVRyYWNrcyggYW5pbWF0aW9uLCB0cmFja3MgKTtcblxuICAgICAgICB9XG5cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRyYWNrcztcblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldEFuaW1hdGlvbiggaWQgKSB7XG5cbiAgICAgIHJldHVybiBnZXRCdWlsZCggbGlicmFyeS5hbmltYXRpb25zWyBpZCBdLCBidWlsZEFuaW1hdGlvbiApO1xuXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnVpbGRBbmltYXRpb25DaGFubmVsKCBjaGFubmVsLCBpbnB1dFNvdXJjZSwgb3V0cHV0U291cmNlICkge1xuXG4gICAgICB2YXIgbm9kZSA9IGxpYnJhcnkubm9kZXNbIGNoYW5uZWwuaWQgXTtcbiAgICAgIHZhciBvYmplY3QzRCA9IGdldE5vZGUoIG5vZGUuaWQgKTtcblxuICAgICAgdmFyIHRyYW5zZm9ybSA9IG5vZGUudHJhbnNmb3Jtc1sgY2hhbm5lbC5zaWQgXTtcbiAgICAgIHZhciBkZWZhdWx0TWF0cml4ID0gbm9kZS5tYXRyaXguY2xvbmUoKS50cmFuc3Bvc2UoKTtcblxuICAgICAgdmFyIHRpbWUsIHN0cmlkZTtcbiAgICAgIHZhciBpLCBpbCwgaiwgamw7XG5cbiAgICAgIHZhciBkYXRhID0ge307XG5cbiAgICAgIC8vIHRoZSBjb2xsYWRhIHNwZWMgYWxsb3dzIHRoZSBhbmltYXRpb24gb2YgZGF0YSBpbiB2YXJpb3VzIHdheXMuXG4gICAgICAvLyBkZXBlbmRpbmcgb24gdGhlIHRyYW5zZm9ybSB0eXBlIChtYXRyaXgsIHRyYW5zbGF0ZSwgcm90YXRlLCBzY2FsZSksIHdlIGV4ZWN1dGUgZGlmZmVyZW50IGxvZ2ljXG5cbiAgICAgIHN3aXRjaCAoIHRyYW5zZm9ybSApIHtcblxuICAgICAgICBjYXNlICdtYXRyaXgnOlxuXG4gICAgICAgICAgZm9yICggaSA9IDAsIGlsID0gaW5wdXRTb3VyY2UuYXJyYXkubGVuZ3RoOyBpIDwgaWw7IGkgKysgKSB7XG5cbiAgICAgICAgICAgIHRpbWUgPSBpbnB1dFNvdXJjZS5hcnJheVsgaSBdO1xuICAgICAgICAgICAgc3RyaWRlID0gaSAqIG91dHB1dFNvdXJjZS5zdHJpZGU7XG5cbiAgICAgICAgICAgIGlmICggZGF0YVsgdGltZSBdID09PSB1bmRlZmluZWQgKSBkYXRhWyB0aW1lIF0gPSB7fTtcblxuICAgICAgICAgICAgaWYgKCBjaGFubmVsLmFycmF5U3ludGF4ID09PSB0cnVlICkge1xuXG4gICAgICAgICAgICAgIHZhciB2YWx1ZSA9IG91dHB1dFNvdXJjZS5hcnJheVsgc3RyaWRlIF07XG4gICAgICAgICAgICAgIHZhciBpbmRleCA9IGNoYW5uZWwuaW5kaWNlc1sgMCBdICsgNCAqIGNoYW5uZWwuaW5kaWNlc1sgMSBdO1xuXG4gICAgICAgICAgICAgIGRhdGFbIHRpbWUgXVsgaW5kZXggXSA9IHZhbHVlO1xuXG4gICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgIGZvciAoIGogPSAwLCBqbCA9IG91dHB1dFNvdXJjZS5zdHJpZGU7IGogPCBqbDsgaiArKyApIHtcblxuICAgICAgICAgICAgICAgIGRhdGFbIHRpbWUgXVsgaiBdID0gb3V0cHV0U291cmNlLmFycmF5WyBzdHJpZGUgKyBqIF07XG5cbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlICd0cmFuc2xhdGUnOlxuICAgICAgICAgIGNvbnNvbGUud2FybiggJ1RIUkVFLkNvbGxhZGFMb2FkZXI6IEFuaW1hdGlvbiB0cmFuc2Zvcm0gdHlwZSBcIiVzXCIgbm90IHlldCBpbXBsZW1lbnRlZC4nLCB0cmFuc2Zvcm0gKTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlICdyb3RhdGUnOlxuICAgICAgICAgIGNvbnNvbGUud2FybiggJ1RIUkVFLkNvbGxhZGFMb2FkZXI6IEFuaW1hdGlvbiB0cmFuc2Zvcm0gdHlwZSBcIiVzXCIgbm90IHlldCBpbXBsZW1lbnRlZC4nLCB0cmFuc2Zvcm0gKTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlICdzY2FsZSc6XG4gICAgICAgICAgY29uc29sZS53YXJuKCAnVEhSRUUuQ29sbGFkYUxvYWRlcjogQW5pbWF0aW9uIHRyYW5zZm9ybSB0eXBlIFwiJXNcIiBub3QgeWV0IGltcGxlbWVudGVkLicsIHRyYW5zZm9ybSApO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICB9XG5cbiAgICAgIHZhciBrZXlmcmFtZXMgPSBwcmVwYXJlQW5pbWF0aW9uRGF0YSggZGF0YSwgZGVmYXVsdE1hdHJpeCApO1xuXG4gICAgICB2YXIgYW5pbWF0aW9uID0ge1xuICAgICAgICBuYW1lOiBvYmplY3QzRC51dWlkLFxuICAgICAgICBrZXlmcmFtZXM6IGtleWZyYW1lc1xuICAgICAgfTtcblxuICAgICAgcmV0dXJuIGFuaW1hdGlvbjtcblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHByZXBhcmVBbmltYXRpb25EYXRhKCBkYXRhLCBkZWZhdWx0TWF0cml4ICkge1xuXG4gICAgICB2YXIga2V5ZnJhbWVzID0gW107XG5cbiAgICAgIC8vIHRyYW5zZmVyIGRhdGEgaW50byBhIHNvcnRhYmxlIGFycmF5XG5cbiAgICAgIGZvciAoIHZhciB0aW1lIGluIGRhdGEgKSB7XG5cbiAgICAgICAga2V5ZnJhbWVzLnB1c2goIHsgdGltZTogcGFyc2VGbG9hdCggdGltZSApLCB2YWx1ZTogZGF0YVsgdGltZSBdIH0gKTtcblxuICAgICAgfVxuXG4gICAgICAvLyBlbnN1cmUga2V5ZnJhbWVzIGFyZSBzb3J0ZWQgYnkgdGltZVxuXG4gICAgICBrZXlmcmFtZXMuc29ydCggYXNjZW5kaW5nICk7XG5cbiAgICAgIC8vIG5vdyB3ZSBjbGVhbiB1cCBhbGwgYW5pbWF0aW9uIGRhdGEsIHNvIHdlIGNhbiB1c2UgdGhlbSBmb3Iga2V5ZnJhbWUgdHJhY2tzXG5cbiAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IDE2OyBpICsrICkge1xuXG4gICAgICAgIHRyYW5zZm9ybUFuaW1hdGlvbkRhdGEoIGtleWZyYW1lcywgaSwgZGVmYXVsdE1hdHJpeC5lbGVtZW50c1sgaSBdICk7XG5cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGtleWZyYW1lcztcblxuICAgICAgLy8gYXJyYXkgc29ydCBmdW5jdGlvblxuXG4gICAgICBmdW5jdGlvbiBhc2NlbmRpbmcoIGEsIGIgKSB7XG5cbiAgICAgICAgcmV0dXJuIGEudGltZSAtIGIudGltZTtcblxuICAgICAgfVxuXG4gICAgfVxuXG4gICAgdmFyIHBvc2l0aW9uID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcbiAgICB2YXIgc2NhbGUgPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuICAgIHZhciBxdWF0ZXJuaW9uID0gbmV3IFRIUkVFLlF1YXRlcm5pb24oKTtcblxuICAgIGZ1bmN0aW9uIGNyZWF0ZUtleWZyYW1lVHJhY2tzKCBhbmltYXRpb24sIHRyYWNrcyApIHtcblxuICAgICAgdmFyIGtleWZyYW1lcyA9IGFuaW1hdGlvbi5rZXlmcmFtZXM7XG4gICAgICB2YXIgbmFtZSA9IGFuaW1hdGlvbi5uYW1lO1xuXG4gICAgICB2YXIgdGltZXMgPSBbXTtcbiAgICAgIHZhciBwb3NpdGlvbkRhdGEgPSBbXTtcbiAgICAgIHZhciBxdWF0ZXJuaW9uRGF0YSA9IFtdO1xuICAgICAgdmFyIHNjYWxlRGF0YSA9IFtdO1xuXG4gICAgICBmb3IgKCB2YXIgaSA9IDAsIGwgPSBrZXlmcmFtZXMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuICAgICAgICB2YXIga2V5ZnJhbWUgPSBrZXlmcmFtZXNbIGkgXTtcblxuICAgICAgICB2YXIgdGltZSA9IGtleWZyYW1lLnRpbWU7XG4gICAgICAgIHZhciB2YWx1ZSA9IGtleWZyYW1lLnZhbHVlO1xuXG4gICAgICAgIG1hdHJpeC5mcm9tQXJyYXkoIHZhbHVlICkudHJhbnNwb3NlKCk7XG4gICAgICAgIG1hdHJpeC5kZWNvbXBvc2UoIHBvc2l0aW9uLCBxdWF0ZXJuaW9uLCBzY2FsZSApO1xuXG4gICAgICAgIHRpbWVzLnB1c2goIHRpbWUgKTtcbiAgICAgICAgcG9zaXRpb25EYXRhLnB1c2goIHBvc2l0aW9uLngsIHBvc2l0aW9uLnksIHBvc2l0aW9uLnogKTtcbiAgICAgICAgcXVhdGVybmlvbkRhdGEucHVzaCggcXVhdGVybmlvbi54LCBxdWF0ZXJuaW9uLnksIHF1YXRlcm5pb24ueiwgcXVhdGVybmlvbi53ICk7XG4gICAgICAgIHNjYWxlRGF0YS5wdXNoKCBzY2FsZS54LCBzY2FsZS55LCBzY2FsZS56ICk7XG5cbiAgICAgIH1cblxuICAgICAgaWYgKCBwb3NpdGlvbkRhdGEubGVuZ3RoID4gMCApIHRyYWNrcy5wdXNoKCBuZXcgVEhSRUUuVmVjdG9yS2V5ZnJhbWVUcmFjayggbmFtZSArICcucG9zaXRpb24nLCB0aW1lcywgcG9zaXRpb25EYXRhICkgKTtcbiAgICAgIGlmICggcXVhdGVybmlvbkRhdGEubGVuZ3RoID4gMCApIHRyYWNrcy5wdXNoKCBuZXcgVEhSRUUuUXVhdGVybmlvbktleWZyYW1lVHJhY2soIG5hbWUgKyAnLnF1YXRlcm5pb24nLCB0aW1lcywgcXVhdGVybmlvbkRhdGEgKSApO1xuICAgICAgaWYgKCBzY2FsZURhdGEubGVuZ3RoID4gMCApIHRyYWNrcy5wdXNoKCBuZXcgVEhSRUUuVmVjdG9yS2V5ZnJhbWVUcmFjayggbmFtZSArICcuc2NhbGUnLCB0aW1lcywgc2NhbGVEYXRhICkgKTtcblxuICAgICAgcmV0dXJuIHRyYWNrcztcblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHRyYW5zZm9ybUFuaW1hdGlvbkRhdGEoIGtleWZyYW1lcywgcHJvcGVydHksIGRlZmF1bHRWYWx1ZSApIHtcblxuICAgICAgdmFyIGtleWZyYW1lO1xuXG4gICAgICB2YXIgZW1wdHkgPSB0cnVlO1xuICAgICAgdmFyIGksIGw7XG5cbiAgICAgIC8vIGNoZWNrLCBpZiB2YWx1ZXMgb2YgYSBwcm9wZXJ0eSBhcmUgbWlzc2luZyBpbiBvdXIga2V5ZnJhbWVzXG5cbiAgICAgIGZvciAoIGkgPSAwLCBsID0ga2V5ZnJhbWVzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG5cbiAgICAgICAga2V5ZnJhbWUgPSBrZXlmcmFtZXNbIGkgXTtcblxuICAgICAgICBpZiAoIGtleWZyYW1lLnZhbHVlWyBwcm9wZXJ0eSBdID09PSB1bmRlZmluZWQgKSB7XG5cbiAgICAgICAgICBrZXlmcmFtZS52YWx1ZVsgcHJvcGVydHkgXSA9IG51bGw7IC8vIG1hcmsgYXMgbWlzc2luZ1xuXG4gICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICBlbXB0eSA9IGZhbHNlO1xuXG4gICAgICAgIH1cblxuICAgICAgfVxuXG4gICAgICBpZiAoIGVtcHR5ID09PSB0cnVlICkge1xuXG4gICAgICAgIC8vIG5vIHZhbHVlcyBhdCBhbGwsIHNvIHdlIHNldCBhIGRlZmF1bHQgdmFsdWVcblxuICAgICAgICBmb3IgKCBpID0gMCwgbCA9IGtleWZyYW1lcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuXG4gICAgICAgICAga2V5ZnJhbWUgPSBrZXlmcmFtZXNbIGkgXTtcblxuICAgICAgICAgIGtleWZyYW1lLnZhbHVlWyBwcm9wZXJ0eSBdID0gZGVmYXVsdFZhbHVlO1xuXG4gICAgICAgIH1cblxuICAgICAgfSBlbHNlIHtcblxuICAgICAgICAvLyBmaWxsaW5nIGdhcHNcblxuICAgICAgICBjcmVhdGVNaXNzaW5nS2V5ZnJhbWVzKCBrZXlmcmFtZXMsIHByb3BlcnR5ICk7XG5cbiAgICAgIH1cblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZU1pc3NpbmdLZXlmcmFtZXMoIGtleWZyYW1lcywgcHJvcGVydHkgKSB7XG5cbiAgICAgIHZhciBwcmV2LCBuZXh0O1xuXG4gICAgICBmb3IgKCB2YXIgaSA9IDAsIGwgPSBrZXlmcmFtZXMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuICAgICAgICB2YXIga2V5ZnJhbWUgPSBrZXlmcmFtZXNbIGkgXTtcblxuICAgICAgICBpZiAoIGtleWZyYW1lLnZhbHVlWyBwcm9wZXJ0eSBdID09PSBudWxsICkge1xuXG4gICAgICAgICAgcHJldiA9IGdldFByZXYoIGtleWZyYW1lcywgaSwgcHJvcGVydHkgKTtcbiAgICAgICAgICBuZXh0ID0gZ2V0TmV4dCgga2V5ZnJhbWVzLCBpLCBwcm9wZXJ0eSApO1xuXG4gICAgICAgICAgaWYgKCBwcmV2ID09PSBudWxsICkge1xuXG4gICAgICAgICAgICBrZXlmcmFtZS52YWx1ZVsgcHJvcGVydHkgXSA9IG5leHQudmFsdWVbIHByb3BlcnR5IF07XG4gICAgICAgICAgICBjb250aW51ZTtcblxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICggbmV4dCA9PT0gbnVsbCApIHtcblxuICAgICAgICAgICAga2V5ZnJhbWUudmFsdWVbIHByb3BlcnR5IF0gPSBwcmV2LnZhbHVlWyBwcm9wZXJ0eSBdO1xuICAgICAgICAgICAgY29udGludWU7XG5cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpbnRlcnBvbGF0ZSgga2V5ZnJhbWUsIHByZXYsIG5leHQsIHByb3BlcnR5ICk7XG5cbiAgICAgICAgfVxuXG4gICAgICB9XG5cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRQcmV2KCBrZXlmcmFtZXMsIGksIHByb3BlcnR5ICkge1xuXG4gICAgICB3aGlsZSAoIGkgPj0gMCApIHtcblxuICAgICAgICB2YXIga2V5ZnJhbWUgPSBrZXlmcmFtZXNbIGkgXTtcblxuICAgICAgICBpZiAoIGtleWZyYW1lLnZhbHVlWyBwcm9wZXJ0eSBdICE9PSBudWxsICkgcmV0dXJuIGtleWZyYW1lO1xuXG4gICAgICAgIGkgLS07XG5cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG51bGw7XG5cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXROZXh0KCBrZXlmcmFtZXMsIGksIHByb3BlcnR5ICkge1xuXG4gICAgICB3aGlsZSAoIGkgPCBrZXlmcmFtZXMubGVuZ3RoICkge1xuXG4gICAgICAgIHZhciBrZXlmcmFtZSA9IGtleWZyYW1lc1sgaSBdO1xuXG4gICAgICAgIGlmICgga2V5ZnJhbWUudmFsdWVbIHByb3BlcnR5IF0gIT09IG51bGwgKSByZXR1cm4ga2V5ZnJhbWU7XG5cbiAgICAgICAgaSArKztcblxuICAgICAgfVxuXG4gICAgICByZXR1cm4gbnVsbDtcblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGludGVycG9sYXRlKCBrZXksIHByZXYsIG5leHQsIHByb3BlcnR5ICkge1xuXG4gICAgICBpZiAoICggbmV4dC50aW1lIC0gcHJldi50aW1lICkgPT09IDAgKSB7XG5cbiAgICAgICAga2V5LnZhbHVlWyBwcm9wZXJ0eSBdID0gcHJldi52YWx1ZVsgcHJvcGVydHkgXTtcbiAgICAgICAgcmV0dXJuO1xuXG4gICAgICB9XG5cbiAgICAgIGtleS52YWx1ZVsgcHJvcGVydHkgXSA9ICggKCBrZXkudGltZSAtIHByZXYudGltZSApICogKCBuZXh0LnZhbHVlWyBwcm9wZXJ0eSBdIC0gcHJldi52YWx1ZVsgcHJvcGVydHkgXSApIC8gKCBuZXh0LnRpbWUgLSBwcmV2LnRpbWUgKSApICsgcHJldi52YWx1ZVsgcHJvcGVydHkgXTtcblxuICAgIH1cblxuICAgIC8vIGFuaW1hdGlvbiBjbGlwc1xuXG4gICAgZnVuY3Rpb24gcGFyc2VBbmltYXRpb25DbGlwKCB4bWwgKSB7XG5cbiAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICBuYW1lOiB4bWwuZ2V0QXR0cmlidXRlKCAnaWQnICkgfHwgJ2RlZmF1bHQnLFxuICAgICAgICBzdGFydDogcGFyc2VGbG9hdCggeG1sLmdldEF0dHJpYnV0ZSggJ3N0YXJ0JyApIHx8IDAgKSxcbiAgICAgICAgZW5kOiBwYXJzZUZsb2F0KCB4bWwuZ2V0QXR0cmlidXRlKCAnZW5kJyApIHx8IDAgKSxcbiAgICAgICAgYW5pbWF0aW9uczogW11cbiAgICAgIH07XG5cbiAgICAgIGZvciAoIHZhciBpID0gMCwgbCA9IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG5cbiAgICAgICAgdmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcblxuICAgICAgICBpZiAoIGNoaWxkLm5vZGVUeXBlICE9PSAxICkgY29udGludWU7XG5cbiAgICAgICAgc3dpdGNoICggY2hpbGQubm9kZU5hbWUgKSB7XG5cbiAgICAgICAgICBjYXNlICdpbnN0YW5jZV9hbmltYXRpb24nOlxuICAgICAgICAgICAgZGF0YS5hbmltYXRpb25zLnB1c2goIHBhcnNlSWQoIGNoaWxkLmdldEF0dHJpYnV0ZSggJ3VybCcgKSApICk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICB9XG5cbiAgICAgIH1cblxuICAgICAgbGlicmFyeS5jbGlwc1sgeG1sLmdldEF0dHJpYnV0ZSggJ2lkJyApIF0gPSBkYXRhO1xuXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnVpbGRBbmltYXRpb25DbGlwKCBkYXRhICkge1xuXG4gICAgICB2YXIgdHJhY2tzID0gW107XG5cbiAgICAgIHZhciBuYW1lID0gZGF0YS5uYW1lO1xuICAgICAgdmFyIGR1cmF0aW9uID0gKCBkYXRhLmVuZCAtIGRhdGEuc3RhcnQgKSB8fCAtIDE7XG4gICAgICB2YXIgYW5pbWF0aW9ucyA9IGRhdGEuYW5pbWF0aW9ucztcblxuICAgICAgZm9yICggdmFyIGkgPSAwLCBpbCA9IGFuaW1hdGlvbnMubGVuZ3RoOyBpIDwgaWw7IGkgKysgKSB7XG5cbiAgICAgICAgdmFyIGFuaW1hdGlvblRyYWNrcyA9IGdldEFuaW1hdGlvbiggYW5pbWF0aW9uc1sgaSBdICk7XG5cbiAgICAgICAgZm9yICggdmFyIGogPSAwLCBqbCA9IGFuaW1hdGlvblRyYWNrcy5sZW5ndGg7IGogPCBqbDsgaiArKyApIHtcblxuICAgICAgICAgIHRyYWNrcy5wdXNoKCBhbmltYXRpb25UcmFja3NbIGogXSApO1xuXG4gICAgICAgIH1cblxuICAgICAgfVxuXG4gICAgICByZXR1cm4gbmV3IFRIUkVFLkFuaW1hdGlvbkNsaXAoIG5hbWUsIGR1cmF0aW9uLCB0cmFja3MgKTtcblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldEFuaW1hdGlvbkNsaXAoIGlkICkge1xuXG4gICAgICByZXR1cm4gZ2V0QnVpbGQoIGxpYnJhcnkuY2xpcHNbIGlkIF0sIGJ1aWxkQW5pbWF0aW9uQ2xpcCApO1xuXG4gICAgfVxuXG4gICAgLy8gY29udHJvbGxlclxuXG4gICAgZnVuY3Rpb24gcGFyc2VDb250cm9sbGVyKCB4bWwgKSB7XG5cbiAgICAgIHZhciBkYXRhID0ge307XG5cbiAgICAgIGZvciAoIHZhciBpID0gMCwgbCA9IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG5cbiAgICAgICAgdmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcblxuICAgICAgICBpZiAoIGNoaWxkLm5vZGVUeXBlICE9PSAxICkgY29udGludWU7XG5cbiAgICAgICAgc3dpdGNoICggY2hpbGQubm9kZU5hbWUgKSB7XG5cbiAgICAgICAgICBjYXNlICdza2luJzpcbiAgICAgICAgICAgIC8vIHRoZXJlIGlzIGV4YWN0bHkgb25lIHNraW4gcGVyIGNvbnRyb2xsZXJcbiAgICAgICAgICAgIGRhdGEuaWQgPSBwYXJzZUlkKCBjaGlsZC5nZXRBdHRyaWJ1dGUoICdzb3VyY2UnICkgKTtcbiAgICAgICAgICAgIGRhdGEuc2tpbiA9IHBhcnNlU2tpbiggY2hpbGQgKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAnbW9ycGgnOlxuICAgICAgICAgICAgZGF0YS5pZCA9IHBhcnNlSWQoIGNoaWxkLmdldEF0dHJpYnV0ZSggJ3NvdXJjZScgKSApO1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCAnVEhSRUUuQ29sbGFkYUxvYWRlcjogTW9ycGggdGFyZ2V0IGFuaW1hdGlvbiBub3Qgc3VwcG9ydGVkIHlldC4nICk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICB9XG5cbiAgICAgIH1cblxuICAgICAgbGlicmFyeS5jb250cm9sbGVyc1sgeG1sLmdldEF0dHJpYnV0ZSggJ2lkJyApIF0gPSBkYXRhO1xuXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcGFyc2VTa2luKCB4bWwgKSB7XG5cbiAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICBzb3VyY2VzOiB7fVxuICAgICAgfTtcblxuICAgICAgZm9yICggdmFyIGkgPSAwLCBsID0geG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuICAgICAgICB2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuXG4gICAgICAgIGlmICggY2hpbGQubm9kZVR5cGUgIT09IDEgKSBjb250aW51ZTtcblxuICAgICAgICBzd2l0Y2ggKCBjaGlsZC5ub2RlTmFtZSApIHtcblxuICAgICAgICAgIGNhc2UgJ2JpbmRfc2hhcGVfbWF0cml4JzpcbiAgICAgICAgICAgIGRhdGEuYmluZFNoYXBlTWF0cml4ID0gcGFyc2VGbG9hdHMoIGNoaWxkLnRleHRDb250ZW50ICk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgJ3NvdXJjZSc6XG4gICAgICAgICAgICB2YXIgaWQgPSBjaGlsZC5nZXRBdHRyaWJ1dGUoICdpZCcgKTtcbiAgICAgICAgICAgIGRhdGEuc291cmNlc1sgaWQgXSA9IHBhcnNlU291cmNlKCBjaGlsZCApO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlICdqb2ludHMnOlxuICAgICAgICAgICAgZGF0YS5qb2ludHMgPSBwYXJzZUpvaW50cyggY2hpbGQgKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAndmVydGV4X3dlaWdodHMnOlxuICAgICAgICAgICAgZGF0YS52ZXJ0ZXhXZWlnaHRzID0gcGFyc2VWZXJ0ZXhXZWlnaHRzKCBjaGlsZCApO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgfVxuXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBkYXRhO1xuXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcGFyc2VKb2ludHMoIHhtbCApIHtcblxuICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgIGlucHV0czoge31cbiAgICAgIH07XG5cbiAgICAgIGZvciAoIHZhciBpID0gMCwgbCA9IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG5cbiAgICAgICAgdmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcblxuICAgICAgICBpZiAoIGNoaWxkLm5vZGVUeXBlICE9PSAxICkgY29udGludWU7XG5cbiAgICAgICAgc3dpdGNoICggY2hpbGQubm9kZU5hbWUgKSB7XG5cbiAgICAgICAgICBjYXNlICdpbnB1dCc6XG4gICAgICAgICAgICB2YXIgc2VtYW50aWMgPSBjaGlsZC5nZXRBdHRyaWJ1dGUoICdzZW1hbnRpYycgKTtcbiAgICAgICAgICAgIHZhciBpZCA9IHBhcnNlSWQoIGNoaWxkLmdldEF0dHJpYnV0ZSggJ3NvdXJjZScgKSApO1xuICAgICAgICAgICAgZGF0YS5pbnB1dHNbIHNlbWFudGljIF0gPSBpZDtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIH1cblxuICAgICAgfVxuXG4gICAgICByZXR1cm4gZGF0YTtcblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBhcnNlVmVydGV4V2VpZ2h0cyggeG1sICkge1xuXG4gICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgaW5wdXRzOiB7fVxuICAgICAgfTtcblxuICAgICAgZm9yICggdmFyIGkgPSAwLCBsID0geG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuICAgICAgICB2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuXG4gICAgICAgIGlmICggY2hpbGQubm9kZVR5cGUgIT09IDEgKSBjb250aW51ZTtcblxuICAgICAgICBzd2l0Y2ggKCBjaGlsZC5ub2RlTmFtZSApIHtcblxuICAgICAgICAgIGNhc2UgJ2lucHV0JzpcbiAgICAgICAgICAgIHZhciBzZW1hbnRpYyA9IGNoaWxkLmdldEF0dHJpYnV0ZSggJ3NlbWFudGljJyApO1xuICAgICAgICAgICAgdmFyIGlkID0gcGFyc2VJZCggY2hpbGQuZ2V0QXR0cmlidXRlKCAnc291cmNlJyApICk7XG4gICAgICAgICAgICB2YXIgb2Zmc2V0ID0gcGFyc2VJbnQoIGNoaWxkLmdldEF0dHJpYnV0ZSggJ29mZnNldCcgKSApO1xuICAgICAgICAgICAgZGF0YS5pbnB1dHNbIHNlbWFudGljIF0gPSB7IGlkOiBpZCwgb2Zmc2V0OiBvZmZzZXQgfTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAndmNvdW50JzpcbiAgICAgICAgICAgIGRhdGEudmNvdW50ID0gcGFyc2VJbnRzKCBjaGlsZC50ZXh0Q29udGVudCApO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlICd2JzpcbiAgICAgICAgICAgIGRhdGEudiA9IHBhcnNlSW50cyggY2hpbGQudGV4dENvbnRlbnQgKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIH1cblxuICAgICAgfVxuXG4gICAgICByZXR1cm4gZGF0YTtcblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGJ1aWxkQ29udHJvbGxlciggZGF0YSApIHtcblxuICAgICAgdmFyIGJ1aWxkID0ge1xuICAgICAgICBpZDogZGF0YS5pZFxuICAgICAgfTtcblxuICAgICAgdmFyIGdlb21ldHJ5ID0gbGlicmFyeS5nZW9tZXRyaWVzWyBidWlsZC5pZCBdO1xuXG4gICAgICBpZiAoIGRhdGEuc2tpbiAhPT0gdW5kZWZpbmVkICkge1xuXG4gICAgICAgIGJ1aWxkLnNraW4gPSBidWlsZFNraW4oIGRhdGEuc2tpbiApO1xuXG4gICAgICAgIC8vIHdlIGVuaGFuY2UgdGhlICdzb3VyY2VzJyBwcm9wZXJ0eSBvZiB0aGUgY29ycmVzcG9uZGluZyBnZW9tZXRyeSB3aXRoIG91ciBza2luIGRhdGFcblxuICAgICAgICBnZW9tZXRyeS5zb3VyY2VzLnNraW5JbmRpY2VzID0gYnVpbGQuc2tpbi5pbmRpY2VzO1xuICAgICAgICBnZW9tZXRyeS5zb3VyY2VzLnNraW5XZWlnaHRzID0gYnVpbGQuc2tpbi53ZWlnaHRzO1xuXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBidWlsZDtcblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGJ1aWxkU2tpbiggZGF0YSApIHtcblxuICAgICAgdmFyIEJPTkVfTElNSVQgPSA0O1xuXG4gICAgICB2YXIgYnVpbGQgPSB7XG4gICAgICAgIGpvaW50czogW10sIC8vIHRoaXMgbXVzdCBiZSBhbiBhcnJheSB0byBwcmVzZXJ2ZSB0aGUgam9pbnQgb3JkZXJcbiAgICAgICAgaW5kaWNlczoge1xuICAgICAgICAgIGFycmF5OiBbXSxcbiAgICAgICAgICBzdHJpZGU6IEJPTkVfTElNSVRcbiAgICAgICAgfSxcbiAgICAgICAgd2VpZ2h0czoge1xuICAgICAgICAgIGFycmF5OiBbXSxcbiAgICAgICAgICBzdHJpZGU6IEJPTkVfTElNSVRcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgdmFyIHNvdXJjZXMgPSBkYXRhLnNvdXJjZXM7XG4gICAgICB2YXIgdmVydGV4V2VpZ2h0cyA9IGRhdGEudmVydGV4V2VpZ2h0cztcblxuICAgICAgdmFyIHZjb3VudCA9IHZlcnRleFdlaWdodHMudmNvdW50O1xuICAgICAgdmFyIHYgPSB2ZXJ0ZXhXZWlnaHRzLnY7XG4gICAgICB2YXIgam9pbnRPZmZzZXQgPSB2ZXJ0ZXhXZWlnaHRzLmlucHV0cy5KT0lOVC5vZmZzZXQ7XG4gICAgICB2YXIgd2VpZ2h0T2Zmc2V0ID0gdmVydGV4V2VpZ2h0cy5pbnB1dHMuV0VJR0hULm9mZnNldDtcblxuICAgICAgdmFyIGpvaW50U291cmNlID0gZGF0YS5zb3VyY2VzWyBkYXRhLmpvaW50cy5pbnB1dHMuSk9JTlQgXTtcbiAgICAgIHZhciBpbnZlcnNlU291cmNlID0gZGF0YS5zb3VyY2VzWyBkYXRhLmpvaW50cy5pbnB1dHMuSU5WX0JJTkRfTUFUUklYIF07XG5cbiAgICAgIHZhciB3ZWlnaHRzID0gc291cmNlc1sgdmVydGV4V2VpZ2h0cy5pbnB1dHMuV0VJR0hULmlkIF0uYXJyYXk7XG4gICAgICB2YXIgc3RyaWRlID0gMDtcblxuICAgICAgdmFyIGksIGosIGw7XG5cbiAgICAgIC8vIHByb2NjZXMgc2tpbiBkYXRhIGZvciBlYWNoIHZlcnRleFxuXG4gICAgICBmb3IgKCBpID0gMCwgbCA9IHZjb3VudC5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuXG4gICAgICAgIHZhciBqb2ludENvdW50ID0gdmNvdW50WyBpIF07IC8vIHRoaXMgaXMgdGhlIGFtb3VudCBvZiBqb2ludHMgdGhhdCBhZmZlY3QgYSBzaW5nbGUgdmVydGV4XG4gICAgICAgIHZhciB2ZXJ0ZXhTa2luRGF0YSA9IFtdO1xuXG4gICAgICAgIGZvciAoIGogPSAwOyBqIDwgam9pbnRDb3VudDsgaiArKyApIHtcblxuICAgICAgICAgIHZhciBza2luSW5kZXggPSB2WyBzdHJpZGUgKyBqb2ludE9mZnNldCBdO1xuICAgICAgICAgIHZhciB3ZWlnaHRJZCA9IHZbIHN0cmlkZSArIHdlaWdodE9mZnNldCBdO1xuICAgICAgICAgIHZhciBza2luV2VpZ2h0ID0gd2VpZ2h0c1sgd2VpZ2h0SWQgXTtcblxuICAgICAgICAgIHZlcnRleFNraW5EYXRhLnB1c2goIHsgaW5kZXg6IHNraW5JbmRleCwgd2VpZ2h0OiBza2luV2VpZ2h0IH0gKTtcblxuICAgICAgICAgIHN0cmlkZSArPSAyO1xuXG4gICAgICAgIH1cblxuICAgICAgICAvLyB3ZSBzb3J0IHRoZSBqb2ludHMgaW4gZGVzY2VuZGluZyBvcmRlciBiYXNlZCBvbiB0aGUgd2VpZ2h0cy5cbiAgICAgICAgLy8gdGhpcyBlbnN1cmVzLCB3ZSBvbmx5IHByb2NjZWQgdGhlIG1vc3QgaW1wb3J0YW50IGpvaW50cyBvZiB0aGUgdmVydGV4XG5cbiAgICAgICAgdmVydGV4U2tpbkRhdGEuc29ydCggZGVzY2VuZGluZyApO1xuXG4gICAgICAgIC8vIG5vdyB3ZSBwcm92aWRlIGZvciBlYWNoIHZlcnRleCBhIHNldCBvZiBmb3VyIGluZGV4IGFuZCB3ZWlnaHQgdmFsdWVzLlxuICAgICAgICAvLyB0aGUgb3JkZXIgb2YgdGhlIHNraW4gZGF0YSBtYXRjaGVzIHRoZSBvcmRlciBvZiB2ZXJ0aWNlc1xuXG4gICAgICAgIGZvciAoIGogPSAwOyBqIDwgQk9ORV9MSU1JVDsgaiArKyApIHtcblxuICAgICAgICAgIHZhciBkID0gdmVydGV4U2tpbkRhdGFbIGogXTtcblxuICAgICAgICAgIGlmICggZCAhPT0gdW5kZWZpbmVkICkge1xuXG4gICAgICAgICAgICBidWlsZC5pbmRpY2VzLmFycmF5LnB1c2goIGQuaW5kZXggKTtcbiAgICAgICAgICAgIGJ1aWxkLndlaWdodHMuYXJyYXkucHVzaCggZC53ZWlnaHQgKTtcblxuICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgIGJ1aWxkLmluZGljZXMuYXJyYXkucHVzaCggMCApO1xuICAgICAgICAgICAgYnVpbGQud2VpZ2h0cy5hcnJheS5wdXNoKCAwICk7XG5cbiAgICAgICAgICB9XG5cbiAgICAgICAgfVxuXG4gICAgICB9XG5cbiAgICAgIC8vIHNldHVwIGJpbmQgbWF0cml4XG5cbiAgICAgIGlmICggZGF0YS5iaW5kU2hhcGVNYXRyaXggKSB7XG5cbiAgICAgICAgYnVpbGQuYmluZE1hdHJpeCA9IG5ldyBUSFJFRS5NYXRyaXg0KCkuZnJvbUFycmF5KCBkYXRhLmJpbmRTaGFwZU1hdHJpeCApLnRyYW5zcG9zZSgpO1xuXG4gICAgICB9IGVsc2Uge1xuXG4gICAgICAgIGJ1aWxkLmJpbmRNYXRyaXggPSBuZXcgVEhSRUUuTWF0cml4NCgpLmlkZW50aXR5KCk7XG5cbiAgICAgIH1cblxuICAgICAgLy8gcHJvY2VzcyBib25lcyBhbmQgaW52ZXJzZSBiaW5kIG1hdHJpeCBkYXRhXG5cbiAgICAgIGZvciAoIGkgPSAwLCBsID0gam9pbnRTb3VyY2UuYXJyYXkubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuICAgICAgICB2YXIgbmFtZSA9IGpvaW50U291cmNlLmFycmF5WyBpIF07XG4gICAgICAgIHZhciBib25lSW52ZXJzZSA9IG5ldyBUSFJFRS5NYXRyaXg0KCkuZnJvbUFycmF5KCBpbnZlcnNlU291cmNlLmFycmF5LCBpICogaW52ZXJzZVNvdXJjZS5zdHJpZGUgKS50cmFuc3Bvc2UoKTtcblxuICAgICAgICBidWlsZC5qb2ludHMucHVzaCggeyBuYW1lOiBuYW1lLCBib25lSW52ZXJzZTogYm9uZUludmVyc2UgfSApO1xuXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBidWlsZDtcblxuICAgICAgLy8gYXJyYXkgc29ydCBmdW5jdGlvblxuXG4gICAgICBmdW5jdGlvbiBkZXNjZW5kaW5nKCBhLCBiICkge1xuXG4gICAgICAgIHJldHVybiBiLndlaWdodCAtIGEud2VpZ2h0O1xuXG4gICAgICB9XG5cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRDb250cm9sbGVyKCBpZCApIHtcblxuICAgICAgcmV0dXJuIGdldEJ1aWxkKCBsaWJyYXJ5LmNvbnRyb2xsZXJzWyBpZCBdLCBidWlsZENvbnRyb2xsZXIgKTtcblxuICAgIH1cblxuICAgIC8vIGltYWdlXG5cbiAgICBmdW5jdGlvbiBwYXJzZUltYWdlKCB4bWwgKSB7XG5cbiAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICBpbml0X2Zyb206IGdldEVsZW1lbnRzQnlUYWdOYW1lKCB4bWwsICdpbml0X2Zyb20nIClbIDAgXS50ZXh0Q29udGVudFxuICAgICAgfTtcblxuICAgICAgbGlicmFyeS5pbWFnZXNbIHhtbC5nZXRBdHRyaWJ1dGUoICdpZCcgKSBdID0gZGF0YTtcblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGJ1aWxkSW1hZ2UoIGRhdGEgKSB7XG5cbiAgICAgIGlmICggZGF0YS5idWlsZCAhPT0gdW5kZWZpbmVkICkgcmV0dXJuIGRhdGEuYnVpbGQ7XG5cbiAgICAgIHJldHVybiBkYXRhLmluaXRfZnJvbTtcblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldEltYWdlKCBpZCApIHtcblxuICAgICAgdmFyIGRhdGEgPSBsaWJyYXJ5LmltYWdlc1sgaWQgXTtcblxuICAgICAgaWYgKCBkYXRhICE9PSB1bmRlZmluZWQgKSB7XG5cbiAgICAgICAgcmV0dXJuIGdldEJ1aWxkKCBkYXRhLCBidWlsZEltYWdlICk7XG5cbiAgICAgIH1cblxuICAgICAgY29uc29sZS53YXJuKCAnVEhSRUUuQ29sbGFkYUxvYWRlcjogQ291bGRuXFwndCBmaW5kIGltYWdlIHdpdGggSUQ6JywgaWQgKTtcblxuICAgICAgcmV0dXJuIG51bGw7XG5cbiAgICB9XG5cbiAgICAvLyBlZmZlY3RcblxuICAgIGZ1bmN0aW9uIHBhcnNlRWZmZWN0KCB4bWwgKSB7XG5cbiAgICAgIHZhciBkYXRhID0ge307XG5cbiAgICAgIGZvciAoIHZhciBpID0gMCwgbCA9IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG5cbiAgICAgICAgdmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcblxuICAgICAgICBpZiAoIGNoaWxkLm5vZGVUeXBlICE9PSAxICkgY29udGludWU7XG5cbiAgICAgICAgc3dpdGNoICggY2hpbGQubm9kZU5hbWUgKSB7XG5cbiAgICAgICAgICBjYXNlICdwcm9maWxlX0NPTU1PTic6XG4gICAgICAgICAgICBkYXRhLnByb2ZpbGUgPSBwYXJzZUVmZmVjdFByb2ZpbGVDT01NT04oIGNoaWxkICk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICB9XG5cbiAgICAgIH1cblxuICAgICAgbGlicmFyeS5lZmZlY3RzWyB4bWwuZ2V0QXR0cmlidXRlKCAnaWQnICkgXSA9IGRhdGE7XG5cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwYXJzZUVmZmVjdFByb2ZpbGVDT01NT04oIHhtbCApIHtcblxuICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgIHN1cmZhY2VzOiB7fSxcbiAgICAgICAgc2FtcGxlcnM6IHt9XG4gICAgICB9O1xuXG4gICAgICBmb3IgKCB2YXIgaSA9IDAsIGwgPSB4bWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuXG4gICAgICAgIHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG5cbiAgICAgICAgaWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuXG4gICAgICAgIHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuXG4gICAgICAgICAgY2FzZSAnbmV3cGFyYW0nOlxuICAgICAgICAgICAgcGFyc2VFZmZlY3ROZXdwYXJhbSggY2hpbGQsIGRhdGEgKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAndGVjaG5pcXVlJzpcbiAgICAgICAgICAgIGRhdGEudGVjaG5pcXVlID0gcGFyc2VFZmZlY3RUZWNobmlxdWUoIGNoaWxkICk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgJ2V4dHJhJzpcbiAgICAgICAgICAgIGRhdGEuZXh0cmEgPSBwYXJzZUVmZmVjdEV4dHJhKCBjaGlsZCApO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgfVxuXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBkYXRhO1xuXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcGFyc2VFZmZlY3ROZXdwYXJhbSggeG1sLCBkYXRhICkge1xuXG4gICAgICB2YXIgc2lkID0geG1sLmdldEF0dHJpYnV0ZSggJ3NpZCcgKTtcblxuICAgICAgZm9yICggdmFyIGkgPSAwLCBsID0geG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuICAgICAgICB2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuXG4gICAgICAgIGlmICggY2hpbGQubm9kZVR5cGUgIT09IDEgKSBjb250aW51ZTtcblxuICAgICAgICBzd2l0Y2ggKCBjaGlsZC5ub2RlTmFtZSApIHtcblxuICAgICAgICAgIGNhc2UgJ3N1cmZhY2UnOlxuICAgICAgICAgICAgZGF0YS5zdXJmYWNlc1sgc2lkIF0gPSBwYXJzZUVmZmVjdFN1cmZhY2UoIGNoaWxkICk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgJ3NhbXBsZXIyRCc6XG4gICAgICAgICAgICBkYXRhLnNhbXBsZXJzWyBzaWQgXSA9IHBhcnNlRWZmZWN0U2FtcGxlciggY2hpbGQgKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIH1cblxuICAgICAgfVxuXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcGFyc2VFZmZlY3RTdXJmYWNlKCB4bWwgKSB7XG5cbiAgICAgIHZhciBkYXRhID0ge307XG5cbiAgICAgIGZvciAoIHZhciBpID0gMCwgbCA9IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG5cbiAgICAgICAgdmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcblxuICAgICAgICBpZiAoIGNoaWxkLm5vZGVUeXBlICE9PSAxICkgY29udGludWU7XG5cbiAgICAgICAgc3dpdGNoICggY2hpbGQubm9kZU5hbWUgKSB7XG5cbiAgICAgICAgICBjYXNlICdpbml0X2Zyb20nOlxuICAgICAgICAgICAgZGF0YS5pbml0X2Zyb20gPSBjaGlsZC50ZXh0Q29udGVudDtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIH1cblxuICAgICAgfVxuXG4gICAgICByZXR1cm4gZGF0YTtcblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBhcnNlRWZmZWN0U2FtcGxlciggeG1sICkge1xuXG4gICAgICB2YXIgZGF0YSA9IHt9O1xuXG4gICAgICBmb3IgKCB2YXIgaSA9IDAsIGwgPSB4bWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuXG4gICAgICAgIHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG5cbiAgICAgICAgaWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuXG4gICAgICAgIHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuXG4gICAgICAgICAgY2FzZSAnc291cmNlJzpcbiAgICAgICAgICAgIGRhdGEuc291cmNlID0gY2hpbGQudGV4dENvbnRlbnQ7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICB9XG5cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGRhdGE7XG5cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwYXJzZUVmZmVjdFRlY2huaXF1ZSggeG1sICkge1xuXG4gICAgICB2YXIgZGF0YSA9IHt9O1xuXG4gICAgICBmb3IgKCB2YXIgaSA9IDAsIGwgPSB4bWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuXG4gICAgICAgIHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG5cbiAgICAgICAgaWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuXG4gICAgICAgIHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuXG4gICAgICAgICAgY2FzZSAnY29uc3RhbnQnOlxuICAgICAgICAgIGNhc2UgJ2xhbWJlcnQnOlxuICAgICAgICAgIGNhc2UgJ2JsaW5uJzpcbiAgICAgICAgICBjYXNlICdwaG9uZyc6XG4gICAgICAgICAgICBkYXRhLnR5cGUgPSBjaGlsZC5ub2RlTmFtZTtcbiAgICAgICAgICAgIGRhdGEucGFyYW1ldGVycyA9IHBhcnNlRWZmZWN0UGFyYW1ldGVycyggY2hpbGQgKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIH1cblxuICAgICAgfVxuXG4gICAgICByZXR1cm4gZGF0YTtcblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBhcnNlRWZmZWN0UGFyYW1ldGVycyggeG1sICkge1xuXG4gICAgICB2YXIgZGF0YSA9IHt9O1xuXG4gICAgICBmb3IgKCB2YXIgaSA9IDAsIGwgPSB4bWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuXG4gICAgICAgIHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG5cbiAgICAgICAgaWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuXG4gICAgICAgIHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuXG4gICAgICAgICAgY2FzZSAnZW1pc3Npb24nOlxuICAgICAgICAgIGNhc2UgJ2RpZmZ1c2UnOlxuICAgICAgICAgIGNhc2UgJ3NwZWN1bGFyJzpcbiAgICAgICAgICBjYXNlICdidW1wJzpcbiAgICAgICAgICBjYXNlICdhbWJpZW50JzpcbiAgICAgICAgICBjYXNlICdzaGluaW5lc3MnOlxuICAgICAgICAgIGNhc2UgJ3RyYW5zcGFyZW5jeSc6XG4gICAgICAgICAgICBkYXRhWyBjaGlsZC5ub2RlTmFtZSBdID0gcGFyc2VFZmZlY3RQYXJhbWV0ZXIoIGNoaWxkICk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICd0cmFuc3BhcmVudCc6XG4gICAgICAgICAgICBkYXRhWyBjaGlsZC5ub2RlTmFtZSBdID0ge1xuICAgICAgICAgICAgICBvcGFxdWU6IGNoaWxkLmdldEF0dHJpYnV0ZSggJ29wYXF1ZScgKSxcbiAgICAgICAgICAgICAgZGF0YTogcGFyc2VFZmZlY3RQYXJhbWV0ZXIoIGNoaWxkIClcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICB9XG5cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGRhdGE7XG5cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwYXJzZUVmZmVjdFBhcmFtZXRlciggeG1sICkge1xuXG4gICAgICB2YXIgZGF0YSA9IHt9O1xuXG4gICAgICBmb3IgKCB2YXIgaSA9IDAsIGwgPSB4bWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuXG4gICAgICAgIHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG5cbiAgICAgICAgaWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuXG4gICAgICAgIHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuXG4gICAgICAgICAgY2FzZSAnY29sb3InOlxuICAgICAgICAgICAgZGF0YVsgY2hpbGQubm9kZU5hbWUgXSA9IHBhcnNlRmxvYXRzKCBjaGlsZC50ZXh0Q29udGVudCApO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlICdmbG9hdCc6XG4gICAgICAgICAgICBkYXRhWyBjaGlsZC5ub2RlTmFtZSBdID0gcGFyc2VGbG9hdCggY2hpbGQudGV4dENvbnRlbnQgKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAndGV4dHVyZSc6XG4gICAgICAgICAgICBkYXRhWyBjaGlsZC5ub2RlTmFtZSBdID0geyBpZDogY2hpbGQuZ2V0QXR0cmlidXRlKCAndGV4dHVyZScgKSwgZXh0cmE6IHBhcnNlRWZmZWN0UGFyYW1ldGVyVGV4dHVyZSggY2hpbGQgKSB9O1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgfVxuXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBkYXRhO1xuXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcGFyc2VFZmZlY3RQYXJhbWV0ZXJUZXh0dXJlKCB4bWwgKSB7XG5cbiAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICB0ZWNobmlxdWU6IHt9XG4gICAgICB9O1xuXG4gICAgICBmb3IgKCB2YXIgaSA9IDAsIGwgPSB4bWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuXG4gICAgICAgIHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG5cbiAgICAgICAgaWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuXG4gICAgICAgIHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuXG4gICAgICAgICAgY2FzZSAnZXh0cmEnOlxuICAgICAgICAgICAgcGFyc2VFZmZlY3RQYXJhbWV0ZXJUZXh0dXJlRXh0cmEoIGNoaWxkLCBkYXRhICk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICB9XG5cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGRhdGE7XG5cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwYXJzZUVmZmVjdFBhcmFtZXRlclRleHR1cmVFeHRyYSggeG1sLCBkYXRhICkge1xuXG4gICAgICBmb3IgKCB2YXIgaSA9IDAsIGwgPSB4bWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuXG4gICAgICAgIHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG5cbiAgICAgICAgaWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuXG4gICAgICAgIHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuXG4gICAgICAgICAgY2FzZSAndGVjaG5pcXVlJzpcbiAgICAgICAgICAgIHBhcnNlRWZmZWN0UGFyYW1ldGVyVGV4dHVyZUV4dHJhVGVjaG5pcXVlKCBjaGlsZCwgZGF0YSApO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgfVxuXG4gICAgICB9XG5cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwYXJzZUVmZmVjdFBhcmFtZXRlclRleHR1cmVFeHRyYVRlY2huaXF1ZSggeG1sLCBkYXRhICkge1xuXG4gICAgICBmb3IgKCB2YXIgaSA9IDAsIGwgPSB4bWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuXG4gICAgICAgIHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG5cbiAgICAgICAgaWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuXG4gICAgICAgIHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuXG4gICAgICAgICAgY2FzZSAncmVwZWF0VSc6XG4gICAgICAgICAgY2FzZSAncmVwZWF0Vic6XG4gICAgICAgICAgY2FzZSAnb2Zmc2V0VSc6XG4gICAgICAgICAgY2FzZSAnb2Zmc2V0Vic6XG4gICAgICAgICAgICBkYXRhLnRlY2huaXF1ZVsgY2hpbGQubm9kZU5hbWUgXSA9IHBhcnNlRmxvYXQoIGNoaWxkLnRleHRDb250ZW50ICk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgJ3dyYXBVJzpcbiAgICAgICAgICBjYXNlICd3cmFwVic6XG5cbiAgICAgICAgICAgIC8vIHNvbWUgZmlsZXMgaGF2ZSB2YWx1ZXMgZm9yIHdyYXBVL3dyYXBWIHdoaWNoIGJlY29tZSBOYU4gdmlhIHBhcnNlSW50XG5cbiAgICAgICAgICAgIGlmICggY2hpbGQudGV4dENvbnRlbnQudG9VcHBlckNhc2UoKSA9PT0gJ1RSVUUnICkge1xuXG4gICAgICAgICAgICAgIGRhdGEudGVjaG5pcXVlWyBjaGlsZC5ub2RlTmFtZSBdID0gMTtcblxuICAgICAgICAgICAgfSBlbHNlIGlmICggY2hpbGQudGV4dENvbnRlbnQudG9VcHBlckNhc2UoKSA9PT0gJ0ZBTFNFJyApIHtcblxuICAgICAgICAgICAgICBkYXRhLnRlY2huaXF1ZVsgY2hpbGQubm9kZU5hbWUgXSA9IDA7XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgZGF0YS50ZWNobmlxdWVbIGNoaWxkLm5vZGVOYW1lIF0gPSBwYXJzZUludCggY2hpbGQudGV4dENvbnRlbnQgKTtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICB9XG5cbiAgICAgIH1cblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBhcnNlRWZmZWN0RXh0cmEoIHhtbCApIHtcblxuICAgICAgdmFyIGRhdGEgPSB7fTtcblxuICAgICAgZm9yICggdmFyIGkgPSAwLCBsID0geG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuICAgICAgICB2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuXG4gICAgICAgIGlmICggY2hpbGQubm9kZVR5cGUgIT09IDEgKSBjb250aW51ZTtcblxuICAgICAgICBzd2l0Y2ggKCBjaGlsZC5ub2RlTmFtZSApIHtcblxuICAgICAgICAgIGNhc2UgJ3RlY2huaXF1ZSc6XG4gICAgICAgICAgICBkYXRhLnRlY2huaXF1ZSA9IHBhcnNlRWZmZWN0RXh0cmFUZWNobmlxdWUoIGNoaWxkICk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICB9XG5cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGRhdGE7XG5cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwYXJzZUVmZmVjdEV4dHJhVGVjaG5pcXVlKCB4bWwgKSB7XG5cbiAgICAgIHZhciBkYXRhID0ge307XG5cbiAgICAgIGZvciAoIHZhciBpID0gMCwgbCA9IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG5cbiAgICAgICAgdmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcblxuICAgICAgICBpZiAoIGNoaWxkLm5vZGVUeXBlICE9PSAxICkgY29udGludWU7XG5cbiAgICAgICAgc3dpdGNoICggY2hpbGQubm9kZU5hbWUgKSB7XG5cbiAgICAgICAgICBjYXNlICdkb3VibGVfc2lkZWQnOlxuICAgICAgICAgICAgZGF0YVsgY2hpbGQubm9kZU5hbWUgXSA9IHBhcnNlSW50KCBjaGlsZC50ZXh0Q29udGVudCApO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgfVxuXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBkYXRhO1xuXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnVpbGRFZmZlY3QoIGRhdGEgKSB7XG5cbiAgICAgIHJldHVybiBkYXRhO1xuXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0RWZmZWN0KCBpZCApIHtcblxuICAgICAgcmV0dXJuIGdldEJ1aWxkKCBsaWJyYXJ5LmVmZmVjdHNbIGlkIF0sIGJ1aWxkRWZmZWN0ICk7XG5cbiAgICB9XG5cbiAgICAvLyBtYXRlcmlhbFxuXG4gICAgZnVuY3Rpb24gcGFyc2VNYXRlcmlhbCggeG1sICkge1xuXG4gICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgbmFtZTogeG1sLmdldEF0dHJpYnV0ZSggJ25hbWUnIClcbiAgICAgIH07XG5cbiAgICAgIGZvciAoIHZhciBpID0gMCwgbCA9IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG5cbiAgICAgICAgdmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcblxuICAgICAgICBpZiAoIGNoaWxkLm5vZGVUeXBlICE9PSAxICkgY29udGludWU7XG5cbiAgICAgICAgc3dpdGNoICggY2hpbGQubm9kZU5hbWUgKSB7XG5cbiAgICAgICAgICBjYXNlICdpbnN0YW5jZV9lZmZlY3QnOlxuICAgICAgICAgICAgZGF0YS51cmwgPSBwYXJzZUlkKCBjaGlsZC5nZXRBdHRyaWJ1dGUoICd1cmwnICkgKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIH1cblxuICAgICAgfVxuXG4gICAgICBsaWJyYXJ5Lm1hdGVyaWFsc1sgeG1sLmdldEF0dHJpYnV0ZSggJ2lkJyApIF0gPSBkYXRhO1xuXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0VGV4dHVyZUxvYWRlciggaW1hZ2UgKSB7XG5cbiAgICAgIHZhciBsb2FkZXI7XG5cbiAgICAgIHZhciBleHRlbnNpb24gPSBpbWFnZS5zbGljZSggKCBpbWFnZS5sYXN0SW5kZXhPZiggJy4nICkgLSAxID4+PiAwICkgKyAyICk7IC8vIGh0dHA6Ly93d3cuanN0aXBzLmNvL2VuL2phdmFzY3JpcHQvZ2V0LWZpbGUtZXh0ZW5zaW9uL1xuICAgICAgZXh0ZW5zaW9uID0gZXh0ZW5zaW9uLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgIHN3aXRjaCAoIGV4dGVuc2lvbiApIHtcblxuICAgICAgICBjYXNlICd0Z2EnOlxuICAgICAgICAgIGxvYWRlciA9IHRnYUxvYWRlcjtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGxvYWRlciA9IHRleHR1cmVMb2FkZXI7XG5cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGxvYWRlcjtcblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGJ1aWxkTWF0ZXJpYWwoIGRhdGEgKSB7XG5cbiAgICAgIHZhciBlZmZlY3QgPSBnZXRFZmZlY3QoIGRhdGEudXJsICk7XG4gICAgICB2YXIgdGVjaG5pcXVlID0gZWZmZWN0LnByb2ZpbGUudGVjaG5pcXVlO1xuICAgICAgdmFyIGV4dHJhID0gZWZmZWN0LnByb2ZpbGUuZXh0cmE7XG5cbiAgICAgIHZhciBtYXRlcmlhbDtcblxuICAgICAgc3dpdGNoICggdGVjaG5pcXVlLnR5cGUgKSB7XG5cbiAgICAgICAgY2FzZSAncGhvbmcnOlxuICAgICAgICBjYXNlICdibGlubic6XG4gICAgICAgICAgbWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWwoKTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlICdsYW1iZXJ0JzpcbiAgICAgICAgICBtYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoTGFtYmVydE1hdGVyaWFsKCk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBtYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCgpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICB9XG5cbiAgICAgIG1hdGVyaWFsLm5hbWUgPSBkYXRhLm5hbWU7XG5cbiAgICAgIGZ1bmN0aW9uIGdldFRleHR1cmUoIHRleHR1cmVPYmplY3QgKSB7XG5cbiAgICAgICAgdmFyIHNhbXBsZXIgPSBlZmZlY3QucHJvZmlsZS5zYW1wbGVyc1sgdGV4dHVyZU9iamVjdC5pZCBdO1xuICAgICAgICB2YXIgaW1hZ2UgPSBudWxsO1xuXG4gICAgICAgIC8vIGdldCBpbWFnZVxuXG4gICAgICAgIGlmICggc2FtcGxlciAhPT0gdW5kZWZpbmVkICkge1xuXG4gICAgICAgICAgdmFyIHN1cmZhY2UgPSBlZmZlY3QucHJvZmlsZS5zdXJmYWNlc1sgc2FtcGxlci5zb3VyY2UgXTtcbiAgICAgICAgICBpbWFnZSA9IGdldEltYWdlKCBzdXJmYWNlLmluaXRfZnJvbSApO1xuXG4gICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICBjb25zb2xlLndhcm4oICdUSFJFRS5Db2xsYWRhTG9hZGVyOiBVbmRlZmluZWQgc2FtcGxlci4gQWNjZXNzIGltYWdlIGRpcmVjdGx5IChzZWUgIzEyNTMwKS4nICk7XG4gICAgICAgICAgaW1hZ2UgPSBnZXRJbWFnZSggdGV4dHVyZU9iamVjdC5pZCApO1xuXG4gICAgICAgIH1cblxuICAgICAgICAvLyBjcmVhdGUgdGV4dHVyZSBpZiBpbWFnZSBpcyBhdmFpYWJsZVxuXG4gICAgICAgIGlmICggaW1hZ2UgIT09IG51bGwgKSB7XG5cbiAgICAgICAgICB2YXIgbG9hZGVyID0gZ2V0VGV4dHVyZUxvYWRlciggaW1hZ2UgKTtcblxuICAgICAgICAgIGlmICggbG9hZGVyICE9PSB1bmRlZmluZWQgKSB7XG5cbiAgICAgICAgICAgIHZhciB0ZXh0dXJlID0gbG9hZGVyLmxvYWQoIGltYWdlICk7XG5cbiAgICAgICAgICAgIHZhciBleHRyYSA9IHRleHR1cmVPYmplY3QuZXh0cmE7XG5cbiAgICAgICAgICAgIGlmICggZXh0cmEgIT09IHVuZGVmaW5lZCAmJiBleHRyYS50ZWNobmlxdWUgIT09IHVuZGVmaW5lZCAmJiBpc0VtcHR5KCBleHRyYS50ZWNobmlxdWUgKSA9PT0gZmFsc2UgKSB7XG5cbiAgICAgICAgICAgICAgdmFyIHRlY2huaXF1ZSA9IGV4dHJhLnRlY2huaXF1ZTtcblxuICAgICAgICAgICAgICB0ZXh0dXJlLndyYXBTID0gdGVjaG5pcXVlLndyYXBVID8gVEhSRUUuUmVwZWF0V3JhcHBpbmcgOiBUSFJFRS5DbGFtcFRvRWRnZVdyYXBwaW5nO1xuICAgICAgICAgICAgICB0ZXh0dXJlLndyYXBUID0gdGVjaG5pcXVlLndyYXBWID8gVEhSRUUuUmVwZWF0V3JhcHBpbmcgOiBUSFJFRS5DbGFtcFRvRWRnZVdyYXBwaW5nO1xuXG4gICAgICAgICAgICAgIHRleHR1cmUub2Zmc2V0LnNldCggdGVjaG5pcXVlLm9mZnNldFUgfHwgMCwgdGVjaG5pcXVlLm9mZnNldFYgfHwgMCApO1xuICAgICAgICAgICAgICB0ZXh0dXJlLnJlcGVhdC5zZXQoIHRlY2huaXF1ZS5yZXBlYXRVIHx8IDEsIHRlY2huaXF1ZS5yZXBlYXRWIHx8IDEgKTtcblxuICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICB0ZXh0dXJlLndyYXBTID0gVEhSRUUuUmVwZWF0V3JhcHBpbmc7XG4gICAgICAgICAgICAgIHRleHR1cmUud3JhcFQgPSBUSFJFRS5SZXBlYXRXcmFwcGluZztcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdGV4dHVyZTtcblxuICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgIGNvbnNvbGUud2FybiggJ1RIUkVFLkNvbGxhZGFMb2FkZXI6IExvYWRlciBmb3IgdGV4dHVyZSAlcyBub3QgZm91bmQuJywgaW1hZ2UgKTtcblxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgICB9XG5cbiAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgIGNvbnNvbGUud2FybiggJ1RIUkVFLkNvbGxhZGFMb2FkZXI6IENvdWxkblxcJ3QgY3JlYXRlIHRleHR1cmUgd2l0aCBJRDonLCB0ZXh0dXJlT2JqZWN0LmlkICk7XG5cbiAgICAgICAgICByZXR1cm4gbnVsbDtcblxuICAgICAgICB9XG5cbiAgICAgIH1cblxuICAgICAgdmFyIHBhcmFtZXRlcnMgPSB0ZWNobmlxdWUucGFyYW1ldGVycztcblxuICAgICAgZm9yICggdmFyIGtleSBpbiBwYXJhbWV0ZXJzICkge1xuXG4gICAgICAgIHZhciBwYXJhbWV0ZXIgPSBwYXJhbWV0ZXJzWyBrZXkgXTtcblxuICAgICAgICBzd2l0Y2ggKCBrZXkgKSB7XG5cbiAgICAgICAgICBjYXNlICdkaWZmdXNlJzpcbiAgICAgICAgICAgIGlmICggcGFyYW1ldGVyLmNvbG9yICkgbWF0ZXJpYWwuY29sb3IuZnJvbUFycmF5KCBwYXJhbWV0ZXIuY29sb3IgKTtcbiAgICAgICAgICAgIGlmICggcGFyYW1ldGVyLnRleHR1cmUgKSBtYXRlcmlhbC5tYXAgPSBnZXRUZXh0dXJlKCBwYXJhbWV0ZXIudGV4dHVyZSApO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnc3BlY3VsYXInOlxuICAgICAgICAgICAgaWYgKCBwYXJhbWV0ZXIuY29sb3IgJiYgbWF0ZXJpYWwuc3BlY3VsYXIgKSBtYXRlcmlhbC5zcGVjdWxhci5mcm9tQXJyYXkoIHBhcmFtZXRlci5jb2xvciApO1xuICAgICAgICAgICAgaWYgKCBwYXJhbWV0ZXIudGV4dHVyZSApIG1hdGVyaWFsLnNwZWN1bGFyTWFwID0gZ2V0VGV4dHVyZSggcGFyYW1ldGVyLnRleHR1cmUgKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgJ2J1bXAnOlxuICAgICAgICAgICAgaWYgKCBwYXJhbWV0ZXIudGV4dHVyZSApIG1hdGVyaWFsLm5vcm1hbE1hcCA9IGdldFRleHR1cmUoIHBhcmFtZXRlci50ZXh0dXJlICk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdhbWJpZW50JzpcbiAgICAgICAgICAgIGlmICggcGFyYW1ldGVyLnRleHR1cmUgKSBtYXRlcmlhbC5saWdodE1hcCA9IGdldFRleHR1cmUoIHBhcmFtZXRlci50ZXh0dXJlICk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdzaGluaW5lc3MnOlxuICAgICAgICAgICAgaWYgKCBwYXJhbWV0ZXIuZmxvYXQgJiYgbWF0ZXJpYWwuc2hpbmluZXNzICkgbWF0ZXJpYWwuc2hpbmluZXNzID0gcGFyYW1ldGVyLmZsb2F0O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnZW1pc3Npb24nOlxuICAgICAgICAgICAgaWYgKCBwYXJhbWV0ZXIuY29sb3IgJiYgbWF0ZXJpYWwuZW1pc3NpdmUgKSBtYXRlcmlhbC5lbWlzc2l2ZS5mcm9tQXJyYXkoIHBhcmFtZXRlci5jb2xvciApO1xuICAgICAgICAgICAgaWYgKCBwYXJhbWV0ZXIudGV4dHVyZSApIG1hdGVyaWFsLmVtaXNzaXZlTWFwID0gZ2V0VGV4dHVyZSggcGFyYW1ldGVyLnRleHR1cmUgKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIH1cblxuICAgICAgfVxuXG4gICAgICAvL1xuXG4gICAgICB2YXIgdHJhbnNwYXJlbnQgPSBwYXJhbWV0ZXJzWyAndHJhbnNwYXJlbnQnIF07XG4gICAgICB2YXIgdHJhbnNwYXJlbmN5ID0gcGFyYW1ldGVyc1sgJ3RyYW5zcGFyZW5jeScgXTtcblxuICAgICAgLy8gPHRyYW5zcGFyZW5jeT4gZG9lcyBub3QgZXhpc3QgYnV0IDx0cmFuc3BhcmVudD5cblxuICAgICAgaWYgKCB0cmFuc3BhcmVuY3kgPT09IHVuZGVmaW5lZCAmJiB0cmFuc3BhcmVudCApIHtcblxuICAgICAgICB0cmFuc3BhcmVuY3kgPSB7XG4gICAgICAgICAgZmxvYXQ6IDFcbiAgICAgICAgfTtcblxuICAgICAgfVxuXG4gICAgICAvLyA8dHJhbnNwYXJlbnQ+IGRvZXMgbm90IGV4aXN0IGJ1dCA8dHJhbnNwYXJlbmN5PlxuXG4gICAgICBpZiAoIHRyYW5zcGFyZW50ID09PSB1bmRlZmluZWQgJiYgdHJhbnNwYXJlbmN5ICkge1xuXG4gICAgICAgIHRyYW5zcGFyZW50ID0ge1xuICAgICAgICAgIG9wYXF1ZTogJ0FfT05FJyxcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBjb2xvcjogWyAxLCAxLCAxLCAxIF1cbiAgICAgICAgICB9IH07XG5cbiAgICAgIH1cblxuICAgICAgaWYgKCB0cmFuc3BhcmVudCAmJiB0cmFuc3BhcmVuY3kgKSB7XG5cbiAgICAgICAgLy8gaGFuZGxlIGNhc2UgaWYgYSB0ZXh0dXJlIGV4aXN0cyBidXQgbm8gY29sb3JcblxuICAgICAgICBpZiAoIHRyYW5zcGFyZW50LmRhdGEudGV4dHVyZSApIHtcblxuICAgICAgICAgIC8vIHdlIGRvIG5vdCBzZXQgYW4gYWxwaGEgbWFwIChzZWUgIzEzNzkyKVxuXG4gICAgICAgICAgbWF0ZXJpYWwudHJhbnNwYXJlbnQgPSB0cnVlO1xuXG4gICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICB2YXIgY29sb3IgPSB0cmFuc3BhcmVudC5kYXRhLmNvbG9yO1xuXG4gICAgICAgICAgc3dpdGNoICggdHJhbnNwYXJlbnQub3BhcXVlICkge1xuXG4gICAgICAgICAgICBjYXNlICdBX09ORSc6XG4gICAgICAgICAgICAgIG1hdGVyaWFsLm9wYWNpdHkgPSBjb2xvclsgMyBdICogdHJhbnNwYXJlbmN5LmZsb2F0O1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ1JHQl9aRVJPJzpcbiAgICAgICAgICAgICAgbWF0ZXJpYWwub3BhY2l0eSA9IDEgLSAoIGNvbG9yWyAwIF0gKiB0cmFuc3BhcmVuY3kuZmxvYXQgKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdBX1pFUk8nOlxuICAgICAgICAgICAgICBtYXRlcmlhbC5vcGFjaXR5ID0gMSAtICggY29sb3JbIDMgXSAqIHRyYW5zcGFyZW5jeS5mbG9hdCApO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ1JHQl9PTkUnOlxuICAgICAgICAgICAgICBtYXRlcmlhbC5vcGFjaXR5ID0gY29sb3JbIDAgXSAqIHRyYW5zcGFyZW5jeS5mbG9hdDtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICBjb25zb2xlLndhcm4oICdUSFJFRS5Db2xsYWRhTG9hZGVyOiBJbnZhbGlkIG9wYXF1ZSB0eXBlIFwiJXNcIiBvZiB0cmFuc3BhcmVudCB0YWcuJywgdHJhbnNwYXJlbnQub3BhcXVlICk7XG5cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIG1hdGVyaWFsLm9wYWNpdHkgPCAxICkgbWF0ZXJpYWwudHJhbnNwYXJlbnQgPSB0cnVlO1xuXG4gICAgICAgIH1cblxuICAgICAgfVxuXG4gICAgICAvL1xuXG4gICAgICBpZiAoIGV4dHJhICE9PSB1bmRlZmluZWQgJiYgZXh0cmEudGVjaG5pcXVlICE9PSB1bmRlZmluZWQgJiYgZXh0cmEudGVjaG5pcXVlLmRvdWJsZV9zaWRlZCA9PT0gMSApIHtcblxuICAgICAgICBtYXRlcmlhbC5zaWRlID0gVEhSRUUuRG91YmxlU2lkZTtcblxuICAgICAgfVxuXG4gICAgICByZXR1cm4gbWF0ZXJpYWw7XG5cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRNYXRlcmlhbCggaWQgKSB7XG5cbiAgICAgIHJldHVybiBnZXRCdWlsZCggbGlicmFyeS5tYXRlcmlhbHNbIGlkIF0sIGJ1aWxkTWF0ZXJpYWwgKTtcblxuICAgIH1cblxuICAgIC8vIGNhbWVyYVxuXG4gICAgZnVuY3Rpb24gcGFyc2VDYW1lcmEoIHhtbCApIHtcblxuICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgIG5hbWU6IHhtbC5nZXRBdHRyaWJ1dGUoICduYW1lJyApXG4gICAgICB9O1xuXG4gICAgICBmb3IgKCB2YXIgaSA9IDAsIGwgPSB4bWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuXG4gICAgICAgIHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG5cbiAgICAgICAgaWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuXG4gICAgICAgIHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuXG4gICAgICAgICAgY2FzZSAnb3B0aWNzJzpcbiAgICAgICAgICAgIGRhdGEub3B0aWNzID0gcGFyc2VDYW1lcmFPcHRpY3MoIGNoaWxkICk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICB9XG5cbiAgICAgIH1cblxuICAgICAgbGlicmFyeS5jYW1lcmFzWyB4bWwuZ2V0QXR0cmlidXRlKCAnaWQnICkgXSA9IGRhdGE7XG5cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwYXJzZUNhbWVyYU9wdGljcyggeG1sICkge1xuXG4gICAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPCB4bWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkgKysgKSB7XG5cbiAgICAgICAgdmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcblxuICAgICAgICBzd2l0Y2ggKCBjaGlsZC5ub2RlTmFtZSApIHtcblxuICAgICAgICAgIGNhc2UgJ3RlY2huaXF1ZV9jb21tb24nOlxuICAgICAgICAgICAgcmV0dXJuIHBhcnNlQ2FtZXJhVGVjaG5pcXVlKCBjaGlsZCApO1xuXG4gICAgICAgIH1cblxuICAgICAgfVxuXG4gICAgICByZXR1cm4ge307XG5cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwYXJzZUNhbWVyYVRlY2huaXF1ZSggeG1sICkge1xuXG4gICAgICB2YXIgZGF0YSA9IHt9O1xuXG4gICAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPCB4bWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkgKysgKSB7XG5cbiAgICAgICAgdmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcblxuICAgICAgICBzd2l0Y2ggKCBjaGlsZC5ub2RlTmFtZSApIHtcblxuICAgICAgICAgIGNhc2UgJ3BlcnNwZWN0aXZlJzpcbiAgICAgICAgICBjYXNlICdvcnRob2dyYXBoaWMnOlxuXG4gICAgICAgICAgICBkYXRhLnRlY2huaXF1ZSA9IGNoaWxkLm5vZGVOYW1lO1xuICAgICAgICAgICAgZGF0YS5wYXJhbWV0ZXJzID0gcGFyc2VDYW1lcmFQYXJhbWV0ZXJzKCBjaGlsZCApO1xuXG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICB9XG5cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGRhdGE7XG5cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwYXJzZUNhbWVyYVBhcmFtZXRlcnMoIHhtbCApIHtcblxuICAgICAgdmFyIGRhdGEgPSB7fTtcblxuICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDwgeG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpICsrICkge1xuXG4gICAgICAgIHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG5cbiAgICAgICAgc3dpdGNoICggY2hpbGQubm9kZU5hbWUgKSB7XG5cbiAgICAgICAgICBjYXNlICd4Zm92JzpcbiAgICAgICAgICBjYXNlICd5Zm92JzpcbiAgICAgICAgICBjYXNlICd4bWFnJzpcbiAgICAgICAgICBjYXNlICd5bWFnJzpcbiAgICAgICAgICBjYXNlICd6bmVhcic6XG4gICAgICAgICAgY2FzZSAnemZhcic6XG4gICAgICAgICAgY2FzZSAnYXNwZWN0X3JhdGlvJzpcbiAgICAgICAgICAgIGRhdGFbIGNoaWxkLm5vZGVOYW1lIF0gPSBwYXJzZUZsb2F0KCBjaGlsZC50ZXh0Q29udGVudCApO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgfVxuXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBkYXRhO1xuXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnVpbGRDYW1lcmEoIGRhdGEgKSB7XG5cbiAgICAgIHZhciBjYW1lcmE7XG5cbiAgICAgIHN3aXRjaCAoIGRhdGEub3B0aWNzLnRlY2huaXF1ZSApIHtcblxuICAgICAgICBjYXNlICdwZXJzcGVjdGl2ZSc6XG4gICAgICAgICAgY2FtZXJhID0gbmV3IFRIUkVFLlBlcnNwZWN0aXZlQ2FtZXJhKFxuICAgICAgICAgICAgZGF0YS5vcHRpY3MucGFyYW1ldGVycy55Zm92LFxuICAgICAgICAgICAgZGF0YS5vcHRpY3MucGFyYW1ldGVycy5hc3BlY3RfcmF0aW8sXG4gICAgICAgICAgICBkYXRhLm9wdGljcy5wYXJhbWV0ZXJzLnpuZWFyLFxuICAgICAgICAgICAgZGF0YS5vcHRpY3MucGFyYW1ldGVycy56ZmFyXG4gICAgICAgICAgKTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlICdvcnRob2dyYXBoaWMnOlxuICAgICAgICAgIHZhciB5bWFnID0gZGF0YS5vcHRpY3MucGFyYW1ldGVycy55bWFnO1xuICAgICAgICAgIHZhciB4bWFnID0gZGF0YS5vcHRpY3MucGFyYW1ldGVycy54bWFnO1xuICAgICAgICAgIHZhciBhc3BlY3RSYXRpbyA9IGRhdGEub3B0aWNzLnBhcmFtZXRlcnMuYXNwZWN0X3JhdGlvO1xuXG4gICAgICAgICAgeG1hZyA9ICggeG1hZyA9PT0gdW5kZWZpbmVkICkgPyAoIHltYWcgKiBhc3BlY3RSYXRpbyApIDogeG1hZztcbiAgICAgICAgICB5bWFnID0gKCB5bWFnID09PSB1bmRlZmluZWQgKSA/ICggeG1hZyAvIGFzcGVjdFJhdGlvICkgOiB5bWFnO1xuXG4gICAgICAgICAgeG1hZyAqPSAwLjU7XG4gICAgICAgICAgeW1hZyAqPSAwLjU7XG5cbiAgICAgICAgICBjYW1lcmEgPSBuZXcgVEhSRUUuT3J0aG9ncmFwaGljQ2FtZXJhKFxuICAgICAgICAgICAgLSB4bWFnLCB4bWFnLCB5bWFnLCAtIHltYWcsIC8vIGxlZnQsIHJpZ2h0LCB0b3AsIGJvdHRvbVxuICAgICAgICAgICAgZGF0YS5vcHRpY3MucGFyYW1ldGVycy56bmVhcixcbiAgICAgICAgICAgIGRhdGEub3B0aWNzLnBhcmFtZXRlcnMuemZhclxuICAgICAgICAgICk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBjYW1lcmEgPSBuZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoKTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgfVxuXG4gICAgICBjYW1lcmEubmFtZSA9IGRhdGEubmFtZTtcblxuICAgICAgcmV0dXJuIGNhbWVyYTtcblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldENhbWVyYSggaWQgKSB7XG5cbiAgICAgIHZhciBkYXRhID0gbGlicmFyeS5jYW1lcmFzWyBpZCBdO1xuXG4gICAgICBpZiAoIGRhdGEgIT09IHVuZGVmaW5lZCApIHtcblxuICAgICAgICByZXR1cm4gZ2V0QnVpbGQoIGRhdGEsIGJ1aWxkQ2FtZXJhICk7XG5cbiAgICAgIH1cblxuICAgICAgY29uc29sZS53YXJuKCAnVEhSRUUuQ29sbGFkYUxvYWRlcjogQ291bGRuXFwndCBmaW5kIGNhbWVyYSB3aXRoIElEOicsIGlkICk7XG5cbiAgICAgIHJldHVybiBudWxsO1xuXG4gICAgfVxuXG4gICAgLy8gbGlnaHRcblxuICAgIGZ1bmN0aW9uIHBhcnNlTGlnaHQoIHhtbCApIHtcblxuICAgICAgdmFyIGRhdGEgPSB7fTtcblxuICAgICAgZm9yICggdmFyIGkgPSAwLCBsID0geG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuICAgICAgICB2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuXG4gICAgICAgIGlmICggY2hpbGQubm9kZVR5cGUgIT09IDEgKSBjb250aW51ZTtcblxuICAgICAgICBzd2l0Y2ggKCBjaGlsZC5ub2RlTmFtZSApIHtcblxuICAgICAgICAgIGNhc2UgJ3RlY2huaXF1ZV9jb21tb24nOlxuICAgICAgICAgICAgZGF0YSA9IHBhcnNlTGlnaHRUZWNobmlxdWUoIGNoaWxkICk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICB9XG5cbiAgICAgIH1cblxuICAgICAgbGlicmFyeS5saWdodHNbIHhtbC5nZXRBdHRyaWJ1dGUoICdpZCcgKSBdID0gZGF0YTtcblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBhcnNlTGlnaHRUZWNobmlxdWUoIHhtbCApIHtcblxuICAgICAgdmFyIGRhdGEgPSB7fTtcblxuICAgICAgZm9yICggdmFyIGkgPSAwLCBsID0geG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuICAgICAgICB2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuXG4gICAgICAgIGlmICggY2hpbGQubm9kZVR5cGUgIT09IDEgKSBjb250aW51ZTtcblxuICAgICAgICBzd2l0Y2ggKCBjaGlsZC5ub2RlTmFtZSApIHtcblxuICAgICAgICAgIGNhc2UgJ2RpcmVjdGlvbmFsJzpcbiAgICAgICAgICBjYXNlICdwb2ludCc6XG4gICAgICAgICAgY2FzZSAnc3BvdCc6XG4gICAgICAgICAgY2FzZSAnYW1iaWVudCc6XG5cbiAgICAgICAgICAgIGRhdGEudGVjaG5pcXVlID0gY2hpbGQubm9kZU5hbWU7XG4gICAgICAgICAgICBkYXRhLnBhcmFtZXRlcnMgPSBwYXJzZUxpZ2h0UGFyYW1ldGVycyggY2hpbGQgKTtcblxuICAgICAgICB9XG5cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGRhdGE7XG5cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwYXJzZUxpZ2h0UGFyYW1ldGVycyggeG1sICkge1xuXG4gICAgICB2YXIgZGF0YSA9IHt9O1xuXG4gICAgICBmb3IgKCB2YXIgaSA9IDAsIGwgPSB4bWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuXG4gICAgICAgIHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG5cbiAgICAgICAgaWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuXG4gICAgICAgIHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuXG4gICAgICAgICAgY2FzZSAnY29sb3InOlxuICAgICAgICAgICAgdmFyIGFycmF5ID0gcGFyc2VGbG9hdHMoIGNoaWxkLnRleHRDb250ZW50ICk7XG4gICAgICAgICAgICBkYXRhLmNvbG9yID0gbmV3IFRIUkVFLkNvbG9yKCkuZnJvbUFycmF5KCBhcnJheSApO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlICdmYWxsb2ZmX2FuZ2xlJzpcbiAgICAgICAgICAgIGRhdGEuZmFsbG9mZkFuZ2xlID0gcGFyc2VGbG9hdCggY2hpbGQudGV4dENvbnRlbnQgKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAncXVhZHJhdGljX2F0dGVudWF0aW9uJzpcbiAgICAgICAgICAgIHZhciBmID0gcGFyc2VGbG9hdCggY2hpbGQudGV4dENvbnRlbnQgKTtcbiAgICAgICAgICAgIGRhdGEuZGlzdGFuY2UgPSBmID8gTWF0aC5zcXJ0KCAxIC8gZiApIDogMDtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIH1cblxuICAgICAgfVxuXG4gICAgICByZXR1cm4gZGF0YTtcblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGJ1aWxkTGlnaHQoIGRhdGEgKSB7XG5cbiAgICAgIHZhciBsaWdodDtcblxuICAgICAgc3dpdGNoICggZGF0YS50ZWNobmlxdWUgKSB7XG5cbiAgICAgICAgY2FzZSAnZGlyZWN0aW9uYWwnOlxuICAgICAgICAgIGxpZ2h0ID0gbmV3IFRIUkVFLkRpcmVjdGlvbmFsTGlnaHQoKTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlICdwb2ludCc6XG4gICAgICAgICAgbGlnaHQgPSBuZXcgVEhSRUUuUG9pbnRMaWdodCgpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgJ3Nwb3QnOlxuICAgICAgICAgIGxpZ2h0ID0gbmV3IFRIUkVFLlNwb3RMaWdodCgpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgJ2FtYmllbnQnOlxuICAgICAgICAgIGxpZ2h0ID0gbmV3IFRIUkVFLkFtYmllbnRMaWdodCgpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICB9XG5cbiAgICAgIGlmICggZGF0YS5wYXJhbWV0ZXJzLmNvbG9yICkgbGlnaHQuY29sb3IuY29weSggZGF0YS5wYXJhbWV0ZXJzLmNvbG9yICk7XG4gICAgICBpZiAoIGRhdGEucGFyYW1ldGVycy5kaXN0YW5jZSApIGxpZ2h0LmRpc3RhbmNlID0gZGF0YS5wYXJhbWV0ZXJzLmRpc3RhbmNlO1xuXG4gICAgICByZXR1cm4gbGlnaHQ7XG5cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRMaWdodCggaWQgKSB7XG5cbiAgICAgIHZhciBkYXRhID0gbGlicmFyeS5saWdodHNbIGlkIF07XG5cbiAgICAgIGlmICggZGF0YSAhPT0gdW5kZWZpbmVkICkge1xuXG4gICAgICAgIHJldHVybiBnZXRCdWlsZCggZGF0YSwgYnVpbGRMaWdodCApO1xuXG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUud2FybiggJ1RIUkVFLkNvbGxhZGFMb2FkZXI6IENvdWxkblxcJ3QgZmluZCBsaWdodCB3aXRoIElEOicsIGlkICk7XG5cbiAgICAgIHJldHVybiBudWxsO1xuXG4gICAgfVxuXG4gICAgLy8gZ2VvbWV0cnlcblxuICAgIGZ1bmN0aW9uIHBhcnNlR2VvbWV0cnkoIHhtbCApIHtcblxuICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgIG5hbWU6IHhtbC5nZXRBdHRyaWJ1dGUoICduYW1lJyApLFxuICAgICAgICBzb3VyY2VzOiB7fSxcbiAgICAgICAgdmVydGljZXM6IHt9LFxuICAgICAgICBwcmltaXRpdmVzOiBbXVxuICAgICAgfTtcblxuICAgICAgdmFyIG1lc2ggPSBnZXRFbGVtZW50c0J5VGFnTmFtZSggeG1sLCAnbWVzaCcgKVsgMCBdO1xuXG4gICAgICAvLyB0aGUgZm9sbG93aW5nIHRhZ3MgaW5zaWRlIGdlb21ldHJ5IGFyZSBub3Qgc3VwcG9ydGVkIHlldCAoc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9tcmRvb2IvdGhyZWUuanMvcHVsbC8xMjYwNik6IGNvbnZleF9tZXNoLCBzcGxpbmUsIGJyZXBcbiAgICAgIGlmICggbWVzaCA9PT0gdW5kZWZpbmVkICkgcmV0dXJuO1xuXG4gICAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPCBtZXNoLmNoaWxkTm9kZXMubGVuZ3RoOyBpICsrICkge1xuXG4gICAgICAgIHZhciBjaGlsZCA9IG1lc2guY2hpbGROb2Rlc1sgaSBdO1xuXG4gICAgICAgIGlmICggY2hpbGQubm9kZVR5cGUgIT09IDEgKSBjb250aW51ZTtcblxuICAgICAgICB2YXIgaWQgPSBjaGlsZC5nZXRBdHRyaWJ1dGUoICdpZCcgKTtcblxuICAgICAgICBzd2l0Y2ggKCBjaGlsZC5ub2RlTmFtZSApIHtcblxuICAgICAgICAgIGNhc2UgJ3NvdXJjZSc6XG4gICAgICAgICAgICBkYXRhLnNvdXJjZXNbIGlkIF0gPSBwYXJzZVNvdXJjZSggY2hpbGQgKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAndmVydGljZXMnOlxuICAgICAgICAgICAgLy8gZGF0YS5zb3VyY2VzWyBpZCBdID0gZGF0YS5zb3VyY2VzWyBwYXJzZUlkKCBnZXRFbGVtZW50c0J5VGFnTmFtZSggY2hpbGQsICdpbnB1dCcgKVsgMCBdLmdldEF0dHJpYnV0ZSggJ3NvdXJjZScgKSApIF07XG4gICAgICAgICAgICBkYXRhLnZlcnRpY2VzID0gcGFyc2VHZW9tZXRyeVZlcnRpY2VzKCBjaGlsZCApO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlICdwb2x5Z29ucyc6XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oICdUSFJFRS5Db2xsYWRhTG9hZGVyOiBVbnN1cHBvcnRlZCBwcmltaXRpdmUgdHlwZTogJywgY2hpbGQubm9kZU5hbWUgKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAnbGluZXMnOlxuICAgICAgICAgIGNhc2UgJ2xpbmVzdHJpcHMnOlxuICAgICAgICAgIGNhc2UgJ3BvbHlsaXN0JzpcbiAgICAgICAgICBjYXNlICd0cmlhbmdsZXMnOlxuICAgICAgICAgICAgZGF0YS5wcmltaXRpdmVzLnB1c2goIHBhcnNlR2VvbWV0cnlQcmltaXRpdmUoIGNoaWxkICkgKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCBjaGlsZCApO1xuXG4gICAgICAgIH1cblxuICAgICAgfVxuXG4gICAgICBsaWJyYXJ5Lmdlb21ldHJpZXNbIHhtbC5nZXRBdHRyaWJ1dGUoICdpZCcgKSBdID0gZGF0YTtcblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBhcnNlU291cmNlKCB4bWwgKSB7XG5cbiAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICBhcnJheTogW10sXG4gICAgICAgIHN0cmlkZTogM1xuICAgICAgfTtcblxuICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDwgeG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpICsrICkge1xuXG4gICAgICAgIHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG5cbiAgICAgICAgaWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuXG4gICAgICAgIHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuXG4gICAgICAgICAgY2FzZSAnZmxvYXRfYXJyYXknOlxuICAgICAgICAgICAgZGF0YS5hcnJheSA9IHBhcnNlRmxvYXRzKCBjaGlsZC50ZXh0Q29udGVudCApO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlICdOYW1lX2FycmF5JzpcbiAgICAgICAgICAgIGRhdGEuYXJyYXkgPSBwYXJzZVN0cmluZ3MoIGNoaWxkLnRleHRDb250ZW50ICk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgJ3RlY2huaXF1ZV9jb21tb24nOlxuICAgICAgICAgICAgdmFyIGFjY2Vzc29yID0gZ2V0RWxlbWVudHNCeVRhZ05hbWUoIGNoaWxkLCAnYWNjZXNzb3InIClbIDAgXTtcblxuICAgICAgICAgICAgaWYgKCBhY2Nlc3NvciAhPT0gdW5kZWZpbmVkICkge1xuXG4gICAgICAgICAgICAgIGRhdGEuc3RyaWRlID0gcGFyc2VJbnQoIGFjY2Vzc29yLmdldEF0dHJpYnV0ZSggJ3N0cmlkZScgKSApO1xuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICB9XG5cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGRhdGE7XG5cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwYXJzZUdlb21ldHJ5VmVydGljZXMoIHhtbCApIHtcblxuICAgICAgdmFyIGRhdGEgPSB7fTtcblxuICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDwgeG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpICsrICkge1xuXG4gICAgICAgIHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG5cbiAgICAgICAgaWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuXG4gICAgICAgIGRhdGFbIGNoaWxkLmdldEF0dHJpYnV0ZSggJ3NlbWFudGljJyApIF0gPSBwYXJzZUlkKCBjaGlsZC5nZXRBdHRyaWJ1dGUoICdzb3VyY2UnICkgKTtcblxuICAgICAgfVxuXG4gICAgICByZXR1cm4gZGF0YTtcblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBhcnNlR2VvbWV0cnlQcmltaXRpdmUoIHhtbCApIHtcblxuICAgICAgdmFyIHByaW1pdGl2ZSA9IHtcbiAgICAgICAgdHlwZTogeG1sLm5vZGVOYW1lLFxuICAgICAgICBtYXRlcmlhbDogeG1sLmdldEF0dHJpYnV0ZSggJ21hdGVyaWFsJyApLFxuICAgICAgICBjb3VudDogcGFyc2VJbnQoIHhtbC5nZXRBdHRyaWJ1dGUoICdjb3VudCcgKSApLFxuICAgICAgICBpbnB1dHM6IHt9LFxuICAgICAgICBzdHJpZGU6IDAsXG4gICAgICAgIGhhc1VWOiBmYWxzZVxuICAgICAgfTtcblxuICAgICAgZm9yICggdmFyIGkgPSAwLCBsID0geG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuICAgICAgICB2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuXG4gICAgICAgIGlmICggY2hpbGQubm9kZVR5cGUgIT09IDEgKSBjb250aW51ZTtcblxuICAgICAgICBzd2l0Y2ggKCBjaGlsZC5ub2RlTmFtZSApIHtcblxuICAgICAgICAgIGNhc2UgJ2lucHV0JzpcbiAgICAgICAgICAgIHZhciBpZCA9IHBhcnNlSWQoIGNoaWxkLmdldEF0dHJpYnV0ZSggJ3NvdXJjZScgKSApO1xuICAgICAgICAgICAgdmFyIHNlbWFudGljID0gY2hpbGQuZ2V0QXR0cmlidXRlKCAnc2VtYW50aWMnICk7XG4gICAgICAgICAgICB2YXIgb2Zmc2V0ID0gcGFyc2VJbnQoIGNoaWxkLmdldEF0dHJpYnV0ZSggJ29mZnNldCcgKSApO1xuICAgICAgICAgICAgdmFyIHNldCA9IHBhcnNlSW50KCBjaGlsZC5nZXRBdHRyaWJ1dGUoICdzZXQnICkgKTtcbiAgICAgICAgICAgIHZhciBpbnB1dG5hbWUgPSAoIHNldCA+IDAgPyBzZW1hbnRpYyArIHNldCA6IHNlbWFudGljICk7XG4gICAgICAgICAgICBwcmltaXRpdmUuaW5wdXRzWyBpbnB1dG5hbWUgXSA9IHsgaWQ6IGlkLCBvZmZzZXQ6IG9mZnNldCB9O1xuICAgICAgICAgICAgcHJpbWl0aXZlLnN0cmlkZSA9IE1hdGgubWF4KCBwcmltaXRpdmUuc3RyaWRlLCBvZmZzZXQgKyAxICk7XG4gICAgICAgICAgICBpZiAoIHNlbWFudGljID09PSAnVEVYQ09PUkQnICkgcHJpbWl0aXZlLmhhc1VWID0gdHJ1ZTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAndmNvdW50JzpcbiAgICAgICAgICAgIHByaW1pdGl2ZS52Y291bnQgPSBwYXJzZUludHMoIGNoaWxkLnRleHRDb250ZW50ICk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgJ3AnOlxuICAgICAgICAgICAgcHJpbWl0aXZlLnAgPSBwYXJzZUludHMoIGNoaWxkLnRleHRDb250ZW50ICk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICB9XG5cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHByaW1pdGl2ZTtcblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdyb3VwUHJpbWl0aXZlcyggcHJpbWl0aXZlcyApIHtcblxuICAgICAgdmFyIGJ1aWxkID0ge307XG5cbiAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IHByaW1pdGl2ZXMubGVuZ3RoOyBpICsrICkge1xuXG4gICAgICAgIHZhciBwcmltaXRpdmUgPSBwcmltaXRpdmVzWyBpIF07XG5cbiAgICAgICAgaWYgKCBidWlsZFsgcHJpbWl0aXZlLnR5cGUgXSA9PT0gdW5kZWZpbmVkICkgYnVpbGRbIHByaW1pdGl2ZS50eXBlIF0gPSBbXTtcblxuICAgICAgICBidWlsZFsgcHJpbWl0aXZlLnR5cGUgXS5wdXNoKCBwcmltaXRpdmUgKTtcblxuICAgICAgfVxuXG4gICAgICByZXR1cm4gYnVpbGQ7XG5cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjaGVja1VWQ29vcmRpbmF0ZXMoIHByaW1pdGl2ZXMgKSB7XG5cbiAgICAgIHZhciBjb3VudCA9IDA7XG5cbiAgICAgIGZvciAoIHZhciBpID0gMCwgbCA9IHByaW1pdGl2ZXMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuICAgICAgICB2YXIgcHJpbWl0aXZlID0gcHJpbWl0aXZlc1sgaSBdO1xuXG4gICAgICAgIGlmICggcHJpbWl0aXZlLmhhc1VWID09PSB0cnVlICkge1xuXG4gICAgICAgICAgY291bnQgKys7XG5cbiAgICAgICAgfVxuXG4gICAgICB9XG5cbiAgICAgIGlmICggY291bnQgPiAwICYmIGNvdW50IDwgcHJpbWl0aXZlcy5sZW5ndGggKSB7XG5cbiAgICAgICAgcHJpbWl0aXZlcy51dnNOZWVkc0ZpeCA9IHRydWU7XG5cbiAgICAgIH1cblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGJ1aWxkR2VvbWV0cnkoIGRhdGEgKSB7XG5cbiAgICAgIHZhciBidWlsZCA9IHt9O1xuXG4gICAgICB2YXIgc291cmNlcyA9IGRhdGEuc291cmNlcztcbiAgICAgIHZhciB2ZXJ0aWNlcyA9IGRhdGEudmVydGljZXM7XG4gICAgICB2YXIgcHJpbWl0aXZlcyA9IGRhdGEucHJpbWl0aXZlcztcblxuICAgICAgaWYgKCBwcmltaXRpdmVzLmxlbmd0aCA9PT0gMCApIHJldHVybiB7fTtcblxuICAgICAgLy8gb3VyIGdvYWwgaXMgdG8gY3JlYXRlIG9uZSBidWZmZXIgZ2VvbWV0cnkgZm9yIGEgc2luZ2xlIHR5cGUgb2YgcHJpbWl0aXZlc1xuICAgICAgLy8gZmlyc3QsIHdlIGdyb3VwIGFsbCBwcmltaXRpdmVzIGJ5IHRoZWlyIHR5cGVcblxuICAgICAgdmFyIGdyb3VwZWRQcmltaXRpdmVzID0gZ3JvdXBQcmltaXRpdmVzKCBwcmltaXRpdmVzICk7XG5cbiAgICAgIGZvciAoIHZhciB0eXBlIGluIGdyb3VwZWRQcmltaXRpdmVzICkge1xuXG4gICAgICAgIHZhciBwcmltaXRpdmVUeXBlID0gZ3JvdXBlZFByaW1pdGl2ZXNbIHR5cGUgXTtcblxuICAgICAgICAvLyBzZWNvbmQsIGVuc3VyZSBjb25zaXN0ZW50IHV2IGNvb3JkaW5hdGVzIGZvciBlYWNoIHR5cGUgb2YgcHJpbWl0aXZlcyAocG9seWxpc3QsdHJpYW5nbGVzIG9yIGxpbmVzKVxuXG4gICAgICAgIGNoZWNrVVZDb29yZGluYXRlcyggcHJpbWl0aXZlVHlwZSApO1xuXG4gICAgICAgIC8vIHRoaXJkLCBjcmVhdGUgYSBidWZmZXIgZ2VvbWV0cnkgZm9yIGVhY2ggdHlwZSBvZiBwcmltaXRpdmVzXG5cbiAgICAgICAgYnVpbGRbIHR5cGUgXSA9IGJ1aWxkR2VvbWV0cnlUeXBlKCBwcmltaXRpdmVUeXBlLCBzb3VyY2VzLCB2ZXJ0aWNlcyApO1xuXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBidWlsZDtcblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGJ1aWxkR2VvbWV0cnlUeXBlKCBwcmltaXRpdmVzLCBzb3VyY2VzLCB2ZXJ0aWNlcyApIHtcblxuICAgICAgdmFyIGJ1aWxkID0ge307XG5cbiAgICAgIHZhciBwb3NpdGlvbiA9IHsgYXJyYXk6IFtdLCBzdHJpZGU6IDAgfTtcbiAgICAgIHZhciBub3JtYWwgPSB7IGFycmF5OiBbXSwgc3RyaWRlOiAwIH07XG4gICAgICB2YXIgdXYgPSB7IGFycmF5OiBbXSwgc3RyaWRlOiAwIH07XG4gICAgICB2YXIgdXYyID0geyBhcnJheTogW10sIHN0cmlkZTogMCB9O1xuICAgICAgdmFyIGNvbG9yID0geyBhcnJheTogW10sIHN0cmlkZTogMCB9O1xuXG4gICAgICB2YXIgc2tpbkluZGV4ID0geyBhcnJheTogW10sIHN0cmlkZTogNCB9O1xuICAgICAgdmFyIHNraW5XZWlnaHQgPSB7IGFycmF5OiBbXSwgc3RyaWRlOiA0IH07XG5cbiAgICAgIHZhciBnZW9tZXRyeSA9IG5ldyBUSFJFRS5CdWZmZXJHZW9tZXRyeSgpO1xuXG4gICAgICB2YXIgbWF0ZXJpYWxLZXlzID0gW107XG5cbiAgICAgIHZhciBzdGFydCA9IDA7XG5cbiAgICAgIGZvciAoIHZhciBwID0gMDsgcCA8IHByaW1pdGl2ZXMubGVuZ3RoOyBwICsrICkge1xuXG4gICAgICAgIHZhciBwcmltaXRpdmUgPSBwcmltaXRpdmVzWyBwIF07XG4gICAgICAgIHZhciBpbnB1dHMgPSBwcmltaXRpdmUuaW5wdXRzO1xuXG4gICAgICAgIC8vIGdyb3Vwc1xuXG4gICAgICAgIHZhciBjb3VudCA9IDA7XG5cbiAgICAgICAgc3dpdGNoICggcHJpbWl0aXZlLnR5cGUgKSB7XG5cbiAgICAgICAgICBjYXNlICdsaW5lcyc6XG4gICAgICAgICAgY2FzZSAnbGluZXN0cmlwcyc6XG4gICAgICAgICAgICBjb3VudCA9IHByaW1pdGl2ZS5jb3VudCAqIDI7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgJ3RyaWFuZ2xlcyc6XG4gICAgICAgICAgICBjb3VudCA9IHByaW1pdGl2ZS5jb3VudCAqIDM7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgJ3BvbHlsaXN0JzpcblxuICAgICAgICAgICAgZm9yICggdmFyIGcgPSAwOyBnIDwgcHJpbWl0aXZlLmNvdW50OyBnICsrICkge1xuXG4gICAgICAgICAgICAgIHZhciB2YyA9IHByaW1pdGl2ZS52Y291bnRbIGcgXTtcblxuICAgICAgICAgICAgICBzd2l0Y2ggKCB2YyApIHtcblxuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgIGNvdW50ICs9IDM7IC8vIHNpbmdsZSB0cmlhbmdsZVxuICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICBjb3VudCArPSA2OyAvLyBxdWFkLCBzdWJkaXZpZGVkIGludG8gdHdvIHRyaWFuZ2xlc1xuICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgY291bnQgKz0gKCB2YyAtIDIgKSAqIDM7IC8vIHBvbHlsaXN0IHdpdGggbW9yZSB0aGFuIGZvdXIgdmVydGljZXNcbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oICdUSFJFRS5Db2xsYWRhTG9hZGVyOiBVbmtub3cgcHJpbWl0aXZlIHR5cGU6JywgcHJpbWl0aXZlLnR5cGUgKTtcblxuICAgICAgICB9XG5cbiAgICAgICAgZ2VvbWV0cnkuYWRkR3JvdXAoIHN0YXJ0LCBjb3VudCwgcCApO1xuICAgICAgICBzdGFydCArPSBjb3VudDtcblxuICAgICAgICAvLyBtYXRlcmlhbFxuXG4gICAgICAgIGlmICggcHJpbWl0aXZlLm1hdGVyaWFsICkge1xuXG4gICAgICAgICAgbWF0ZXJpYWxLZXlzLnB1c2goIHByaW1pdGl2ZS5tYXRlcmlhbCApO1xuXG4gICAgICAgIH1cblxuICAgICAgICAvLyBnZW9tZXRyeSBkYXRhXG5cbiAgICAgICAgZm9yICggdmFyIG5hbWUgaW4gaW5wdXRzICkge1xuXG4gICAgICAgICAgdmFyIGlucHV0ID0gaW5wdXRzWyBuYW1lIF07XG5cbiAgICAgICAgICBzd2l0Y2ggKCBuYW1lICkge1xuXG4gICAgICAgICAgICBjYXNlICdWRVJURVgnOlxuICAgICAgICAgICAgICBmb3IgKCB2YXIga2V5IGluIHZlcnRpY2VzICkge1xuXG4gICAgICAgICAgICAgICAgdmFyIGlkID0gdmVydGljZXNbIGtleSBdO1xuXG4gICAgICAgICAgICAgICAgc3dpdGNoICgga2V5ICkge1xuXG4gICAgICAgICAgICAgICAgICBjYXNlICdQT1NJVElPTic6XG4gICAgICAgICAgICAgICAgICAgIHZhciBwcmV2TGVuZ3RoID0gcG9zaXRpb24uYXJyYXkubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICBidWlsZEdlb21ldHJ5RGF0YSggcHJpbWl0aXZlLCBzb3VyY2VzWyBpZCBdLCBpbnB1dC5vZmZzZXQsIHBvc2l0aW9uLmFycmF5ICk7XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uLnN0cmlkZSA9IHNvdXJjZXNbIGlkIF0uc3RyaWRlO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICggc291cmNlcy5za2luV2VpZ2h0cyAmJiBzb3VyY2VzLnNraW5JbmRpY2VzICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgYnVpbGRHZW9tZXRyeURhdGEoIHByaW1pdGl2ZSwgc291cmNlcy5za2luSW5kaWNlcywgaW5wdXQub2Zmc2V0LCBza2luSW5kZXguYXJyYXkgKTtcbiAgICAgICAgICAgICAgICAgICAgICBidWlsZEdlb21ldHJ5RGF0YSggcHJpbWl0aXZlLCBzb3VyY2VzLnNraW5XZWlnaHRzLCBpbnB1dC5vZmZzZXQsIHNraW5XZWlnaHQuYXJyYXkgKTtcblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gc2VlICMzODAzXG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCBwcmltaXRpdmUuaGFzVVYgPT09IGZhbHNlICYmIHByaW1pdGl2ZXMudXZzTmVlZHNGaXggPT09IHRydWUgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICB2YXIgY291bnQgPSAoIHBvc2l0aW9uLmFycmF5Lmxlbmd0aCAtIHByZXZMZW5ndGggKSAvIHBvc2l0aW9uLnN0cmlkZTtcblxuICAgICAgICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IGNvdW50OyBpICsrICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBmaWxsIG1pc3NpbmcgdXYgY29vcmRpbmF0ZXNcblxuICAgICAgICAgICAgICAgICAgICAgICAgdXYuYXJyYXkucHVzaCggMCwgMCApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgIGNhc2UgJ05PUk1BTCc6XG4gICAgICAgICAgICAgICAgICAgIGJ1aWxkR2VvbWV0cnlEYXRhKCBwcmltaXRpdmUsIHNvdXJjZXNbIGlkIF0sIGlucHV0Lm9mZnNldCwgbm9ybWFsLmFycmF5ICk7XG4gICAgICAgICAgICAgICAgICAgIG5vcm1hbC5zdHJpZGUgPSBzb3VyY2VzWyBpZCBdLnN0cmlkZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgIGNhc2UgJ0NPTE9SJzpcbiAgICAgICAgICAgICAgICAgICAgYnVpbGRHZW9tZXRyeURhdGEoIHByaW1pdGl2ZSwgc291cmNlc1sgaWQgXSwgaW5wdXQub2Zmc2V0LCBjb2xvci5hcnJheSApO1xuICAgICAgICAgICAgICAgICAgICBjb2xvci5zdHJpZGUgPSBzb3VyY2VzWyBpZCBdLnN0cmlkZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgIGNhc2UgJ1RFWENPT1JEJzpcbiAgICAgICAgICAgICAgICAgICAgYnVpbGRHZW9tZXRyeURhdGEoIHByaW1pdGl2ZSwgc291cmNlc1sgaWQgXSwgaW5wdXQub2Zmc2V0LCB1di5hcnJheSApO1xuICAgICAgICAgICAgICAgICAgICB1di5zdHJpZGUgPSBzb3VyY2VzWyBpZCBdLnN0cmlkZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgIGNhc2UgJ1RFWENPT1JEMSc6XG4gICAgICAgICAgICAgICAgICAgIGJ1aWxkR2VvbWV0cnlEYXRhKCBwcmltaXRpdmUsIHNvdXJjZXNbIGlkIF0sIGlucHV0Lm9mZnNldCwgdXYyLmFycmF5ICk7XG4gICAgICAgICAgICAgICAgICAgIHV2LnN0cmlkZSA9IHNvdXJjZXNbIGlkIF0uc3RyaWRlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCAnVEhSRUUuQ29sbGFkYUxvYWRlcjogU2VtYW50aWMgXCIlc1wiIG5vdCBoYW5kbGVkIGluIGdlb21ldHJ5IGJ1aWxkIHByb2Nlc3MuJywga2V5ICk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSAnTk9STUFMJzpcbiAgICAgICAgICAgICAgYnVpbGRHZW9tZXRyeURhdGEoIHByaW1pdGl2ZSwgc291cmNlc1sgaW5wdXQuaWQgXSwgaW5wdXQub2Zmc2V0LCBub3JtYWwuYXJyYXkgKTtcbiAgICAgICAgICAgICAgbm9ybWFsLnN0cmlkZSA9IHNvdXJjZXNbIGlucHV0LmlkIF0uc3RyaWRlO1xuICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSAnQ09MT1InOlxuICAgICAgICAgICAgICBidWlsZEdlb21ldHJ5RGF0YSggcHJpbWl0aXZlLCBzb3VyY2VzWyBpbnB1dC5pZCBdLCBpbnB1dC5vZmZzZXQsIGNvbG9yLmFycmF5ICk7XG4gICAgICAgICAgICAgIGNvbG9yLnN0cmlkZSA9IHNvdXJjZXNbIGlucHV0LmlkIF0uc3RyaWRlO1xuICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSAnVEVYQ09PUkQnOlxuICAgICAgICAgICAgICBidWlsZEdlb21ldHJ5RGF0YSggcHJpbWl0aXZlLCBzb3VyY2VzWyBpbnB1dC5pZCBdLCBpbnB1dC5vZmZzZXQsIHV2LmFycmF5ICk7XG4gICAgICAgICAgICAgIHV2LnN0cmlkZSA9IHNvdXJjZXNbIGlucHV0LmlkIF0uc3RyaWRlO1xuICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSAnVEVYQ09PUkQxJzpcbiAgICAgICAgICAgICAgYnVpbGRHZW9tZXRyeURhdGEoIHByaW1pdGl2ZSwgc291cmNlc1sgaW5wdXQuaWQgXSwgaW5wdXQub2Zmc2V0LCB1djIuYXJyYXkgKTtcbiAgICAgICAgICAgICAgdXYyLnN0cmlkZSA9IHNvdXJjZXNbIGlucHV0LmlkIF0uc3RyaWRlO1xuICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIH1cblxuICAgICAgICB9XG5cbiAgICAgIH1cblxuICAgICAgLy8gYnVpbGQgZ2VvbWV0cnlcblxuICAgICAgaWYgKCBwb3NpdGlvbi5hcnJheS5sZW5ndGggPiAwICkgZ2VvbWV0cnkuYWRkQXR0cmlidXRlKCAncG9zaXRpb24nLCBuZXcgVEhSRUUuRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZSggcG9zaXRpb24uYXJyYXksIHBvc2l0aW9uLnN0cmlkZSApICk7XG4gICAgICBpZiAoIG5vcm1hbC5hcnJheS5sZW5ndGggPiAwICkgZ2VvbWV0cnkuYWRkQXR0cmlidXRlKCAnbm9ybWFsJywgbmV3IFRIUkVFLkZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUoIG5vcm1hbC5hcnJheSwgbm9ybWFsLnN0cmlkZSApICk7XG4gICAgICBpZiAoIGNvbG9yLmFycmF5Lmxlbmd0aCA+IDAgKSBnZW9tZXRyeS5hZGRBdHRyaWJ1dGUoICdjb2xvcicsIG5ldyBUSFJFRS5GbG9hdDMyQnVmZmVyQXR0cmlidXRlKCBjb2xvci5hcnJheSwgY29sb3Iuc3RyaWRlICkgKTtcbiAgICAgIGlmICggdXYuYXJyYXkubGVuZ3RoID4gMCApIGdlb21ldHJ5LmFkZEF0dHJpYnV0ZSggJ3V2JywgbmV3IFRIUkVFLkZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUoIHV2LmFycmF5LCB1di5zdHJpZGUgKSApO1xuICAgICAgaWYgKCB1djIuYXJyYXkubGVuZ3RoID4gMCApIGdlb21ldHJ5LmFkZEF0dHJpYnV0ZSggJ3V2MicsIG5ldyBUSFJFRS5GbG9hdDMyQnVmZmVyQXR0cmlidXRlKCB1djIuYXJyYXksIHV2Mi5zdHJpZGUgKSApO1xuXG4gICAgICBpZiAoIHNraW5JbmRleC5hcnJheS5sZW5ndGggPiAwICkgZ2VvbWV0cnkuYWRkQXR0cmlidXRlKCAnc2tpbkluZGV4JywgbmV3IFRIUkVFLkZsb2F0MzJCdWZmZXJBdHRyaWJ1dGUoIHNraW5JbmRleC5hcnJheSwgc2tpbkluZGV4LnN0cmlkZSApICk7XG4gICAgICBpZiAoIHNraW5XZWlnaHQuYXJyYXkubGVuZ3RoID4gMCApIGdlb21ldHJ5LmFkZEF0dHJpYnV0ZSggJ3NraW5XZWlnaHQnLCBuZXcgVEhSRUUuRmxvYXQzMkJ1ZmZlckF0dHJpYnV0ZSggc2tpbldlaWdodC5hcnJheSwgc2tpbldlaWdodC5zdHJpZGUgKSApO1xuXG4gICAgICBidWlsZC5kYXRhID0gZ2VvbWV0cnk7XG4gICAgICBidWlsZC50eXBlID0gcHJpbWl0aXZlc1sgMCBdLnR5cGU7XG4gICAgICBidWlsZC5tYXRlcmlhbEtleXMgPSBtYXRlcmlhbEtleXM7XG5cbiAgICAgIHJldHVybiBidWlsZDtcblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGJ1aWxkR2VvbWV0cnlEYXRhKCBwcmltaXRpdmUsIHNvdXJjZSwgb2Zmc2V0LCBhcnJheSApIHtcblxuICAgICAgdmFyIGluZGljZXMgPSBwcmltaXRpdmUucDtcbiAgICAgIHZhciBzdHJpZGUgPSBwcmltaXRpdmUuc3RyaWRlO1xuICAgICAgdmFyIHZjb3VudCA9IHByaW1pdGl2ZS52Y291bnQ7XG5cbiAgICAgIGZ1bmN0aW9uIHB1c2hWZWN0b3IoIGkgKSB7XG5cbiAgICAgICAgdmFyIGluZGV4ID0gaW5kaWNlc1sgaSArIG9mZnNldCBdICogc291cmNlU3RyaWRlO1xuICAgICAgICB2YXIgbGVuZ3RoID0gaW5kZXggKyBzb3VyY2VTdHJpZGU7XG5cbiAgICAgICAgZm9yICggOyBpbmRleCA8IGxlbmd0aDsgaW5kZXggKysgKSB7XG5cbiAgICAgICAgICBhcnJheS5wdXNoKCBzb3VyY2VBcnJheVsgaW5kZXggXSApO1xuXG4gICAgICAgIH1cblxuICAgICAgfVxuXG4gICAgICB2YXIgc291cmNlQXJyYXkgPSBzb3VyY2UuYXJyYXk7XG4gICAgICB2YXIgc291cmNlU3RyaWRlID0gc291cmNlLnN0cmlkZTtcblxuICAgICAgaWYgKCBwcmltaXRpdmUudmNvdW50ICE9PSB1bmRlZmluZWQgKSB7XG5cbiAgICAgICAgdmFyIGluZGV4ID0gMDtcblxuICAgICAgICBmb3IgKCB2YXIgaSA9IDAsIGwgPSB2Y291bnQubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuICAgICAgICAgIHZhciBjb3VudCA9IHZjb3VudFsgaSBdO1xuXG4gICAgICAgICAgaWYgKCBjb3VudCA9PT0gNCApIHtcblxuICAgICAgICAgICAgdmFyIGEgPSBpbmRleCArIHN0cmlkZSAqIDA7XG4gICAgICAgICAgICB2YXIgYiA9IGluZGV4ICsgc3RyaWRlICogMTtcbiAgICAgICAgICAgIHZhciBjID0gaW5kZXggKyBzdHJpZGUgKiAyO1xuICAgICAgICAgICAgdmFyIGQgPSBpbmRleCArIHN0cmlkZSAqIDM7XG5cbiAgICAgICAgICAgIHB1c2hWZWN0b3IoIGEgKTsgcHVzaFZlY3RvciggYiApOyBwdXNoVmVjdG9yKCBkICk7XG4gICAgICAgICAgICBwdXNoVmVjdG9yKCBiICk7IHB1c2hWZWN0b3IoIGMgKTsgcHVzaFZlY3RvciggZCApO1xuXG4gICAgICAgICAgfSBlbHNlIGlmICggY291bnQgPT09IDMgKSB7XG5cbiAgICAgICAgICAgIHZhciBhID0gaW5kZXggKyBzdHJpZGUgKiAwO1xuICAgICAgICAgICAgdmFyIGIgPSBpbmRleCArIHN0cmlkZSAqIDE7XG4gICAgICAgICAgICB2YXIgYyA9IGluZGV4ICsgc3RyaWRlICogMjtcblxuICAgICAgICAgICAgcHVzaFZlY3RvciggYSApOyBwdXNoVmVjdG9yKCBiICk7IHB1c2hWZWN0b3IoIGMgKTtcblxuICAgICAgICAgIH0gZWxzZSBpZiAoIGNvdW50ID4gNCApIHtcblxuICAgICAgICAgICAgZm9yICggdmFyIGsgPSAxLCBrbCA9ICggY291bnQgLSAyICk7IGsgPD0ga2w7IGsgKysgKSB7XG5cbiAgICAgICAgICAgICAgdmFyIGEgPSBpbmRleCArIHN0cmlkZSAqIDA7XG4gICAgICAgICAgICAgIHZhciBiID0gaW5kZXggKyBzdHJpZGUgKiBrO1xuICAgICAgICAgICAgICB2YXIgYyA9IGluZGV4ICsgc3RyaWRlICogKCBrICsgMSApO1xuXG4gICAgICAgICAgICAgIHB1c2hWZWN0b3IoIGEgKTsgcHVzaFZlY3RvciggYiApOyBwdXNoVmVjdG9yKCBjICk7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIH1cblxuICAgICAgICAgIGluZGV4ICs9IHN0cmlkZSAqIGNvdW50O1xuXG4gICAgICAgIH1cblxuICAgICAgfSBlbHNlIHtcblxuICAgICAgICBmb3IgKCB2YXIgaSA9IDAsIGwgPSBpbmRpY2VzLmxlbmd0aDsgaSA8IGw7IGkgKz0gc3RyaWRlICkge1xuXG4gICAgICAgICAgcHVzaFZlY3RvciggaSApO1xuXG4gICAgICAgIH1cblxuICAgICAgfVxuXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0R2VvbWV0cnkoIGlkICkge1xuXG4gICAgICByZXR1cm4gZ2V0QnVpbGQoIGxpYnJhcnkuZ2VvbWV0cmllc1sgaWQgXSwgYnVpbGRHZW9tZXRyeSApO1xuXG4gICAgfVxuXG4gICAgLy8ga2luZW1hdGljc1xuXG4gICAgZnVuY3Rpb24gcGFyc2VLaW5lbWF0aWNzTW9kZWwoIHhtbCApIHtcblxuICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgIG5hbWU6IHhtbC5nZXRBdHRyaWJ1dGUoICduYW1lJyApIHx8ICcnLFxuICAgICAgICBqb2ludHM6IHt9LFxuICAgICAgICBsaW5rczogW11cbiAgICAgIH07XG5cbiAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSArKyApIHtcblxuICAgICAgICB2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuXG4gICAgICAgIGlmICggY2hpbGQubm9kZVR5cGUgIT09IDEgKSBjb250aW51ZTtcblxuICAgICAgICBzd2l0Y2ggKCBjaGlsZC5ub2RlTmFtZSApIHtcblxuICAgICAgICAgIGNhc2UgJ3RlY2huaXF1ZV9jb21tb24nOlxuICAgICAgICAgICAgcGFyc2VLaW5lbWF0aWNzVGVjaG5pcXVlQ29tbW9uKCBjaGlsZCwgZGF0YSApO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgfVxuXG4gICAgICB9XG5cbiAgICAgIGxpYnJhcnkua2luZW1hdGljc01vZGVsc1sgeG1sLmdldEF0dHJpYnV0ZSggJ2lkJyApIF0gPSBkYXRhO1xuXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnVpbGRLaW5lbWF0aWNzTW9kZWwoIGRhdGEgKSB7XG5cbiAgICAgIGlmICggZGF0YS5idWlsZCAhPT0gdW5kZWZpbmVkICkgcmV0dXJuIGRhdGEuYnVpbGQ7XG5cbiAgICAgIHJldHVybiBkYXRhO1xuXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0S2luZW1hdGljc01vZGVsKCBpZCApIHtcblxuICAgICAgcmV0dXJuIGdldEJ1aWxkKCBsaWJyYXJ5LmtpbmVtYXRpY3NNb2RlbHNbIGlkIF0sIGJ1aWxkS2luZW1hdGljc01vZGVsICk7XG5cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwYXJzZUtpbmVtYXRpY3NUZWNobmlxdWVDb21tb24oIHhtbCwgZGF0YSApIHtcblxuICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDwgeG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpICsrICkge1xuXG4gICAgICAgIHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG5cbiAgICAgICAgaWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuXG4gICAgICAgIHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuXG4gICAgICAgICAgY2FzZSAnam9pbnQnOlxuICAgICAgICAgICAgZGF0YS5qb2ludHNbIGNoaWxkLmdldEF0dHJpYnV0ZSggJ3NpZCcgKSBdID0gcGFyc2VLaW5lbWF0aWNzSm9pbnQoIGNoaWxkICk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgJ2xpbmsnOlxuICAgICAgICAgICAgZGF0YS5saW5rcy5wdXNoKCBwYXJzZUtpbmVtYXRpY3NMaW5rKCBjaGlsZCApICk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICB9XG5cbiAgICAgIH1cblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBhcnNlS2luZW1hdGljc0pvaW50KCB4bWwgKSB7XG5cbiAgICAgIHZhciBkYXRhO1xuXG4gICAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPCB4bWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkgKysgKSB7XG5cbiAgICAgICAgdmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcblxuICAgICAgICBpZiAoIGNoaWxkLm5vZGVUeXBlICE9PSAxICkgY29udGludWU7XG5cbiAgICAgICAgc3dpdGNoICggY2hpbGQubm9kZU5hbWUgKSB7XG5cbiAgICAgICAgICBjYXNlICdwcmlzbWF0aWMnOlxuICAgICAgICAgIGNhc2UgJ3Jldm9sdXRlJzpcbiAgICAgICAgICAgIGRhdGEgPSBwYXJzZUtpbmVtYXRpY3NKb2ludFBhcmFtZXRlciggY2hpbGQgKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIH1cblxuICAgICAgfVxuXG4gICAgICByZXR1cm4gZGF0YTtcblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBhcnNlS2luZW1hdGljc0pvaW50UGFyYW1ldGVyKCB4bWwsIGRhdGEgKSB7XG5cbiAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICBzaWQ6IHhtbC5nZXRBdHRyaWJ1dGUoICdzaWQnICksXG4gICAgICAgIG5hbWU6IHhtbC5nZXRBdHRyaWJ1dGUoICduYW1lJyApIHx8ICcnLFxuICAgICAgICBheGlzOiBuZXcgVEhSRUUuVmVjdG9yMygpLFxuICAgICAgICBsaW1pdHM6IHtcbiAgICAgICAgICBtaW46IDAsXG4gICAgICAgICAgbWF4OiAwXG4gICAgICAgIH0sXG4gICAgICAgIHR5cGU6IHhtbC5ub2RlTmFtZSxcbiAgICAgICAgc3RhdGljOiBmYWxzZSxcbiAgICAgICAgemVyb1Bvc2l0aW9uOiAwLFxuICAgICAgICBtaWRkbGVQb3NpdGlvbjogMFxuICAgICAgfTtcblxuICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDwgeG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpICsrICkge1xuXG4gICAgICAgIHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG5cbiAgICAgICAgaWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuXG4gICAgICAgIHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuXG4gICAgICAgICAgY2FzZSAnYXhpcyc6XG4gICAgICAgICAgICB2YXIgYXJyYXkgPSBwYXJzZUZsb2F0cyggY2hpbGQudGV4dENvbnRlbnQgKTtcbiAgICAgICAgICAgIGRhdGEuYXhpcy5mcm9tQXJyYXkoIGFycmF5ICk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlICdsaW1pdHMnOlxuICAgICAgICAgICAgdmFyIG1heCA9IGNoaWxkLmdldEVsZW1lbnRzQnlUYWdOYW1lKCAnbWF4JyApWyAwIF07XG4gICAgICAgICAgICB2YXIgbWluID0gY2hpbGQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoICdtaW4nIClbIDAgXTtcblxuICAgICAgICAgICAgZGF0YS5saW1pdHMubWF4ID0gcGFyc2VGbG9hdCggbWF4LnRleHRDb250ZW50ICk7XG4gICAgICAgICAgICBkYXRhLmxpbWl0cy5taW4gPSBwYXJzZUZsb2F0KCBtaW4udGV4dENvbnRlbnQgKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIH1cblxuICAgICAgfVxuXG4gICAgICAvLyBpZiBtaW4gaXMgZXF1YWwgdG8gb3IgZ3JlYXRlciB0aGFuIG1heCwgY29uc2lkZXIgdGhlIGpvaW50IHN0YXRpY1xuXG4gICAgICBpZiAoIGRhdGEubGltaXRzLm1pbiA+PSBkYXRhLmxpbWl0cy5tYXggKSB7XG5cbiAgICAgICAgZGF0YS5zdGF0aWMgPSB0cnVlO1xuXG4gICAgICB9XG5cbiAgICAgIC8vIGNhbGN1bGF0ZSBtaWRkbGUgcG9zaXRpb25cblxuICAgICAgZGF0YS5taWRkbGVQb3NpdGlvbiA9ICggZGF0YS5saW1pdHMubWluICsgZGF0YS5saW1pdHMubWF4ICkgLyAyLjA7XG5cbiAgICAgIHJldHVybiBkYXRhO1xuXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcGFyc2VLaW5lbWF0aWNzTGluayggeG1sICkge1xuXG4gICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgc2lkOiB4bWwuZ2V0QXR0cmlidXRlKCAnc2lkJyApLFxuICAgICAgICBuYW1lOiB4bWwuZ2V0QXR0cmlidXRlKCAnbmFtZScgKSB8fCAnJyxcbiAgICAgICAgYXR0YWNobWVudHM6IFtdLFxuICAgICAgICB0cmFuc2Zvcm1zOiBbXVxuICAgICAgfTtcblxuICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDwgeG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpICsrICkge1xuXG4gICAgICAgIHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG5cbiAgICAgICAgaWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuXG4gICAgICAgIHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuXG4gICAgICAgICAgY2FzZSAnYXR0YWNobWVudF9mdWxsJzpcbiAgICAgICAgICAgIGRhdGEuYXR0YWNobWVudHMucHVzaCggcGFyc2VLaW5lbWF0aWNzQXR0YWNobWVudCggY2hpbGQgKSApO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlICdtYXRyaXgnOlxuICAgICAgICAgIGNhc2UgJ3RyYW5zbGF0ZSc6XG4gICAgICAgICAgY2FzZSAncm90YXRlJzpcbiAgICAgICAgICAgIGRhdGEudHJhbnNmb3Jtcy5wdXNoKCBwYXJzZUtpbmVtYXRpY3NUcmFuc2Zvcm0oIGNoaWxkICkgKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIH1cblxuICAgICAgfVxuXG4gICAgICByZXR1cm4gZGF0YTtcblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBhcnNlS2luZW1hdGljc0F0dGFjaG1lbnQoIHhtbCApIHtcblxuICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgIGpvaW50OiB4bWwuZ2V0QXR0cmlidXRlKCAnam9pbnQnICkuc3BsaXQoICcvJyApLnBvcCgpLFxuICAgICAgICB0cmFuc2Zvcm1zOiBbXSxcbiAgICAgICAgbGlua3M6IFtdXG4gICAgICB9O1xuXG4gICAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPCB4bWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkgKysgKSB7XG5cbiAgICAgICAgdmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcblxuICAgICAgICBpZiAoIGNoaWxkLm5vZGVUeXBlICE9PSAxICkgY29udGludWU7XG5cbiAgICAgICAgc3dpdGNoICggY2hpbGQubm9kZU5hbWUgKSB7XG5cbiAgICAgICAgICBjYXNlICdsaW5rJzpcbiAgICAgICAgICAgIGRhdGEubGlua3MucHVzaCggcGFyc2VLaW5lbWF0aWNzTGluayggY2hpbGQgKSApO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlICdtYXRyaXgnOlxuICAgICAgICAgIGNhc2UgJ3RyYW5zbGF0ZSc6XG4gICAgICAgICAgY2FzZSAncm90YXRlJzpcbiAgICAgICAgICAgIGRhdGEudHJhbnNmb3Jtcy5wdXNoKCBwYXJzZUtpbmVtYXRpY3NUcmFuc2Zvcm0oIGNoaWxkICkgKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIH1cblxuICAgICAgfVxuXG4gICAgICByZXR1cm4gZGF0YTtcblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBhcnNlS2luZW1hdGljc1RyYW5zZm9ybSggeG1sICkge1xuXG4gICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgdHlwZTogeG1sLm5vZGVOYW1lXG4gICAgICB9O1xuXG4gICAgICB2YXIgYXJyYXkgPSBwYXJzZUZsb2F0cyggeG1sLnRleHRDb250ZW50ICk7XG5cbiAgICAgIHN3aXRjaCAoIGRhdGEudHlwZSApIHtcblxuICAgICAgICBjYXNlICdtYXRyaXgnOlxuICAgICAgICAgIGRhdGEub2JqID0gbmV3IFRIUkVFLk1hdHJpeDQoKTtcbiAgICAgICAgICBkYXRhLm9iai5mcm9tQXJyYXkoIGFycmF5ICkudHJhbnNwb3NlKCk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAndHJhbnNsYXRlJzpcbiAgICAgICAgICBkYXRhLm9iaiA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG4gICAgICAgICAgZGF0YS5vYmouZnJvbUFycmF5KCBhcnJheSApO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgJ3JvdGF0ZSc6XG4gICAgICAgICAgZGF0YS5vYmogPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuICAgICAgICAgIGRhdGEub2JqLmZyb21BcnJheSggYXJyYXkgKTtcbiAgICAgICAgICBkYXRhLmFuZ2xlID0gVEhSRUUuTWF0aFV0aWxzLmRlZ1RvUmFkKCBhcnJheVsgMyBdICk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGRhdGE7XG5cbiAgICB9XG5cbiAgICAvLyBwaHlzaWNzXG5cbiAgICBmdW5jdGlvbiBwYXJzZVBoeXNpY3NNb2RlbCggeG1sICkge1xuXG4gICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgbmFtZTogeG1sLmdldEF0dHJpYnV0ZSggJ25hbWUnICkgfHwgJycsXG4gICAgICAgIHJpZ2lkQm9kaWVzOiB7fVxuICAgICAgfTtcblxuICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDwgeG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpICsrICkge1xuXG4gICAgICAgIHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG5cbiAgICAgICAgaWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuXG4gICAgICAgIHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuXG4gICAgICAgICAgY2FzZSAncmlnaWRfYm9keSc6XG4gICAgICAgICAgICBkYXRhLnJpZ2lkQm9kaWVzWyBjaGlsZC5nZXRBdHRyaWJ1dGUoICduYW1lJyApIF0gPSB7fTtcbiAgICAgICAgICAgIHBhcnNlUGh5c2ljc1JpZ2lkQm9keSggY2hpbGQsIGRhdGEucmlnaWRCb2RpZXNbIGNoaWxkLmdldEF0dHJpYnV0ZSggJ25hbWUnICkgXSApO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgfVxuXG4gICAgICB9XG5cbiAgICAgIGxpYnJhcnkucGh5c2ljc01vZGVsc1sgeG1sLmdldEF0dHJpYnV0ZSggJ2lkJyApIF0gPSBkYXRhO1xuXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcGFyc2VQaHlzaWNzUmlnaWRCb2R5KCB4bWwsIGRhdGEgKSB7XG5cbiAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSArKyApIHtcblxuICAgICAgICB2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuXG4gICAgICAgIGlmICggY2hpbGQubm9kZVR5cGUgIT09IDEgKSBjb250aW51ZTtcblxuICAgICAgICBzd2l0Y2ggKCBjaGlsZC5ub2RlTmFtZSApIHtcblxuICAgICAgICAgIGNhc2UgJ3RlY2huaXF1ZV9jb21tb24nOlxuICAgICAgICAgICAgcGFyc2VQaHlzaWNzVGVjaG5pcXVlQ29tbW9uKCBjaGlsZCwgZGF0YSApO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgfVxuXG4gICAgICB9XG5cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwYXJzZVBoeXNpY3NUZWNobmlxdWVDb21tb24oIHhtbCwgZGF0YSApIHtcblxuICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDwgeG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpICsrICkge1xuXG4gICAgICAgIHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG5cbiAgICAgICAgaWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuXG4gICAgICAgIHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuXG4gICAgICAgICAgY2FzZSAnaW5lcnRpYSc6XG4gICAgICAgICAgICBkYXRhLmluZXJ0aWEgPSBwYXJzZUZsb2F0cyggY2hpbGQudGV4dENvbnRlbnQgKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAnbWFzcyc6XG4gICAgICAgICAgICBkYXRhLm1hc3MgPSBwYXJzZUZsb2F0cyggY2hpbGQudGV4dENvbnRlbnQgKVsgMCBdO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgfVxuXG4gICAgICB9XG5cbiAgICB9XG5cbiAgICAvLyBzY2VuZVxuXG4gICAgZnVuY3Rpb24gcGFyc2VLaW5lbWF0aWNzU2NlbmUoIHhtbCApIHtcblxuICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgIGJpbmRKb2ludEF4aXM6IFtdXG4gICAgICB9O1xuXG4gICAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPCB4bWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkgKysgKSB7XG5cbiAgICAgICAgdmFyIGNoaWxkID0geG1sLmNoaWxkTm9kZXNbIGkgXTtcblxuICAgICAgICBpZiAoIGNoaWxkLm5vZGVUeXBlICE9PSAxICkgY29udGludWU7XG5cbiAgICAgICAgc3dpdGNoICggY2hpbGQubm9kZU5hbWUgKSB7XG5cbiAgICAgICAgICBjYXNlICdiaW5kX2pvaW50X2F4aXMnOlxuICAgICAgICAgICAgZGF0YS5iaW5kSm9pbnRBeGlzLnB1c2goIHBhcnNlS2luZW1hdGljc0JpbmRKb2ludEF4aXMoIGNoaWxkICkgKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIH1cblxuICAgICAgfVxuXG4gICAgICBsaWJyYXJ5LmtpbmVtYXRpY3NTY2VuZXNbIHBhcnNlSWQoIHhtbC5nZXRBdHRyaWJ1dGUoICd1cmwnICkgKSBdID0gZGF0YTtcblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHBhcnNlS2luZW1hdGljc0JpbmRKb2ludEF4aXMoIHhtbCApIHtcblxuICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgIHRhcmdldDogeG1sLmdldEF0dHJpYnV0ZSggJ3RhcmdldCcgKS5zcGxpdCggJy8nICkucG9wKClcbiAgICAgIH07XG5cbiAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSArKyApIHtcblxuICAgICAgICB2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuXG4gICAgICAgIGlmICggY2hpbGQubm9kZVR5cGUgIT09IDEgKSBjb250aW51ZTtcblxuICAgICAgICBzd2l0Y2ggKCBjaGlsZC5ub2RlTmFtZSApIHtcblxuICAgICAgICAgIGNhc2UgJ2F4aXMnOlxuICAgICAgICAgICAgdmFyIHBhcmFtID0gY2hpbGQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoICdwYXJhbScgKVsgMCBdO1xuICAgICAgICAgICAgZGF0YS5heGlzID0gcGFyYW0udGV4dENvbnRlbnQ7XG4gICAgICAgICAgICB2YXIgdG1wSm9pbnRJbmRleCA9IGRhdGEuYXhpcy5zcGxpdCggJ2luc3RfJyApLnBvcCgpLnNwbGl0KCAnYXhpcycgKVsgMCBdO1xuICAgICAgICAgICAgZGF0YS5qb2ludEluZGV4ID0gdG1wSm9pbnRJbmRleC5zdWJzdHIoIDAsIHRtcEpvaW50SW5kZXgubGVuZ3RoIC0gMSApO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgfVxuXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBkYXRhO1xuXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnVpbGRLaW5lbWF0aWNzU2NlbmUoIGRhdGEgKSB7XG5cbiAgICAgIGlmICggZGF0YS5idWlsZCAhPT0gdW5kZWZpbmVkICkgcmV0dXJuIGRhdGEuYnVpbGQ7XG5cbiAgICAgIHJldHVybiBkYXRhO1xuXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0S2luZW1hdGljc1NjZW5lKCBpZCApIHtcblxuICAgICAgcmV0dXJuIGdldEJ1aWxkKCBsaWJyYXJ5LmtpbmVtYXRpY3NTY2VuZXNbIGlkIF0sIGJ1aWxkS2luZW1hdGljc1NjZW5lICk7XG5cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXR1cEtpbmVtYXRpY3MoKSB7XG5cbiAgICAgIHZhciBraW5lbWF0aWNzTW9kZWxJZCA9IE9iamVjdC5rZXlzKCBsaWJyYXJ5LmtpbmVtYXRpY3NNb2RlbHMgKVsgMCBdO1xuICAgICAgdmFyIGtpbmVtYXRpY3NTY2VuZUlkID0gT2JqZWN0LmtleXMoIGxpYnJhcnkua2luZW1hdGljc1NjZW5lcyApWyAwIF07XG4gICAgICB2YXIgdmlzdWFsU2NlbmVJZCA9IE9iamVjdC5rZXlzKCBsaWJyYXJ5LnZpc3VhbFNjZW5lcyApWyAwIF07XG5cbiAgICAgIGlmICgga2luZW1hdGljc01vZGVsSWQgPT09IHVuZGVmaW5lZCB8fCBraW5lbWF0aWNzU2NlbmVJZCA9PT0gdW5kZWZpbmVkICkgcmV0dXJuO1xuXG4gICAgICB2YXIga2luZW1hdGljc01vZGVsID0gZ2V0S2luZW1hdGljc01vZGVsKCBraW5lbWF0aWNzTW9kZWxJZCApO1xuICAgICAgdmFyIGtpbmVtYXRpY3NTY2VuZSA9IGdldEtpbmVtYXRpY3NTY2VuZSgga2luZW1hdGljc1NjZW5lSWQgKTtcbiAgICAgIHZhciB2aXN1YWxTY2VuZSA9IGdldFZpc3VhbFNjZW5lKCB2aXN1YWxTY2VuZUlkICk7XG5cbiAgICAgIHZhciBiaW5kSm9pbnRBeGlzID0ga2luZW1hdGljc1NjZW5lLmJpbmRKb2ludEF4aXM7XG4gICAgICB2YXIgam9pbnRNYXAgPSB7fTtcblxuICAgICAgZm9yICggdmFyIGkgPSAwLCBsID0gYmluZEpvaW50QXhpcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuXG4gICAgICAgIHZhciBheGlzID0gYmluZEpvaW50QXhpc1sgaSBdO1xuXG4gICAgICAgIC8vIHRoZSByZXN1bHQgb2YgdGhlIGZvbGxvd2luZyBxdWVyeSBpcyBhbiBlbGVtZW50IG9mIHR5cGUgJ3RyYW5zbGF0ZScsICdyb3RhdGUnLCdzY2FsZScgb3IgJ21hdHJpeCdcblxuICAgICAgICB2YXIgdGFyZ2V0RWxlbWVudCA9IGNvbGxhZGEucXVlcnlTZWxlY3RvciggJ1tzaWQ9XCInICsgYXhpcy50YXJnZXQgKyAnXCJdJyApO1xuXG4gICAgICAgIGlmICggdGFyZ2V0RWxlbWVudCApIHtcblxuICAgICAgICAgIC8vIGdldCB0aGUgcGFyZW50IG9mIHRoZSB0cmFuc2Zyb20gZWxlbWVudFxuXG4gICAgICAgICAgdmFyIHBhcmVudFZpc3VhbEVsZW1lbnQgPSB0YXJnZXRFbGVtZW50LnBhcmVudEVsZW1lbnQ7XG5cbiAgICAgICAgICAvLyBjb25uZWN0IHRoZSBqb2ludCBvZiB0aGUga2luZW1hdGljcyBtb2RlbCB3aXRoIHRoZSBlbGVtZW50IGluIHRoZSB2aXN1YWwgc2NlbmVcblxuICAgICAgICAgIGNvbm5lY3QoIGF4aXMuam9pbnRJbmRleCwgcGFyZW50VmlzdWFsRWxlbWVudCApO1xuXG4gICAgICAgIH1cblxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBjb25uZWN0KCBqb2ludEluZGV4LCB2aXN1YWxFbGVtZW50ICkge1xuXG4gICAgICAgIHZhciB2aXN1YWxFbGVtZW50TmFtZSA9IHZpc3VhbEVsZW1lbnQuZ2V0QXR0cmlidXRlKCAnbmFtZScgKTtcbiAgICAgICAgdmFyIGpvaW50ID0ga2luZW1hdGljc01vZGVsLmpvaW50c1sgam9pbnRJbmRleCBdO1xuXG4gICAgICAgIHZpc3VhbFNjZW5lLnRyYXZlcnNlKCBmdW5jdGlvbiAoIG9iamVjdCApIHtcblxuICAgICAgICAgIGlmICggb2JqZWN0Lm5hbWUgPT09IHZpc3VhbEVsZW1lbnROYW1lICkge1xuXG4gICAgICAgICAgICBqb2ludE1hcFsgam9pbnRJbmRleCBdID0ge1xuICAgICAgICAgICAgICBvYmplY3Q6IG9iamVjdCxcbiAgICAgICAgICAgICAgdHJhbnNmb3JtczogYnVpbGRUcmFuc2Zvcm1MaXN0KCB2aXN1YWxFbGVtZW50ICksXG4gICAgICAgICAgICAgIGpvaW50OiBqb2ludCxcbiAgICAgICAgICAgICAgcG9zaXRpb246IGpvaW50Lnplcm9Qb3NpdGlvblxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgIH1cblxuICAgICAgICB9ICk7XG5cbiAgICAgIH1cblxuICAgICAgdmFyIG0wID0gbmV3IFRIUkVFLk1hdHJpeDQoKTtcblxuICAgICAga2luZW1hdGljcyA9IHtcblxuICAgICAgICBqb2ludHM6IGtpbmVtYXRpY3NNb2RlbCAmJiBraW5lbWF0aWNzTW9kZWwuam9pbnRzLFxuXG4gICAgICAgIGdldEpvaW50VmFsdWU6IGZ1bmN0aW9uICggam9pbnRJbmRleCApIHtcblxuICAgICAgICAgIHZhciBqb2ludERhdGEgPSBqb2ludE1hcFsgam9pbnRJbmRleCBdO1xuXG4gICAgICAgICAgaWYgKCBqb2ludERhdGEgKSB7XG5cbiAgICAgICAgICAgIHJldHVybiBqb2ludERhdGEucG9zaXRpb247XG5cbiAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oICdUSFJFRS5Db2xsYWRhTG9hZGVyOiBKb2ludCAnICsgam9pbnRJbmRleCArICcgZG9lc25cXCd0IGV4aXN0LicgKTtcblxuICAgICAgICAgIH1cblxuICAgICAgICB9LFxuXG4gICAgICAgIHNldEpvaW50VmFsdWU6IGZ1bmN0aW9uICggam9pbnRJbmRleCwgdmFsdWUgKSB7XG5cbiAgICAgICAgICB2YXIgam9pbnREYXRhID0gam9pbnRNYXBbIGpvaW50SW5kZXggXTtcblxuICAgICAgICAgIGlmICggam9pbnREYXRhICkge1xuXG4gICAgICAgICAgICB2YXIgam9pbnQgPSBqb2ludERhdGEuam9pbnQ7XG5cbiAgICAgICAgICAgIGlmICggdmFsdWUgPiBqb2ludC5saW1pdHMubWF4IHx8IHZhbHVlIDwgam9pbnQubGltaXRzLm1pbiApIHtcblxuICAgICAgICAgICAgICBjb25zb2xlLndhcm4oICdUSFJFRS5Db2xsYWRhTG9hZGVyOiBKb2ludCAnICsgam9pbnRJbmRleCArICcgdmFsdWUgJyArIHZhbHVlICsgJyBvdXRzaWRlIG9mIGxpbWl0cyAobWluOiAnICsgam9pbnQubGltaXRzLm1pbiArICcsIG1heDogJyArIGpvaW50LmxpbWl0cy5tYXggKyAnKS4nICk7XG5cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIGpvaW50LnN0YXRpYyApIHtcblxuICAgICAgICAgICAgICBjb25zb2xlLndhcm4oICdUSFJFRS5Db2xsYWRhTG9hZGVyOiBKb2ludCAnICsgam9pbnRJbmRleCArICcgaXMgc3RhdGljLicgKTtcblxuICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICB2YXIgb2JqZWN0ID0gam9pbnREYXRhLm9iamVjdDtcbiAgICAgICAgICAgICAgdmFyIGF4aXMgPSBqb2ludC5heGlzO1xuICAgICAgICAgICAgICB2YXIgdHJhbnNmb3JtcyA9IGpvaW50RGF0YS50cmFuc2Zvcm1zO1xuXG4gICAgICAgICAgICAgIG1hdHJpeC5pZGVudGl0eSgpO1xuXG4gICAgICAgICAgICAgIC8vIGVhY2ggdXBkYXRlLCB3ZSBoYXZlIHRvIGFwcGx5IGFsbCB0cmFuc2Zvcm1zIGluIHRoZSBjb3JyZWN0IG9yZGVyXG5cbiAgICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDwgdHJhbnNmb3Jtcy5sZW5ndGg7IGkgKysgKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgdHJhbnNmb3JtID0gdHJhbnNmb3Jtc1sgaSBdO1xuXG4gICAgICAgICAgICAgICAgLy8gaWYgdGhlcmUgaXMgYSBjb25uZWN0aW9uIG9mIHRoZSB0cmFuc2Zvcm0gbm9kZSB3aXRoIGEgam9pbnQsIGFwcGx5IHRoZSBqb2ludCB2YWx1ZVxuXG4gICAgICAgICAgICAgICAgaWYgKCB0cmFuc2Zvcm0uc2lkICYmIHRyYW5zZm9ybS5zaWQuaW5kZXhPZiggam9pbnRJbmRleCApICE9PSAtIDEgKSB7XG5cbiAgICAgICAgICAgICAgICAgIHN3aXRjaCAoIGpvaW50LnR5cGUgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgY2FzZSAncmV2b2x1dGUnOlxuICAgICAgICAgICAgICAgICAgICAgIG1hdHJpeC5tdWx0aXBseSggbTAubWFrZVJvdGF0aW9uQXhpcyggYXhpcywgVEhSRUUuTWF0aFV0aWxzLmRlZ1RvUmFkKCB2YWx1ZSApICkgKTtcbiAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICBjYXNlICdwcmlzbWF0aWMnOlxuICAgICAgICAgICAgICAgICAgICAgIG1hdHJpeC5tdWx0aXBseSggbTAubWFrZVRyYW5zbGF0aW9uKCBheGlzLnggKiB2YWx1ZSwgYXhpcy55ICogdmFsdWUsIGF4aXMueiAqIHZhbHVlICkgKTtcbiAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybiggJ1RIUkVFLkNvbGxhZGFMb2FkZXI6IFVua25vd24gam9pbnQgdHlwZTogJyArIGpvaW50LnR5cGUgKTtcbiAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgc3dpdGNoICggdHJhbnNmb3JtLnR5cGUgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbWF0cml4JzpcbiAgICAgICAgICAgICAgICAgICAgICBtYXRyaXgubXVsdGlwbHkoIHRyYW5zZm9ybS5vYmogKTtcbiAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICBjYXNlICd0cmFuc2xhdGUnOlxuICAgICAgICAgICAgICAgICAgICAgIG1hdHJpeC5tdWx0aXBseSggbTAubWFrZVRyYW5zbGF0aW9uKCB0cmFuc2Zvcm0ub2JqLngsIHRyYW5zZm9ybS5vYmoueSwgdHJhbnNmb3JtLm9iai56ICkgKTtcbiAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICBjYXNlICdzY2FsZSc6XG4gICAgICAgICAgICAgICAgICAgICAgbWF0cml4LnNjYWxlKCB0cmFuc2Zvcm0ub2JqICk7XG4gICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgY2FzZSAncm90YXRlJzpcbiAgICAgICAgICAgICAgICAgICAgICBtYXRyaXgubXVsdGlwbHkoIG0wLm1ha2VSb3RhdGlvbkF4aXMoIHRyYW5zZm9ybS5vYmosIHRyYW5zZm9ybS5hbmdsZSApICk7XG4gICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgb2JqZWN0Lm1hdHJpeC5jb3B5KCBtYXRyaXggKTtcbiAgICAgICAgICAgICAgb2JqZWN0Lm1hdHJpeC5kZWNvbXBvc2UoIG9iamVjdC5wb3NpdGlvbiwgb2JqZWN0LnF1YXRlcm5pb24sIG9iamVjdC5zY2FsZSApO1xuXG4gICAgICAgICAgICAgIGpvaW50TWFwWyBqb2ludEluZGV4IF0ucG9zaXRpb24gPSB2YWx1ZTtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgY29uc29sZS5sb2coICdUSFJFRS5Db2xsYWRhTG9hZGVyOiAnICsgam9pbnRJbmRleCArICcgZG9lcyBub3QgZXhpc3QuJyApO1xuXG4gICAgICAgICAgfVxuXG4gICAgICAgIH1cblxuICAgICAgfTtcblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGJ1aWxkVHJhbnNmb3JtTGlzdCggbm9kZSApIHtcblxuICAgICAgdmFyIHRyYW5zZm9ybXMgPSBbXTtcblxuICAgICAgdmFyIHhtbCA9IGNvbGxhZGEucXVlcnlTZWxlY3RvciggJ1tpZD1cIicgKyBub2RlLmlkICsgJ1wiXScgKTtcblxuICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDwgeG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpICsrICkge1xuXG4gICAgICAgIHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG5cbiAgICAgICAgaWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuXG4gICAgICAgIHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuXG4gICAgICAgICAgY2FzZSAnbWF0cml4JzpcbiAgICAgICAgICAgIHZhciBhcnJheSA9IHBhcnNlRmxvYXRzKCBjaGlsZC50ZXh0Q29udGVudCApO1xuICAgICAgICAgICAgdmFyIG1hdHJpeCA9IG5ldyBUSFJFRS5NYXRyaXg0KCkuZnJvbUFycmF5KCBhcnJheSApLnRyYW5zcG9zZSgpO1xuICAgICAgICAgICAgdHJhbnNmb3Jtcy5wdXNoKCB7XG4gICAgICAgICAgICAgIHNpZDogY2hpbGQuZ2V0QXR0cmlidXRlKCAnc2lkJyApLFxuICAgICAgICAgICAgICB0eXBlOiBjaGlsZC5ub2RlTmFtZSxcbiAgICAgICAgICAgICAgb2JqOiBtYXRyaXhcbiAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAndHJhbnNsYXRlJzpcbiAgICAgICAgICBjYXNlICdzY2FsZSc6XG4gICAgICAgICAgICB2YXIgYXJyYXkgPSBwYXJzZUZsb2F0cyggY2hpbGQudGV4dENvbnRlbnQgKTtcbiAgICAgICAgICAgIHZhciB2ZWN0b3IgPSBuZXcgVEhSRUUuVmVjdG9yMygpLmZyb21BcnJheSggYXJyYXkgKTtcbiAgICAgICAgICAgIHRyYW5zZm9ybXMucHVzaCgge1xuICAgICAgICAgICAgICBzaWQ6IGNoaWxkLmdldEF0dHJpYnV0ZSggJ3NpZCcgKSxcbiAgICAgICAgICAgICAgdHlwZTogY2hpbGQubm9kZU5hbWUsXG4gICAgICAgICAgICAgIG9iajogdmVjdG9yXG4gICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgJ3JvdGF0ZSc6XG4gICAgICAgICAgICB2YXIgYXJyYXkgPSBwYXJzZUZsb2F0cyggY2hpbGQudGV4dENvbnRlbnQgKTtcbiAgICAgICAgICAgIHZhciB2ZWN0b3IgPSBuZXcgVEhSRUUuVmVjdG9yMygpLmZyb21BcnJheSggYXJyYXkgKTtcbiAgICAgICAgICAgIHZhciBhbmdsZSA9IFRIUkVFLk1hdGhVdGlscy5kZWdUb1JhZCggYXJyYXlbIDMgXSApO1xuICAgICAgICAgICAgdHJhbnNmb3Jtcy5wdXNoKCB7XG4gICAgICAgICAgICAgIHNpZDogY2hpbGQuZ2V0QXR0cmlidXRlKCAnc2lkJyApLFxuICAgICAgICAgICAgICB0eXBlOiBjaGlsZC5ub2RlTmFtZSxcbiAgICAgICAgICAgICAgb2JqOiB2ZWN0b3IsXG4gICAgICAgICAgICAgIGFuZ2xlOiBhbmdsZVxuICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgfVxuXG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cmFuc2Zvcm1zO1xuXG4gICAgfVxuXG4gICAgLy8gbm9kZXNcblxuICAgIGZ1bmN0aW9uIHByZXBhcmVOb2RlcyggeG1sICkge1xuXG4gICAgICB2YXIgZWxlbWVudHMgPSB4bWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoICdub2RlJyApO1xuXG4gICAgICAvLyBlbnN1cmUgYWxsIG5vZGUgZWxlbWVudHMgaGF2ZSBpZCBhdHRyaWJ1dGVzXG5cbiAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IGVsZW1lbnRzLmxlbmd0aDsgaSArKyApIHtcblxuICAgICAgICB2YXIgZWxlbWVudCA9IGVsZW1lbnRzWyBpIF07XG5cbiAgICAgICAgaWYgKCBlbGVtZW50Lmhhc0F0dHJpYnV0ZSggJ2lkJyApID09PSBmYWxzZSApIHtcblxuICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCAnaWQnLCBnZW5lcmF0ZUlkKCkgKTtcblxuICAgICAgICB9XG5cbiAgICAgIH1cblxuICAgIH1cblxuICAgIHZhciBtYXRyaXggPSBuZXcgVEhSRUUuTWF0cml4NCgpO1xuICAgIHZhciB2ZWN0b3IgPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuXG4gICAgZnVuY3Rpb24gcGFyc2VOb2RlKCB4bWwgKSB7XG5cbiAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICBuYW1lOiB4bWwuZ2V0QXR0cmlidXRlKCAnbmFtZScgKSB8fCAnJyxcbiAgICAgICAgdHlwZTogeG1sLmdldEF0dHJpYnV0ZSggJ3R5cGUnICksXG4gICAgICAgIGlkOiB4bWwuZ2V0QXR0cmlidXRlKCAnaWQnICksXG4gICAgICAgIHNpZDogeG1sLmdldEF0dHJpYnV0ZSggJ3NpZCcgKSxcbiAgICAgICAgbWF0cml4OiBuZXcgVEhSRUUuTWF0cml4NCgpLFxuICAgICAgICBub2RlczogW10sXG4gICAgICAgIGluc3RhbmNlQ2FtZXJhczogW10sXG4gICAgICAgIGluc3RhbmNlQ29udHJvbGxlcnM6IFtdLFxuICAgICAgICBpbnN0YW5jZUxpZ2h0czogW10sXG4gICAgICAgIGluc3RhbmNlR2VvbWV0cmllczogW10sXG4gICAgICAgIGluc3RhbmNlTm9kZXM6IFtdLFxuICAgICAgICB0cmFuc2Zvcm1zOiB7fVxuICAgICAgfTtcblxuICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDwgeG1sLmNoaWxkTm9kZXMubGVuZ3RoOyBpICsrICkge1xuXG4gICAgICAgIHZhciBjaGlsZCA9IHhtbC5jaGlsZE5vZGVzWyBpIF07XG5cbiAgICAgICAgaWYgKCBjaGlsZC5ub2RlVHlwZSAhPT0gMSApIGNvbnRpbnVlO1xuXG4gICAgICAgIHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuXG4gICAgICAgICAgY2FzZSAnbm9kZSc6XG4gICAgICAgICAgICBkYXRhLm5vZGVzLnB1c2goIGNoaWxkLmdldEF0dHJpYnV0ZSggJ2lkJyApICk7XG4gICAgICAgICAgICBwYXJzZU5vZGUoIGNoaWxkICk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgJ2luc3RhbmNlX2NhbWVyYSc6XG4gICAgICAgICAgICBkYXRhLmluc3RhbmNlQ2FtZXJhcy5wdXNoKCBwYXJzZUlkKCBjaGlsZC5nZXRBdHRyaWJ1dGUoICd1cmwnICkgKSApO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlICdpbnN0YW5jZV9jb250cm9sbGVyJzpcbiAgICAgICAgICAgIGRhdGEuaW5zdGFuY2VDb250cm9sbGVycy5wdXNoKCBwYXJzZU5vZGVJbnN0YW5jZSggY2hpbGQgKSApO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlICdpbnN0YW5jZV9saWdodCc6XG4gICAgICAgICAgICBkYXRhLmluc3RhbmNlTGlnaHRzLnB1c2goIHBhcnNlSWQoIGNoaWxkLmdldEF0dHJpYnV0ZSggJ3VybCcgKSApICk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgJ2luc3RhbmNlX2dlb21ldHJ5JzpcbiAgICAgICAgICAgIGRhdGEuaW5zdGFuY2VHZW9tZXRyaWVzLnB1c2goIHBhcnNlTm9kZUluc3RhbmNlKCBjaGlsZCApICk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgJ2luc3RhbmNlX25vZGUnOlxuICAgICAgICAgICAgZGF0YS5pbnN0YW5jZU5vZGVzLnB1c2goIHBhcnNlSWQoIGNoaWxkLmdldEF0dHJpYnV0ZSggJ3VybCcgKSApICk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgJ21hdHJpeCc6XG4gICAgICAgICAgICB2YXIgYXJyYXkgPSBwYXJzZUZsb2F0cyggY2hpbGQudGV4dENvbnRlbnQgKTtcbiAgICAgICAgICAgIGRhdGEubWF0cml4Lm11bHRpcGx5KCBtYXRyaXguZnJvbUFycmF5KCBhcnJheSApLnRyYW5zcG9zZSgpICk7XG4gICAgICAgICAgICBkYXRhLnRyYW5zZm9ybXNbIGNoaWxkLmdldEF0dHJpYnV0ZSggJ3NpZCcgKSBdID0gY2hpbGQubm9kZU5hbWU7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgJ3RyYW5zbGF0ZSc6XG4gICAgICAgICAgICB2YXIgYXJyYXkgPSBwYXJzZUZsb2F0cyggY2hpbGQudGV4dENvbnRlbnQgKTtcbiAgICAgICAgICAgIHZlY3Rvci5mcm9tQXJyYXkoIGFycmF5ICk7XG4gICAgICAgICAgICBkYXRhLm1hdHJpeC5tdWx0aXBseSggbWF0cml4Lm1ha2VUcmFuc2xhdGlvbiggdmVjdG9yLngsIHZlY3Rvci55LCB2ZWN0b3IueiApICk7XG4gICAgICAgICAgICBkYXRhLnRyYW5zZm9ybXNbIGNoaWxkLmdldEF0dHJpYnV0ZSggJ3NpZCcgKSBdID0gY2hpbGQubm9kZU5hbWU7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgJ3JvdGF0ZSc6XG4gICAgICAgICAgICB2YXIgYXJyYXkgPSBwYXJzZUZsb2F0cyggY2hpbGQudGV4dENvbnRlbnQgKTtcbiAgICAgICAgICAgIHZhciBhbmdsZSA9IFRIUkVFLk1hdGhVdGlscy5kZWdUb1JhZCggYXJyYXlbIDMgXSApO1xuICAgICAgICAgICAgZGF0YS5tYXRyaXgubXVsdGlwbHkoIG1hdHJpeC5tYWtlUm90YXRpb25BeGlzKCB2ZWN0b3IuZnJvbUFycmF5KCBhcnJheSApLCBhbmdsZSApICk7XG4gICAgICAgICAgICBkYXRhLnRyYW5zZm9ybXNbIGNoaWxkLmdldEF0dHJpYnV0ZSggJ3NpZCcgKSBdID0gY2hpbGQubm9kZU5hbWU7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgJ3NjYWxlJzpcbiAgICAgICAgICAgIHZhciBhcnJheSA9IHBhcnNlRmxvYXRzKCBjaGlsZC50ZXh0Q29udGVudCApO1xuICAgICAgICAgICAgZGF0YS5tYXRyaXguc2NhbGUoIHZlY3Rvci5mcm9tQXJyYXkoIGFycmF5ICkgKTtcbiAgICAgICAgICAgIGRhdGEudHJhbnNmb3Jtc1sgY2hpbGQuZ2V0QXR0cmlidXRlKCAnc2lkJyApIF0gPSBjaGlsZC5ub2RlTmFtZTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAnZXh0cmEnOlxuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgY29uc29sZS5sb2coIGNoaWxkICk7XG5cbiAgICAgICAgfVxuXG4gICAgICB9XG5cbiAgICAgIGlmICggaGFzTm9kZSggZGF0YS5pZCApICkge1xuXG4gICAgICAgIGNvbnNvbGUud2FybiggJ1RIUkVFLkNvbGxhZGFMb2FkZXI6IFRoZXJlIGlzIGFscmVhZHkgYSBub2RlIHdpdGggSUQgJXMuIEV4Y2x1ZGUgY3VycmVudCBub2RlIGZyb20gZnVydGhlciBwcm9jZXNzaW5nLicsIGRhdGEuaWQgKTtcblxuICAgICAgfSBlbHNlIHtcblxuICAgICAgICBsaWJyYXJ5Lm5vZGVzWyBkYXRhLmlkIF0gPSBkYXRhO1xuXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBkYXRhO1xuXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcGFyc2VOb2RlSW5zdGFuY2UoIHhtbCApIHtcblxuICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgIGlkOiBwYXJzZUlkKCB4bWwuZ2V0QXR0cmlidXRlKCAndXJsJyApICksXG4gICAgICAgIG1hdGVyaWFsczoge30sXG4gICAgICAgIHNrZWxldG9uczogW11cbiAgICAgIH07XG5cbiAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IHhtbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSArKyApIHtcblxuICAgICAgICB2YXIgY2hpbGQgPSB4bWwuY2hpbGROb2Rlc1sgaSBdO1xuXG4gICAgICAgIHN3aXRjaCAoIGNoaWxkLm5vZGVOYW1lICkge1xuXG4gICAgICAgICAgY2FzZSAnYmluZF9tYXRlcmlhbCc6XG4gICAgICAgICAgICB2YXIgaW5zdGFuY2VzID0gY2hpbGQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoICdpbnN0YW5jZV9tYXRlcmlhbCcgKTtcblxuICAgICAgICAgICAgZm9yICggdmFyIGogPSAwOyBqIDwgaW5zdGFuY2VzLmxlbmd0aDsgaiArKyApIHtcblxuICAgICAgICAgICAgICB2YXIgaW5zdGFuY2UgPSBpbnN0YW5jZXNbIGogXTtcbiAgICAgICAgICAgICAgdmFyIHN5bWJvbCA9IGluc3RhbmNlLmdldEF0dHJpYnV0ZSggJ3N5bWJvbCcgKTtcbiAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IGluc3RhbmNlLmdldEF0dHJpYnV0ZSggJ3RhcmdldCcgKTtcblxuICAgICAgICAgICAgICBkYXRhLm1hdGVyaWFsc1sgc3ltYm9sIF0gPSBwYXJzZUlkKCB0YXJnZXQgKTtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgJ3NrZWxldG9uJzpcbiAgICAgICAgICAgIGRhdGEuc2tlbGV0b25zLnB1c2goIHBhcnNlSWQoIGNoaWxkLnRleHRDb250ZW50ICkgKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIH1cblxuICAgICAgfVxuXG4gICAgICByZXR1cm4gZGF0YTtcblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGJ1aWxkU2tlbGV0b24oIHNrZWxldG9ucywgam9pbnRzICkge1xuXG4gICAgICB2YXIgYm9uZURhdGEgPSBbXTtcbiAgICAgIHZhciBzb3J0ZWRCb25lRGF0YSA9IFtdO1xuXG4gICAgICB2YXIgaSwgaiwgZGF0YTtcblxuICAgICAgLy8gYSBza2VsZXRvbiBjYW4gaGF2ZSBtdWx0aXBsZSByb290IGJvbmVzLiBjb2xsYWRhIGV4cHJlc3NlcyB0aGlzXG4gICAgICAvLyBzaXR1dGF0aW9uIHdpdGggbXVsdGlwbGUgXCJza2VsZXRvblwiIHRhZ3MgcGVyIGNvbnRyb2xsZXIgaW5zdGFuY2VcblxuICAgICAgZm9yICggaSA9IDA7IGkgPCBza2VsZXRvbnMubGVuZ3RoOyBpICsrICkge1xuXG4gICAgICAgIHZhciBza2VsZXRvbiA9IHNrZWxldG9uc1sgaSBdO1xuXG4gICAgICAgIHZhciByb290O1xuXG4gICAgICAgIGlmICggaGFzTm9kZSggc2tlbGV0b24gKSApIHtcblxuICAgICAgICAgIHJvb3QgPSBnZXROb2RlKCBza2VsZXRvbiApO1xuICAgICAgICAgIGJ1aWxkQm9uZUhpZXJhcmNoeSggcm9vdCwgam9pbnRzLCBib25lRGF0YSApO1xuXG4gICAgICAgIH0gZWxzZSBpZiAoIGhhc1Zpc3VhbFNjZW5lKCBza2VsZXRvbiApICkge1xuXG4gICAgICAgICAgLy8gaGFuZGxlIGNhc2Ugd2hlcmUgdGhlIHNrZWxldG9uIHJlZmVycyB0byB0aGUgdmlzdWFsIHNjZW5lICgjMTMzMzUpXG5cbiAgICAgICAgICB2YXIgdmlzdWFsU2NlbmUgPSBsaWJyYXJ5LnZpc3VhbFNjZW5lc1sgc2tlbGV0b24gXTtcbiAgICAgICAgICB2YXIgY2hpbGRyZW4gPSB2aXN1YWxTY2VuZS5jaGlsZHJlbjtcblxuICAgICAgICAgIGZvciAoIHZhciBqID0gMDsgaiA8IGNoaWxkcmVuLmxlbmd0aDsgaiArKyApIHtcblxuICAgICAgICAgICAgdmFyIGNoaWxkID0gY2hpbGRyZW5bIGogXTtcblxuICAgICAgICAgICAgaWYgKCBjaGlsZC50eXBlID09PSAnSk9JTlQnICkge1xuXG4gICAgICAgICAgICAgIHZhciByb290ID0gZ2V0Tm9kZSggY2hpbGQuaWQgKTtcbiAgICAgICAgICAgICAgYnVpbGRCb25lSGllcmFyY2h5KCByb290LCBqb2ludHMsIGJvbmVEYXRhICk7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIH1cblxuICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgY29uc29sZS5lcnJvciggJ1RIUkVFLkNvbGxhZGFMb2FkZXI6IFVuYWJsZSB0byBmaW5kIHJvb3QgYm9uZSBvZiBza2VsZXRvbiB3aXRoIElEOicsIHNrZWxldG9uICk7XG5cbiAgICAgICAgfVxuXG4gICAgICB9XG5cbiAgICAgIC8vIHNvcnQgYm9uZSBkYXRhICh0aGUgb3JkZXIgaXMgZGVmaW5lZCBpbiB0aGUgY29ycmVzcG9uZGluZyBjb250cm9sbGVyKVxuXG4gICAgICBmb3IgKCBpID0gMDsgaSA8IGpvaW50cy5sZW5ndGg7IGkgKysgKSB7XG5cbiAgICAgICAgZm9yICggaiA9IDA7IGogPCBib25lRGF0YS5sZW5ndGg7IGogKysgKSB7XG5cbiAgICAgICAgICBkYXRhID0gYm9uZURhdGFbIGogXTtcblxuICAgICAgICAgIGlmICggZGF0YS5ib25lLm5hbWUgPT09IGpvaW50c1sgaSBdLm5hbWUgKSB7XG5cbiAgICAgICAgICAgIHNvcnRlZEJvbmVEYXRhWyBpIF0gPSBkYXRhO1xuICAgICAgICAgICAgZGF0YS5wcm9jZXNzZWQgPSB0cnVlO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICB9XG5cbiAgICAgICAgfVxuXG4gICAgICB9XG5cbiAgICAgIC8vIGFkZCB1bnByb2Nlc3NlZCBib25lIGRhdGEgYXQgdGhlIGVuZCBvZiB0aGUgbGlzdFxuXG4gICAgICBmb3IgKCBpID0gMDsgaSA8IGJvbmVEYXRhLmxlbmd0aDsgaSArKyApIHtcblxuICAgICAgICBkYXRhID0gYm9uZURhdGFbIGkgXTtcblxuICAgICAgICBpZiAoIGRhdGEucHJvY2Vzc2VkID09PSBmYWxzZSApIHtcblxuICAgICAgICAgIHNvcnRlZEJvbmVEYXRhLnB1c2goIGRhdGEgKTtcbiAgICAgICAgICBkYXRhLnByb2Nlc3NlZCA9IHRydWU7XG5cbiAgICAgICAgfVxuXG4gICAgICB9XG5cbiAgICAgIC8vIHNldHVwIGFycmF5cyBmb3Igc2tlbGV0b24gY3JlYXRpb25cblxuICAgICAgdmFyIGJvbmVzID0gW107XG4gICAgICB2YXIgYm9uZUludmVyc2VzID0gW107XG5cbiAgICAgIGZvciAoIGkgPSAwOyBpIDwgc29ydGVkQm9uZURhdGEubGVuZ3RoOyBpICsrICkge1xuXG4gICAgICAgIGRhdGEgPSBzb3J0ZWRCb25lRGF0YVsgaSBdO1xuXG4gICAgICAgIGJvbmVzLnB1c2goIGRhdGEuYm9uZSApO1xuICAgICAgICBib25lSW52ZXJzZXMucHVzaCggZGF0YS5ib25lSW52ZXJzZSApO1xuXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBuZXcgVEhSRUUuU2tlbGV0b24oIGJvbmVzLCBib25lSW52ZXJzZXMgKTtcblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGJ1aWxkQm9uZUhpZXJhcmNoeSggcm9vdCwgam9pbnRzLCBib25lRGF0YSApIHtcblxuICAgICAgLy8gc2V0dXAgYm9uZSBkYXRhIGZyb20gdmlzdWFsIHNjZW5lXG5cbiAgICAgIHJvb3QudHJhdmVyc2UoIGZ1bmN0aW9uICggb2JqZWN0ICkge1xuXG4gICAgICAgIGlmICggb2JqZWN0LmlzQm9uZSA9PT0gdHJ1ZSApIHtcblxuICAgICAgICAgIHZhciBib25lSW52ZXJzZTtcblxuICAgICAgICAgIC8vIHJldHJpZXZlIHRoZSBib25lSW52ZXJzZSBmcm9tIHRoZSBjb250cm9sbGVyIGRhdGFcblxuICAgICAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IGpvaW50cy5sZW5ndGg7IGkgKysgKSB7XG5cbiAgICAgICAgICAgIHZhciBqb2ludCA9IGpvaW50c1sgaSBdO1xuXG4gICAgICAgICAgICBpZiAoIGpvaW50Lm5hbWUgPT09IG9iamVjdC5uYW1lICkge1xuXG4gICAgICAgICAgICAgIGJvbmVJbnZlcnNlID0gam9pbnQuYm9uZUludmVyc2U7XG4gICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIGJvbmVJbnZlcnNlID09PSB1bmRlZmluZWQgKSB7XG5cbiAgICAgICAgICAgIC8vIFVuZm9ydHVuYXRlbHksIHRoZXJlIGNhbiBiZSBqb2ludHMgaW4gdGhlIHZpc3VhbCBzY2VuZSB0aGF0IGFyZSBub3QgcGFydCBvZiB0aGVcbiAgICAgICAgICAgIC8vIGNvcnJlc3BvbmRpbmcgY29udHJvbGxlci4gSW4gdGhpcyBjYXNlLCB3ZSBoYXZlIHRvIGNyZWF0ZSBhIGR1bW15IGJvbmVJbnZlcnNlIG1hdHJpeFxuICAgICAgICAgICAgLy8gZm9yIHRoZSByZXNwZWN0aXZlIGJvbmUuIFRoaXMgYm9uZSB3b24ndCBhZmZlY3QgYW55IHZlcnRpY2VzLCBiZWNhdXNlIHRoZXJlIGFyZSBubyBza2luIGluZGljZXNcbiAgICAgICAgICAgIC8vIGFuZCB3ZWlnaHRzIGRlZmluZWQgZm9yIGl0LiBCdXQgd2Ugc3RpbGwgaGF2ZSB0byBhZGQgdGhlIGJvbmUgdG8gdGhlIHNvcnRlZCBib25lIGxpc3QgaW4gb3JkZXIgdG9cbiAgICAgICAgICAgIC8vIGVuc3VyZSBhIGNvcnJlY3QgYW5pbWF0aW9uIG9mIHRoZSBtb2RlbC5cblxuICAgICAgICAgICAgYm9uZUludmVyc2UgPSBuZXcgVEhSRUUuTWF0cml4NCgpO1xuXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYm9uZURhdGEucHVzaCggeyBib25lOiBvYmplY3QsIGJvbmVJbnZlcnNlOiBib25lSW52ZXJzZSwgcHJvY2Vzc2VkOiBmYWxzZSB9ICk7XG5cbiAgICAgICAgfVxuXG4gICAgICB9ICk7XG5cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBidWlsZE5vZGUoIGRhdGEgKSB7XG5cbiAgICAgIHZhciBvYmplY3RzID0gW107XG5cbiAgICAgIHZhciBtYXRyaXggPSBkYXRhLm1hdHJpeDtcbiAgICAgIHZhciBub2RlcyA9IGRhdGEubm9kZXM7XG4gICAgICB2YXIgdHlwZSA9IGRhdGEudHlwZTtcbiAgICAgIHZhciBpbnN0YW5jZUNhbWVyYXMgPSBkYXRhLmluc3RhbmNlQ2FtZXJhcztcbiAgICAgIHZhciBpbnN0YW5jZUNvbnRyb2xsZXJzID0gZGF0YS5pbnN0YW5jZUNvbnRyb2xsZXJzO1xuICAgICAgdmFyIGluc3RhbmNlTGlnaHRzID0gZGF0YS5pbnN0YW5jZUxpZ2h0cztcbiAgICAgIHZhciBpbnN0YW5jZUdlb21ldHJpZXMgPSBkYXRhLmluc3RhbmNlR2VvbWV0cmllcztcbiAgICAgIHZhciBpbnN0YW5jZU5vZGVzID0gZGF0YS5pbnN0YW5jZU5vZGVzO1xuXG4gICAgICAvLyBub2Rlc1xuXG4gICAgICBmb3IgKCB2YXIgaSA9IDAsIGwgPSBub2Rlcy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuXG4gICAgICAgIG9iamVjdHMucHVzaCggZ2V0Tm9kZSggbm9kZXNbIGkgXSApICk7XG5cbiAgICAgIH1cblxuICAgICAgLy8gaW5zdGFuY2UgY2FtZXJhc1xuXG4gICAgICBmb3IgKCB2YXIgaSA9IDAsIGwgPSBpbnN0YW5jZUNhbWVyYXMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuICAgICAgICB2YXIgaW5zdGFuY2VDYW1lcmEgPSBnZXRDYW1lcmEoIGluc3RhbmNlQ2FtZXJhc1sgaSBdICk7XG5cbiAgICAgICAgaWYgKCBpbnN0YW5jZUNhbWVyYSAhPT0gbnVsbCApIHtcblxuICAgICAgICAgIG9iamVjdHMucHVzaCggaW5zdGFuY2VDYW1lcmEuY2xvbmUoKSApO1xuXG4gICAgICAgIH1cblxuICAgICAgfVxuXG4gICAgICAvLyBpbnN0YW5jZSBjb250cm9sbGVyc1xuXG4gICAgICBmb3IgKCB2YXIgaSA9IDAsIGwgPSBpbnN0YW5jZUNvbnRyb2xsZXJzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG5cbiAgICAgICAgdmFyIGluc3RhbmNlID0gaW5zdGFuY2VDb250cm9sbGVyc1sgaSBdO1xuICAgICAgICB2YXIgY29udHJvbGxlciA9IGdldENvbnRyb2xsZXIoIGluc3RhbmNlLmlkICk7XG4gICAgICAgIHZhciBnZW9tZXRyaWVzID0gZ2V0R2VvbWV0cnkoIGNvbnRyb2xsZXIuaWQgKTtcbiAgICAgICAgdmFyIG5ld09iamVjdHMgPSBidWlsZE9iamVjdHMoIGdlb21ldHJpZXMsIGluc3RhbmNlLm1hdGVyaWFscyApO1xuXG4gICAgICAgIHZhciBza2VsZXRvbnMgPSBpbnN0YW5jZS5za2VsZXRvbnM7XG4gICAgICAgIHZhciBqb2ludHMgPSBjb250cm9sbGVyLnNraW4uam9pbnRzO1xuXG4gICAgICAgIHZhciBza2VsZXRvbiA9IGJ1aWxkU2tlbGV0b24oIHNrZWxldG9ucywgam9pbnRzICk7XG5cbiAgICAgICAgZm9yICggdmFyIGogPSAwLCBqbCA9IG5ld09iamVjdHMubGVuZ3RoOyBqIDwgamw7IGogKysgKSB7XG5cbiAgICAgICAgICB2YXIgb2JqZWN0ID0gbmV3T2JqZWN0c1sgaiBdO1xuXG4gICAgICAgICAgaWYgKCBvYmplY3QuaXNTa2lubmVkTWVzaCApIHtcblxuICAgICAgICAgICAgb2JqZWN0LmJpbmQoIHNrZWxldG9uLCBjb250cm9sbGVyLnNraW4uYmluZE1hdHJpeCApO1xuICAgICAgICAgICAgb2JqZWN0Lm5vcm1hbGl6ZVNraW5XZWlnaHRzKCk7XG5cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBvYmplY3RzLnB1c2goIG9iamVjdCApO1xuXG4gICAgICAgIH1cblxuICAgICAgfVxuXG4gICAgICAvLyBpbnN0YW5jZSBsaWdodHNcblxuICAgICAgZm9yICggdmFyIGkgPSAwLCBsID0gaW5zdGFuY2VMaWdodHMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuICAgICAgICB2YXIgaW5zdGFuY2VMaWdodCA9IGdldExpZ2h0KCBpbnN0YW5jZUxpZ2h0c1sgaSBdICk7XG5cbiAgICAgICAgaWYgKCBpbnN0YW5jZUxpZ2h0ICE9PSBudWxsICkge1xuXG4gICAgICAgICAgb2JqZWN0cy5wdXNoKCBpbnN0YW5jZUxpZ2h0LmNsb25lKCkgKTtcblxuICAgICAgICB9XG5cbiAgICAgIH1cblxuICAgICAgLy8gaW5zdGFuY2UgZ2VvbWV0cmllc1xuXG4gICAgICBmb3IgKCB2YXIgaSA9IDAsIGwgPSBpbnN0YW5jZUdlb21ldHJpZXMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuICAgICAgICB2YXIgaW5zdGFuY2UgPSBpbnN0YW5jZUdlb21ldHJpZXNbIGkgXTtcblxuICAgICAgICAvLyBhIHNpbmdsZSBnZW9tZXRyeSBpbnN0YW5jZSBpbiBjb2xsYWRhIGNhbiBsZWFkIHRvIG11bHRpcGxlIG9iamVjdDNEcy5cbiAgICAgICAgLy8gdGhpcyBpcyB0aGUgY2FzZSB3aGVuIHByaW1pdGl2ZXMgYXJlIGNvbWJpbmVkIGxpa2UgdHJpYW5nbGVzIGFuZCBsaW5lc1xuXG4gICAgICAgIHZhciBnZW9tZXRyaWVzID0gZ2V0R2VvbWV0cnkoIGluc3RhbmNlLmlkICk7XG4gICAgICAgIHZhciBuZXdPYmplY3RzID0gYnVpbGRPYmplY3RzKCBnZW9tZXRyaWVzLCBpbnN0YW5jZS5tYXRlcmlhbHMgKTtcblxuICAgICAgICBmb3IgKCB2YXIgaiA9IDAsIGpsID0gbmV3T2JqZWN0cy5sZW5ndGg7IGogPCBqbDsgaiArKyApIHtcblxuICAgICAgICAgIG9iamVjdHMucHVzaCggbmV3T2JqZWN0c1sgaiBdICk7XG5cbiAgICAgICAgfVxuXG4gICAgICB9XG5cbiAgICAgIC8vIGluc3RhbmNlIG5vZGVzXG5cbiAgICAgIGZvciAoIHZhciBpID0gMCwgbCA9IGluc3RhbmNlTm9kZXMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuICAgICAgICBvYmplY3RzLnB1c2goIGdldE5vZGUoIGluc3RhbmNlTm9kZXNbIGkgXSApLmNsb25lKCkgKTtcblxuICAgICAgfVxuXG4gICAgICB2YXIgb2JqZWN0O1xuXG4gICAgICBpZiAoIG5vZGVzLmxlbmd0aCA9PT0gMCAmJiBvYmplY3RzLmxlbmd0aCA9PT0gMSApIHtcblxuICAgICAgICBvYmplY3QgPSBvYmplY3RzWyAwIF07XG5cbiAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgb2JqZWN0ID0gKCB0eXBlID09PSAnSk9JTlQnICkgPyBuZXcgVEhSRUUuQm9uZSgpIDogbmV3IFRIUkVFLkdyb3VwKCk7XG5cbiAgICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDwgb2JqZWN0cy5sZW5ndGg7IGkgKysgKSB7XG5cbiAgICAgICAgICBvYmplY3QuYWRkKCBvYmplY3RzWyBpIF0gKTtcblxuICAgICAgICB9XG5cbiAgICAgIH1cblxuICAgICAgaWYgKCBvYmplY3QubmFtZSA9PT0gJycgKSB7XG5cbiAgICAgICAgb2JqZWN0Lm5hbWUgPSAoIHR5cGUgPT09ICdKT0lOVCcgKSA/IGRhdGEuc2lkIDogZGF0YS5uYW1lO1xuXG4gICAgICB9XG5cbiAgICAgIG9iamVjdC5tYXRyaXguY29weSggbWF0cml4ICk7XG4gICAgICBvYmplY3QubWF0cml4LmRlY29tcG9zZSggb2JqZWN0LnBvc2l0aW9uLCBvYmplY3QucXVhdGVybmlvbiwgb2JqZWN0LnNjYWxlICk7XG5cbiAgICAgIHJldHVybiBvYmplY3Q7XG5cbiAgICB9XG5cbiAgICB2YXIgZmFsbGJhY2tNYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCggeyBjb2xvcjogMHhmZjAwZmYgfSApO1xuXG4gICAgZnVuY3Rpb24gcmVzb2x2ZU1hdGVyaWFsQmluZGluZygga2V5cywgaW5zdGFuY2VNYXRlcmlhbHMgKSB7XG5cbiAgICAgIHZhciBtYXRlcmlhbHMgPSBbXTtcblxuICAgICAgZm9yICggdmFyIGkgPSAwLCBsID0ga2V5cy5sZW5ndGg7IGkgPCBsOyBpICsrICkge1xuXG4gICAgICAgIHZhciBpZCA9IGluc3RhbmNlTWF0ZXJpYWxzWyBrZXlzWyBpIF0gXTtcblxuICAgICAgICBpZiAoIGlkID09PSB1bmRlZmluZWQgKSB7XG5cbiAgICAgICAgICBjb25zb2xlLndhcm4oICdUSFJFRS5Db2xsYWRhTG9hZGVyOiBNYXRlcmlhbCB3aXRoIGtleSAlcyBub3QgZm91bmQuIEFwcGx5IGZhbGxiYWNrIG1hdGVyaWFsLicsIGtleXNbIGkgXSApO1xuICAgICAgICAgIG1hdGVyaWFscy5wdXNoKCBmYWxsYmFja01hdGVyaWFsICk7XG5cbiAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgIG1hdGVyaWFscy5wdXNoKCBnZXRNYXRlcmlhbCggaWQgKSApO1xuXG4gICAgICAgIH1cblxuICAgICAgfVxuXG4gICAgICByZXR1cm4gbWF0ZXJpYWxzO1xuXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnVpbGRPYmplY3RzKCBnZW9tZXRyaWVzLCBpbnN0YW5jZU1hdGVyaWFscyApIHtcblxuICAgICAgdmFyIG9iamVjdHMgPSBbXTtcblxuICAgICAgZm9yICggdmFyIHR5cGUgaW4gZ2VvbWV0cmllcyApIHtcblxuICAgICAgICB2YXIgZ2VvbWV0cnkgPSBnZW9tZXRyaWVzWyB0eXBlIF07XG5cbiAgICAgICAgdmFyIG1hdGVyaWFscyA9IHJlc29sdmVNYXRlcmlhbEJpbmRpbmcoIGdlb21ldHJ5Lm1hdGVyaWFsS2V5cywgaW5zdGFuY2VNYXRlcmlhbHMgKTtcblxuICAgICAgICAvLyBoYW5kbGUgY2FzZSBpZiBubyBtYXRlcmlhbHMgYXJlIGRlZmluZWRcblxuICAgICAgICBpZiAoIG1hdGVyaWFscy5sZW5ndGggPT09IDAgKSB7XG5cbiAgICAgICAgICBpZiAoIHR5cGUgPT09ICdsaW5lcycgfHwgdHlwZSA9PT0gJ2xpbmVzdHJpcHMnICkge1xuXG4gICAgICAgICAgICBtYXRlcmlhbHMucHVzaCggbmV3IFRIUkVFLkxpbmVCYXNpY01hdGVyaWFsKCkgKTtcblxuICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgIG1hdGVyaWFscy5wdXNoKCBuZXcgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWwoKSApO1xuXG4gICAgICAgICAgfVxuXG4gICAgICAgIH1cblxuICAgICAgICAvLyByZWdhcmQgc2tpbm5pbmdcblxuICAgICAgICB2YXIgc2tpbm5pbmcgPSAoIGdlb21ldHJ5LmRhdGEuYXR0cmlidXRlcy5za2luSW5kZXggIT09IHVuZGVmaW5lZCApO1xuXG4gICAgICAgIGlmICggc2tpbm5pbmcgKSB7XG5cbiAgICAgICAgICBmb3IgKCB2YXIgaSA9IDAsIGwgPSBtYXRlcmlhbHMubGVuZ3RoOyBpIDwgbDsgaSArKyApIHtcblxuICAgICAgICAgICAgbWF0ZXJpYWxzWyBpIF0uc2tpbm5pbmcgPSB0cnVlO1xuXG4gICAgICAgICAgfVxuXG4gICAgICAgIH1cblxuICAgICAgICAvLyBjaG9vc2UgYmV0d2VlbiBhIHNpbmdsZSBvciBtdWx0aSBtYXRlcmlhbHMgKG1hdGVyaWFsIGFycmF5KVxuXG4gICAgICAgIHZhciBtYXRlcmlhbCA9ICggbWF0ZXJpYWxzLmxlbmd0aCA9PT0gMSApID8gbWF0ZXJpYWxzWyAwIF0gOiBtYXRlcmlhbHM7XG5cbiAgICAgICAgLy8gbm93IGNyZWF0ZSBhIHNwZWNpZmljIDNEIG9iamVjdFxuXG4gICAgICAgIHZhciBvYmplY3Q7XG5cbiAgICAgICAgc3dpdGNoICggdHlwZSApIHtcblxuICAgICAgICAgIGNhc2UgJ2xpbmVzJzpcbiAgICAgICAgICAgIG9iamVjdCA9IG5ldyBUSFJFRS5MaW5lU2VnbWVudHMoIGdlb21ldHJ5LmRhdGEsIG1hdGVyaWFsICk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgJ2xpbmVzdHJpcHMnOlxuICAgICAgICAgICAgb2JqZWN0ID0gbmV3IFRIUkVFLkxpbmUoIGdlb21ldHJ5LmRhdGEsIG1hdGVyaWFsICk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgJ3RyaWFuZ2xlcyc6XG4gICAgICAgICAgY2FzZSAncG9seWxpc3QnOlxuICAgICAgICAgICAgaWYgKCBza2lubmluZyApIHtcblxuICAgICAgICAgICAgICBvYmplY3QgPSBuZXcgVEhSRUUuU2tpbm5lZE1lc2goIGdlb21ldHJ5LmRhdGEsIG1hdGVyaWFsICk7XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgb2JqZWN0ID0gbmV3IFRIUkVFLk1lc2goIGdlb21ldHJ5LmRhdGEsIG1hdGVyaWFsICk7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIH1cblxuICAgICAgICBvYmplY3RzLnB1c2goIG9iamVjdCApO1xuXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBvYmplY3RzO1xuXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaGFzTm9kZSggaWQgKSB7XG5cbiAgICAgIHJldHVybiBsaWJyYXJ5Lm5vZGVzWyBpZCBdICE9PSB1bmRlZmluZWQ7XG5cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXROb2RlKCBpZCApIHtcblxuICAgICAgcmV0dXJuIGdldEJ1aWxkKCBsaWJyYXJ5Lm5vZGVzWyBpZCBdLCBidWlsZE5vZGUgKTtcblxuICAgIH1cblxuICAgIC8vIHZpc3VhbCBzY2VuZXNcblxuICAgIGZ1bmN0aW9uIHBhcnNlVmlzdWFsU2NlbmUoIHhtbCApIHtcblxuICAgICAgdmFyIGRhdGEgPSB7XG4gICAgICAgIG5hbWU6IHhtbC5nZXRBdHRyaWJ1dGUoICduYW1lJyApLFxuICAgICAgICBjaGlsZHJlbjogW11cbiAgICAgIH07XG5cbiAgICAgIHByZXBhcmVOb2RlcyggeG1sICk7XG5cbiAgICAgIHZhciBlbGVtZW50cyA9IGdldEVsZW1lbnRzQnlUYWdOYW1lKCB4bWwsICdub2RlJyApO1xuXG4gICAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPCBlbGVtZW50cy5sZW5ndGg7IGkgKysgKSB7XG5cbiAgICAgICAgZGF0YS5jaGlsZHJlbi5wdXNoKCBwYXJzZU5vZGUoIGVsZW1lbnRzWyBpIF0gKSApO1xuXG4gICAgICB9XG5cbiAgICAgIGxpYnJhcnkudmlzdWFsU2NlbmVzWyB4bWwuZ2V0QXR0cmlidXRlKCAnaWQnICkgXSA9IGRhdGE7XG5cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBidWlsZFZpc3VhbFNjZW5lKCBkYXRhICkge1xuXG4gICAgICB2YXIgZ3JvdXAgPSBuZXcgVEhSRUUuR3JvdXAoKTtcbiAgICAgIGdyb3VwLm5hbWUgPSBkYXRhLm5hbWU7XG5cbiAgICAgIHZhciBjaGlsZHJlbiA9IGRhdGEuY2hpbGRyZW47XG5cbiAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSArKyApIHtcblxuICAgICAgICB2YXIgY2hpbGQgPSBjaGlsZHJlblsgaSBdO1xuXG4gICAgICAgIGdyb3VwLmFkZCggZ2V0Tm9kZSggY2hpbGQuaWQgKSApO1xuXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBncm91cDtcblxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGhhc1Zpc3VhbFNjZW5lKCBpZCApIHtcblxuICAgICAgcmV0dXJuIGxpYnJhcnkudmlzdWFsU2NlbmVzWyBpZCBdICE9PSB1bmRlZmluZWQ7XG5cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRWaXN1YWxTY2VuZSggaWQgKSB7XG5cbiAgICAgIHJldHVybiBnZXRCdWlsZCggbGlicmFyeS52aXN1YWxTY2VuZXNbIGlkIF0sIGJ1aWxkVmlzdWFsU2NlbmUgKTtcblxuICAgIH1cblxuICAgIC8vIHNjZW5lc1xuXG4gICAgZnVuY3Rpb24gcGFyc2VTY2VuZSggeG1sICkge1xuXG4gICAgICB2YXIgaW5zdGFuY2UgPSBnZXRFbGVtZW50c0J5VGFnTmFtZSggeG1sLCAnaW5zdGFuY2VfdmlzdWFsX3NjZW5lJyApWyAwIF07XG4gICAgICByZXR1cm4gZ2V0VmlzdWFsU2NlbmUoIHBhcnNlSWQoIGluc3RhbmNlLmdldEF0dHJpYnV0ZSggJ3VybCcgKSApICk7XG5cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXR1cEFuaW1hdGlvbnMoKSB7XG5cbiAgICAgIHZhciBjbGlwcyA9IGxpYnJhcnkuY2xpcHM7XG5cbiAgICAgIGlmICggaXNFbXB0eSggY2xpcHMgKSA9PT0gdHJ1ZSApIHtcblxuICAgICAgICBpZiAoIGlzRW1wdHkoIGxpYnJhcnkuYW5pbWF0aW9ucyApID09PSBmYWxzZSApIHtcblxuICAgICAgICAgIC8vIGlmIHRoZXJlIGFyZSBhbmltYXRpb25zIGJ1dCBubyBjbGlwcywgd2UgY3JlYXRlIGEgZGVmYXVsdCBjbGlwIGZvciBwbGF5YmFja1xuXG4gICAgICAgICAgdmFyIHRyYWNrcyA9IFtdO1xuXG4gICAgICAgICAgZm9yICggdmFyIGlkIGluIGxpYnJhcnkuYW5pbWF0aW9ucyApIHtcblxuICAgICAgICAgICAgdmFyIGFuaW1hdGlvblRyYWNrcyA9IGdldEFuaW1hdGlvbiggaWQgKTtcblxuICAgICAgICAgICAgZm9yICggdmFyIGkgPSAwLCBsID0gYW5pbWF0aW9uVHJhY2tzLmxlbmd0aDsgaSA8IGw7IGkgKysgKSB7XG5cbiAgICAgICAgICAgICAgdHJhY2tzLnB1c2goIGFuaW1hdGlvblRyYWNrc1sgaSBdICk7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIH1cblxuICAgICAgICAgIGFuaW1hdGlvbnMucHVzaCggbmV3IFRIUkVFLkFuaW1hdGlvbkNsaXAoICdkZWZhdWx0JywgLSAxLCB0cmFja3MgKSApO1xuXG4gICAgICAgIH1cblxuICAgICAgfSBlbHNlIHtcblxuICAgICAgICBmb3IgKCB2YXIgaWQgaW4gY2xpcHMgKSB7XG5cbiAgICAgICAgICBhbmltYXRpb25zLnB1c2goIGdldEFuaW1hdGlvbkNsaXAoIGlkICkgKTtcblxuICAgICAgICB9XG5cbiAgICAgIH1cblxuICAgIH1cblxuICAgIGlmICggdGV4dC5sZW5ndGggPT09IDAgKSB7XG5cbiAgICAgIHJldHVybiB7IHNjZW5lOiBuZXcgVEhSRUUuU2NlbmUoKSB9O1xuXG4gICAgfVxuXG4gICAgdmFyIHhtbCA9IG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcoIHRleHQsICdhcHBsaWNhdGlvbi94bWwnICk7XG5cbiAgICB2YXIgY29sbGFkYSA9IGdldEVsZW1lbnRzQnlUYWdOYW1lKCB4bWwsICdDT0xMQURBJyApWyAwIF07XG5cbiAgICAvLyBtZXRhZGF0YVxuXG4gICAgdmFyIHZlcnNpb24gPSBjb2xsYWRhLmdldEF0dHJpYnV0ZSggJ3ZlcnNpb24nICk7XG4gICAgY29uc29sZS5sb2coICdUSFJFRS5Db2xsYWRhTG9hZGVyOiBGaWxlIHZlcnNpb24nLCB2ZXJzaW9uICk7XG5cbiAgICB2YXIgYXNzZXQgPSBwYXJzZUFzc2V0KCBnZXRFbGVtZW50c0J5VGFnTmFtZSggY29sbGFkYSwgJ2Fzc2V0JyApWyAwIF0gKTtcbiAgICB2YXIgdGV4dHVyZUxvYWRlciA9IG5ldyBUSFJFRS5UZXh0dXJlTG9hZGVyKCB0aGlzLm1hbmFnZXIgKTtcbiAgICB0ZXh0dXJlTG9hZGVyLnNldFBhdGgoIHRoaXMucmVzb3VyY2VQYXRoIHx8IHBhdGggKS5zZXRDcm9zc09yaWdpbiggdGhpcy5jcm9zc09yaWdpbiApO1xuXG4gICAgdmFyIHRnYUxvYWRlcjtcblxuICAgIGlmICggVEhSRUUuVEdBTG9hZGVyICkge1xuXG4gICAgICB0Z2FMb2FkZXIgPSBuZXcgVEhSRUUuVEdBTG9hZGVyKCB0aGlzLm1hbmFnZXIgKTtcbiAgICAgIHRnYUxvYWRlci5zZXRQYXRoKCB0aGlzLnJlc291cmNlUGF0aCB8fCBwYXRoICk7XG5cbiAgICB9XG5cbiAgICAvL1xuXG4gICAgdmFyIGFuaW1hdGlvbnMgPSBbXTtcbiAgICB2YXIga2luZW1hdGljcyA9IHt9O1xuICAgIHZhciBjb3VudCA9IDA7XG5cbiAgICAvL1xuXG4gICAgdmFyIGxpYnJhcnkgPSB7XG4gICAgICBhbmltYXRpb25zOiB7fSxcbiAgICAgIGNsaXBzOiB7fSxcbiAgICAgIGNvbnRyb2xsZXJzOiB7fSxcbiAgICAgIGltYWdlczoge30sXG4gICAgICBlZmZlY3RzOiB7fSxcbiAgICAgIG1hdGVyaWFsczoge30sXG4gICAgICBjYW1lcmFzOiB7fSxcbiAgICAgIGxpZ2h0czoge30sXG4gICAgICBnZW9tZXRyaWVzOiB7fSxcbiAgICAgIG5vZGVzOiB7fSxcbiAgICAgIHZpc3VhbFNjZW5lczoge30sXG4gICAgICBraW5lbWF0aWNzTW9kZWxzOiB7fSxcbiAgICAgIHBoeXNpY3NNb2RlbHM6IHt9LFxuICAgICAga2luZW1hdGljc1NjZW5lczoge31cbiAgICB9O1xuXG4gICAgcGFyc2VMaWJyYXJ5KCBjb2xsYWRhLCAnbGlicmFyeV9hbmltYXRpb25zJywgJ2FuaW1hdGlvbicsIHBhcnNlQW5pbWF0aW9uICk7XG4gICAgcGFyc2VMaWJyYXJ5KCBjb2xsYWRhLCAnbGlicmFyeV9hbmltYXRpb25fY2xpcHMnLCAnYW5pbWF0aW9uX2NsaXAnLCBwYXJzZUFuaW1hdGlvbkNsaXAgKTtcbiAgICBwYXJzZUxpYnJhcnkoIGNvbGxhZGEsICdsaWJyYXJ5X2NvbnRyb2xsZXJzJywgJ2NvbnRyb2xsZXInLCBwYXJzZUNvbnRyb2xsZXIgKTtcbiAgICBwYXJzZUxpYnJhcnkoIGNvbGxhZGEsICdsaWJyYXJ5X2ltYWdlcycsICdpbWFnZScsIHBhcnNlSW1hZ2UgKTtcbiAgICBwYXJzZUxpYnJhcnkoIGNvbGxhZGEsICdsaWJyYXJ5X2VmZmVjdHMnLCAnZWZmZWN0JywgcGFyc2VFZmZlY3QgKTtcbiAgICBwYXJzZUxpYnJhcnkoIGNvbGxhZGEsICdsaWJyYXJ5X21hdGVyaWFscycsICdtYXRlcmlhbCcsIHBhcnNlTWF0ZXJpYWwgKTtcbiAgICBwYXJzZUxpYnJhcnkoIGNvbGxhZGEsICdsaWJyYXJ5X2NhbWVyYXMnLCAnY2FtZXJhJywgcGFyc2VDYW1lcmEgKTtcbiAgICBwYXJzZUxpYnJhcnkoIGNvbGxhZGEsICdsaWJyYXJ5X2xpZ2h0cycsICdsaWdodCcsIHBhcnNlTGlnaHQgKTtcbiAgICBwYXJzZUxpYnJhcnkoIGNvbGxhZGEsICdsaWJyYXJ5X2dlb21ldHJpZXMnLCAnZ2VvbWV0cnknLCBwYXJzZUdlb21ldHJ5ICk7XG4gICAgcGFyc2VMaWJyYXJ5KCBjb2xsYWRhLCAnbGlicmFyeV9ub2RlcycsICdub2RlJywgcGFyc2VOb2RlICk7XG4gICAgcGFyc2VMaWJyYXJ5KCBjb2xsYWRhLCAnbGlicmFyeV92aXN1YWxfc2NlbmVzJywgJ3Zpc3VhbF9zY2VuZScsIHBhcnNlVmlzdWFsU2NlbmUgKTtcbiAgICBwYXJzZUxpYnJhcnkoIGNvbGxhZGEsICdsaWJyYXJ5X2tpbmVtYXRpY3NfbW9kZWxzJywgJ2tpbmVtYXRpY3NfbW9kZWwnLCBwYXJzZUtpbmVtYXRpY3NNb2RlbCApO1xuICAgIHBhcnNlTGlicmFyeSggY29sbGFkYSwgJ2xpYnJhcnlfcGh5c2ljc19tb2RlbHMnLCAncGh5c2ljc19tb2RlbCcsIHBhcnNlUGh5c2ljc01vZGVsICk7XG4gICAgcGFyc2VMaWJyYXJ5KCBjb2xsYWRhLCAnc2NlbmUnLCAnaW5zdGFuY2Vfa2luZW1hdGljc19zY2VuZScsIHBhcnNlS2luZW1hdGljc1NjZW5lICk7XG5cbiAgICBidWlsZExpYnJhcnkoIGxpYnJhcnkuYW5pbWF0aW9ucywgYnVpbGRBbmltYXRpb24gKTtcbiAgICBidWlsZExpYnJhcnkoIGxpYnJhcnkuY2xpcHMsIGJ1aWxkQW5pbWF0aW9uQ2xpcCApO1xuICAgIGJ1aWxkTGlicmFyeSggbGlicmFyeS5jb250cm9sbGVycywgYnVpbGRDb250cm9sbGVyICk7XG4gICAgYnVpbGRMaWJyYXJ5KCBsaWJyYXJ5LmltYWdlcywgYnVpbGRJbWFnZSApO1xuICAgIGJ1aWxkTGlicmFyeSggbGlicmFyeS5lZmZlY3RzLCBidWlsZEVmZmVjdCApO1xuICAgIGJ1aWxkTGlicmFyeSggbGlicmFyeS5tYXRlcmlhbHMsIGJ1aWxkTWF0ZXJpYWwgKTtcbiAgICBidWlsZExpYnJhcnkoIGxpYnJhcnkuY2FtZXJhcywgYnVpbGRDYW1lcmEgKTtcbiAgICBidWlsZExpYnJhcnkoIGxpYnJhcnkubGlnaHRzLCBidWlsZExpZ2h0ICk7XG4gICAgYnVpbGRMaWJyYXJ5KCBsaWJyYXJ5Lmdlb21ldHJpZXMsIGJ1aWxkR2VvbWV0cnkgKTtcbiAgICBidWlsZExpYnJhcnkoIGxpYnJhcnkudmlzdWFsU2NlbmVzLCBidWlsZFZpc3VhbFNjZW5lICk7XG5cbiAgICBzZXR1cEFuaW1hdGlvbnMoKTtcbiAgICBzZXR1cEtpbmVtYXRpY3MoKTtcblxuICAgIHZhciBzY2VuZSA9IHBhcnNlU2NlbmUoIGdldEVsZW1lbnRzQnlUYWdOYW1lKCBjb2xsYWRhLCAnc2NlbmUnIClbIDAgXSApO1xuXG4gICAgaWYgKCBhc3NldC51cEF4aXMgPT09ICdaX1VQJyApIHtcblxuICAgICAgc2NlbmUucXVhdGVybmlvbi5zZXRGcm9tRXVsZXIoIG5ldyBUSFJFRS5FdWxlciggLSBNYXRoLlBJIC8gMiwgMCwgMCApICk7XG5cbiAgICB9XG5cbiAgICBzY2VuZS5zY2FsZS5tdWx0aXBseVNjYWxhciggYXNzZXQudW5pdCApO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGFuaW1hdGlvbnM6IGFuaW1hdGlvbnMsXG4gICAgICBraW5lbWF0aWNzOiBraW5lbWF0aWNzLFxuICAgICAgbGlicmFyeTogbGlicmFyeSxcbiAgICAgIHNjZW5lOiBzY2VuZVxuICAgIH07XG5cbiAgfVxuXG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/lib/ColladaLoader.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/lib/GamepadButton.js":
/*!************************************************************************************************!*\
  !*** ./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/lib/GamepadButton.js ***!
  \************************************************************************************************/
/***/ ((module) => {

eval("module.exports = Object.assign(function GamepadButton () {}, {\n\tFACE_1: 0,\n\tFACE_2: 1,\n\tFACE_3: 2,\n\tFACE_4: 3,\n\n\tL_SHOULDER_1: 4,\n\tR_SHOULDER_1: 5,\n\tL_SHOULDER_2: 6,\n\tR_SHOULDER_2: 7,\n\n\tSELECT: 8,\n\tSTART: 9,\n\n\tDPAD_UP: 12,\n\tDPAD_DOWN: 13,\n\tDPAD_LEFT: 14,\n\tDPAD_RIGHT: 15,\n\n\tVENDOR: 16,\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYWZyYW1lLWV4dHJhc0A3LjUuMS9ub2RlX21vZHVsZXMvYWZyYW1lLWV4dHJhcy9saWIvR2FtZXBhZEJ1dHRvbi5qcyIsIm1hcHBpbmdzIjoiQUFBQSwyREFBMkQ7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zbWFfcG9zdF9zY2FyY2l0eS8uL25vZGVfbW9kdWxlcy8ucG5wbS9hZnJhbWUtZXh0cmFzQDcuNS4xL25vZGVfbW9kdWxlcy9hZnJhbWUtZXh0cmFzL2xpYi9HYW1lcGFkQnV0dG9uLmpzPzUzNDUiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBPYmplY3QuYXNzaWduKGZ1bmN0aW9uIEdhbWVwYWRCdXR0b24gKCkge30sIHtcblx0RkFDRV8xOiAwLFxuXHRGQUNFXzI6IDEsXG5cdEZBQ0VfMzogMixcblx0RkFDRV80OiAzLFxuXG5cdExfU0hPVUxERVJfMTogNCxcblx0Ul9TSE9VTERFUl8xOiA1LFxuXHRMX1NIT1VMREVSXzI6IDYsXG5cdFJfU0hPVUxERVJfMjogNyxcblxuXHRTRUxFQ1Q6IDgsXG5cdFNUQVJUOiA5LFxuXG5cdERQQURfVVA6IDEyLFxuXHREUEFEX0RPV046IDEzLFxuXHREUEFEX0xFRlQ6IDE0LFxuXHREUEFEX1JJR0hUOiAxNSxcblxuXHRWRU5ET1I6IDE2LFxufSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/lib/GamepadButton.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/lib/GamepadButtonEvent.js":
/*!*****************************************************************************************************!*\
  !*** ./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/lib/GamepadButtonEvent.js ***!
  \*****************************************************************************************************/
/***/ ((module) => {

eval("function GamepadButtonEvent (type, index, details) {\n  this.type = type;\n  this.index = index;\n  this.pressed = details.pressed;\n  this.value = details.value;\n}\n\nmodule.exports = GamepadButtonEvent;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYWZyYW1lLWV4dHJhc0A3LjUuMS9ub2RlX21vZHVsZXMvYWZyYW1lLWV4dHJhcy9saWIvR2FtZXBhZEJ1dHRvbkV2ZW50LmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL3NtYV9wb3N0X3NjYXJjaXR5Ly4vbm9kZV9tb2R1bGVzLy5wbnBtL2FmcmFtZS1leHRyYXNANy41LjEvbm9kZV9tb2R1bGVzL2FmcmFtZS1leHRyYXMvbGliL0dhbWVwYWRCdXR0b25FdmVudC5qcz9mNGQxIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIEdhbWVwYWRCdXR0b25FdmVudCAodHlwZSwgaW5kZXgsIGRldGFpbHMpIHtcbiAgdGhpcy50eXBlID0gdHlwZTtcbiAgdGhpcy5pbmRleCA9IGluZGV4O1xuICB0aGlzLnByZXNzZWQgPSBkZXRhaWxzLnByZXNzZWQ7XG4gIHRoaXMudmFsdWUgPSBkZXRhaWxzLnZhbHVlO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEdhbWVwYWRCdXR0b25FdmVudDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/lib/GamepadButtonEvent.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/lib/fetch-script.js":
/*!***********************************************************************************************!*\
  !*** ./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/lib/fetch-script.js ***!
  \***********************************************************************************************/
/***/ ((module) => {

eval("/**\n * Source: https://github.com/Adobe-Marketing-Cloud/fetch-script\n */\n\nfunction getScriptId() {\n  return 'script_' + Date.now() + '_' + Math.ceil(Math.random() * 100000);\n}\n\nfunction createScript(url, id) {\n  var script = document.createElement('script');\n  script.type = 'text/javascript';\n  script.async = true;\n  script.id = id;\n  script.src = url;\n\n  return script;\n}\n\nfunction removeScript(id) {\n  const script = document.getElementById(id);\n  const parent = script.parentNode;\n\n  try {\n    parent && parent.removeChild(script);\n  } catch (e) {\n    // ignore\n  }\n}\n\nfunction appendScript(script) {\n  const firstScript = document.getElementsByTagName('script')[0];\n  firstScript.parentNode.insertBefore(script, firstScript);\n}\n\nfunction fetchScriptInternal(url, options, Promise) {\n  return new Promise(function(resolve, reject) {\n    const timeout = options.timeout || 5000;\n    const scriptId = getScriptId();\n    const script = createScript(url, scriptId);\n\n    const timeoutId = setTimeout(function() {\n      reject(new Error('Script request to ' + url + ' timed out'));\n\n      removeScript(scriptId);\n    }, timeout);\n\n    const disableTimeout = function(timeoutId) { clearTimeout(timeoutId); };\n\n    script.addEventListener('load', function(e) {\n      resolve({ok: true});\n\n      disableTimeout(timeoutId);\n      removeScript(scriptId);\n    });\n\n    script.addEventListener('error', function(e) {\n      reject(new Error('Script request to ' + url + ' failed ' + e));\n\n      disableTimeout(timeoutId);\n      removeScript(scriptId);\n    });\n\n    appendScript(script);\n  });\n}\n\nfunction fetchScript(settings) {\n  settings = settings || {};\n  return function (url, options) {\n    options = options || {};\n    return fetchScriptInternal(url, options, settings.Promise || Promise);\n  };\n}\n\nmodule.exports = fetchScript;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYWZyYW1lLWV4dHJhc0A3LjUuMS9ub2RlX21vZHVsZXMvYWZyYW1lLWV4dHJhcy9saWIvZmV0Y2gtc2NyaXB0LmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLEtBQUs7O0FBRUwsaURBQWlEOztBQUVqRDtBQUNBLGVBQWUsU0FBUzs7QUFFeEI7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovL3NtYV9wb3N0X3NjYXJjaXR5Ly4vbm9kZV9tb2R1bGVzLy5wbnBtL2FmcmFtZS1leHRyYXNANy41LjEvbm9kZV9tb2R1bGVzL2FmcmFtZS1leHRyYXMvbGliL2ZldGNoLXNjcmlwdC5qcz82MjI0Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogU291cmNlOiBodHRwczovL2dpdGh1Yi5jb20vQWRvYmUtTWFya2V0aW5nLUNsb3VkL2ZldGNoLXNjcmlwdFxuICovXG5cbmZ1bmN0aW9uIGdldFNjcmlwdElkKCkge1xuICByZXR1cm4gJ3NjcmlwdF8nICsgRGF0ZS5ub3coKSArICdfJyArIE1hdGguY2VpbChNYXRoLnJhbmRvbSgpICogMTAwMDAwKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlU2NyaXB0KHVybCwgaWQpIHtcbiAgdmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICBzY3JpcHQudHlwZSA9ICd0ZXh0L2phdmFzY3JpcHQnO1xuICBzY3JpcHQuYXN5bmMgPSB0cnVlO1xuICBzY3JpcHQuaWQgPSBpZDtcbiAgc2NyaXB0LnNyYyA9IHVybDtcblxuICByZXR1cm4gc2NyaXB0O1xufVxuXG5mdW5jdGlvbiByZW1vdmVTY3JpcHQoaWQpIHtcbiAgY29uc3Qgc2NyaXB0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xuICBjb25zdCBwYXJlbnQgPSBzY3JpcHQucGFyZW50Tm9kZTtcblxuICB0cnkge1xuICAgIHBhcmVudCAmJiBwYXJlbnQucmVtb3ZlQ2hpbGQoc2NyaXB0KTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIC8vIGlnbm9yZVxuICB9XG59XG5cbmZ1bmN0aW9uIGFwcGVuZFNjcmlwdChzY3JpcHQpIHtcbiAgY29uc3QgZmlyc3RTY3JpcHQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc2NyaXB0JylbMF07XG4gIGZpcnN0U2NyaXB0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHNjcmlwdCwgZmlyc3RTY3JpcHQpO1xufVxuXG5mdW5jdGlvbiBmZXRjaFNjcmlwdEludGVybmFsKHVybCwgb3B0aW9ucywgUHJvbWlzZSkge1xuICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgY29uc3QgdGltZW91dCA9IG9wdGlvbnMudGltZW91dCB8fCA1MDAwO1xuICAgIGNvbnN0IHNjcmlwdElkID0gZ2V0U2NyaXB0SWQoKTtcbiAgICBjb25zdCBzY3JpcHQgPSBjcmVhdGVTY3JpcHQodXJsLCBzY3JpcHRJZCk7XG5cbiAgICBjb25zdCB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgcmVqZWN0KG5ldyBFcnJvcignU2NyaXB0IHJlcXVlc3QgdG8gJyArIHVybCArICcgdGltZWQgb3V0JykpO1xuXG4gICAgICByZW1vdmVTY3JpcHQoc2NyaXB0SWQpO1xuICAgIH0sIHRpbWVvdXQpO1xuXG4gICAgY29uc3QgZGlzYWJsZVRpbWVvdXQgPSBmdW5jdGlvbih0aW1lb3V0SWQpIHsgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7IH07XG5cbiAgICBzY3JpcHQuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIHJlc29sdmUoe29rOiB0cnVlfSk7XG5cbiAgICAgIGRpc2FibGVUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgICByZW1vdmVTY3JpcHQoc2NyaXB0SWQpO1xuICAgIH0pO1xuXG4gICAgc2NyaXB0LmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZnVuY3Rpb24oZSkge1xuICAgICAgcmVqZWN0KG5ldyBFcnJvcignU2NyaXB0IHJlcXVlc3QgdG8gJyArIHVybCArICcgZmFpbGVkICcgKyBlKSk7XG5cbiAgICAgIGRpc2FibGVUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgICByZW1vdmVTY3JpcHQoc2NyaXB0SWQpO1xuICAgIH0pO1xuXG4gICAgYXBwZW5kU2NyaXB0KHNjcmlwdCk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBmZXRjaFNjcmlwdChzZXR0aW5ncykge1xuICBzZXR0aW5ncyA9IHNldHRpbmdzIHx8IHt9O1xuICByZXR1cm4gZnVuY3Rpb24gKHVybCwgb3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgIHJldHVybiBmZXRjaFNjcmlwdEludGVybmFsKHVybCwgb3B0aW9ucywgc2V0dGluZ3MuUHJvbWlzZSB8fCBQcm9taXNlKTtcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmZXRjaFNjcmlwdDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/lib/fetch-script.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/lib/keyboard.polyfill.js":
/*!****************************************************************************************************!*\
  !*** ./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/lib/keyboard.polyfill.js ***!
  \****************************************************************************************************/
/***/ (() => {

eval("/**\n * Polyfill for the additional KeyboardEvent properties defined in the D3E and\n * D4E draft specifications, by @inexorabletash.\n *\n * See: https://github.com/inexorabletash/polyfill\n */\n(function(global) {\n  var nativeKeyboardEvent = ('KeyboardEvent' in global);\n  if (!nativeKeyboardEvent)\n    global.KeyboardEvent = function KeyboardEvent() { throw TypeError('Illegal constructor'); };\n\n  if (!('DOM_KEY_LOCATION_STANDARD' in global.KeyboardEvent)) global.KeyboardEvent.DOM_KEY_LOCATION_STANDARD = 0x00; // Default or unknown location\n  if (!('DOM_KEY_LOCATION_LEFT' in global.KeyboardEvent)) global.KeyboardEvent.DOM_KEY_LOCATION_LEFT          = 0x01; // e.g. Left Alt key\n  if (!('DOM_KEY_LOCATION_RIGHT' in global.KeyboardEvent)) global.KeyboardEvent.DOM_KEY_LOCATION_RIGHT         = 0x02; // e.g. Right Alt key\n  if (!('DOM_KEY_LOCATION_NUMPAD' in global.KeyboardEvent)) global.KeyboardEvent.DOM_KEY_LOCATION_NUMPAD        = 0x03; // e.g. Numpad 0 or +\n\n  var STANDARD = window.KeyboardEvent.DOM_KEY_LOCATION_STANDARD,\n      LEFT = window.KeyboardEvent.DOM_KEY_LOCATION_LEFT,\n      RIGHT = window.KeyboardEvent.DOM_KEY_LOCATION_RIGHT,\n      NUMPAD = window.KeyboardEvent.DOM_KEY_LOCATION_NUMPAD;\n\n  //--------------------------------------------------------------------\n  //\n  // Utilities\n  //\n  //--------------------------------------------------------------------\n\n  function contains(s, ss) { return String(s).indexOf(ss) !== -1; }\n\n  var os = (function() {\n    if (contains(navigator.platform, 'Win')) { return 'win'; }\n    if (contains(navigator.platform, 'Mac')) { return 'mac'; }\n    if (contains(navigator.platform, 'CrOS')) { return 'cros'; }\n    if (contains(navigator.platform, 'Linux')) { return 'linux'; }\n    if (contains(navigator.userAgent, 'iPad') || contains(navigator.platform, 'iPod') || contains(navigator.platform, 'iPhone')) { return 'ios'; }\n    return '';\n  } ());\n\n  var browser = (function() {\n    if (contains(navigator.userAgent, 'Chrome/')) { return 'chrome'; }\n    if (contains(navigator.vendor, 'Apple')) { return 'safari'; }\n    if (contains(navigator.userAgent, 'MSIE')) { return 'ie'; }\n    if (contains(navigator.userAgent, 'Gecko/')) { return 'moz'; }\n    if (contains(navigator.userAgent, 'Opera/')) { return 'opera'; }\n    return '';\n  } ());\n\n  var browser_os = browser + '-' + os;\n\n  function mergeIf(baseTable, select, table) {\n    if (browser_os === select || browser === select || os === select) {\n      Object.keys(table).forEach(function(keyCode) {\n        baseTable[keyCode] = table[keyCode];\n      });\n    }\n  }\n\n  function remap(o, key) {\n    var r = {};\n    Object.keys(o).forEach(function(k) {\n      var item = o[k];\n      if (key in item) {\n        r[item[key]] = item;\n      }\n    });\n    return r;\n  }\n\n  function invert(o) {\n    var r = {};\n    Object.keys(o).forEach(function(k) {\n      r[o[k]] = k;\n    });\n    return r;\n  }\n\n  //--------------------------------------------------------------------\n  //\n  // Generic Mappings\n  //\n  //--------------------------------------------------------------------\n\n  // \"keyInfo\" is a dictionary:\n  //   code: string - name from DOM Level 3 KeyboardEvent code Values\n  //     https://dvcs.w3.org/hg/dom3events/raw-file/tip/html/DOM3Events-code.html\n  //   location (optional): number - one of the DOM_KEY_LOCATION values\n  //   keyCap (optional): string - keyboard label in en-US locale\n  // USB code Usage ID from page 0x07 unless otherwise noted (Informative)\n\n  // Map of keyCode to keyInfo\n  var keyCodeToInfoTable = {\n    // 0x01 - VK_LBUTTON\n    // 0x02 - VK_RBUTTON\n    0x03: { code: 'Cancel' }, // [USB: 0x9b] char \\x0018 ??? (Not in D3E)\n    // 0x04 - VK_MBUTTON\n    // 0x05 - VK_XBUTTON1\n    // 0x06 - VK_XBUTTON2\n    0x06: { code: 'Help' }, // [USB: 0x75] ???\n    // 0x07 - undefined\n    0x08: { code: 'Backspace' }, // [USB: 0x2a] Labelled Delete on Macintosh keyboards.\n    0x09: { code: 'Tab' }, // [USB: 0x2b]\n    // 0x0A-0x0B - reserved\n    0X0C: { code: 'Clear' }, // [USB: 0x9c] NumPad Center (Not in D3E)\n    0X0D: { code: 'Enter' }, // [USB: 0x28]\n    // 0x0E-0x0F - undefined\n\n    0x10: { code: 'Shift' },\n    0x11: { code: 'Control' },\n    0x12: { code: 'Alt' },\n    0x13: { code: 'Pause' }, // [USB: 0x48]\n    0x14: { code: 'CapsLock' }, // [USB: 0x39]\n    0x15: { code: 'KanaMode' }, // [USB: 0x88] - \"HangulMode\" for Korean layout\n    0x16: { code: 'HangulMode' }, // [USB: 0x90] 0x15 as well in MSDN VK table ???\n    0x17: { code: 'JunjaMode' }, // (Not in D3E)\n    0x18: { code: 'FinalMode' }, // (Not in D3E)\n    0x19: { code: 'KanjiMode' }, // [USB: 0x91] - \"HanjaMode\" for Korean layout\n    // 0x1A - undefined\n    0x1B: { code: 'Escape' }, // [USB: 0x29]\n    0x1C: { code: 'Convert' }, // [USB: 0x8a]\n    0x1D: { code: 'NonConvert' }, // [USB: 0x8b]\n    0x1E: { code: 'Accept' }, // (Not in D3E)\n    0x1F: { code: 'ModeChange' }, // (Not in D3E)\n\n    0x20: { code: 'Space' }, // [USB: 0x2c]\n    0x21: { code: 'PageUp' }, // [USB: 0x4b]\n    0x22: { code: 'PageDown' }, // [USB: 0x4e]\n    0x23: { code: 'End' }, // [USB: 0x4d]\n    0x24: { code: 'Home' }, // [USB: 0x4a]\n    0x25: { code: 'ArrowLeft' }, // [USB: 0x50]\n    0x26: { code: 'ArrowUp' }, // [USB: 0x52]\n    0x27: { code: 'ArrowRight' }, // [USB: 0x4f]\n    0x28: { code: 'ArrowDown' }, // [USB: 0x51]\n    0x29: { code: 'Select' }, // (Not in D3E)\n    0x2A: { code: 'Print' }, // (Not in D3E)\n    0x2B: { code: 'Execute' }, // [USB: 0x74] (Not in D3E)\n    0x2C: { code: 'PrintScreen' }, // [USB: 0x46]\n    0x2D: { code: 'Insert' }, // [USB: 0x49]\n    0x2E: { code: 'Delete' }, // [USB: 0x4c]\n    0x2F: { code: 'Help' }, // [USB: 0x75] ???\n\n    0x30: { code: 'Digit0', keyCap: '0' }, // [USB: 0x27] 0)\n    0x31: { code: 'Digit1', keyCap: '1' }, // [USB: 0x1e] 1!\n    0x32: { code: 'Digit2', keyCap: '2' }, // [USB: 0x1f] 2@\n    0x33: { code: 'Digit3', keyCap: '3' }, // [USB: 0x20] 3#\n    0x34: { code: 'Digit4', keyCap: '4' }, // [USB: 0x21] 4$\n    0x35: { code: 'Digit5', keyCap: '5' }, // [USB: 0x22] 5%\n    0x36: { code: 'Digit6', keyCap: '6' }, // [USB: 0x23] 6^\n    0x37: { code: 'Digit7', keyCap: '7' }, // [USB: 0x24] 7&\n    0x38: { code: 'Digit8', keyCap: '8' }, // [USB: 0x25] 8*\n    0x39: { code: 'Digit9', keyCap: '9' }, // [USB: 0x26] 9(\n    // 0x3A-0x40 - undefined\n\n    0x41: { code: 'KeyA', keyCap: 'a' }, // [USB: 0x04]\n    0x42: { code: 'KeyB', keyCap: 'b' }, // [USB: 0x05]\n    0x43: { code: 'KeyC', keyCap: 'c' }, // [USB: 0x06]\n    0x44: { code: 'KeyD', keyCap: 'd' }, // [USB: 0x07]\n    0x45: { code: 'KeyE', keyCap: 'e' }, // [USB: 0x08]\n    0x46: { code: 'KeyF', keyCap: 'f' }, // [USB: 0x09]\n    0x47: { code: 'KeyG', keyCap: 'g' }, // [USB: 0x0a]\n    0x48: { code: 'KeyH', keyCap: 'h' }, // [USB: 0x0b]\n    0x49: { code: 'KeyI', keyCap: 'i' }, // [USB: 0x0c]\n    0x4A: { code: 'KeyJ', keyCap: 'j' }, // [USB: 0x0d]\n    0x4B: { code: 'KeyK', keyCap: 'k' }, // [USB: 0x0e]\n    0x4C: { code: 'KeyL', keyCap: 'l' }, // [USB: 0x0f]\n    0x4D: { code: 'KeyM', keyCap: 'm' }, // [USB: 0x10]\n    0x4E: { code: 'KeyN', keyCap: 'n' }, // [USB: 0x11]\n    0x4F: { code: 'KeyO', keyCap: 'o' }, // [USB: 0x12]\n\n    0x50: { code: 'KeyP', keyCap: 'p' }, // [USB: 0x13]\n    0x51: { code: 'KeyQ', keyCap: 'q' }, // [USB: 0x14]\n    0x52: { code: 'KeyR', keyCap: 'r' }, // [USB: 0x15]\n    0x53: { code: 'KeyS', keyCap: 's' }, // [USB: 0x16]\n    0x54: { code: 'KeyT', keyCap: 't' }, // [USB: 0x17]\n    0x55: { code: 'KeyU', keyCap: 'u' }, // [USB: 0x18]\n    0x56: { code: 'KeyV', keyCap: 'v' }, // [USB: 0x19]\n    0x57: { code: 'KeyW', keyCap: 'w' }, // [USB: 0x1a]\n    0x58: { code: 'KeyX', keyCap: 'x' }, // [USB: 0x1b]\n    0x59: { code: 'KeyY', keyCap: 'y' }, // [USB: 0x1c]\n    0x5A: { code: 'KeyZ', keyCap: 'z' }, // [USB: 0x1d]\n    0x5B: { code: 'OSLeft', location: LEFT }, // [USB: 0xe3]\n    0x5C: { code: 'OSRight', location: RIGHT }, // [USB: 0xe7]\n    0x5D: { code: 'ContextMenu' }, // [USB: 0x65] Context Menu\n    // 0x5E - reserved\n    0x5F: { code: 'Standby' }, // [USB: 0x82] Sleep\n\n    0x60: { code: 'Numpad0', keyCap: '0', location: NUMPAD }, // [USB: 0x62]\n    0x61: { code: 'Numpad1', keyCap: '1', location: NUMPAD }, // [USB: 0x59]\n    0x62: { code: 'Numpad2', keyCap: '2', location: NUMPAD }, // [USB: 0x5a]\n    0x63: { code: 'Numpad3', keyCap: '3', location: NUMPAD }, // [USB: 0x5b]\n    0x64: { code: 'Numpad4', keyCap: '4', location: NUMPAD }, // [USB: 0x5c]\n    0x65: { code: 'Numpad5', keyCap: '5', location: NUMPAD }, // [USB: 0x5d]\n    0x66: { code: 'Numpad6', keyCap: '6', location: NUMPAD }, // [USB: 0x5e]\n    0x67: { code: 'Numpad7', keyCap: '7', location: NUMPAD }, // [USB: 0x5f]\n    0x68: { code: 'Numpad8', keyCap: '8', location: NUMPAD }, // [USB: 0x60]\n    0x69: { code: 'Numpad9', keyCap: '9', location: NUMPAD }, // [USB: 0x61]\n    0x6A: { code: 'NumpadMultiply', keyCap: '*', location: NUMPAD }, // [USB: 0x55]\n    0x6B: { code: 'NumpadAdd', keyCap: '+', location: NUMPAD }, // [USB: 0x57]\n    0x6C: { code: 'NumpadComma', keyCap: ',', location: NUMPAD }, // [USB: 0x85]\n    0x6D: { code: 'NumpadSubtract', keyCap: '-', location: NUMPAD }, // [USB: 0x56]\n    0x6E: { code: 'NumpadDecimal', keyCap: '.', location: NUMPAD }, // [USB: 0x63]\n    0x6F: { code: 'NumpadDivide', keyCap: '/', location: NUMPAD }, // [USB: 0x54]\n\n    0x70: { code: 'F1' }, // [USB: 0x3a]\n    0x71: { code: 'F2' }, // [USB: 0x3b]\n    0x72: { code: 'F3' }, // [USB: 0x3c]\n    0x73: { code: 'F4' }, // [USB: 0x3d]\n    0x74: { code: 'F5' }, // [USB: 0x3e]\n    0x75: { code: 'F6' }, // [USB: 0x3f]\n    0x76: { code: 'F7' }, // [USB: 0x40]\n    0x77: { code: 'F8' }, // [USB: 0x41]\n    0x78: { code: 'F9' }, // [USB: 0x42]\n    0x79: { code: 'F10' }, // [USB: 0x43]\n    0x7A: { code: 'F11' }, // [USB: 0x44]\n    0x7B: { code: 'F12' }, // [USB: 0x45]\n    0x7C: { code: 'F13' }, // [USB: 0x68]\n    0x7D: { code: 'F14' }, // [USB: 0x69]\n    0x7E: { code: 'F15' }, // [USB: 0x6a]\n    0x7F: { code: 'F16' }, // [USB: 0x6b]\n\n    0x80: { code: 'F17' }, // [USB: 0x6c]\n    0x81: { code: 'F18' }, // [USB: 0x6d]\n    0x82: { code: 'F19' }, // [USB: 0x6e]\n    0x83: { code: 'F20' }, // [USB: 0x6f]\n    0x84: { code: 'F21' }, // [USB: 0x70]\n    0x85: { code: 'F22' }, // [USB: 0x71]\n    0x86: { code: 'F23' }, // [USB: 0x72]\n    0x87: { code: 'F24' }, // [USB: 0x73]\n    // 0x88-0x8F - unassigned\n\n    0x90: { code: 'NumLock', location: NUMPAD }, // [USB: 0x53]\n    0x91: { code: 'ScrollLock' }, // [USB: 0x47]\n    // 0x92-0x96 - OEM specific\n    // 0x97-0x9F - unassigned\n\n    // NOTE: 0xA0-0xA5 usually mapped to 0x10-0x12 in browsers\n    0xA0: { code: 'ShiftLeft', location: LEFT }, // [USB: 0xe1]\n    0xA1: { code: 'ShiftRight', location: RIGHT }, // [USB: 0xe5]\n    0xA2: { code: 'ControlLeft', location: LEFT }, // [USB: 0xe0]\n    0xA3: { code: 'ControlRight', location: RIGHT }, // [USB: 0xe4]\n    0xA4: { code: 'AltLeft', location: LEFT }, // [USB: 0xe2]\n    0xA5: { code: 'AltRight', location: RIGHT }, // [USB: 0xe6]\n\n    0xA6: { code: 'BrowserBack' }, // [USB: 0x0c/0x0224]\n    0xA7: { code: 'BrowserForward' }, // [USB: 0x0c/0x0225]\n    0xA8: { code: 'BrowserRefresh' }, // [USB: 0x0c/0x0227]\n    0xA9: { code: 'BrowserStop' }, // [USB: 0x0c/0x0226]\n    0xAA: { code: 'BrowserSearch' }, // [USB: 0x0c/0x0221]\n    0xAB: { code: 'BrowserFavorites' }, // [USB: 0x0c/0x0228]\n    0xAC: { code: 'BrowserHome' }, // [USB: 0x0c/0x0222]\n    0xAD: { code: 'VolumeMute' }, // [USB: 0x7f]\n    0xAE: { code: 'VolumeDown' }, // [USB: 0x81]\n    0xAF: { code: 'VolumeUp' }, // [USB: 0x80]\n\n    0xB0: { code: 'MediaTrackNext' }, // [USB: 0x0c/0x00b5]\n    0xB1: { code: 'MediaTrackPrevious' }, // [USB: 0x0c/0x00b6]\n    0xB2: { code: 'MediaStop' }, // [USB: 0x0c/0x00b7]\n    0xB3: { code: 'MediaPlayPause' }, // [USB: 0x0c/0x00cd]\n    0xB4: { code: 'LaunchMail' }, // [USB: 0x0c/0x018a]\n    0xB5: { code: 'MediaSelect' },\n    0xB6: { code: 'LaunchApp1' },\n    0xB7: { code: 'LaunchApp2' },\n    // 0xB8-0xB9 - reserved\n    0xBA: { code: 'Semicolon',  keyCap: ';' }, // [USB: 0x33] ;: (US Standard 101)\n    0xBB: { code: 'Equal', keyCap: '=' }, // [USB: 0x2e] =+\n    0xBC: { code: 'Comma', keyCap: ',' }, // [USB: 0x36] ,<\n    0xBD: { code: 'Minus', keyCap: '-' }, // [USB: 0x2d] -_\n    0xBE: { code: 'Period', keyCap: '.' }, // [USB: 0x37] .>\n    0xBF: { code: 'Slash', keyCap: '/' }, // [USB: 0x38] /? (US Standard 101)\n\n    0xC0: { code: 'Backquote', keyCap: '`' }, // [USB: 0x35] `~ (US Standard 101)\n    // 0xC1-0xCF - reserved\n\n    // 0xD0-0xD7 - reserved\n    // 0xD8-0xDA - unassigned\n    0xDB: { code: 'BracketLeft', keyCap: '[' }, // [USB: 0x2f] [{ (US Standard 101)\n    0xDC: { code: 'Backslash',  keyCap: '\\\\' }, // [USB: 0x31] \\| (US Standard 101)\n    0xDD: { code: 'BracketRight', keyCap: ']' }, // [USB: 0x30] ]} (US Standard 101)\n    0xDE: { code: 'Quote', keyCap: '\\'' }, // [USB: 0x34] '\" (US Standard 101)\n    // 0xDF - miscellaneous/varies\n\n    // 0xE0 - reserved\n    // 0xE1 - OEM specific\n    0xE2: { code: 'IntlBackslash',  keyCap: '\\\\' }, // [USB: 0x64] \\| (UK Standard 102)\n    // 0xE3-0xE4 - OEM specific\n    0xE5: { code: 'Process' }, // (Not in D3E)\n    // 0xE6 - OEM specific\n    // 0xE7 - VK_PACKET\n    // 0xE8 - unassigned\n    // 0xE9-0xEF - OEM specific\n\n    // 0xF0-0xF5 - OEM specific\n    0xF6: { code: 'Attn' }, // [USB: 0x9a] (Not in D3E)\n    0xF7: { code: 'CrSel' }, // [USB: 0xa3] (Not in D3E)\n    0xF8: { code: 'ExSel' }, // [USB: 0xa4] (Not in D3E)\n    0xF9: { code: 'EraseEof' }, // (Not in D3E)\n    0xFA: { code: 'Play' }, // (Not in D3E)\n    0xFB: { code: 'ZoomToggle' }, // (Not in D3E)\n    // 0xFC - VK_NONAME - reserved\n    // 0xFD - VK_PA1\n    0xFE: { code: 'Clear' } // [USB: 0x9c] (Not in D3E)\n  };\n\n  // No legacy keyCode, but listed in D3E:\n\n  // code: usb\n  // 'IntlHash': 0x070032,\n  // 'IntlRo': 0x070087,\n  // 'IntlYen': 0x070089,\n  // 'NumpadBackspace': 0x0700bb,\n  // 'NumpadClear': 0x0700d8,\n  // 'NumpadClearEntry': 0x0700d9,\n  // 'NumpadMemoryAdd': 0x0700d3,\n  // 'NumpadMemoryClear': 0x0700d2,\n  // 'NumpadMemoryRecall': 0x0700d1,\n  // 'NumpadMemoryStore': 0x0700d0,\n  // 'NumpadMemorySubtract': 0x0700d4,\n  // 'NumpadParenLeft': 0x0700b6,\n  // 'NumpadParenRight': 0x0700b7,\n\n  //--------------------------------------------------------------------\n  //\n  // Browser/OS Specific Mappings\n  //\n  //--------------------------------------------------------------------\n\n  mergeIf(keyCodeToInfoTable,\n          'moz', {\n            0x3B: { code: 'Semicolon', keyCap: ';' }, // [USB: 0x33] ;: (US Standard 101)\n            0x3D: { code: 'Equal', keyCap: '=' }, // [USB: 0x2e] =+\n            0x6B: { code: 'Equal', keyCap: '=' }, // [USB: 0x2e] =+\n            0x6D: { code: 'Minus', keyCap: '-' }, // [USB: 0x2d] -_\n            0xBB: { code: 'NumpadAdd', keyCap: '+', location: NUMPAD }, // [USB: 0x57]\n            0xBD: { code: 'NumpadSubtract', keyCap: '-', location: NUMPAD } // [USB: 0x56]\n          });\n\n  mergeIf(keyCodeToInfoTable,\n          'moz-mac', {\n            0x0C: { code: 'NumLock', location: NUMPAD }, // [USB: 0x53]\n            0xAD: { code: 'Minus', keyCap: '-' } // [USB: 0x2d] -_\n          });\n\n  mergeIf(keyCodeToInfoTable,\n          'moz-win', {\n            0xAD: { code: 'Minus', keyCap: '-' } // [USB: 0x2d] -_\n          });\n\n  mergeIf(keyCodeToInfoTable,\n          'chrome-mac', {\n            0x5D: { code: 'OSRight', location: RIGHT } // [USB: 0xe7]\n          });\n\n  // Windows via Bootcamp (!)\n  if (false) {}\n\n  mergeIf(keyCodeToInfoTable,\n          'safari', {\n            0x03: { code: 'Enter' }, // [USB: 0x28] old Safari\n            0x19: { code: 'Tab' } // [USB: 0x2b] old Safari for Shift+Tab\n          });\n\n  mergeIf(keyCodeToInfoTable,\n          'ios', {\n            0x0A: { code: 'Enter', location: STANDARD } // [USB: 0x28]\n          });\n\n  mergeIf(keyCodeToInfoTable,\n          'safari-mac', {\n            0x5B: { code: 'OSLeft', location: LEFT }, // [USB: 0xe3]\n            0x5D: { code: 'OSRight', location: RIGHT }, // [USB: 0xe7]\n            0xE5: { code: 'KeyQ', keyCap: 'Q' } // [USB: 0x14] On alternate presses, Ctrl+Q sends this\n          });\n\n  //--------------------------------------------------------------------\n  //\n  // Identifier Mappings\n  //\n  //--------------------------------------------------------------------\n\n  // Cases where newer-ish browsers send keyIdentifier which can be\n  // used to disambiguate keys.\n\n  // keyIdentifierTable[keyIdentifier] -> keyInfo\n\n  var keyIdentifierTable = {};\n  if ('cros' === os) {\n    keyIdentifierTable['U+00A0'] = { code: 'ShiftLeft', location: LEFT };\n    keyIdentifierTable['U+00A1'] = { code: 'ShiftRight', location: RIGHT };\n    keyIdentifierTable['U+00A2'] = { code: 'ControlLeft', location: LEFT };\n    keyIdentifierTable['U+00A3'] = { code: 'ControlRight', location: RIGHT };\n    keyIdentifierTable['U+00A4'] = { code: 'AltLeft', location: LEFT };\n    keyIdentifierTable['U+00A5'] = { code: 'AltRight', location: RIGHT };\n  }\n  if ('chrome-mac' === browser_os) {\n    keyIdentifierTable['U+0010'] = { code: 'ContextMenu' };\n  }\n  if ('safari-mac' === browser_os) {\n    keyIdentifierTable['U+0010'] = { code: 'ContextMenu' };\n  }\n  if ('ios' === os) {\n    // These only generate keyup events\n    keyIdentifierTable['U+0010'] = { code: 'Function' };\n\n    keyIdentifierTable['U+001C'] = { code: 'ArrowLeft' };\n    keyIdentifierTable['U+001D'] = { code: 'ArrowRight' };\n    keyIdentifierTable['U+001E'] = { code: 'ArrowUp' };\n    keyIdentifierTable['U+001F'] = { code: 'ArrowDown' };\n\n    keyIdentifierTable['U+0001'] = { code: 'Home' }; // [USB: 0x4a] Fn + ArrowLeft\n    keyIdentifierTable['U+0004'] = { code: 'End' }; // [USB: 0x4d] Fn + ArrowRight\n    keyIdentifierTable['U+000B'] = { code: 'PageUp' }; // [USB: 0x4b] Fn + ArrowUp\n    keyIdentifierTable['U+000C'] = { code: 'PageDown' }; // [USB: 0x4e] Fn + ArrowDown\n  }\n\n  //--------------------------------------------------------------------\n  //\n  // Location Mappings\n  //\n  //--------------------------------------------------------------------\n\n  // Cases where newer-ish browsers send location/keyLocation which\n  // can be used to disambiguate keys.\n\n  // locationTable[location][keyCode] -> keyInfo\n  var locationTable = [];\n  locationTable[LEFT] = {\n    0x10: { code: 'ShiftLeft', location: LEFT }, // [USB: 0xe1]\n    0x11: { code: 'ControlLeft', location: LEFT }, // [USB: 0xe0]\n    0x12: { code: 'AltLeft', location: LEFT } // [USB: 0xe2]\n  };\n  locationTable[RIGHT] = {\n    0x10: { code: 'ShiftRight', location: RIGHT }, // [USB: 0xe5]\n    0x11: { code: 'ControlRight', location: RIGHT }, // [USB: 0xe4]\n    0x12: { code: 'AltRight', location: RIGHT } // [USB: 0xe6]\n  };\n  locationTable[NUMPAD] = {\n    0x0D: { code: 'NumpadEnter', location: NUMPAD } // [USB: 0x58]\n  };\n\n  mergeIf(locationTable[NUMPAD], 'moz', {\n    0x6D: { code: 'NumpadSubtract', location: NUMPAD }, // [USB: 0x56]\n    0x6B: { code: 'NumpadAdd', location: NUMPAD } // [USB: 0x57]\n  });\n  mergeIf(locationTable[LEFT], 'moz-mac', {\n    0xE0: { code: 'OSLeft', location: LEFT } // [USB: 0xe3]\n  });\n  mergeIf(locationTable[RIGHT], 'moz-mac', {\n    0xE0: { code: 'OSRight', location: RIGHT } // [USB: 0xe7]\n  });\n  mergeIf(locationTable[RIGHT], 'moz-win', {\n    0x5B: { code: 'OSRight', location: RIGHT } // [USB: 0xe7]\n  });\n\n\n  mergeIf(locationTable[RIGHT], 'mac', {\n    0x5D: { code: 'OSRight', location: RIGHT } // [USB: 0xe7]\n  });\n\n  mergeIf(locationTable[NUMPAD], 'chrome-mac', {\n    0x0C: { code: 'NumLock', location: NUMPAD } // [USB: 0x53]\n  });\n\n  mergeIf(locationTable[NUMPAD], 'safari-mac', {\n    0x0C: { code: 'NumLock', location: NUMPAD }, // [USB: 0x53]\n    0xBB: { code: 'NumpadAdd', location: NUMPAD }, // [USB: 0x57]\n    0xBD: { code: 'NumpadSubtract', location: NUMPAD }, // [USB: 0x56]\n    0xBE: { code: 'NumpadDecimal', location: NUMPAD }, // [USB: 0x63]\n    0xBF: { code: 'NumpadDivide', location: NUMPAD } // [USB: 0x54]\n  });\n\n\n  //--------------------------------------------------------------------\n  //\n  // Key Values\n  //\n  //--------------------------------------------------------------------\n\n  // Mapping from `code` values to `key` values. Values defined at:\n  // https://dvcs.w3.org/hg/dom3events/raw-file/tip/html/DOM3Events-key.html\n  // Entries are only provided when `key` differs from `code`. If\n  // printable, `shiftKey` has the shifted printable character. This\n  // assumes US Standard 101 layout\n\n  var codeToKeyTable = {\n    // Modifier Keys\n    ShiftLeft: { key: 'Shift' },\n    ShiftRight: { key: 'Shift' },\n    ControlLeft: { key: 'Control' },\n    ControlRight: { key: 'Control' },\n    AltLeft: { key: 'Alt' },\n    AltRight: { key: 'Alt' },\n    OSLeft: { key: 'OS' },\n    OSRight: { key: 'OS' },\n\n    // Whitespace Keys\n    NumpadEnter: { key: 'Enter' },\n    Space: { key: ' ' },\n\n    // Printable Keys\n    Digit0: { key: '0', shiftKey: ')' },\n    Digit1: { key: '1', shiftKey: '!' },\n    Digit2: { key: '2', shiftKey: '@' },\n    Digit3: { key: '3', shiftKey: '#' },\n    Digit4: { key: '4', shiftKey: '$' },\n    Digit5: { key: '5', shiftKey: '%' },\n    Digit6: { key: '6', shiftKey: '^' },\n    Digit7: { key: '7', shiftKey: '&' },\n    Digit8: { key: '8', shiftKey: '*' },\n    Digit9: { key: '9', shiftKey: '(' },\n    KeyA: { key: 'a', shiftKey: 'A' },\n    KeyB: { key: 'b', shiftKey: 'B' },\n    KeyC: { key: 'c', shiftKey: 'C' },\n    KeyD: { key: 'd', shiftKey: 'D' },\n    KeyE: { key: 'e', shiftKey: 'E' },\n    KeyF: { key: 'f', shiftKey: 'F' },\n    KeyG: { key: 'g', shiftKey: 'G' },\n    KeyH: { key: 'h', shiftKey: 'H' },\n    KeyI: { key: 'i', shiftKey: 'I' },\n    KeyJ: { key: 'j', shiftKey: 'J' },\n    KeyK: { key: 'k', shiftKey: 'K' },\n    KeyL: { key: 'l', shiftKey: 'L' },\n    KeyM: { key: 'm', shiftKey: 'M' },\n    KeyN: { key: 'n', shiftKey: 'N' },\n    KeyO: { key: 'o', shiftKey: 'O' },\n    KeyP: { key: 'p', shiftKey: 'P' },\n    KeyQ: { key: 'q', shiftKey: 'Q' },\n    KeyR: { key: 'r', shiftKey: 'R' },\n    KeyS: { key: 's', shiftKey: 'S' },\n    KeyT: { key: 't', shiftKey: 'T' },\n    KeyU: { key: 'u', shiftKey: 'U' },\n    KeyV: { key: 'v', shiftKey: 'V' },\n    KeyW: { key: 'w', shiftKey: 'W' },\n    KeyX: { key: 'x', shiftKey: 'X' },\n    KeyY: { key: 'y', shiftKey: 'Y' },\n    KeyZ: { key: 'z', shiftKey: 'Z' },\n    Numpad0: { key: '0' },\n    Numpad1: { key: '1' },\n    Numpad2: { key: '2' },\n    Numpad3: { key: '3' },\n    Numpad4: { key: '4' },\n    Numpad5: { key: '5' },\n    Numpad6: { key: '6' },\n    Numpad7: { key: '7' },\n    Numpad8: { key: '8' },\n    Numpad9: { key: '9' },\n    NumpadMultiply: { key: '*' },\n    NumpadAdd: { key: '+' },\n    NumpadComma: { key: ',' },\n    NumpadSubtract: { key: '-' },\n    NumpadDecimal: { key: '.' },\n    NumpadDivide: { key: '/' },\n    Semicolon: { key: ';', shiftKey: ':' },\n    Equal: { key: '=', shiftKey: '+' },\n    Comma: { key: ',', shiftKey: '<' },\n    Minus: { key: '-', shiftKey: '_' },\n    Period: { key: '.', shiftKey: '>' },\n    Slash: { key: '/', shiftKey: '?' },\n    Backquote: { key: '`', shiftKey: '~' },\n    BracketLeft: { key: '[', shiftKey: '{' },\n    Backslash: { key: '\\\\', shiftKey: '|' },\n    BracketRight: { key: ']', shiftKey: '}' },\n    Quote: { key: '\\'', shiftKey: '\"' },\n    IntlBackslash: { key: '\\\\', shiftKey: '|' }\n  };\n\n  mergeIf(codeToKeyTable, 'mac', {\n    OSLeft: { key: 'Meta' },\n    OSRight: { key: 'Meta' }\n  });\n\n  // Corrections for 'key' names in older browsers (e.g. FF36-)\n  // https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent.key#Key_values\n  var keyFixTable = {\n    Esc: 'Escape',\n    Nonconvert: 'NonConvert',\n    Left: 'ArrowLeft',\n    Up: 'ArrowUp',\n    Right: 'ArrowRight',\n    Down: 'ArrowDown',\n    Del: 'Delete',\n    Menu: 'ContextMenu',\n    MediaNextTrack: 'MediaTrackNext',\n    MediaPreviousTrack: 'MediaTrackPrevious',\n    SelectMedia: 'MediaSelect',\n    HalfWidth: 'Hankaku',\n    FullWidth: 'Zenkaku',\n    RomanCharacters: 'Romaji',\n    Crsel: 'CrSel',\n    Exsel: 'ExSel',\n    Zoom: 'ZoomToggle'\n  };\n\n  //--------------------------------------------------------------------\n  //\n  // Exported Functions\n  //\n  //--------------------------------------------------------------------\n\n\n  var codeTable = remap(keyCodeToInfoTable, 'code');\n\n  try {\n    var nativeLocation = nativeKeyboardEvent && ('location' in new KeyboardEvent(''));\n  } catch (_) {}\n\n  function keyInfoForEvent(event) {\n    var keyCode = 'keyCode' in event ? event.keyCode : 'which' in event ? event.which : 0;\n\n    var keyInfo = (function(){\n      if (nativeLocation || 'keyLocation' in event) {\n        var location = nativeLocation ? event.location : event.keyLocation;\n        if (location && keyCode in locationTable[location]) {\n          return locationTable[location][keyCode];\n        }\n      }\n      if ('keyIdentifier' in event && event.keyIdentifier in keyIdentifierTable) {\n        return keyIdentifierTable[event.keyIdentifier];\n      }\n      if (keyCode in keyCodeToInfoTable) {\n        return keyCodeToInfoTable[keyCode];\n      }\n      return null;\n    }());\n\n    // TODO: Track these down and move to general tables\n    if (false) {}\n\n    if (!keyInfo)\n      return null;\n\n    var key = (function() {\n      var entry = codeToKeyTable[keyInfo.code];\n      if (!entry) return keyInfo.code;\n      return (event.shiftKey && 'shiftKey' in entry) ? entry.shiftKey : entry.key;\n    }());\n\n    return {\n      code: keyInfo.code,\n      key: key,\n      location: keyInfo.location,\n      keyCap: keyInfo.keyCap\n    };\n  }\n\n  function queryKeyCap(code, locale) {\n    code = String(code);\n    if (!codeTable.hasOwnProperty(code)) return 'Undefined';\n    if (locale && String(locale).toLowerCase() !== 'en-us') throw Error('Unsupported locale');\n    var keyInfo = codeTable[code];\n    return keyInfo.keyCap || keyInfo.code || 'Undefined';\n  }\n\n  if ('KeyboardEvent' in global && 'defineProperty' in Object) {\n    (function() {\n      function define(o, p, v) {\n        if (p in o) return;\n        Object.defineProperty(o, p, v);\n      }\n\n      define(KeyboardEvent.prototype, 'code', { get: function() {\n        var keyInfo = keyInfoForEvent(this);\n        return keyInfo ? keyInfo.code : '';\n      }});\n\n      // Fix for nonstandard `key` values (FF36-)\n      if ('key' in KeyboardEvent.prototype) {\n        var desc = Object.getOwnPropertyDescriptor(KeyboardEvent.prototype, 'key');\n        Object.defineProperty(KeyboardEvent.prototype, 'key', { get: function() {\n          var key = desc.get.call(this);\n          return keyFixTable.hasOwnProperty(key) ? keyFixTable[key] : key;\n        }});\n      }\n\n      define(KeyboardEvent.prototype, 'key', { get: function() {\n        var keyInfo = keyInfoForEvent(this);\n        return (keyInfo && 'key' in keyInfo) ? keyInfo.key : 'Unidentified';\n      }});\n\n      define(KeyboardEvent.prototype, 'location', { get: function() {\n        var keyInfo = keyInfoForEvent(this);\n        return (keyInfo && 'location' in keyInfo) ? keyInfo.location : STANDARD;\n      }});\n\n      define(KeyboardEvent.prototype, 'locale', { get: function() {\n        return '';\n      }});\n    }());\n  }\n\n  if (!('queryKeyCap' in global.KeyboardEvent))\n    global.KeyboardEvent.queryKeyCap = queryKeyCap;\n\n  // Helper for IE8-\n  global.identifyKey = function(event) {\n    if ('code' in event)\n      return;\n\n    var keyInfo = keyInfoForEvent(event);\n    event.code = keyInfo ? keyInfo.code : '';\n    event.key = (keyInfo && 'key' in keyInfo) ? keyInfo.key : 'Unidentified';\n    event.location = ('location' in event) ? event.location :\n      ('keyLocation' in event) ? event.keyLocation :\n      (keyInfo && 'location' in keyInfo) ? keyInfo.location : STANDARD;\n    event.locale = '';\n  };\n\n} (window));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYWZyYW1lLWV4dHJhc0A3LjUuMS9ub2RlX21vZHVsZXMvYWZyYW1lLWV4dHJhcy9saWIva2V5Ym9hcmQucG9seWZpbGwuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXNEOztBQUV0RCxxSEFBcUg7QUFDckgsc0hBQXNIO0FBQ3RILHVIQUF1SDtBQUN2SCx3SEFBd0g7O0FBRXhIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsNkJBQTZCOztBQUU3QjtBQUNBLCtDQUErQztBQUMvQywrQ0FBK0M7QUFDL0MsZ0RBQWdEO0FBQ2hELGlEQUFpRDtBQUNqRCxtSUFBbUk7QUFDbkk7QUFDQSxJQUFJOztBQUVKO0FBQ0Esb0RBQW9EO0FBQ3BELCtDQUErQztBQUMvQyxpREFBaUQ7QUFDakQsbURBQW1EO0FBQ25ELG1EQUFtRDtBQUNuRDtBQUNBLElBQUk7O0FBRUo7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGdCQUFnQjtBQUM1QjtBQUNBO0FBQ0E7QUFDQSxZQUFZLGNBQWM7QUFDMUI7QUFDQSxZQUFZLG1CQUFtQjtBQUMvQixZQUFZLGFBQWE7QUFDekI7QUFDQSxZQUFZLGVBQWU7QUFDM0IsWUFBWSxlQUFlO0FBQzNCOztBQUVBLFlBQVksZUFBZTtBQUMzQixZQUFZLGlCQUFpQjtBQUM3QixZQUFZLGFBQWE7QUFDekIsWUFBWSxlQUFlO0FBQzNCLFlBQVksa0JBQWtCO0FBQzlCLFlBQVksa0JBQWtCO0FBQzlCLFlBQVksb0JBQW9CO0FBQ2hDLFlBQVksbUJBQW1CO0FBQy9CLFlBQVksbUJBQW1CO0FBQy9CLFlBQVksbUJBQW1CO0FBQy9CO0FBQ0EsWUFBWSxnQkFBZ0I7QUFDNUIsWUFBWSxpQkFBaUI7QUFDN0IsWUFBWSxvQkFBb0I7QUFDaEMsWUFBWSxnQkFBZ0I7QUFDNUIsWUFBWSxvQkFBb0I7O0FBRWhDLFlBQVksZUFBZTtBQUMzQixZQUFZLGdCQUFnQjtBQUM1QixZQUFZLGtCQUFrQjtBQUM5QixZQUFZLGFBQWE7QUFDekIsWUFBWSxjQUFjO0FBQzFCLFlBQVksbUJBQW1CO0FBQy9CLFlBQVksaUJBQWlCO0FBQzdCLFlBQVksb0JBQW9CO0FBQ2hDLFlBQVksbUJBQW1CO0FBQy9CLFlBQVksZ0JBQWdCO0FBQzVCLFlBQVksZUFBZTtBQUMzQixZQUFZLGlCQUFpQjtBQUM3QixZQUFZLHFCQUFxQjtBQUNqQyxZQUFZLGdCQUFnQjtBQUM1QixZQUFZLGdCQUFnQjtBQUM1QixZQUFZLGNBQWM7O0FBRTFCLFlBQVksNkJBQTZCO0FBQ3pDLFlBQVksNkJBQTZCO0FBQ3pDLFlBQVksNkJBQTZCO0FBQ3pDLFlBQVksNkJBQTZCO0FBQ3pDLFlBQVksNkJBQTZCO0FBQ3pDLFlBQVksNkJBQTZCO0FBQ3pDLFlBQVksNkJBQTZCO0FBQ3pDLFlBQVksNkJBQTZCO0FBQ3pDLFlBQVksNkJBQTZCO0FBQ3pDLFlBQVksNkJBQTZCO0FBQ3pDOztBQUVBLFlBQVksMkJBQTJCO0FBQ3ZDLFlBQVksMkJBQTJCO0FBQ3ZDLFlBQVksMkJBQTJCO0FBQ3ZDLFlBQVksMkJBQTJCO0FBQ3ZDLFlBQVksMkJBQTJCO0FBQ3ZDLFlBQVksMkJBQTJCO0FBQ3ZDLFlBQVksMkJBQTJCO0FBQ3ZDLFlBQVksMkJBQTJCO0FBQ3ZDLFlBQVksMkJBQTJCO0FBQ3ZDLFlBQVksMkJBQTJCO0FBQ3ZDLFlBQVksMkJBQTJCO0FBQ3ZDLFlBQVksMkJBQTJCO0FBQ3ZDLFlBQVksMkJBQTJCO0FBQ3ZDLFlBQVksMkJBQTJCO0FBQ3ZDLFlBQVksMkJBQTJCOztBQUV2QyxZQUFZLDJCQUEyQjtBQUN2QyxZQUFZLDJCQUEyQjtBQUN2QyxZQUFZLDJCQUEyQjtBQUN2QyxZQUFZLDJCQUEyQjtBQUN2QyxZQUFZLDJCQUEyQjtBQUN2QyxZQUFZLDJCQUEyQjtBQUN2QyxZQUFZLDJCQUEyQjtBQUN2QyxZQUFZLDJCQUEyQjtBQUN2QyxZQUFZLDJCQUEyQjtBQUN2QyxZQUFZLDJCQUEyQjtBQUN2QyxZQUFZLDJCQUEyQjtBQUN2QyxZQUFZLGdDQUFnQztBQUM1QyxZQUFZLGtDQUFrQztBQUM5QyxZQUFZLHFCQUFxQjtBQUNqQztBQUNBLFlBQVksaUJBQWlCOztBQUU3QixZQUFZLGdEQUFnRDtBQUM1RCxZQUFZLGdEQUFnRDtBQUM1RCxZQUFZLGdEQUFnRDtBQUM1RCxZQUFZLGdEQUFnRDtBQUM1RCxZQUFZLGdEQUFnRDtBQUM1RCxZQUFZLGdEQUFnRDtBQUM1RCxZQUFZLGdEQUFnRDtBQUM1RCxZQUFZLGdEQUFnRDtBQUM1RCxZQUFZLGdEQUFnRDtBQUM1RCxZQUFZLGdEQUFnRDtBQUM1RCxZQUFZLHVEQUF1RDtBQUNuRSxZQUFZLGtEQUFrRDtBQUM5RCxZQUFZLG9EQUFvRDtBQUNoRSxZQUFZLHVEQUF1RDtBQUNuRSxZQUFZLHNEQUFzRDtBQUNsRSxZQUFZLHFEQUFxRDs7QUFFakUsWUFBWSxZQUFZO0FBQ3hCLFlBQVksWUFBWTtBQUN4QixZQUFZLFlBQVk7QUFDeEIsWUFBWSxZQUFZO0FBQ3hCLFlBQVksWUFBWTtBQUN4QixZQUFZLFlBQVk7QUFDeEIsWUFBWSxZQUFZO0FBQ3hCLFlBQVksWUFBWTtBQUN4QixZQUFZLFlBQVk7QUFDeEIsWUFBWSxhQUFhO0FBQ3pCLFlBQVksYUFBYTtBQUN6QixZQUFZLGFBQWE7QUFDekIsWUFBWSxhQUFhO0FBQ3pCLFlBQVksYUFBYTtBQUN6QixZQUFZLGFBQWE7QUFDekIsWUFBWSxhQUFhOztBQUV6QixZQUFZLGFBQWE7QUFDekIsWUFBWSxhQUFhO0FBQ3pCLFlBQVksYUFBYTtBQUN6QixZQUFZLGFBQWE7QUFDekIsWUFBWSxhQUFhO0FBQ3pCLFlBQVksYUFBYTtBQUN6QixZQUFZLGFBQWE7QUFDekIsWUFBWSxhQUFhO0FBQ3pCOztBQUVBLFlBQVksbUNBQW1DO0FBQy9DLFlBQVksb0JBQW9CO0FBQ2hDO0FBQ0E7O0FBRUE7QUFDQSxZQUFZLG1DQUFtQztBQUMvQyxZQUFZLHFDQUFxQztBQUNqRCxZQUFZLHFDQUFxQztBQUNqRCxZQUFZLHVDQUF1QztBQUNuRCxZQUFZLGlDQUFpQztBQUM3QyxZQUFZLG1DQUFtQzs7QUFFL0MsWUFBWSxxQkFBcUI7QUFDakMsWUFBWSx3QkFBd0I7QUFDcEMsWUFBWSx3QkFBd0I7QUFDcEMsWUFBWSxxQkFBcUI7QUFDakMsWUFBWSx1QkFBdUI7QUFDbkMsWUFBWSwwQkFBMEI7QUFDdEMsWUFBWSxxQkFBcUI7QUFDakMsWUFBWSxvQkFBb0I7QUFDaEMsWUFBWSxvQkFBb0I7QUFDaEMsWUFBWSxrQkFBa0I7O0FBRTlCLFlBQVksd0JBQXdCO0FBQ3BDLFlBQVksNEJBQTRCO0FBQ3hDLFlBQVksbUJBQW1CO0FBQy9CLFlBQVksd0JBQXdCO0FBQ3BDLFlBQVksb0JBQW9CO0FBQ2hDLFlBQVkscUJBQXFCO0FBQ2pDLFlBQVksb0JBQW9CO0FBQ2hDLFlBQVksb0JBQW9CO0FBQ2hDO0FBQ0EsWUFBWSw4QkFBOEIsR0FBRyxrQkFBa0I7QUFDL0QsWUFBWSw0QkFBNEI7QUFDeEMsWUFBWSw0QkFBNEI7QUFDeEMsWUFBWSw0QkFBNEI7QUFDeEMsWUFBWSw2QkFBNkI7QUFDekMsWUFBWSw0QkFBNEI7O0FBRXhDLFlBQVksZ0NBQWdDO0FBQzVDOztBQUVBO0FBQ0E7QUFDQSxZQUFZLGtDQUFrQyxvQkFBb0I7QUFDbEUsWUFBWSxrQ0FBa0M7QUFDOUMsWUFBWSxtQ0FBbUMsb0JBQW9CO0FBQ25FLFlBQVksNkJBQTZCO0FBQ3pDOztBQUVBO0FBQ0E7QUFDQSxZQUFZLHNDQUFzQztBQUNsRDtBQUNBLFlBQVksaUJBQWlCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsWUFBWSxjQUFjO0FBQzFCLFlBQVksZUFBZTtBQUMzQixZQUFZLGVBQWU7QUFDM0IsWUFBWSxrQkFBa0I7QUFDOUIsWUFBWSxjQUFjO0FBQzFCLFlBQVksb0JBQW9CO0FBQ2hDO0FBQ0E7QUFDQSxZQUFZLGdCQUFnQjtBQUM1Qjs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG9CQUFvQiw2QkFBNkIsR0FBRyxrQkFBa0I7QUFDdEUsb0JBQW9CLDRCQUE0QjtBQUNoRCxvQkFBb0IsNEJBQTRCO0FBQ2hELG9CQUFvQiw0QkFBNEI7QUFDaEQsb0JBQW9CLGtEQUFrRDtBQUN0RSxvQkFBb0Isd0RBQXdEO0FBQzVFLFdBQVc7O0FBRVg7QUFDQTtBQUNBLG9CQUFvQixtQ0FBbUM7QUFDdkQsb0JBQW9CLDZCQUE2QjtBQUNqRCxXQUFXOztBQUVYO0FBQ0E7QUFDQSxvQkFBb0IsNkJBQTZCO0FBQ2pELFdBQVc7O0FBRVg7QUFDQTtBQUNBLG9CQUFvQixtQ0FBbUM7QUFDdkQsV0FBVzs7QUFFWDtBQUNBLE1BQU0sS0FBQyxFQUFFLEVBY047O0FBRUg7QUFDQTtBQUNBLG9CQUFvQixlQUFlO0FBQ25DLG9CQUFvQixjQUFjO0FBQ2xDLFdBQVc7O0FBRVg7QUFDQTtBQUNBLG9CQUFvQixvQ0FBb0M7QUFDeEQsV0FBVzs7QUFFWDtBQUNBO0FBQ0Esb0JBQW9CLGdDQUFnQztBQUNwRCxvQkFBb0Isa0NBQWtDO0FBQ3RELG9CQUFvQiw0QkFBNEI7QUFDaEQsV0FBVzs7QUFFWDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLHFDQUFxQztBQUNyQyxxQ0FBcUM7QUFDckMscUNBQXFDO0FBQ3JDLHFDQUFxQztBQUNyQyxxQ0FBcUM7QUFDckMscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBLHFDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQSxxQ0FBcUM7O0FBRXJDLHFDQUFxQztBQUNyQyxxQ0FBcUM7QUFDckMscUNBQXFDO0FBQ3JDLHFDQUFxQzs7QUFFckMscUNBQXFDLGdCQUFnQjtBQUNyRCxxQ0FBcUMsZUFBZTtBQUNwRCxxQ0FBcUMsa0JBQWtCO0FBQ3ZELHFDQUFxQyxvQkFBb0I7QUFDekQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFlBQVksbUNBQW1DO0FBQy9DLFlBQVkscUNBQXFDO0FBQ2pELFlBQVksa0NBQWtDO0FBQzlDO0FBQ0E7QUFDQSxZQUFZLHFDQUFxQztBQUNqRCxZQUFZLHVDQUF1QztBQUNuRCxZQUFZLG9DQUFvQztBQUNoRDtBQUNBO0FBQ0EsWUFBWSx3Q0FBd0M7QUFDcEQ7O0FBRUE7QUFDQSxZQUFZLDBDQUEwQztBQUN0RCxZQUFZLHNDQUFzQztBQUNsRCxHQUFHO0FBQ0g7QUFDQSxZQUFZLGlDQUFpQztBQUM3QyxHQUFHO0FBQ0g7QUFDQSxZQUFZLG1DQUFtQztBQUMvQyxHQUFHO0FBQ0g7QUFDQSxZQUFZLG1DQUFtQztBQUMvQyxHQUFHOzs7QUFHSDtBQUNBLFlBQVksbUNBQW1DO0FBQy9DLEdBQUc7O0FBRUg7QUFDQSxZQUFZLG9DQUFvQztBQUNoRCxHQUFHOztBQUVIO0FBQ0EsWUFBWSxtQ0FBbUM7QUFDL0MsWUFBWSxxQ0FBcUM7QUFDakQsWUFBWSwwQ0FBMEM7QUFDdEQsWUFBWSx5Q0FBeUM7QUFDckQsWUFBWSx5Q0FBeUM7QUFDckQsR0FBRzs7O0FBR0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUIsY0FBYztBQUMvQixrQkFBa0IsY0FBYztBQUNoQyxtQkFBbUIsZ0JBQWdCO0FBQ25DLG9CQUFvQixnQkFBZ0I7QUFDcEMsZUFBZSxZQUFZO0FBQzNCLGdCQUFnQixZQUFZO0FBQzVCLGNBQWMsV0FBVztBQUN6QixlQUFlLFdBQVc7O0FBRTFCO0FBQ0EsbUJBQW1CLGNBQWM7QUFDakMsYUFBYSxVQUFVOztBQUV2QjtBQUNBLGNBQWMseUJBQXlCO0FBQ3ZDLGNBQWMseUJBQXlCO0FBQ3ZDLGNBQWMseUJBQXlCO0FBQ3ZDLGNBQWMseUJBQXlCO0FBQ3ZDLGNBQWMseUJBQXlCO0FBQ3ZDLGNBQWMseUJBQXlCO0FBQ3ZDLGNBQWMseUJBQXlCO0FBQ3ZDLGNBQWMseUJBQXlCO0FBQ3ZDLGNBQWMseUJBQXlCO0FBQ3ZDLGNBQWMseUJBQXlCO0FBQ3ZDLFlBQVkseUJBQXlCO0FBQ3JDLFlBQVkseUJBQXlCO0FBQ3JDLFlBQVkseUJBQXlCO0FBQ3JDLFlBQVkseUJBQXlCO0FBQ3JDLFlBQVkseUJBQXlCO0FBQ3JDLFlBQVkseUJBQXlCO0FBQ3JDLFlBQVkseUJBQXlCO0FBQ3JDLFlBQVkseUJBQXlCO0FBQ3JDLFlBQVkseUJBQXlCO0FBQ3JDLFlBQVkseUJBQXlCO0FBQ3JDLFlBQVkseUJBQXlCO0FBQ3JDLFlBQVkseUJBQXlCO0FBQ3JDLFlBQVkseUJBQXlCO0FBQ3JDLFlBQVkseUJBQXlCO0FBQ3JDLFlBQVkseUJBQXlCO0FBQ3JDLFlBQVkseUJBQXlCO0FBQ3JDLFlBQVkseUJBQXlCO0FBQ3JDLFlBQVkseUJBQXlCO0FBQ3JDLFlBQVkseUJBQXlCO0FBQ3JDLFlBQVkseUJBQXlCO0FBQ3JDLFlBQVkseUJBQXlCO0FBQ3JDLFlBQVkseUJBQXlCO0FBQ3JDLFlBQVkseUJBQXlCO0FBQ3JDLFlBQVkseUJBQXlCO0FBQ3JDLFlBQVkseUJBQXlCO0FBQ3JDLFlBQVkseUJBQXlCO0FBQ3JDLGVBQWUsVUFBVTtBQUN6QixlQUFlLFVBQVU7QUFDekIsZUFBZSxVQUFVO0FBQ3pCLGVBQWUsVUFBVTtBQUN6QixlQUFlLFVBQVU7QUFDekIsZUFBZSxVQUFVO0FBQ3pCLGVBQWUsVUFBVTtBQUN6QixlQUFlLFVBQVU7QUFDekIsZUFBZSxVQUFVO0FBQ3pCLGVBQWUsVUFBVTtBQUN6QixzQkFBc0IsVUFBVTtBQUNoQyxpQkFBaUIsVUFBVTtBQUMzQixtQkFBbUIsVUFBVTtBQUM3QixzQkFBc0IsVUFBVTtBQUNoQyxxQkFBcUIsVUFBVTtBQUMvQixvQkFBb0IsVUFBVTtBQUM5QixpQkFBaUIsT0FBTyxrQkFBa0I7QUFDMUMsYUFBYSx5QkFBeUI7QUFDdEMsYUFBYSx5QkFBeUI7QUFDdEMsYUFBYSx5QkFBeUI7QUFDdEMsY0FBYyx5QkFBeUI7QUFDdkMsYUFBYSx5QkFBeUI7QUFDdEMsaUJBQWlCLHlCQUF5QjtBQUMxQyxtQkFBbUIsc0JBQXNCLEdBQUc7QUFDNUMsaUJBQWlCLDBCQUEwQjtBQUMzQyxvQkFBb0Isc0JBQXNCLEdBQUc7QUFDN0MsYUFBYSwwQkFBMEI7QUFDdkMscUJBQXFCO0FBQ3JCOztBQUVBO0FBQ0EsY0FBYyxhQUFhO0FBQzNCLGVBQWU7QUFDZixHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0EsUUFBUSxLQUFDLEVBQUUsRUFXTjs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsZ0RBQWdEO0FBQ2hEO0FBQ0E7QUFDQSxRQUFROztBQUVSO0FBQ0E7QUFDQTtBQUNBLGdFQUFnRTtBQUNoRTtBQUNBO0FBQ0EsVUFBVTtBQUNWOztBQUVBLCtDQUErQztBQUMvQztBQUNBO0FBQ0EsUUFBUTs7QUFFUixvREFBb0Q7QUFDcEQ7QUFDQTtBQUNBLFFBQVE7O0FBRVIsa0RBQWtEO0FBQ2xEO0FBQ0EsUUFBUTtBQUNSLEtBQUs7QUFDTDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL3NtYV9wb3N0X3NjYXJjaXR5Ly4vbm9kZV9tb2R1bGVzLy5wbnBtL2FmcmFtZS1leHRyYXNANy41LjEvbm9kZV9tb2R1bGVzL2FmcmFtZS1leHRyYXMvbGliL2tleWJvYXJkLnBvbHlmaWxsLmpzPzE2OWYiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBQb2x5ZmlsbCBmb3IgdGhlIGFkZGl0aW9uYWwgS2V5Ym9hcmRFdmVudCBwcm9wZXJ0aWVzIGRlZmluZWQgaW4gdGhlIEQzRSBhbmRcbiAqIEQ0RSBkcmFmdCBzcGVjaWZpY2F0aW9ucywgYnkgQGluZXhvcmFibGV0YXNoLlxuICpcbiAqIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2luZXhvcmFibGV0YXNoL3BvbHlmaWxsXG4gKi9cbihmdW5jdGlvbihnbG9iYWwpIHtcbiAgdmFyIG5hdGl2ZUtleWJvYXJkRXZlbnQgPSAoJ0tleWJvYXJkRXZlbnQnIGluIGdsb2JhbCk7XG4gIGlmICghbmF0aXZlS2V5Ym9hcmRFdmVudClcbiAgICBnbG9iYWwuS2V5Ym9hcmRFdmVudCA9IGZ1bmN0aW9uIEtleWJvYXJkRXZlbnQoKSB7IHRocm93IFR5cGVFcnJvcignSWxsZWdhbCBjb25zdHJ1Y3RvcicpOyB9O1xuXG4gIGlmICghKCdET01fS0VZX0xPQ0FUSU9OX1NUQU5EQVJEJyBpbiBnbG9iYWwuS2V5Ym9hcmRFdmVudCkpIGdsb2JhbC5LZXlib2FyZEV2ZW50LkRPTV9LRVlfTE9DQVRJT05fU1RBTkRBUkQgPSAweDAwOyAvLyBEZWZhdWx0IG9yIHVua25vd24gbG9jYXRpb25cbiAgaWYgKCEoJ0RPTV9LRVlfTE9DQVRJT05fTEVGVCcgaW4gZ2xvYmFsLktleWJvYXJkRXZlbnQpKSBnbG9iYWwuS2V5Ym9hcmRFdmVudC5ET01fS0VZX0xPQ0FUSU9OX0xFRlQgICAgICAgICAgPSAweDAxOyAvLyBlLmcuIExlZnQgQWx0IGtleVxuICBpZiAoISgnRE9NX0tFWV9MT0NBVElPTl9SSUdIVCcgaW4gZ2xvYmFsLktleWJvYXJkRXZlbnQpKSBnbG9iYWwuS2V5Ym9hcmRFdmVudC5ET01fS0VZX0xPQ0FUSU9OX1JJR0hUICAgICAgICAgPSAweDAyOyAvLyBlLmcuIFJpZ2h0IEFsdCBrZXlcbiAgaWYgKCEoJ0RPTV9LRVlfTE9DQVRJT05fTlVNUEFEJyBpbiBnbG9iYWwuS2V5Ym9hcmRFdmVudCkpIGdsb2JhbC5LZXlib2FyZEV2ZW50LkRPTV9LRVlfTE9DQVRJT05fTlVNUEFEICAgICAgICA9IDB4MDM7IC8vIGUuZy4gTnVtcGFkIDAgb3IgK1xuXG4gIHZhciBTVEFOREFSRCA9IHdpbmRvdy5LZXlib2FyZEV2ZW50LkRPTV9LRVlfTE9DQVRJT05fU1RBTkRBUkQsXG4gICAgICBMRUZUID0gd2luZG93LktleWJvYXJkRXZlbnQuRE9NX0tFWV9MT0NBVElPTl9MRUZULFxuICAgICAgUklHSFQgPSB3aW5kb3cuS2V5Ym9hcmRFdmVudC5ET01fS0VZX0xPQ0FUSU9OX1JJR0hULFxuICAgICAgTlVNUEFEID0gd2luZG93LktleWJvYXJkRXZlbnQuRE9NX0tFWV9MT0NBVElPTl9OVU1QQUQ7XG5cbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvL1xuICAvLyBVdGlsaXRpZXNcbiAgLy9cbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIGZ1bmN0aW9uIGNvbnRhaW5zKHMsIHNzKSB7IHJldHVybiBTdHJpbmcocykuaW5kZXhPZihzcykgIT09IC0xOyB9XG5cbiAgdmFyIG9zID0gKGZ1bmN0aW9uKCkge1xuICAgIGlmIChjb250YWlucyhuYXZpZ2F0b3IucGxhdGZvcm0sICdXaW4nKSkgeyByZXR1cm4gJ3dpbic7IH1cbiAgICBpZiAoY29udGFpbnMobmF2aWdhdG9yLnBsYXRmb3JtLCAnTWFjJykpIHsgcmV0dXJuICdtYWMnOyB9XG4gICAgaWYgKGNvbnRhaW5zKG5hdmlnYXRvci5wbGF0Zm9ybSwgJ0NyT1MnKSkgeyByZXR1cm4gJ2Nyb3MnOyB9XG4gICAgaWYgKGNvbnRhaW5zKG5hdmlnYXRvci5wbGF0Zm9ybSwgJ0xpbnV4JykpIHsgcmV0dXJuICdsaW51eCc7IH1cbiAgICBpZiAoY29udGFpbnMobmF2aWdhdG9yLnVzZXJBZ2VudCwgJ2lQYWQnKSB8fCBjb250YWlucyhuYXZpZ2F0b3IucGxhdGZvcm0sICdpUG9kJykgfHwgY29udGFpbnMobmF2aWdhdG9yLnBsYXRmb3JtLCAnaVBob25lJykpIHsgcmV0dXJuICdpb3MnOyB9XG4gICAgcmV0dXJuICcnO1xuICB9ICgpKTtcblxuICB2YXIgYnJvd3NlciA9IChmdW5jdGlvbigpIHtcbiAgICBpZiAoY29udGFpbnMobmF2aWdhdG9yLnVzZXJBZ2VudCwgJ0Nocm9tZS8nKSkgeyByZXR1cm4gJ2Nocm9tZSc7IH1cbiAgICBpZiAoY29udGFpbnMobmF2aWdhdG9yLnZlbmRvciwgJ0FwcGxlJykpIHsgcmV0dXJuICdzYWZhcmknOyB9XG4gICAgaWYgKGNvbnRhaW5zKG5hdmlnYXRvci51c2VyQWdlbnQsICdNU0lFJykpIHsgcmV0dXJuICdpZSc7IH1cbiAgICBpZiAoY29udGFpbnMobmF2aWdhdG9yLnVzZXJBZ2VudCwgJ0dlY2tvLycpKSB7IHJldHVybiAnbW96JzsgfVxuICAgIGlmIChjb250YWlucyhuYXZpZ2F0b3IudXNlckFnZW50LCAnT3BlcmEvJykpIHsgcmV0dXJuICdvcGVyYSc7IH1cbiAgICByZXR1cm4gJyc7XG4gIH0gKCkpO1xuXG4gIHZhciBicm93c2VyX29zID0gYnJvd3NlciArICctJyArIG9zO1xuXG4gIGZ1bmN0aW9uIG1lcmdlSWYoYmFzZVRhYmxlLCBzZWxlY3QsIHRhYmxlKSB7XG4gICAgaWYgKGJyb3dzZXJfb3MgPT09IHNlbGVjdCB8fCBicm93c2VyID09PSBzZWxlY3QgfHwgb3MgPT09IHNlbGVjdCkge1xuICAgICAgT2JqZWN0LmtleXModGFibGUpLmZvckVhY2goZnVuY3Rpb24oa2V5Q29kZSkge1xuICAgICAgICBiYXNlVGFibGVba2V5Q29kZV0gPSB0YWJsZVtrZXlDb2RlXTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbWFwKG8sIGtleSkge1xuICAgIHZhciByID0ge307XG4gICAgT2JqZWN0LmtleXMobykuZm9yRWFjaChmdW5jdGlvbihrKSB7XG4gICAgICB2YXIgaXRlbSA9IG9ba107XG4gICAgICBpZiAoa2V5IGluIGl0ZW0pIHtcbiAgICAgICAgcltpdGVtW2tleV1dID0gaXRlbTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gcjtcbiAgfVxuXG4gIGZ1bmN0aW9uIGludmVydChvKSB7XG4gICAgdmFyIHIgPSB7fTtcbiAgICBPYmplY3Qua2V5cyhvKS5mb3JFYWNoKGZ1bmN0aW9uKGspIHtcbiAgICAgIHJbb1trXV0gPSBrO1xuICAgIH0pO1xuICAgIHJldHVybiByO1xuICB9XG5cbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvL1xuICAvLyBHZW5lcmljIE1hcHBpbmdzXG4gIC8vXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAvLyBcImtleUluZm9cIiBpcyBhIGRpY3Rpb25hcnk6XG4gIC8vICAgY29kZTogc3RyaW5nIC0gbmFtZSBmcm9tIERPTSBMZXZlbCAzIEtleWJvYXJkRXZlbnQgY29kZSBWYWx1ZXNcbiAgLy8gICAgIGh0dHBzOi8vZHZjcy53My5vcmcvaGcvZG9tM2V2ZW50cy9yYXctZmlsZS90aXAvaHRtbC9ET00zRXZlbnRzLWNvZGUuaHRtbFxuICAvLyAgIGxvY2F0aW9uIChvcHRpb25hbCk6IG51bWJlciAtIG9uZSBvZiB0aGUgRE9NX0tFWV9MT0NBVElPTiB2YWx1ZXNcbiAgLy8gICBrZXlDYXAgKG9wdGlvbmFsKTogc3RyaW5nIC0ga2V5Ym9hcmQgbGFiZWwgaW4gZW4tVVMgbG9jYWxlXG4gIC8vIFVTQiBjb2RlIFVzYWdlIElEIGZyb20gcGFnZSAweDA3IHVubGVzcyBvdGhlcndpc2Ugbm90ZWQgKEluZm9ybWF0aXZlKVxuXG4gIC8vIE1hcCBvZiBrZXlDb2RlIHRvIGtleUluZm9cbiAgdmFyIGtleUNvZGVUb0luZm9UYWJsZSA9IHtcbiAgICAvLyAweDAxIC0gVktfTEJVVFRPTlxuICAgIC8vIDB4MDIgLSBWS19SQlVUVE9OXG4gICAgMHgwMzogeyBjb2RlOiAnQ2FuY2VsJyB9LCAvLyBbVVNCOiAweDliXSBjaGFyIFxceDAwMTggPz8/IChOb3QgaW4gRDNFKVxuICAgIC8vIDB4MDQgLSBWS19NQlVUVE9OXG4gICAgLy8gMHgwNSAtIFZLX1hCVVRUT04xXG4gICAgLy8gMHgwNiAtIFZLX1hCVVRUT04yXG4gICAgMHgwNjogeyBjb2RlOiAnSGVscCcgfSwgLy8gW1VTQjogMHg3NV0gPz8/XG4gICAgLy8gMHgwNyAtIHVuZGVmaW5lZFxuICAgIDB4MDg6IHsgY29kZTogJ0JhY2tzcGFjZScgfSwgLy8gW1VTQjogMHgyYV0gTGFiZWxsZWQgRGVsZXRlIG9uIE1hY2ludG9zaCBrZXlib2FyZHMuXG4gICAgMHgwOTogeyBjb2RlOiAnVGFiJyB9LCAvLyBbVVNCOiAweDJiXVxuICAgIC8vIDB4MEEtMHgwQiAtIHJlc2VydmVkXG4gICAgMFgwQzogeyBjb2RlOiAnQ2xlYXInIH0sIC8vIFtVU0I6IDB4OWNdIE51bVBhZCBDZW50ZXIgKE5vdCBpbiBEM0UpXG4gICAgMFgwRDogeyBjb2RlOiAnRW50ZXInIH0sIC8vIFtVU0I6IDB4MjhdXG4gICAgLy8gMHgwRS0weDBGIC0gdW5kZWZpbmVkXG5cbiAgICAweDEwOiB7IGNvZGU6ICdTaGlmdCcgfSxcbiAgICAweDExOiB7IGNvZGU6ICdDb250cm9sJyB9LFxuICAgIDB4MTI6IHsgY29kZTogJ0FsdCcgfSxcbiAgICAweDEzOiB7IGNvZGU6ICdQYXVzZScgfSwgLy8gW1VTQjogMHg0OF1cbiAgICAweDE0OiB7IGNvZGU6ICdDYXBzTG9jaycgfSwgLy8gW1VTQjogMHgzOV1cbiAgICAweDE1OiB7IGNvZGU6ICdLYW5hTW9kZScgfSwgLy8gW1VTQjogMHg4OF0gLSBcIkhhbmd1bE1vZGVcIiBmb3IgS29yZWFuIGxheW91dFxuICAgIDB4MTY6IHsgY29kZTogJ0hhbmd1bE1vZGUnIH0sIC8vIFtVU0I6IDB4OTBdIDB4MTUgYXMgd2VsbCBpbiBNU0ROIFZLIHRhYmxlID8/P1xuICAgIDB4MTc6IHsgY29kZTogJ0p1bmphTW9kZScgfSwgLy8gKE5vdCBpbiBEM0UpXG4gICAgMHgxODogeyBjb2RlOiAnRmluYWxNb2RlJyB9LCAvLyAoTm90IGluIEQzRSlcbiAgICAweDE5OiB7IGNvZGU6ICdLYW5qaU1vZGUnIH0sIC8vIFtVU0I6IDB4OTFdIC0gXCJIYW5qYU1vZGVcIiBmb3IgS29yZWFuIGxheW91dFxuICAgIC8vIDB4MUEgLSB1bmRlZmluZWRcbiAgICAweDFCOiB7IGNvZGU6ICdFc2NhcGUnIH0sIC8vIFtVU0I6IDB4MjldXG4gICAgMHgxQzogeyBjb2RlOiAnQ29udmVydCcgfSwgLy8gW1VTQjogMHg4YV1cbiAgICAweDFEOiB7IGNvZGU6ICdOb25Db252ZXJ0JyB9LCAvLyBbVVNCOiAweDhiXVxuICAgIDB4MUU6IHsgY29kZTogJ0FjY2VwdCcgfSwgLy8gKE5vdCBpbiBEM0UpXG4gICAgMHgxRjogeyBjb2RlOiAnTW9kZUNoYW5nZScgfSwgLy8gKE5vdCBpbiBEM0UpXG5cbiAgICAweDIwOiB7IGNvZGU6ICdTcGFjZScgfSwgLy8gW1VTQjogMHgyY11cbiAgICAweDIxOiB7IGNvZGU6ICdQYWdlVXAnIH0sIC8vIFtVU0I6IDB4NGJdXG4gICAgMHgyMjogeyBjb2RlOiAnUGFnZURvd24nIH0sIC8vIFtVU0I6IDB4NGVdXG4gICAgMHgyMzogeyBjb2RlOiAnRW5kJyB9LCAvLyBbVVNCOiAweDRkXVxuICAgIDB4MjQ6IHsgY29kZTogJ0hvbWUnIH0sIC8vIFtVU0I6IDB4NGFdXG4gICAgMHgyNTogeyBjb2RlOiAnQXJyb3dMZWZ0JyB9LCAvLyBbVVNCOiAweDUwXVxuICAgIDB4MjY6IHsgY29kZTogJ0Fycm93VXAnIH0sIC8vIFtVU0I6IDB4NTJdXG4gICAgMHgyNzogeyBjb2RlOiAnQXJyb3dSaWdodCcgfSwgLy8gW1VTQjogMHg0Zl1cbiAgICAweDI4OiB7IGNvZGU6ICdBcnJvd0Rvd24nIH0sIC8vIFtVU0I6IDB4NTFdXG4gICAgMHgyOTogeyBjb2RlOiAnU2VsZWN0JyB9LCAvLyAoTm90IGluIEQzRSlcbiAgICAweDJBOiB7IGNvZGU6ICdQcmludCcgfSwgLy8gKE5vdCBpbiBEM0UpXG4gICAgMHgyQjogeyBjb2RlOiAnRXhlY3V0ZScgfSwgLy8gW1VTQjogMHg3NF0gKE5vdCBpbiBEM0UpXG4gICAgMHgyQzogeyBjb2RlOiAnUHJpbnRTY3JlZW4nIH0sIC8vIFtVU0I6IDB4NDZdXG4gICAgMHgyRDogeyBjb2RlOiAnSW5zZXJ0JyB9LCAvLyBbVVNCOiAweDQ5XVxuICAgIDB4MkU6IHsgY29kZTogJ0RlbGV0ZScgfSwgLy8gW1VTQjogMHg0Y11cbiAgICAweDJGOiB7IGNvZGU6ICdIZWxwJyB9LCAvLyBbVVNCOiAweDc1XSA/Pz9cblxuICAgIDB4MzA6IHsgY29kZTogJ0RpZ2l0MCcsIGtleUNhcDogJzAnIH0sIC8vIFtVU0I6IDB4MjddIDApXG4gICAgMHgzMTogeyBjb2RlOiAnRGlnaXQxJywga2V5Q2FwOiAnMScgfSwgLy8gW1VTQjogMHgxZV0gMSFcbiAgICAweDMyOiB7IGNvZGU6ICdEaWdpdDInLCBrZXlDYXA6ICcyJyB9LCAvLyBbVVNCOiAweDFmXSAyQFxuICAgIDB4MzM6IHsgY29kZTogJ0RpZ2l0MycsIGtleUNhcDogJzMnIH0sIC8vIFtVU0I6IDB4MjBdIDMjXG4gICAgMHgzNDogeyBjb2RlOiAnRGlnaXQ0Jywga2V5Q2FwOiAnNCcgfSwgLy8gW1VTQjogMHgyMV0gNCRcbiAgICAweDM1OiB7IGNvZGU6ICdEaWdpdDUnLCBrZXlDYXA6ICc1JyB9LCAvLyBbVVNCOiAweDIyXSA1JVxuICAgIDB4MzY6IHsgY29kZTogJ0RpZ2l0NicsIGtleUNhcDogJzYnIH0sIC8vIFtVU0I6IDB4MjNdIDZeXG4gICAgMHgzNzogeyBjb2RlOiAnRGlnaXQ3Jywga2V5Q2FwOiAnNycgfSwgLy8gW1VTQjogMHgyNF0gNyZcbiAgICAweDM4OiB7IGNvZGU6ICdEaWdpdDgnLCBrZXlDYXA6ICc4JyB9LCAvLyBbVVNCOiAweDI1XSA4KlxuICAgIDB4Mzk6IHsgY29kZTogJ0RpZ2l0OScsIGtleUNhcDogJzknIH0sIC8vIFtVU0I6IDB4MjZdIDkoXG4gICAgLy8gMHgzQS0weDQwIC0gdW5kZWZpbmVkXG5cbiAgICAweDQxOiB7IGNvZGU6ICdLZXlBJywga2V5Q2FwOiAnYScgfSwgLy8gW1VTQjogMHgwNF1cbiAgICAweDQyOiB7IGNvZGU6ICdLZXlCJywga2V5Q2FwOiAnYicgfSwgLy8gW1VTQjogMHgwNV1cbiAgICAweDQzOiB7IGNvZGU6ICdLZXlDJywga2V5Q2FwOiAnYycgfSwgLy8gW1VTQjogMHgwNl1cbiAgICAweDQ0OiB7IGNvZGU6ICdLZXlEJywga2V5Q2FwOiAnZCcgfSwgLy8gW1VTQjogMHgwN11cbiAgICAweDQ1OiB7IGNvZGU6ICdLZXlFJywga2V5Q2FwOiAnZScgfSwgLy8gW1VTQjogMHgwOF1cbiAgICAweDQ2OiB7IGNvZGU6ICdLZXlGJywga2V5Q2FwOiAnZicgfSwgLy8gW1VTQjogMHgwOV1cbiAgICAweDQ3OiB7IGNvZGU6ICdLZXlHJywga2V5Q2FwOiAnZycgfSwgLy8gW1VTQjogMHgwYV1cbiAgICAweDQ4OiB7IGNvZGU6ICdLZXlIJywga2V5Q2FwOiAnaCcgfSwgLy8gW1VTQjogMHgwYl1cbiAgICAweDQ5OiB7IGNvZGU6ICdLZXlJJywga2V5Q2FwOiAnaScgfSwgLy8gW1VTQjogMHgwY11cbiAgICAweDRBOiB7IGNvZGU6ICdLZXlKJywga2V5Q2FwOiAnaicgfSwgLy8gW1VTQjogMHgwZF1cbiAgICAweDRCOiB7IGNvZGU6ICdLZXlLJywga2V5Q2FwOiAnaycgfSwgLy8gW1VTQjogMHgwZV1cbiAgICAweDRDOiB7IGNvZGU6ICdLZXlMJywga2V5Q2FwOiAnbCcgfSwgLy8gW1VTQjogMHgwZl1cbiAgICAweDREOiB7IGNvZGU6ICdLZXlNJywga2V5Q2FwOiAnbScgfSwgLy8gW1VTQjogMHgxMF1cbiAgICAweDRFOiB7IGNvZGU6ICdLZXlOJywga2V5Q2FwOiAnbicgfSwgLy8gW1VTQjogMHgxMV1cbiAgICAweDRGOiB7IGNvZGU6ICdLZXlPJywga2V5Q2FwOiAnbycgfSwgLy8gW1VTQjogMHgxMl1cblxuICAgIDB4NTA6IHsgY29kZTogJ0tleVAnLCBrZXlDYXA6ICdwJyB9LCAvLyBbVVNCOiAweDEzXVxuICAgIDB4NTE6IHsgY29kZTogJ0tleVEnLCBrZXlDYXA6ICdxJyB9LCAvLyBbVVNCOiAweDE0XVxuICAgIDB4NTI6IHsgY29kZTogJ0tleVInLCBrZXlDYXA6ICdyJyB9LCAvLyBbVVNCOiAweDE1XVxuICAgIDB4NTM6IHsgY29kZTogJ0tleVMnLCBrZXlDYXA6ICdzJyB9LCAvLyBbVVNCOiAweDE2XVxuICAgIDB4NTQ6IHsgY29kZTogJ0tleVQnLCBrZXlDYXA6ICd0JyB9LCAvLyBbVVNCOiAweDE3XVxuICAgIDB4NTU6IHsgY29kZTogJ0tleVUnLCBrZXlDYXA6ICd1JyB9LCAvLyBbVVNCOiAweDE4XVxuICAgIDB4NTY6IHsgY29kZTogJ0tleVYnLCBrZXlDYXA6ICd2JyB9LCAvLyBbVVNCOiAweDE5XVxuICAgIDB4NTc6IHsgY29kZTogJ0tleVcnLCBrZXlDYXA6ICd3JyB9LCAvLyBbVVNCOiAweDFhXVxuICAgIDB4NTg6IHsgY29kZTogJ0tleVgnLCBrZXlDYXA6ICd4JyB9LCAvLyBbVVNCOiAweDFiXVxuICAgIDB4NTk6IHsgY29kZTogJ0tleVknLCBrZXlDYXA6ICd5JyB9LCAvLyBbVVNCOiAweDFjXVxuICAgIDB4NUE6IHsgY29kZTogJ0tleVonLCBrZXlDYXA6ICd6JyB9LCAvLyBbVVNCOiAweDFkXVxuICAgIDB4NUI6IHsgY29kZTogJ09TTGVmdCcsIGxvY2F0aW9uOiBMRUZUIH0sIC8vIFtVU0I6IDB4ZTNdXG4gICAgMHg1QzogeyBjb2RlOiAnT1NSaWdodCcsIGxvY2F0aW9uOiBSSUdIVCB9LCAvLyBbVVNCOiAweGU3XVxuICAgIDB4NUQ6IHsgY29kZTogJ0NvbnRleHRNZW51JyB9LCAvLyBbVVNCOiAweDY1XSBDb250ZXh0IE1lbnVcbiAgICAvLyAweDVFIC0gcmVzZXJ2ZWRcbiAgICAweDVGOiB7IGNvZGU6ICdTdGFuZGJ5JyB9LCAvLyBbVVNCOiAweDgyXSBTbGVlcFxuXG4gICAgMHg2MDogeyBjb2RlOiAnTnVtcGFkMCcsIGtleUNhcDogJzAnLCBsb2NhdGlvbjogTlVNUEFEIH0sIC8vIFtVU0I6IDB4NjJdXG4gICAgMHg2MTogeyBjb2RlOiAnTnVtcGFkMScsIGtleUNhcDogJzEnLCBsb2NhdGlvbjogTlVNUEFEIH0sIC8vIFtVU0I6IDB4NTldXG4gICAgMHg2MjogeyBjb2RlOiAnTnVtcGFkMicsIGtleUNhcDogJzInLCBsb2NhdGlvbjogTlVNUEFEIH0sIC8vIFtVU0I6IDB4NWFdXG4gICAgMHg2MzogeyBjb2RlOiAnTnVtcGFkMycsIGtleUNhcDogJzMnLCBsb2NhdGlvbjogTlVNUEFEIH0sIC8vIFtVU0I6IDB4NWJdXG4gICAgMHg2NDogeyBjb2RlOiAnTnVtcGFkNCcsIGtleUNhcDogJzQnLCBsb2NhdGlvbjogTlVNUEFEIH0sIC8vIFtVU0I6IDB4NWNdXG4gICAgMHg2NTogeyBjb2RlOiAnTnVtcGFkNScsIGtleUNhcDogJzUnLCBsb2NhdGlvbjogTlVNUEFEIH0sIC8vIFtVU0I6IDB4NWRdXG4gICAgMHg2NjogeyBjb2RlOiAnTnVtcGFkNicsIGtleUNhcDogJzYnLCBsb2NhdGlvbjogTlVNUEFEIH0sIC8vIFtVU0I6IDB4NWVdXG4gICAgMHg2NzogeyBjb2RlOiAnTnVtcGFkNycsIGtleUNhcDogJzcnLCBsb2NhdGlvbjogTlVNUEFEIH0sIC8vIFtVU0I6IDB4NWZdXG4gICAgMHg2ODogeyBjb2RlOiAnTnVtcGFkOCcsIGtleUNhcDogJzgnLCBsb2NhdGlvbjogTlVNUEFEIH0sIC8vIFtVU0I6IDB4NjBdXG4gICAgMHg2OTogeyBjb2RlOiAnTnVtcGFkOScsIGtleUNhcDogJzknLCBsb2NhdGlvbjogTlVNUEFEIH0sIC8vIFtVU0I6IDB4NjFdXG4gICAgMHg2QTogeyBjb2RlOiAnTnVtcGFkTXVsdGlwbHknLCBrZXlDYXA6ICcqJywgbG9jYXRpb246IE5VTVBBRCB9LCAvLyBbVVNCOiAweDU1XVxuICAgIDB4NkI6IHsgY29kZTogJ051bXBhZEFkZCcsIGtleUNhcDogJysnLCBsb2NhdGlvbjogTlVNUEFEIH0sIC8vIFtVU0I6IDB4NTddXG4gICAgMHg2QzogeyBjb2RlOiAnTnVtcGFkQ29tbWEnLCBrZXlDYXA6ICcsJywgbG9jYXRpb246IE5VTVBBRCB9LCAvLyBbVVNCOiAweDg1XVxuICAgIDB4NkQ6IHsgY29kZTogJ051bXBhZFN1YnRyYWN0Jywga2V5Q2FwOiAnLScsIGxvY2F0aW9uOiBOVU1QQUQgfSwgLy8gW1VTQjogMHg1Nl1cbiAgICAweDZFOiB7IGNvZGU6ICdOdW1wYWREZWNpbWFsJywga2V5Q2FwOiAnLicsIGxvY2F0aW9uOiBOVU1QQUQgfSwgLy8gW1VTQjogMHg2M11cbiAgICAweDZGOiB7IGNvZGU6ICdOdW1wYWREaXZpZGUnLCBrZXlDYXA6ICcvJywgbG9jYXRpb246IE5VTVBBRCB9LCAvLyBbVVNCOiAweDU0XVxuXG4gICAgMHg3MDogeyBjb2RlOiAnRjEnIH0sIC8vIFtVU0I6IDB4M2FdXG4gICAgMHg3MTogeyBjb2RlOiAnRjInIH0sIC8vIFtVU0I6IDB4M2JdXG4gICAgMHg3MjogeyBjb2RlOiAnRjMnIH0sIC8vIFtVU0I6IDB4M2NdXG4gICAgMHg3MzogeyBjb2RlOiAnRjQnIH0sIC8vIFtVU0I6IDB4M2RdXG4gICAgMHg3NDogeyBjb2RlOiAnRjUnIH0sIC8vIFtVU0I6IDB4M2VdXG4gICAgMHg3NTogeyBjb2RlOiAnRjYnIH0sIC8vIFtVU0I6IDB4M2ZdXG4gICAgMHg3NjogeyBjb2RlOiAnRjcnIH0sIC8vIFtVU0I6IDB4NDBdXG4gICAgMHg3NzogeyBjb2RlOiAnRjgnIH0sIC8vIFtVU0I6IDB4NDFdXG4gICAgMHg3ODogeyBjb2RlOiAnRjknIH0sIC8vIFtVU0I6IDB4NDJdXG4gICAgMHg3OTogeyBjb2RlOiAnRjEwJyB9LCAvLyBbVVNCOiAweDQzXVxuICAgIDB4N0E6IHsgY29kZTogJ0YxMScgfSwgLy8gW1VTQjogMHg0NF1cbiAgICAweDdCOiB7IGNvZGU6ICdGMTInIH0sIC8vIFtVU0I6IDB4NDVdXG4gICAgMHg3QzogeyBjb2RlOiAnRjEzJyB9LCAvLyBbVVNCOiAweDY4XVxuICAgIDB4N0Q6IHsgY29kZTogJ0YxNCcgfSwgLy8gW1VTQjogMHg2OV1cbiAgICAweDdFOiB7IGNvZGU6ICdGMTUnIH0sIC8vIFtVU0I6IDB4NmFdXG4gICAgMHg3RjogeyBjb2RlOiAnRjE2JyB9LCAvLyBbVVNCOiAweDZiXVxuXG4gICAgMHg4MDogeyBjb2RlOiAnRjE3JyB9LCAvLyBbVVNCOiAweDZjXVxuICAgIDB4ODE6IHsgY29kZTogJ0YxOCcgfSwgLy8gW1VTQjogMHg2ZF1cbiAgICAweDgyOiB7IGNvZGU6ICdGMTknIH0sIC8vIFtVU0I6IDB4NmVdXG4gICAgMHg4MzogeyBjb2RlOiAnRjIwJyB9LCAvLyBbVVNCOiAweDZmXVxuICAgIDB4ODQ6IHsgY29kZTogJ0YyMScgfSwgLy8gW1VTQjogMHg3MF1cbiAgICAweDg1OiB7IGNvZGU6ICdGMjInIH0sIC8vIFtVU0I6IDB4NzFdXG4gICAgMHg4NjogeyBjb2RlOiAnRjIzJyB9LCAvLyBbVVNCOiAweDcyXVxuICAgIDB4ODc6IHsgY29kZTogJ0YyNCcgfSwgLy8gW1VTQjogMHg3M11cbiAgICAvLyAweDg4LTB4OEYgLSB1bmFzc2lnbmVkXG5cbiAgICAweDkwOiB7IGNvZGU6ICdOdW1Mb2NrJywgbG9jYXRpb246IE5VTVBBRCB9LCAvLyBbVVNCOiAweDUzXVxuICAgIDB4OTE6IHsgY29kZTogJ1Njcm9sbExvY2snIH0sIC8vIFtVU0I6IDB4NDddXG4gICAgLy8gMHg5Mi0weDk2IC0gT0VNIHNwZWNpZmljXG4gICAgLy8gMHg5Ny0weDlGIC0gdW5hc3NpZ25lZFxuXG4gICAgLy8gTk9URTogMHhBMC0weEE1IHVzdWFsbHkgbWFwcGVkIHRvIDB4MTAtMHgxMiBpbiBicm93c2Vyc1xuICAgIDB4QTA6IHsgY29kZTogJ1NoaWZ0TGVmdCcsIGxvY2F0aW9uOiBMRUZUIH0sIC8vIFtVU0I6IDB4ZTFdXG4gICAgMHhBMTogeyBjb2RlOiAnU2hpZnRSaWdodCcsIGxvY2F0aW9uOiBSSUdIVCB9LCAvLyBbVVNCOiAweGU1XVxuICAgIDB4QTI6IHsgY29kZTogJ0NvbnRyb2xMZWZ0JywgbG9jYXRpb246IExFRlQgfSwgLy8gW1VTQjogMHhlMF1cbiAgICAweEEzOiB7IGNvZGU6ICdDb250cm9sUmlnaHQnLCBsb2NhdGlvbjogUklHSFQgfSwgLy8gW1VTQjogMHhlNF1cbiAgICAweEE0OiB7IGNvZGU6ICdBbHRMZWZ0JywgbG9jYXRpb246IExFRlQgfSwgLy8gW1VTQjogMHhlMl1cbiAgICAweEE1OiB7IGNvZGU6ICdBbHRSaWdodCcsIGxvY2F0aW9uOiBSSUdIVCB9LCAvLyBbVVNCOiAweGU2XVxuXG4gICAgMHhBNjogeyBjb2RlOiAnQnJvd3NlckJhY2snIH0sIC8vIFtVU0I6IDB4MGMvMHgwMjI0XVxuICAgIDB4QTc6IHsgY29kZTogJ0Jyb3dzZXJGb3J3YXJkJyB9LCAvLyBbVVNCOiAweDBjLzB4MDIyNV1cbiAgICAweEE4OiB7IGNvZGU6ICdCcm93c2VyUmVmcmVzaCcgfSwgLy8gW1VTQjogMHgwYy8weDAyMjddXG4gICAgMHhBOTogeyBjb2RlOiAnQnJvd3NlclN0b3AnIH0sIC8vIFtVU0I6IDB4MGMvMHgwMjI2XVxuICAgIDB4QUE6IHsgY29kZTogJ0Jyb3dzZXJTZWFyY2gnIH0sIC8vIFtVU0I6IDB4MGMvMHgwMjIxXVxuICAgIDB4QUI6IHsgY29kZTogJ0Jyb3dzZXJGYXZvcml0ZXMnIH0sIC8vIFtVU0I6IDB4MGMvMHgwMjI4XVxuICAgIDB4QUM6IHsgY29kZTogJ0Jyb3dzZXJIb21lJyB9LCAvLyBbVVNCOiAweDBjLzB4MDIyMl1cbiAgICAweEFEOiB7IGNvZGU6ICdWb2x1bWVNdXRlJyB9LCAvLyBbVVNCOiAweDdmXVxuICAgIDB4QUU6IHsgY29kZTogJ1ZvbHVtZURvd24nIH0sIC8vIFtVU0I6IDB4ODFdXG4gICAgMHhBRjogeyBjb2RlOiAnVm9sdW1lVXAnIH0sIC8vIFtVU0I6IDB4ODBdXG5cbiAgICAweEIwOiB7IGNvZGU6ICdNZWRpYVRyYWNrTmV4dCcgfSwgLy8gW1VTQjogMHgwYy8weDAwYjVdXG4gICAgMHhCMTogeyBjb2RlOiAnTWVkaWFUcmFja1ByZXZpb3VzJyB9LCAvLyBbVVNCOiAweDBjLzB4MDBiNl1cbiAgICAweEIyOiB7IGNvZGU6ICdNZWRpYVN0b3AnIH0sIC8vIFtVU0I6IDB4MGMvMHgwMGI3XVxuICAgIDB4QjM6IHsgY29kZTogJ01lZGlhUGxheVBhdXNlJyB9LCAvLyBbVVNCOiAweDBjLzB4MDBjZF1cbiAgICAweEI0OiB7IGNvZGU6ICdMYXVuY2hNYWlsJyB9LCAvLyBbVVNCOiAweDBjLzB4MDE4YV1cbiAgICAweEI1OiB7IGNvZGU6ICdNZWRpYVNlbGVjdCcgfSxcbiAgICAweEI2OiB7IGNvZGU6ICdMYXVuY2hBcHAxJyB9LFxuICAgIDB4Qjc6IHsgY29kZTogJ0xhdW5jaEFwcDInIH0sXG4gICAgLy8gMHhCOC0weEI5IC0gcmVzZXJ2ZWRcbiAgICAweEJBOiB7IGNvZGU6ICdTZW1pY29sb24nLCAga2V5Q2FwOiAnOycgfSwgLy8gW1VTQjogMHgzM10gOzogKFVTIFN0YW5kYXJkIDEwMSlcbiAgICAweEJCOiB7IGNvZGU6ICdFcXVhbCcsIGtleUNhcDogJz0nIH0sIC8vIFtVU0I6IDB4MmVdID0rXG4gICAgMHhCQzogeyBjb2RlOiAnQ29tbWEnLCBrZXlDYXA6ICcsJyB9LCAvLyBbVVNCOiAweDM2XSAsPFxuICAgIDB4QkQ6IHsgY29kZTogJ01pbnVzJywga2V5Q2FwOiAnLScgfSwgLy8gW1VTQjogMHgyZF0gLV9cbiAgICAweEJFOiB7IGNvZGU6ICdQZXJpb2QnLCBrZXlDYXA6ICcuJyB9LCAvLyBbVVNCOiAweDM3XSAuPlxuICAgIDB4QkY6IHsgY29kZTogJ1NsYXNoJywga2V5Q2FwOiAnLycgfSwgLy8gW1VTQjogMHgzOF0gLz8gKFVTIFN0YW5kYXJkIDEwMSlcblxuICAgIDB4QzA6IHsgY29kZTogJ0JhY2txdW90ZScsIGtleUNhcDogJ2AnIH0sIC8vIFtVU0I6IDB4MzVdIGB+IChVUyBTdGFuZGFyZCAxMDEpXG4gICAgLy8gMHhDMS0weENGIC0gcmVzZXJ2ZWRcblxuICAgIC8vIDB4RDAtMHhENyAtIHJlc2VydmVkXG4gICAgLy8gMHhEOC0weERBIC0gdW5hc3NpZ25lZFxuICAgIDB4REI6IHsgY29kZTogJ0JyYWNrZXRMZWZ0Jywga2V5Q2FwOiAnWycgfSwgLy8gW1VTQjogMHgyZl0gW3sgKFVTIFN0YW5kYXJkIDEwMSlcbiAgICAweERDOiB7IGNvZGU6ICdCYWNrc2xhc2gnLCAga2V5Q2FwOiAnXFxcXCcgfSwgLy8gW1VTQjogMHgzMV0gXFx8IChVUyBTdGFuZGFyZCAxMDEpXG4gICAgMHhERDogeyBjb2RlOiAnQnJhY2tldFJpZ2h0Jywga2V5Q2FwOiAnXScgfSwgLy8gW1VTQjogMHgzMF0gXX0gKFVTIFN0YW5kYXJkIDEwMSlcbiAgICAweERFOiB7IGNvZGU6ICdRdW90ZScsIGtleUNhcDogJ1xcJycgfSwgLy8gW1VTQjogMHgzNF0gJ1wiIChVUyBTdGFuZGFyZCAxMDEpXG4gICAgLy8gMHhERiAtIG1pc2NlbGxhbmVvdXMvdmFyaWVzXG5cbiAgICAvLyAweEUwIC0gcmVzZXJ2ZWRcbiAgICAvLyAweEUxIC0gT0VNIHNwZWNpZmljXG4gICAgMHhFMjogeyBjb2RlOiAnSW50bEJhY2tzbGFzaCcsICBrZXlDYXA6ICdcXFxcJyB9LCAvLyBbVVNCOiAweDY0XSBcXHwgKFVLIFN0YW5kYXJkIDEwMilcbiAgICAvLyAweEUzLTB4RTQgLSBPRU0gc3BlY2lmaWNcbiAgICAweEU1OiB7IGNvZGU6ICdQcm9jZXNzJyB9LCAvLyAoTm90IGluIEQzRSlcbiAgICAvLyAweEU2IC0gT0VNIHNwZWNpZmljXG4gICAgLy8gMHhFNyAtIFZLX1BBQ0tFVFxuICAgIC8vIDB4RTggLSB1bmFzc2lnbmVkXG4gICAgLy8gMHhFOS0weEVGIC0gT0VNIHNwZWNpZmljXG5cbiAgICAvLyAweEYwLTB4RjUgLSBPRU0gc3BlY2lmaWNcbiAgICAweEY2OiB7IGNvZGU6ICdBdHRuJyB9LCAvLyBbVVNCOiAweDlhXSAoTm90IGluIEQzRSlcbiAgICAweEY3OiB7IGNvZGU6ICdDclNlbCcgfSwgLy8gW1VTQjogMHhhM10gKE5vdCBpbiBEM0UpXG4gICAgMHhGODogeyBjb2RlOiAnRXhTZWwnIH0sIC8vIFtVU0I6IDB4YTRdIChOb3QgaW4gRDNFKVxuICAgIDB4Rjk6IHsgY29kZTogJ0VyYXNlRW9mJyB9LCAvLyAoTm90IGluIEQzRSlcbiAgICAweEZBOiB7IGNvZGU6ICdQbGF5JyB9LCAvLyAoTm90IGluIEQzRSlcbiAgICAweEZCOiB7IGNvZGU6ICdab29tVG9nZ2xlJyB9LCAvLyAoTm90IGluIEQzRSlcbiAgICAvLyAweEZDIC0gVktfTk9OQU1FIC0gcmVzZXJ2ZWRcbiAgICAvLyAweEZEIC0gVktfUEExXG4gICAgMHhGRTogeyBjb2RlOiAnQ2xlYXInIH0gLy8gW1VTQjogMHg5Y10gKE5vdCBpbiBEM0UpXG4gIH07XG5cbiAgLy8gTm8gbGVnYWN5IGtleUNvZGUsIGJ1dCBsaXN0ZWQgaW4gRDNFOlxuXG4gIC8vIGNvZGU6IHVzYlxuICAvLyAnSW50bEhhc2gnOiAweDA3MDAzMixcbiAgLy8gJ0ludGxSbyc6IDB4MDcwMDg3LFxuICAvLyAnSW50bFllbic6IDB4MDcwMDg5LFxuICAvLyAnTnVtcGFkQmFja3NwYWNlJzogMHgwNzAwYmIsXG4gIC8vICdOdW1wYWRDbGVhcic6IDB4MDcwMGQ4LFxuICAvLyAnTnVtcGFkQ2xlYXJFbnRyeSc6IDB4MDcwMGQ5LFxuICAvLyAnTnVtcGFkTWVtb3J5QWRkJzogMHgwNzAwZDMsXG4gIC8vICdOdW1wYWRNZW1vcnlDbGVhcic6IDB4MDcwMGQyLFxuICAvLyAnTnVtcGFkTWVtb3J5UmVjYWxsJzogMHgwNzAwZDEsXG4gIC8vICdOdW1wYWRNZW1vcnlTdG9yZSc6IDB4MDcwMGQwLFxuICAvLyAnTnVtcGFkTWVtb3J5U3VidHJhY3QnOiAweDA3MDBkNCxcbiAgLy8gJ051bXBhZFBhcmVuTGVmdCc6IDB4MDcwMGI2LFxuICAvLyAnTnVtcGFkUGFyZW5SaWdodCc6IDB4MDcwMGI3LFxuXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy9cbiAgLy8gQnJvd3Nlci9PUyBTcGVjaWZpYyBNYXBwaW5nc1xuICAvL1xuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgbWVyZ2VJZihrZXlDb2RlVG9JbmZvVGFibGUsXG4gICAgICAgICAgJ21veicsIHtcbiAgICAgICAgICAgIDB4M0I6IHsgY29kZTogJ1NlbWljb2xvbicsIGtleUNhcDogJzsnIH0sIC8vIFtVU0I6IDB4MzNdIDs6IChVUyBTdGFuZGFyZCAxMDEpXG4gICAgICAgICAgICAweDNEOiB7IGNvZGU6ICdFcXVhbCcsIGtleUNhcDogJz0nIH0sIC8vIFtVU0I6IDB4MmVdID0rXG4gICAgICAgICAgICAweDZCOiB7IGNvZGU6ICdFcXVhbCcsIGtleUNhcDogJz0nIH0sIC8vIFtVU0I6IDB4MmVdID0rXG4gICAgICAgICAgICAweDZEOiB7IGNvZGU6ICdNaW51cycsIGtleUNhcDogJy0nIH0sIC8vIFtVU0I6IDB4MmRdIC1fXG4gICAgICAgICAgICAweEJCOiB7IGNvZGU6ICdOdW1wYWRBZGQnLCBrZXlDYXA6ICcrJywgbG9jYXRpb246IE5VTVBBRCB9LCAvLyBbVVNCOiAweDU3XVxuICAgICAgICAgICAgMHhCRDogeyBjb2RlOiAnTnVtcGFkU3VidHJhY3QnLCBrZXlDYXA6ICctJywgbG9jYXRpb246IE5VTVBBRCB9IC8vIFtVU0I6IDB4NTZdXG4gICAgICAgICAgfSk7XG5cbiAgbWVyZ2VJZihrZXlDb2RlVG9JbmZvVGFibGUsXG4gICAgICAgICAgJ21vei1tYWMnLCB7XG4gICAgICAgICAgICAweDBDOiB7IGNvZGU6ICdOdW1Mb2NrJywgbG9jYXRpb246IE5VTVBBRCB9LCAvLyBbVVNCOiAweDUzXVxuICAgICAgICAgICAgMHhBRDogeyBjb2RlOiAnTWludXMnLCBrZXlDYXA6ICctJyB9IC8vIFtVU0I6IDB4MmRdIC1fXG4gICAgICAgICAgfSk7XG5cbiAgbWVyZ2VJZihrZXlDb2RlVG9JbmZvVGFibGUsXG4gICAgICAgICAgJ21vei13aW4nLCB7XG4gICAgICAgICAgICAweEFEOiB7IGNvZGU6ICdNaW51cycsIGtleUNhcDogJy0nIH0gLy8gW1VTQjogMHgyZF0gLV9cbiAgICAgICAgICB9KTtcblxuICBtZXJnZUlmKGtleUNvZGVUb0luZm9UYWJsZSxcbiAgICAgICAgICAnY2hyb21lLW1hYycsIHtcbiAgICAgICAgICAgIDB4NUQ6IHsgY29kZTogJ09TUmlnaHQnLCBsb2NhdGlvbjogUklHSFQgfSAvLyBbVVNCOiAweGU3XVxuICAgICAgICAgIH0pO1xuXG4gIC8vIFdpbmRvd3MgdmlhIEJvb3RjYW1wICghKVxuICBpZiAoMCkge1xuICAgIG1lcmdlSWYoa2V5Q29kZVRvSW5mb1RhYmxlLFxuICAgICAgICAgICAgJ2Nocm9tZS13aW4nLCB7XG4gICAgICAgICAgICAgIDB4QzA6IHsgY29kZTogJ1F1b3RlJywga2V5Q2FwOiAnXFwnJyB9LCAvLyBbVVNCOiAweDM0XSAnXCIgKFVTIFN0YW5kYXJkIDEwMSlcbiAgICAgICAgICAgICAgMHhERTogeyBjb2RlOiAnQmFja3NsYXNoJywgIGtleUNhcDogJ1xcXFwnIH0sIC8vIFtVU0I6IDB4MzFdIFxcfCAoVVMgU3RhbmRhcmQgMTAxKVxuICAgICAgICAgICAgICAweERGOiB7IGNvZGU6ICdCYWNrcXVvdGUnLCBrZXlDYXA6ICdgJyB9IC8vIFtVU0I6IDB4MzVdIGB+IChVUyBTdGFuZGFyZCAxMDEpXG4gICAgICAgICAgICB9KTtcblxuICAgIG1lcmdlSWYoa2V5Q29kZVRvSW5mb1RhYmxlLFxuICAgICAgICAgICAgJ2llJywge1xuICAgICAgICAgICAgICAweEMwOiB7IGNvZGU6ICdRdW90ZScsIGtleUNhcDogJ1xcJycgfSwgLy8gW1VTQjogMHgzNF0gJ1wiIChVUyBTdGFuZGFyZCAxMDEpXG4gICAgICAgICAgICAgIDB4REU6IHsgY29kZTogJ0JhY2tzbGFzaCcsICBrZXlDYXA6ICdcXFxcJyB9LCAvLyBbVVNCOiAweDMxXSBcXHwgKFVTIFN0YW5kYXJkIDEwMSlcbiAgICAgICAgICAgICAgMHhERjogeyBjb2RlOiAnQmFja3F1b3RlJywga2V5Q2FwOiAnYCcgfSAvLyBbVVNCOiAweDM1XSBgfiAoVVMgU3RhbmRhcmQgMTAxKVxuICAgICAgICAgICAgfSk7XG4gIH1cblxuICBtZXJnZUlmKGtleUNvZGVUb0luZm9UYWJsZSxcbiAgICAgICAgICAnc2FmYXJpJywge1xuICAgICAgICAgICAgMHgwMzogeyBjb2RlOiAnRW50ZXInIH0sIC8vIFtVU0I6IDB4MjhdIG9sZCBTYWZhcmlcbiAgICAgICAgICAgIDB4MTk6IHsgY29kZTogJ1RhYicgfSAvLyBbVVNCOiAweDJiXSBvbGQgU2FmYXJpIGZvciBTaGlmdCtUYWJcbiAgICAgICAgICB9KTtcblxuICBtZXJnZUlmKGtleUNvZGVUb0luZm9UYWJsZSxcbiAgICAgICAgICAnaW9zJywge1xuICAgICAgICAgICAgMHgwQTogeyBjb2RlOiAnRW50ZXInLCBsb2NhdGlvbjogU1RBTkRBUkQgfSAvLyBbVVNCOiAweDI4XVxuICAgICAgICAgIH0pO1xuXG4gIG1lcmdlSWYoa2V5Q29kZVRvSW5mb1RhYmxlLFxuICAgICAgICAgICdzYWZhcmktbWFjJywge1xuICAgICAgICAgICAgMHg1QjogeyBjb2RlOiAnT1NMZWZ0JywgbG9jYXRpb246IExFRlQgfSwgLy8gW1VTQjogMHhlM11cbiAgICAgICAgICAgIDB4NUQ6IHsgY29kZTogJ09TUmlnaHQnLCBsb2NhdGlvbjogUklHSFQgfSwgLy8gW1VTQjogMHhlN11cbiAgICAgICAgICAgIDB4RTU6IHsgY29kZTogJ0tleVEnLCBrZXlDYXA6ICdRJyB9IC8vIFtVU0I6IDB4MTRdIE9uIGFsdGVybmF0ZSBwcmVzc2VzLCBDdHJsK1Egc2VuZHMgdGhpc1xuICAgICAgICAgIH0pO1xuXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy9cbiAgLy8gSWRlbnRpZmllciBNYXBwaW5nc1xuICAvL1xuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gQ2FzZXMgd2hlcmUgbmV3ZXItaXNoIGJyb3dzZXJzIHNlbmQga2V5SWRlbnRpZmllciB3aGljaCBjYW4gYmVcbiAgLy8gdXNlZCB0byBkaXNhbWJpZ3VhdGUga2V5cy5cblxuICAvLyBrZXlJZGVudGlmaWVyVGFibGVba2V5SWRlbnRpZmllcl0gLT4ga2V5SW5mb1xuXG4gIHZhciBrZXlJZGVudGlmaWVyVGFibGUgPSB7fTtcbiAgaWYgKCdjcm9zJyA9PT0gb3MpIHtcbiAgICBrZXlJZGVudGlmaWVyVGFibGVbJ1UrMDBBMCddID0geyBjb2RlOiAnU2hpZnRMZWZ0JywgbG9jYXRpb246IExFRlQgfTtcbiAgICBrZXlJZGVudGlmaWVyVGFibGVbJ1UrMDBBMSddID0geyBjb2RlOiAnU2hpZnRSaWdodCcsIGxvY2F0aW9uOiBSSUdIVCB9O1xuICAgIGtleUlkZW50aWZpZXJUYWJsZVsnVSswMEEyJ10gPSB7IGNvZGU6ICdDb250cm9sTGVmdCcsIGxvY2F0aW9uOiBMRUZUIH07XG4gICAga2V5SWRlbnRpZmllclRhYmxlWydVKzAwQTMnXSA9IHsgY29kZTogJ0NvbnRyb2xSaWdodCcsIGxvY2F0aW9uOiBSSUdIVCB9O1xuICAgIGtleUlkZW50aWZpZXJUYWJsZVsnVSswMEE0J10gPSB7IGNvZGU6ICdBbHRMZWZ0JywgbG9jYXRpb246IExFRlQgfTtcbiAgICBrZXlJZGVudGlmaWVyVGFibGVbJ1UrMDBBNSddID0geyBjb2RlOiAnQWx0UmlnaHQnLCBsb2NhdGlvbjogUklHSFQgfTtcbiAgfVxuICBpZiAoJ2Nocm9tZS1tYWMnID09PSBicm93c2VyX29zKSB7XG4gICAga2V5SWRlbnRpZmllclRhYmxlWydVKzAwMTAnXSA9IHsgY29kZTogJ0NvbnRleHRNZW51JyB9O1xuICB9XG4gIGlmICgnc2FmYXJpLW1hYycgPT09IGJyb3dzZXJfb3MpIHtcbiAgICBrZXlJZGVudGlmaWVyVGFibGVbJ1UrMDAxMCddID0geyBjb2RlOiAnQ29udGV4dE1lbnUnIH07XG4gIH1cbiAgaWYgKCdpb3MnID09PSBvcykge1xuICAgIC8vIFRoZXNlIG9ubHkgZ2VuZXJhdGUga2V5dXAgZXZlbnRzXG4gICAga2V5SWRlbnRpZmllclRhYmxlWydVKzAwMTAnXSA9IHsgY29kZTogJ0Z1bmN0aW9uJyB9O1xuXG4gICAga2V5SWRlbnRpZmllclRhYmxlWydVKzAwMUMnXSA9IHsgY29kZTogJ0Fycm93TGVmdCcgfTtcbiAgICBrZXlJZGVudGlmaWVyVGFibGVbJ1UrMDAxRCddID0geyBjb2RlOiAnQXJyb3dSaWdodCcgfTtcbiAgICBrZXlJZGVudGlmaWVyVGFibGVbJ1UrMDAxRSddID0geyBjb2RlOiAnQXJyb3dVcCcgfTtcbiAgICBrZXlJZGVudGlmaWVyVGFibGVbJ1UrMDAxRiddID0geyBjb2RlOiAnQXJyb3dEb3duJyB9O1xuXG4gICAga2V5SWRlbnRpZmllclRhYmxlWydVKzAwMDEnXSA9IHsgY29kZTogJ0hvbWUnIH07IC8vIFtVU0I6IDB4NGFdIEZuICsgQXJyb3dMZWZ0XG4gICAga2V5SWRlbnRpZmllclRhYmxlWydVKzAwMDQnXSA9IHsgY29kZTogJ0VuZCcgfTsgLy8gW1VTQjogMHg0ZF0gRm4gKyBBcnJvd1JpZ2h0XG4gICAga2V5SWRlbnRpZmllclRhYmxlWydVKzAwMEInXSA9IHsgY29kZTogJ1BhZ2VVcCcgfTsgLy8gW1VTQjogMHg0Yl0gRm4gKyBBcnJvd1VwXG4gICAga2V5SWRlbnRpZmllclRhYmxlWydVKzAwMEMnXSA9IHsgY29kZTogJ1BhZ2VEb3duJyB9OyAvLyBbVVNCOiAweDRlXSBGbiArIEFycm93RG93blxuICB9XG5cbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAvL1xuICAvLyBMb2NhdGlvbiBNYXBwaW5nc1xuICAvL1xuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gQ2FzZXMgd2hlcmUgbmV3ZXItaXNoIGJyb3dzZXJzIHNlbmQgbG9jYXRpb24va2V5TG9jYXRpb24gd2hpY2hcbiAgLy8gY2FuIGJlIHVzZWQgdG8gZGlzYW1iaWd1YXRlIGtleXMuXG5cbiAgLy8gbG9jYXRpb25UYWJsZVtsb2NhdGlvbl1ba2V5Q29kZV0gLT4ga2V5SW5mb1xuICB2YXIgbG9jYXRpb25UYWJsZSA9IFtdO1xuICBsb2NhdGlvblRhYmxlW0xFRlRdID0ge1xuICAgIDB4MTA6IHsgY29kZTogJ1NoaWZ0TGVmdCcsIGxvY2F0aW9uOiBMRUZUIH0sIC8vIFtVU0I6IDB4ZTFdXG4gICAgMHgxMTogeyBjb2RlOiAnQ29udHJvbExlZnQnLCBsb2NhdGlvbjogTEVGVCB9LCAvLyBbVVNCOiAweGUwXVxuICAgIDB4MTI6IHsgY29kZTogJ0FsdExlZnQnLCBsb2NhdGlvbjogTEVGVCB9IC8vIFtVU0I6IDB4ZTJdXG4gIH07XG4gIGxvY2F0aW9uVGFibGVbUklHSFRdID0ge1xuICAgIDB4MTA6IHsgY29kZTogJ1NoaWZ0UmlnaHQnLCBsb2NhdGlvbjogUklHSFQgfSwgLy8gW1VTQjogMHhlNV1cbiAgICAweDExOiB7IGNvZGU6ICdDb250cm9sUmlnaHQnLCBsb2NhdGlvbjogUklHSFQgfSwgLy8gW1VTQjogMHhlNF1cbiAgICAweDEyOiB7IGNvZGU6ICdBbHRSaWdodCcsIGxvY2F0aW9uOiBSSUdIVCB9IC8vIFtVU0I6IDB4ZTZdXG4gIH07XG4gIGxvY2F0aW9uVGFibGVbTlVNUEFEXSA9IHtcbiAgICAweDBEOiB7IGNvZGU6ICdOdW1wYWRFbnRlcicsIGxvY2F0aW9uOiBOVU1QQUQgfSAvLyBbVVNCOiAweDU4XVxuICB9O1xuXG4gIG1lcmdlSWYobG9jYXRpb25UYWJsZVtOVU1QQURdLCAnbW96Jywge1xuICAgIDB4NkQ6IHsgY29kZTogJ051bXBhZFN1YnRyYWN0JywgbG9jYXRpb246IE5VTVBBRCB9LCAvLyBbVVNCOiAweDU2XVxuICAgIDB4NkI6IHsgY29kZTogJ051bXBhZEFkZCcsIGxvY2F0aW9uOiBOVU1QQUQgfSAvLyBbVVNCOiAweDU3XVxuICB9KTtcbiAgbWVyZ2VJZihsb2NhdGlvblRhYmxlW0xFRlRdLCAnbW96LW1hYycsIHtcbiAgICAweEUwOiB7IGNvZGU6ICdPU0xlZnQnLCBsb2NhdGlvbjogTEVGVCB9IC8vIFtVU0I6IDB4ZTNdXG4gIH0pO1xuICBtZXJnZUlmKGxvY2F0aW9uVGFibGVbUklHSFRdLCAnbW96LW1hYycsIHtcbiAgICAweEUwOiB7IGNvZGU6ICdPU1JpZ2h0JywgbG9jYXRpb246IFJJR0hUIH0gLy8gW1VTQjogMHhlN11cbiAgfSk7XG4gIG1lcmdlSWYobG9jYXRpb25UYWJsZVtSSUdIVF0sICdtb3otd2luJywge1xuICAgIDB4NUI6IHsgY29kZTogJ09TUmlnaHQnLCBsb2NhdGlvbjogUklHSFQgfSAvLyBbVVNCOiAweGU3XVxuICB9KTtcblxuXG4gIG1lcmdlSWYobG9jYXRpb25UYWJsZVtSSUdIVF0sICdtYWMnLCB7XG4gICAgMHg1RDogeyBjb2RlOiAnT1NSaWdodCcsIGxvY2F0aW9uOiBSSUdIVCB9IC8vIFtVU0I6IDB4ZTddXG4gIH0pO1xuXG4gIG1lcmdlSWYobG9jYXRpb25UYWJsZVtOVU1QQURdLCAnY2hyb21lLW1hYycsIHtcbiAgICAweDBDOiB7IGNvZGU6ICdOdW1Mb2NrJywgbG9jYXRpb246IE5VTVBBRCB9IC8vIFtVU0I6IDB4NTNdXG4gIH0pO1xuXG4gIG1lcmdlSWYobG9jYXRpb25UYWJsZVtOVU1QQURdLCAnc2FmYXJpLW1hYycsIHtcbiAgICAweDBDOiB7IGNvZGU6ICdOdW1Mb2NrJywgbG9jYXRpb246IE5VTVBBRCB9LCAvLyBbVVNCOiAweDUzXVxuICAgIDB4QkI6IHsgY29kZTogJ051bXBhZEFkZCcsIGxvY2F0aW9uOiBOVU1QQUQgfSwgLy8gW1VTQjogMHg1N11cbiAgICAweEJEOiB7IGNvZGU6ICdOdW1wYWRTdWJ0cmFjdCcsIGxvY2F0aW9uOiBOVU1QQUQgfSwgLy8gW1VTQjogMHg1Nl1cbiAgICAweEJFOiB7IGNvZGU6ICdOdW1wYWREZWNpbWFsJywgbG9jYXRpb246IE5VTVBBRCB9LCAvLyBbVVNCOiAweDYzXVxuICAgIDB4QkY6IHsgY29kZTogJ051bXBhZERpdmlkZScsIGxvY2F0aW9uOiBOVU1QQUQgfSAvLyBbVVNCOiAweDU0XVxuICB9KTtcblxuXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy9cbiAgLy8gS2V5IFZhbHVlc1xuICAvL1xuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gTWFwcGluZyBmcm9tIGBjb2RlYCB2YWx1ZXMgdG8gYGtleWAgdmFsdWVzLiBWYWx1ZXMgZGVmaW5lZCBhdDpcbiAgLy8gaHR0cHM6Ly9kdmNzLnczLm9yZy9oZy9kb20zZXZlbnRzL3Jhdy1maWxlL3RpcC9odG1sL0RPTTNFdmVudHMta2V5Lmh0bWxcbiAgLy8gRW50cmllcyBhcmUgb25seSBwcm92aWRlZCB3aGVuIGBrZXlgIGRpZmZlcnMgZnJvbSBgY29kZWAuIElmXG4gIC8vIHByaW50YWJsZSwgYHNoaWZ0S2V5YCBoYXMgdGhlIHNoaWZ0ZWQgcHJpbnRhYmxlIGNoYXJhY3Rlci4gVGhpc1xuICAvLyBhc3N1bWVzIFVTIFN0YW5kYXJkIDEwMSBsYXlvdXRcblxuICB2YXIgY29kZVRvS2V5VGFibGUgPSB7XG4gICAgLy8gTW9kaWZpZXIgS2V5c1xuICAgIFNoaWZ0TGVmdDogeyBrZXk6ICdTaGlmdCcgfSxcbiAgICBTaGlmdFJpZ2h0OiB7IGtleTogJ1NoaWZ0JyB9LFxuICAgIENvbnRyb2xMZWZ0OiB7IGtleTogJ0NvbnRyb2wnIH0sXG4gICAgQ29udHJvbFJpZ2h0OiB7IGtleTogJ0NvbnRyb2wnIH0sXG4gICAgQWx0TGVmdDogeyBrZXk6ICdBbHQnIH0sXG4gICAgQWx0UmlnaHQ6IHsga2V5OiAnQWx0JyB9LFxuICAgIE9TTGVmdDogeyBrZXk6ICdPUycgfSxcbiAgICBPU1JpZ2h0OiB7IGtleTogJ09TJyB9LFxuXG4gICAgLy8gV2hpdGVzcGFjZSBLZXlzXG4gICAgTnVtcGFkRW50ZXI6IHsga2V5OiAnRW50ZXInIH0sXG4gICAgU3BhY2U6IHsga2V5OiAnICcgfSxcblxuICAgIC8vIFByaW50YWJsZSBLZXlzXG4gICAgRGlnaXQwOiB7IGtleTogJzAnLCBzaGlmdEtleTogJyknIH0sXG4gICAgRGlnaXQxOiB7IGtleTogJzEnLCBzaGlmdEtleTogJyEnIH0sXG4gICAgRGlnaXQyOiB7IGtleTogJzInLCBzaGlmdEtleTogJ0AnIH0sXG4gICAgRGlnaXQzOiB7IGtleTogJzMnLCBzaGlmdEtleTogJyMnIH0sXG4gICAgRGlnaXQ0OiB7IGtleTogJzQnLCBzaGlmdEtleTogJyQnIH0sXG4gICAgRGlnaXQ1OiB7IGtleTogJzUnLCBzaGlmdEtleTogJyUnIH0sXG4gICAgRGlnaXQ2OiB7IGtleTogJzYnLCBzaGlmdEtleTogJ14nIH0sXG4gICAgRGlnaXQ3OiB7IGtleTogJzcnLCBzaGlmdEtleTogJyYnIH0sXG4gICAgRGlnaXQ4OiB7IGtleTogJzgnLCBzaGlmdEtleTogJyonIH0sXG4gICAgRGlnaXQ5OiB7IGtleTogJzknLCBzaGlmdEtleTogJygnIH0sXG4gICAgS2V5QTogeyBrZXk6ICdhJywgc2hpZnRLZXk6ICdBJyB9LFxuICAgIEtleUI6IHsga2V5OiAnYicsIHNoaWZ0S2V5OiAnQicgfSxcbiAgICBLZXlDOiB7IGtleTogJ2MnLCBzaGlmdEtleTogJ0MnIH0sXG4gICAgS2V5RDogeyBrZXk6ICdkJywgc2hpZnRLZXk6ICdEJyB9LFxuICAgIEtleUU6IHsga2V5OiAnZScsIHNoaWZ0S2V5OiAnRScgfSxcbiAgICBLZXlGOiB7IGtleTogJ2YnLCBzaGlmdEtleTogJ0YnIH0sXG4gICAgS2V5RzogeyBrZXk6ICdnJywgc2hpZnRLZXk6ICdHJyB9LFxuICAgIEtleUg6IHsga2V5OiAnaCcsIHNoaWZ0S2V5OiAnSCcgfSxcbiAgICBLZXlJOiB7IGtleTogJ2knLCBzaGlmdEtleTogJ0knIH0sXG4gICAgS2V5SjogeyBrZXk6ICdqJywgc2hpZnRLZXk6ICdKJyB9LFxuICAgIEtleUs6IHsga2V5OiAnaycsIHNoaWZ0S2V5OiAnSycgfSxcbiAgICBLZXlMOiB7IGtleTogJ2wnLCBzaGlmdEtleTogJ0wnIH0sXG4gICAgS2V5TTogeyBrZXk6ICdtJywgc2hpZnRLZXk6ICdNJyB9LFxuICAgIEtleU46IHsga2V5OiAnbicsIHNoaWZ0S2V5OiAnTicgfSxcbiAgICBLZXlPOiB7IGtleTogJ28nLCBzaGlmdEtleTogJ08nIH0sXG4gICAgS2V5UDogeyBrZXk6ICdwJywgc2hpZnRLZXk6ICdQJyB9LFxuICAgIEtleVE6IHsga2V5OiAncScsIHNoaWZ0S2V5OiAnUScgfSxcbiAgICBLZXlSOiB7IGtleTogJ3InLCBzaGlmdEtleTogJ1InIH0sXG4gICAgS2V5UzogeyBrZXk6ICdzJywgc2hpZnRLZXk6ICdTJyB9LFxuICAgIEtleVQ6IHsga2V5OiAndCcsIHNoaWZ0S2V5OiAnVCcgfSxcbiAgICBLZXlVOiB7IGtleTogJ3UnLCBzaGlmdEtleTogJ1UnIH0sXG4gICAgS2V5VjogeyBrZXk6ICd2Jywgc2hpZnRLZXk6ICdWJyB9LFxuICAgIEtleVc6IHsga2V5OiAndycsIHNoaWZ0S2V5OiAnVycgfSxcbiAgICBLZXlYOiB7IGtleTogJ3gnLCBzaGlmdEtleTogJ1gnIH0sXG4gICAgS2V5WTogeyBrZXk6ICd5Jywgc2hpZnRLZXk6ICdZJyB9LFxuICAgIEtleVo6IHsga2V5OiAneicsIHNoaWZ0S2V5OiAnWicgfSxcbiAgICBOdW1wYWQwOiB7IGtleTogJzAnIH0sXG4gICAgTnVtcGFkMTogeyBrZXk6ICcxJyB9LFxuICAgIE51bXBhZDI6IHsga2V5OiAnMicgfSxcbiAgICBOdW1wYWQzOiB7IGtleTogJzMnIH0sXG4gICAgTnVtcGFkNDogeyBrZXk6ICc0JyB9LFxuICAgIE51bXBhZDU6IHsga2V5OiAnNScgfSxcbiAgICBOdW1wYWQ2OiB7IGtleTogJzYnIH0sXG4gICAgTnVtcGFkNzogeyBrZXk6ICc3JyB9LFxuICAgIE51bXBhZDg6IHsga2V5OiAnOCcgfSxcbiAgICBOdW1wYWQ5OiB7IGtleTogJzknIH0sXG4gICAgTnVtcGFkTXVsdGlwbHk6IHsga2V5OiAnKicgfSxcbiAgICBOdW1wYWRBZGQ6IHsga2V5OiAnKycgfSxcbiAgICBOdW1wYWRDb21tYTogeyBrZXk6ICcsJyB9LFxuICAgIE51bXBhZFN1YnRyYWN0OiB7IGtleTogJy0nIH0sXG4gICAgTnVtcGFkRGVjaW1hbDogeyBrZXk6ICcuJyB9LFxuICAgIE51bXBhZERpdmlkZTogeyBrZXk6ICcvJyB9LFxuICAgIFNlbWljb2xvbjogeyBrZXk6ICc7Jywgc2hpZnRLZXk6ICc6JyB9LFxuICAgIEVxdWFsOiB7IGtleTogJz0nLCBzaGlmdEtleTogJysnIH0sXG4gICAgQ29tbWE6IHsga2V5OiAnLCcsIHNoaWZ0S2V5OiAnPCcgfSxcbiAgICBNaW51czogeyBrZXk6ICctJywgc2hpZnRLZXk6ICdfJyB9LFxuICAgIFBlcmlvZDogeyBrZXk6ICcuJywgc2hpZnRLZXk6ICc+JyB9LFxuICAgIFNsYXNoOiB7IGtleTogJy8nLCBzaGlmdEtleTogJz8nIH0sXG4gICAgQmFja3F1b3RlOiB7IGtleTogJ2AnLCBzaGlmdEtleTogJ34nIH0sXG4gICAgQnJhY2tldExlZnQ6IHsga2V5OiAnWycsIHNoaWZ0S2V5OiAneycgfSxcbiAgICBCYWNrc2xhc2g6IHsga2V5OiAnXFxcXCcsIHNoaWZ0S2V5OiAnfCcgfSxcbiAgICBCcmFja2V0UmlnaHQ6IHsga2V5OiAnXScsIHNoaWZ0S2V5OiAnfScgfSxcbiAgICBRdW90ZTogeyBrZXk6ICdcXCcnLCBzaGlmdEtleTogJ1wiJyB9LFxuICAgIEludGxCYWNrc2xhc2g6IHsga2V5OiAnXFxcXCcsIHNoaWZ0S2V5OiAnfCcgfVxuICB9O1xuXG4gIG1lcmdlSWYoY29kZVRvS2V5VGFibGUsICdtYWMnLCB7XG4gICAgT1NMZWZ0OiB7IGtleTogJ01ldGEnIH0sXG4gICAgT1NSaWdodDogeyBrZXk6ICdNZXRhJyB9XG4gIH0pO1xuXG4gIC8vIENvcnJlY3Rpb25zIGZvciAna2V5JyBuYW1lcyBpbiBvbGRlciBicm93c2VycyAoZS5nLiBGRjM2LSlcbiAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0tleWJvYXJkRXZlbnQua2V5I0tleV92YWx1ZXNcbiAgdmFyIGtleUZpeFRhYmxlID0ge1xuICAgIEVzYzogJ0VzY2FwZScsXG4gICAgTm9uY29udmVydDogJ05vbkNvbnZlcnQnLFxuICAgIExlZnQ6ICdBcnJvd0xlZnQnLFxuICAgIFVwOiAnQXJyb3dVcCcsXG4gICAgUmlnaHQ6ICdBcnJvd1JpZ2h0JyxcbiAgICBEb3duOiAnQXJyb3dEb3duJyxcbiAgICBEZWw6ICdEZWxldGUnLFxuICAgIE1lbnU6ICdDb250ZXh0TWVudScsXG4gICAgTWVkaWFOZXh0VHJhY2s6ICdNZWRpYVRyYWNrTmV4dCcsXG4gICAgTWVkaWFQcmV2aW91c1RyYWNrOiAnTWVkaWFUcmFja1ByZXZpb3VzJyxcbiAgICBTZWxlY3RNZWRpYTogJ01lZGlhU2VsZWN0JyxcbiAgICBIYWxmV2lkdGg6ICdIYW5rYWt1JyxcbiAgICBGdWxsV2lkdGg6ICdaZW5rYWt1JyxcbiAgICBSb21hbkNoYXJhY3RlcnM6ICdSb21hamknLFxuICAgIENyc2VsOiAnQ3JTZWwnLFxuICAgIEV4c2VsOiAnRXhTZWwnLFxuICAgIFpvb206ICdab29tVG9nZ2xlJ1xuICB9O1xuXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy9cbiAgLy8gRXhwb3J0ZWQgRnVuY3Rpb25zXG4gIC8vXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXG4gIHZhciBjb2RlVGFibGUgPSByZW1hcChrZXlDb2RlVG9JbmZvVGFibGUsICdjb2RlJyk7XG5cbiAgdHJ5IHtcbiAgICB2YXIgbmF0aXZlTG9jYXRpb24gPSBuYXRpdmVLZXlib2FyZEV2ZW50ICYmICgnbG9jYXRpb24nIGluIG5ldyBLZXlib2FyZEV2ZW50KCcnKSk7XG4gIH0gY2F0Y2ggKF8pIHt9XG5cbiAgZnVuY3Rpb24ga2V5SW5mb0ZvckV2ZW50KGV2ZW50KSB7XG4gICAgdmFyIGtleUNvZGUgPSAna2V5Q29kZScgaW4gZXZlbnQgPyBldmVudC5rZXlDb2RlIDogJ3doaWNoJyBpbiBldmVudCA/IGV2ZW50LndoaWNoIDogMDtcblxuICAgIHZhciBrZXlJbmZvID0gKGZ1bmN0aW9uKCl7XG4gICAgICBpZiAobmF0aXZlTG9jYXRpb24gfHwgJ2tleUxvY2F0aW9uJyBpbiBldmVudCkge1xuICAgICAgICB2YXIgbG9jYXRpb24gPSBuYXRpdmVMb2NhdGlvbiA/IGV2ZW50LmxvY2F0aW9uIDogZXZlbnQua2V5TG9jYXRpb247XG4gICAgICAgIGlmIChsb2NhdGlvbiAmJiBrZXlDb2RlIGluIGxvY2F0aW9uVGFibGVbbG9jYXRpb25dKSB7XG4gICAgICAgICAgcmV0dXJuIGxvY2F0aW9uVGFibGVbbG9jYXRpb25dW2tleUNvZGVdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoJ2tleUlkZW50aWZpZXInIGluIGV2ZW50ICYmIGV2ZW50LmtleUlkZW50aWZpZXIgaW4ga2V5SWRlbnRpZmllclRhYmxlKSB7XG4gICAgICAgIHJldHVybiBrZXlJZGVudGlmaWVyVGFibGVbZXZlbnQua2V5SWRlbnRpZmllcl07XG4gICAgICB9XG4gICAgICBpZiAoa2V5Q29kZSBpbiBrZXlDb2RlVG9JbmZvVGFibGUpIHtcbiAgICAgICAgcmV0dXJuIGtleUNvZGVUb0luZm9UYWJsZVtrZXlDb2RlXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0oKSk7XG5cbiAgICAvLyBUT0RPOiBUcmFjayB0aGVzZSBkb3duIGFuZCBtb3ZlIHRvIGdlbmVyYWwgdGFibGVzXG4gICAgaWYgKDApIHtcbiAgICAgIC8vIFRPRE86IE1hcCB0aGVzZSBmb3IgbmV3ZXJpc2ggYnJvd3NlcnM/XG4gICAgICAvLyBUT0RPOiBpT1Mgb25seT9cbiAgICAgIC8vIFRPRE86IE92ZXJyaWRlIHdpdGggbW9yZSBjb21tb24ga2V5SWRlbnRpZmllciBuYW1lP1xuICAgICAgc3dpdGNoIChldmVudC5rZXlJZGVudGlmaWVyKSB7XG4gICAgICBjYXNlICdVKzAwMTAnOiBrZXlJbmZvID0geyBjb2RlOiAnRnVuY3Rpb24nIH07IGJyZWFrO1xuICAgICAgY2FzZSAnVSswMDFDJzoga2V5SW5mbyA9IHsgY29kZTogJ0Fycm93TGVmdCcgfTsgYnJlYWs7XG4gICAgICBjYXNlICdVKzAwMUQnOiBrZXlJbmZvID0geyBjb2RlOiAnQXJyb3dSaWdodCcgfTsgYnJlYWs7XG4gICAgICBjYXNlICdVKzAwMUUnOiBrZXlJbmZvID0geyBjb2RlOiAnQXJyb3dVcCcgfTsgYnJlYWs7XG4gICAgICBjYXNlICdVKzAwMUYnOiBrZXlJbmZvID0geyBjb2RlOiAnQXJyb3dEb3duJyB9OyBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIWtleUluZm8pXG4gICAgICByZXR1cm4gbnVsbDtcblxuICAgIHZhciBrZXkgPSAoZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgZW50cnkgPSBjb2RlVG9LZXlUYWJsZVtrZXlJbmZvLmNvZGVdO1xuICAgICAgaWYgKCFlbnRyeSkgcmV0dXJuIGtleUluZm8uY29kZTtcbiAgICAgIHJldHVybiAoZXZlbnQuc2hpZnRLZXkgJiYgJ3NoaWZ0S2V5JyBpbiBlbnRyeSkgPyBlbnRyeS5zaGlmdEtleSA6IGVudHJ5LmtleTtcbiAgICB9KCkpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGNvZGU6IGtleUluZm8uY29kZSxcbiAgICAgIGtleToga2V5LFxuICAgICAgbG9jYXRpb246IGtleUluZm8ubG9jYXRpb24sXG4gICAgICBrZXlDYXA6IGtleUluZm8ua2V5Q2FwXG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHF1ZXJ5S2V5Q2FwKGNvZGUsIGxvY2FsZSkge1xuICAgIGNvZGUgPSBTdHJpbmcoY29kZSk7XG4gICAgaWYgKCFjb2RlVGFibGUuaGFzT3duUHJvcGVydHkoY29kZSkpIHJldHVybiAnVW5kZWZpbmVkJztcbiAgICBpZiAobG9jYWxlICYmIFN0cmluZyhsb2NhbGUpLnRvTG93ZXJDYXNlKCkgIT09ICdlbi11cycpIHRocm93IEVycm9yKCdVbnN1cHBvcnRlZCBsb2NhbGUnKTtcbiAgICB2YXIga2V5SW5mbyA9IGNvZGVUYWJsZVtjb2RlXTtcbiAgICByZXR1cm4ga2V5SW5mby5rZXlDYXAgfHwga2V5SW5mby5jb2RlIHx8ICdVbmRlZmluZWQnO1xuICB9XG5cbiAgaWYgKCdLZXlib2FyZEV2ZW50JyBpbiBnbG9iYWwgJiYgJ2RlZmluZVByb3BlcnR5JyBpbiBPYmplY3QpIHtcbiAgICAoZnVuY3Rpb24oKSB7XG4gICAgICBmdW5jdGlvbiBkZWZpbmUobywgcCwgdikge1xuICAgICAgICBpZiAocCBpbiBvKSByZXR1cm47XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBwLCB2KTtcbiAgICAgIH1cblxuICAgICAgZGVmaW5lKEtleWJvYXJkRXZlbnQucHJvdG90eXBlLCAnY29kZScsIHsgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGtleUluZm8gPSBrZXlJbmZvRm9yRXZlbnQodGhpcyk7XG4gICAgICAgIHJldHVybiBrZXlJbmZvID8ga2V5SW5mby5jb2RlIDogJyc7XG4gICAgICB9fSk7XG5cbiAgICAgIC8vIEZpeCBmb3Igbm9uc3RhbmRhcmQgYGtleWAgdmFsdWVzIChGRjM2LSlcbiAgICAgIGlmICgna2V5JyBpbiBLZXlib2FyZEV2ZW50LnByb3RvdHlwZSkge1xuICAgICAgICB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoS2V5Ym9hcmRFdmVudC5wcm90b3R5cGUsICdrZXknKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEtleWJvYXJkRXZlbnQucHJvdG90eXBlLCAna2V5JywgeyBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciBrZXkgPSBkZXNjLmdldC5jYWxsKHRoaXMpO1xuICAgICAgICAgIHJldHVybiBrZXlGaXhUYWJsZS5oYXNPd25Qcm9wZXJ0eShrZXkpID8ga2V5Rml4VGFibGVba2V5XSA6IGtleTtcbiAgICAgICAgfX0pO1xuICAgICAgfVxuXG4gICAgICBkZWZpbmUoS2V5Ym9hcmRFdmVudC5wcm90b3R5cGUsICdrZXknLCB7IGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBrZXlJbmZvID0ga2V5SW5mb0ZvckV2ZW50KHRoaXMpO1xuICAgICAgICByZXR1cm4gKGtleUluZm8gJiYgJ2tleScgaW4ga2V5SW5mbykgPyBrZXlJbmZvLmtleSA6ICdVbmlkZW50aWZpZWQnO1xuICAgICAgfX0pO1xuXG4gICAgICBkZWZpbmUoS2V5Ym9hcmRFdmVudC5wcm90b3R5cGUsICdsb2NhdGlvbicsIHsgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGtleUluZm8gPSBrZXlJbmZvRm9yRXZlbnQodGhpcyk7XG4gICAgICAgIHJldHVybiAoa2V5SW5mbyAmJiAnbG9jYXRpb24nIGluIGtleUluZm8pID8ga2V5SW5mby5sb2NhdGlvbiA6IFNUQU5EQVJEO1xuICAgICAgfX0pO1xuXG4gICAgICBkZWZpbmUoS2V5Ym9hcmRFdmVudC5wcm90b3R5cGUsICdsb2NhbGUnLCB7IGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICAgIH19KTtcbiAgICB9KCkpO1xuICB9XG5cbiAgaWYgKCEoJ3F1ZXJ5S2V5Q2FwJyBpbiBnbG9iYWwuS2V5Ym9hcmRFdmVudCkpXG4gICAgZ2xvYmFsLktleWJvYXJkRXZlbnQucXVlcnlLZXlDYXAgPSBxdWVyeUtleUNhcDtcblxuICAvLyBIZWxwZXIgZm9yIElFOC1cbiAgZ2xvYmFsLmlkZW50aWZ5S2V5ID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICBpZiAoJ2NvZGUnIGluIGV2ZW50KVxuICAgICAgcmV0dXJuO1xuXG4gICAgdmFyIGtleUluZm8gPSBrZXlJbmZvRm9yRXZlbnQoZXZlbnQpO1xuICAgIGV2ZW50LmNvZGUgPSBrZXlJbmZvID8ga2V5SW5mby5jb2RlIDogJyc7XG4gICAgZXZlbnQua2V5ID0gKGtleUluZm8gJiYgJ2tleScgaW4ga2V5SW5mbykgPyBrZXlJbmZvLmtleSA6ICdVbmlkZW50aWZpZWQnO1xuICAgIGV2ZW50LmxvY2F0aW9uID0gKCdsb2NhdGlvbicgaW4gZXZlbnQpID8gZXZlbnQubG9jYXRpb24gOlxuICAgICAgKCdrZXlMb2NhdGlvbicgaW4gZXZlbnQpID8gZXZlbnQua2V5TG9jYXRpb24gOlxuICAgICAgKGtleUluZm8gJiYgJ2xvY2F0aW9uJyBpbiBrZXlJbmZvKSA/IGtleUluZm8ubG9jYXRpb24gOiBTVEFOREFSRDtcbiAgICBldmVudC5sb2NhbGUgPSAnJztcbiAgfTtcblxufSAod2luZG93KSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/lib/keyboard.polyfill.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/controls/checkpoint-controls.js":
/*!***************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/controls/checkpoint-controls.js ***!
  \***************************************************************************************************************/
/***/ ((module) => {

eval("const EPS = 0.1;\n\nmodule.exports = AFRAME.registerComponent('checkpoint-controls', {\n  schema: {\n    enabled: {default: true},\n    mode: {default: 'teleport', oneOf: ['teleport', 'animate']},\n    animateSpeed: {default: 3.0}\n  },\n\n  init: function () {\n    this.active = true;\n    this.checkpoint = null;\n\n    this.isNavMeshConstrained = false;\n\n    this.offset = new THREE.Vector3();\n    this.position = new THREE.Vector3();\n    this.targetPosition = new THREE.Vector3();\n  },\n\n  play: function () { this.active = true; },\n  pause: function () { this.active = false; },\n\n  setCheckpoint: function (checkpoint) {\n    const el = this.el;\n\n    if (!this.active) return;\n    if (this.checkpoint === checkpoint) return;\n\n    if (this.checkpoint) {\n      el.emit('navigation-end', {checkpoint: this.checkpoint});\n    }\n\n    this.checkpoint = checkpoint;\n    this.sync();\n\n    // Ignore new checkpoint if we're already there.\n    if (this.position.distanceTo(this.targetPosition) < EPS) {\n      this.checkpoint = null;\n      return;\n    }\n\n    el.emit('navigation-start', {checkpoint: checkpoint});\n\n    if (this.data.mode === 'teleport') {\n      this.el.setAttribute('position', this.targetPosition);\n      this.checkpoint = null;\n      el.emit('navigation-end', {checkpoint: checkpoint});\n      el.components['movement-controls'].updateNavLocation();\n    }\n  },\n\n  isVelocityActive: function () {\n    return !!(this.active && this.checkpoint);\n  },\n\n  getVelocity: function () {\n    if (!this.active) return;\n\n    const data = this.data;\n    const offset = this.offset;\n    const position = this.position;\n    const targetPosition = this.targetPosition;\n    const checkpoint = this.checkpoint;\n\n    this.sync();\n    if (position.distanceTo(targetPosition) < EPS) {\n      this.checkpoint = null;\n      this.el.emit('navigation-end', {checkpoint: checkpoint});\n      return offset.set(0, 0, 0);\n    }\n    offset.setLength(data.animateSpeed);\n    return offset;\n  },\n\n  sync: function () {\n    const offset = this.offset;\n    const position = this.position;\n    const targetPosition = this.targetPosition;\n\n    position.copy(this.el.getAttribute('position'));\n    this.checkpoint.object3D.getWorldPosition(targetPosition);\n    targetPosition.add(this.checkpoint.components.checkpoint.getOffset());\n    offset.copy(targetPosition).sub(position);\n  }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYWZyYW1lLWV4dHJhc0A3LjUuMS9ub2RlX21vZHVsZXMvYWZyYW1lLWV4dHJhcy9zcmMvY29udHJvbHMvY2hlY2twb2ludC1jb250cm9scy5qcyIsIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0EsY0FBYyxjQUFjO0FBQzVCLFdBQVcsb0RBQW9EO0FBQy9ELG1CQUFtQjtBQUNuQixHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVILHNCQUFzQixxQkFBcUI7QUFDM0MsdUJBQXVCLHNCQUFzQjs7QUFFN0M7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsaUNBQWlDLDRCQUE0QjtBQUM3RDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsaUNBQWlDLHVCQUF1Qjs7QUFFeEQ7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLHVCQUF1QjtBQUN4RDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLHVCQUF1QjtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zbWFfcG9zdF9zY2FyY2l0eS8uL25vZGVfbW9kdWxlcy8ucG5wbS9hZnJhbWUtZXh0cmFzQDcuNS4xL25vZGVfbW9kdWxlcy9hZnJhbWUtZXh0cmFzL3NyYy9jb250cm9scy9jaGVja3BvaW50LWNvbnRyb2xzLmpzP2I4MTEiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgRVBTID0gMC4xO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgnY2hlY2twb2ludC1jb250cm9scycsIHtcbiAgc2NoZW1hOiB7XG4gICAgZW5hYmxlZDoge2RlZmF1bHQ6IHRydWV9LFxuICAgIG1vZGU6IHtkZWZhdWx0OiAndGVsZXBvcnQnLCBvbmVPZjogWyd0ZWxlcG9ydCcsICdhbmltYXRlJ119LFxuICAgIGFuaW1hdGVTcGVlZDoge2RlZmF1bHQ6IDMuMH1cbiAgfSxcblxuICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5hY3RpdmUgPSB0cnVlO1xuICAgIHRoaXMuY2hlY2twb2ludCA9IG51bGw7XG5cbiAgICB0aGlzLmlzTmF2TWVzaENvbnN0cmFpbmVkID0gZmFsc2U7XG5cbiAgICB0aGlzLm9mZnNldCA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG4gICAgdGhpcy5wb3NpdGlvbiA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG4gICAgdGhpcy50YXJnZXRQb3NpdGlvbiA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG4gIH0sXG5cbiAgcGxheTogZnVuY3Rpb24gKCkgeyB0aGlzLmFjdGl2ZSA9IHRydWU7IH0sXG4gIHBhdXNlOiBmdW5jdGlvbiAoKSB7IHRoaXMuYWN0aXZlID0gZmFsc2U7IH0sXG5cbiAgc2V0Q2hlY2twb2ludDogZnVuY3Rpb24gKGNoZWNrcG9pbnQpIHtcbiAgICBjb25zdCBlbCA9IHRoaXMuZWw7XG5cbiAgICBpZiAoIXRoaXMuYWN0aXZlKSByZXR1cm47XG4gICAgaWYgKHRoaXMuY2hlY2twb2ludCA9PT0gY2hlY2twb2ludCkgcmV0dXJuO1xuXG4gICAgaWYgKHRoaXMuY2hlY2twb2ludCkge1xuICAgICAgZWwuZW1pdCgnbmF2aWdhdGlvbi1lbmQnLCB7Y2hlY2twb2ludDogdGhpcy5jaGVja3BvaW50fSk7XG4gICAgfVxuXG4gICAgdGhpcy5jaGVja3BvaW50ID0gY2hlY2twb2ludDtcbiAgICB0aGlzLnN5bmMoKTtcblxuICAgIC8vIElnbm9yZSBuZXcgY2hlY2twb2ludCBpZiB3ZSdyZSBhbHJlYWR5IHRoZXJlLlxuICAgIGlmICh0aGlzLnBvc2l0aW9uLmRpc3RhbmNlVG8odGhpcy50YXJnZXRQb3NpdGlvbikgPCBFUFMpIHtcbiAgICAgIHRoaXMuY2hlY2twb2ludCA9IG51bGw7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZWwuZW1pdCgnbmF2aWdhdGlvbi1zdGFydCcsIHtjaGVja3BvaW50OiBjaGVja3BvaW50fSk7XG5cbiAgICBpZiAodGhpcy5kYXRhLm1vZGUgPT09ICd0ZWxlcG9ydCcpIHtcbiAgICAgIHRoaXMuZWwuc2V0QXR0cmlidXRlKCdwb3NpdGlvbicsIHRoaXMudGFyZ2V0UG9zaXRpb24pO1xuICAgICAgdGhpcy5jaGVja3BvaW50ID0gbnVsbDtcbiAgICAgIGVsLmVtaXQoJ25hdmlnYXRpb24tZW5kJywge2NoZWNrcG9pbnQ6IGNoZWNrcG9pbnR9KTtcbiAgICAgIGVsLmNvbXBvbmVudHNbJ21vdmVtZW50LWNvbnRyb2xzJ10udXBkYXRlTmF2TG9jYXRpb24oKTtcbiAgICB9XG4gIH0sXG5cbiAgaXNWZWxvY2l0eUFjdGl2ZTogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAhISh0aGlzLmFjdGl2ZSAmJiB0aGlzLmNoZWNrcG9pbnQpO1xuICB9LFxuXG4gIGdldFZlbG9jaXR5OiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCF0aGlzLmFjdGl2ZSkgcmV0dXJuO1xuXG4gICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICBjb25zdCBvZmZzZXQgPSB0aGlzLm9mZnNldDtcbiAgICBjb25zdCBwb3NpdGlvbiA9IHRoaXMucG9zaXRpb247XG4gICAgY29uc3QgdGFyZ2V0UG9zaXRpb24gPSB0aGlzLnRhcmdldFBvc2l0aW9uO1xuICAgIGNvbnN0IGNoZWNrcG9pbnQgPSB0aGlzLmNoZWNrcG9pbnQ7XG5cbiAgICB0aGlzLnN5bmMoKTtcbiAgICBpZiAocG9zaXRpb24uZGlzdGFuY2VUbyh0YXJnZXRQb3NpdGlvbikgPCBFUFMpIHtcbiAgICAgIHRoaXMuY2hlY2twb2ludCA9IG51bGw7XG4gICAgICB0aGlzLmVsLmVtaXQoJ25hdmlnYXRpb24tZW5kJywge2NoZWNrcG9pbnQ6IGNoZWNrcG9pbnR9KTtcbiAgICAgIHJldHVybiBvZmZzZXQuc2V0KDAsIDAsIDApO1xuICAgIH1cbiAgICBvZmZzZXQuc2V0TGVuZ3RoKGRhdGEuYW5pbWF0ZVNwZWVkKTtcbiAgICByZXR1cm4gb2Zmc2V0O1xuICB9LFxuXG4gIHN5bmM6IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBvZmZzZXQgPSB0aGlzLm9mZnNldDtcbiAgICBjb25zdCBwb3NpdGlvbiA9IHRoaXMucG9zaXRpb247XG4gICAgY29uc3QgdGFyZ2V0UG9zaXRpb24gPSB0aGlzLnRhcmdldFBvc2l0aW9uO1xuXG4gICAgcG9zaXRpb24uY29weSh0aGlzLmVsLmdldEF0dHJpYnV0ZSgncG9zaXRpb24nKSk7XG4gICAgdGhpcy5jaGVja3BvaW50Lm9iamVjdDNELmdldFdvcmxkUG9zaXRpb24odGFyZ2V0UG9zaXRpb24pO1xuICAgIHRhcmdldFBvc2l0aW9uLmFkZCh0aGlzLmNoZWNrcG9pbnQuY29tcG9uZW50cy5jaGVja3BvaW50LmdldE9mZnNldCgpKTtcbiAgICBvZmZzZXQuY29weSh0YXJnZXRQb3NpdGlvbikuc3ViKHBvc2l0aW9uKTtcbiAgfVxufSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/controls/checkpoint-controls.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/controls/gamepad-controls.js":
/*!************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/controls/gamepad-controls.js ***!
  \************************************************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("/**\n * Gamepad controls for A-Frame.\n *\n * Stripped-down version of: https://github.com/donmccurdy/aframe-gamepad-controls\n *\n * For more information about the Gamepad API, see:\n * https://developer.mozilla.org/en-US/docs/Web/API/Gamepad_API/Using_the_Gamepad_API\n */\n\nconst GamepadButton = __webpack_require__(/*! ../../lib/GamepadButton */ \"(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/lib/GamepadButton.js\"),\n    GamepadButtonEvent = __webpack_require__(/*! ../../lib/GamepadButtonEvent */ \"(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/lib/GamepadButtonEvent.js\");\n\nconst JOYSTICK_EPS = 0.2;\n\nconst Hand = {\n  LEFT: 'left',\n  RIGHT: 'right'\n};\n\nconst Joystick = {\n  MOVEMENT: 1,\n  ROTATION: 2\n};\n\nmodule.exports = AFRAME.registerComponent('gamepad-controls', {\n\n  /*******************************************************************\n   * Statics\n   */\n\n  GamepadButton: GamepadButton,\n\n  /*******************************************************************\n   * Schema\n   */\n\n  schema: {\n    // Enable/disable gamepad-controls\n    enabled: { default: true },\n\n    // Rotation sensitivity\n    rotationSensitivity: { default: 2.0 },\n  },\n\n  /*******************************************************************\n   * Core\n   */\n\n  /**\n   * Called once when component is attached. Generally for initial setup.\n   */\n  init: function () {\n    const sceneEl = this.el.sceneEl;\n\n    this.system = sceneEl.systems['tracked-controls-webxr'] || {controllers: []};\n\n    this.prevTime = window.performance.now();\n\n    // Button state\n    this.buttons = {};\n\n    // Rotation\n    const rotation = this.el.object3D.rotation;\n    this.pitch = new THREE.Object3D();\n    this.pitch.rotation.x = rotation.x;\n    this.yaw = new THREE.Object3D();\n    this.yaw.position.y = 10;\n    this.yaw.rotation.y = rotation.y;\n    this.yaw.add(this.pitch);\n\n    this._lookVector = new THREE.Vector2();\n    this._moveVector = new THREE.Vector2();\n    this._dpadVector = new THREE.Vector2();\n\n    sceneEl.addBehavior(this);\n  },\n\n  /**\n   * Called when component is attached and when component data changes.\n   * Generally modifies the entity based on the data.\n   */\n  update: function () { this.tick(); },\n\n  /**\n   * Called on each iteration of main render loop.\n   */\n  tick: function (t, dt) {\n    this.updateButtonState();\n    this.updateRotation(dt);\n  },\n\n  /**\n   * Called when a component is removed (e.g., via removeAttribute).\n   * Generally undoes all modifications to the entity.\n   */\n  remove: function () { },\n\n  /*******************************************************************\n   * Movement\n   */\n\n  isVelocityActive: function () {\n    if (!this.data.enabled || !this.isConnected()) return false;\n\n    const dpad = this._dpadVector;\n    const joystick = this._moveVector;\n\n    this.getDpad(dpad);\n    this.getJoystick(Joystick.MOVEMENT, joystick);\n\n    const inputX = dpad.x || joystick.x;\n    const inputY = dpad.y || joystick.y;\n\n    return Math.abs(inputX) > JOYSTICK_EPS || Math.abs(inputY) > JOYSTICK_EPS;\n  },\n\n  getVelocityDelta: function () {\n    const dpad = this._dpadVector;\n    const joystick = this._moveVector;\n\n    this.getDpad(dpad);\n    this.getJoystick(Joystick.MOVEMENT, joystick);\n\n    const inputX = dpad.x || joystick.x;\n    const inputY = dpad.y || joystick.y;\n    const dVelocity = new THREE.Vector3();\n\n    if (Math.abs(inputX) > JOYSTICK_EPS) {\n      dVelocity.x += inputX;\n    }\n    if (Math.abs(inputY) > JOYSTICK_EPS) {\n      dVelocity.z += inputY;\n    }\n\n    return dVelocity;\n  },\n\n  /*******************************************************************\n   * Rotation\n   */\n\n  isRotationActive: function () {\n    if (!this.data.enabled || !this.isConnected()) return false;\n\n    const joystick = this._lookVector;\n\n    this.getJoystick(Joystick.ROTATION, joystick);\n\n    return Math.abs(joystick.x) > JOYSTICK_EPS || Math.abs(joystick.y) > JOYSTICK_EPS;\n  },\n\n  updateRotation: function (dt) {\n    if (!this.isRotationActive()) return;\n\n    const data = this.data;\n    const yaw = this.yaw;\n    const pitch = this.pitch;\n\n    // First copy camera rig pitch/yaw, it may have been changed from\n    // another component.\n    yaw.rotation.y = this.el.object3D.rotation.y;\n    pitch.rotation.x = this.el.object3D.rotation.x;\n\n    const lookVector = this._lookVector;\n\n    this.getJoystick(Joystick.ROTATION, lookVector);\n\n    if (Math.abs(lookVector.x) <= JOYSTICK_EPS) lookVector.x = 0;\n    if (Math.abs(lookVector.y) <= JOYSTICK_EPS) lookVector.y = 0;\n\n    lookVector.multiplyScalar(data.rotationSensitivity * dt / 1000);\n    yaw.rotation.y -= lookVector.x;\n    pitch.rotation.x -= lookVector.y;\n    pitch.rotation.x = Math.max(- Math.PI / 2, Math.min(Math.PI / 2, pitch.rotation.x));\n    this.el.object3D.rotation.set(pitch.rotation.x, yaw.rotation.y, 0);\n  },\n\n  /*******************************************************************\n   * Button events\n   */\n\n  updateButtonState: function () {\n    const gamepad = this.getGamepad(Hand.RIGHT);\n    if (this.data.enabled && gamepad) {\n\n      // Fire DOM events for button state changes.\n      for (var i = 0; i < gamepad.buttons.length; i++) {\n        if (gamepad.buttons[i].pressed && !this.buttons[i]) {\n          this.emit(new GamepadButtonEvent('gamepadbuttondown', i, gamepad.buttons[i]));\n        } else if (!gamepad.buttons[i].pressed && this.buttons[i]) {\n          this.emit(new GamepadButtonEvent('gamepadbuttonup', i, gamepad.buttons[i]));\n        }\n        this.buttons[i] = gamepad.buttons[i].pressed;\n      }\n\n    } else if (Object.keys(this.buttons)) {\n      // Reset state if controls are disabled or controller is lost.\n      this.buttons = {};\n    }\n  },\n\n  emit: function (event) {\n    // Emit original event.\n    this.el.emit(event.type, event);\n\n    // Emit convenience event, identifying button index.\n    this.el.emit(\n      event.type + ':' + event.index,\n      new GamepadButtonEvent(event.type, event.index, event)\n    );\n  },\n\n  /*******************************************************************\n   * Gamepad state\n   */\n\n  /**\n   * Returns the Gamepad instance attached to the component. If connected,\n   * a proxy-controls component may provide access to Gamepad input from a\n   * remote device.\n   *\n   * @param {string} handPreference\n   * @return {Gamepad}\n   */\n  getGamepad: (function () {\n    const _xrGamepads = [];\n    const _empty = [];\n\n    return function (handPreference) {\n      // https://github.com/donmccurdy/aframe-proxy-controls\n      const proxyControls = this.el.sceneEl.components['proxy-controls'];\n      const proxyGamepad = proxyControls && proxyControls.isConnected()\n        && proxyControls.getGamepad(0);\n      if (proxyGamepad) return proxyGamepad;\n\n      // https://www.w3.org/TR/webxr/#dom-xrinputsource-handedness\n      _xrGamepads.length = 0;\n      for (let i = 0; i < this.system.controllers.length; i++) {\n        const xrController = this.system.controllers[i];\n        const xrGamepad = xrController ? xrController.gamepad : null;\n        _xrGamepads.push(xrGamepad);\n        if (xrGamepad && xrController.handedness === handPreference) return xrGamepad;\n      }\n\n      // https://developer.mozilla.org/en-US/docs/Web/API/Gamepad/hand\n      const navGamepads = navigator.getGamepads ? navigator.getGamepads() : _empty;\n      for (let i = 0; i < navGamepads.length; i++) {\n        const navGamepad = navGamepads[i];\n        if (navGamepad && navGamepad.hand === handPreference) return navGamepad;\n      }\n\n      return _xrGamepads[0] || navGamepads[0];\n    };\n  })(),\n\n  /**\n   * Returns the state of the given button.\n   * @param  {number} index The button (0-N) for which to find state.\n   * @return {GamepadButton}\n   */\n  getButton: function (index) {\n    return this.getGamepad(Hand.RIGHT).buttons[index];\n  },\n\n  /**\n   * Returns state of the given axis. Axes are labelled 0-N, where 0-1 will\n   * represent X/Y on the first joystick, and 2-3 X/Y on the second.\n   * @param  {number} index The axis (0-N) for which to find state.\n   * @return {number} On the interval [-1,1].\n   */\n  getAxis: function (index) {\n    return this.getGamepad(index > 1 ? Hand.RIGHT : Hand.LEFT).axes[index];\n  },\n\n  /**\n   * Returns the state of the specified joystick as a THREE.Vector2.\n   * @param  {Joystick} role\n   * @param  {THREE.Vector2} target\n   * @return {THREE.Vector2}\n   */\n  getJoystick: function (index, target) {\n    const gamepad = this.getGamepad(index === Joystick.MOVEMENT ? Hand.LEFT : Hand.RIGHT);\n    // gamepad can be null here if it becomes disconnected even if isConnected() was called\n    // in the same tick before calling getJoystick.\n    if (!gamepad) {\n      return target.set(0, 0);\n    }\n    if (gamepad.mapping === 'xr-standard') {\n      // See: https://github.com/donmccurdy/aframe-extras/issues/307\n      switch (index) {\n        case Joystick.MOVEMENT: return target.set(gamepad.axes[2], gamepad.axes[3]);\n        case Joystick.ROTATION: return target.set(gamepad.axes[2], 0);\n      }\n    } else {\n      switch (index) {\n        case Joystick.MOVEMENT: return target.set(gamepad.axes[0], gamepad.axes[1]);\n        case Joystick.ROTATION: return target.set(gamepad.axes[2], gamepad.axes[3]);\n      }\n    }\n    throw new Error('Unexpected joystick index \"%d\".', index);\n  },\n\n  /**\n   * Returns the state of the dpad as a THREE.Vector2.\n   * @param {THREE.Vector2} target\n   * @return {THREE.Vector2}\n   */\n  getDpad: function (target) {\n    const gamepad = this.getGamepad(Hand.LEFT);\n    if (!gamepad) {\n      return target.set(0, 0);\n    }\n    if (!gamepad.buttons[GamepadButton.DPAD_RIGHT]) {\n      return target.set(0, 0);\n    }\n    return target.set(\n      (gamepad.buttons[GamepadButton.DPAD_RIGHT].pressed ? 1 : 0)\n      + (gamepad.buttons[GamepadButton.DPAD_LEFT].pressed ? -1 : 0),\n      (gamepad.buttons[GamepadButton.DPAD_UP].pressed ? -1 : 0)\n      + (gamepad.buttons[GamepadButton.DPAD_DOWN].pressed ? 1 : 0)\n    );\n  },\n\n  /**\n   * Returns true if the gamepad is currently connected to the system.\n   * @return {boolean}\n   */\n  isConnected: function () {\n    const gamepad = this.getGamepad(Hand.LEFT);\n    return !!(gamepad && gamepad.connected);\n  },\n\n  /**\n   * Returns a string containing some information about the controller. Result\n   * may vary across browsers, for a given controller.\n   * @return {string}\n   */\n  getID: function () {\n    return this.getGamepad(Hand.LEFT).id;\n  }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYWZyYW1lLWV4dHJhc0A3LjUuMS9ub2RlX21vZHVsZXMvYWZyYW1lLWV4dHJhcy9zcmMvY29udHJvbHMvZ2FtZXBhZC1jb250cm9scy5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHNCQUFzQixtQkFBTyxDQUFDLCtIQUF5QjtBQUN2RCx5QkFBeUIsbUJBQU8sQ0FBQyx5SUFBOEI7O0FBRS9EOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGVBQWUsZUFBZTs7QUFFOUI7QUFDQSwyQkFBMkIsY0FBYztBQUN6QyxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGdFQUFnRTs7QUFFaEU7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsY0FBYzs7QUFFdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qjs7QUFFekI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxzQkFBc0IsNEJBQTRCO0FBQ2xEO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHNCQUFzQixvQ0FBb0M7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esc0JBQXNCLHdCQUF3QjtBQUM5QztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLGNBQWMsUUFBUTtBQUN0QixjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxjQUFjLFFBQVE7QUFDdEIsY0FBYyxRQUFRO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLGNBQWMsVUFBVTtBQUN4QixjQUFjLGVBQWU7QUFDN0IsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsYUFBYSxlQUFlO0FBQzVCLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zbWFfcG9zdF9zY2FyY2l0eS8uL25vZGVfbW9kdWxlcy8ucG5wbS9hZnJhbWUtZXh0cmFzQDcuNS4xL25vZGVfbW9kdWxlcy9hZnJhbWUtZXh0cmFzL3NyYy9jb250cm9scy9nYW1lcGFkLWNvbnRyb2xzLmpzPzBmMzEiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBHYW1lcGFkIGNvbnRyb2xzIGZvciBBLUZyYW1lLlxuICpcbiAqIFN0cmlwcGVkLWRvd24gdmVyc2lvbiBvZjogaHR0cHM6Ly9naXRodWIuY29tL2Rvbm1jY3VyZHkvYWZyYW1lLWdhbWVwYWQtY29udHJvbHNcbiAqXG4gKiBGb3IgbW9yZSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgR2FtZXBhZCBBUEksIHNlZTpcbiAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9HYW1lcGFkX0FQSS9Vc2luZ190aGVfR2FtZXBhZF9BUElcbiAqL1xuXG5jb25zdCBHYW1lcGFkQnV0dG9uID0gcmVxdWlyZSgnLi4vLi4vbGliL0dhbWVwYWRCdXR0b24nKSxcbiAgICBHYW1lcGFkQnV0dG9uRXZlbnQgPSByZXF1aXJlKCcuLi8uLi9saWIvR2FtZXBhZEJ1dHRvbkV2ZW50Jyk7XG5cbmNvbnN0IEpPWVNUSUNLX0VQUyA9IDAuMjtcblxuY29uc3QgSGFuZCA9IHtcbiAgTEVGVDogJ2xlZnQnLFxuICBSSUdIVDogJ3JpZ2h0J1xufTtcblxuY29uc3QgSm95c3RpY2sgPSB7XG4gIE1PVkVNRU5UOiAxLFxuICBST1RBVElPTjogMlxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBBRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ2dhbWVwYWQtY29udHJvbHMnLCB7XG5cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICogU3RhdGljc1xuICAgKi9cblxuICBHYW1lcGFkQnV0dG9uOiBHYW1lcGFkQnV0dG9uLFxuXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAqIFNjaGVtYVxuICAgKi9cblxuICBzY2hlbWE6IHtcbiAgICAvLyBFbmFibGUvZGlzYWJsZSBnYW1lcGFkLWNvbnRyb2xzXG4gICAgZW5hYmxlZDogeyBkZWZhdWx0OiB0cnVlIH0sXG5cbiAgICAvLyBSb3RhdGlvbiBzZW5zaXRpdml0eVxuICAgIHJvdGF0aW9uU2Vuc2l0aXZpdHk6IHsgZGVmYXVsdDogMi4wIH0sXG4gIH0sXG5cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICogQ29yZVxuICAgKi9cblxuICAvKipcbiAgICogQ2FsbGVkIG9uY2Ugd2hlbiBjb21wb25lbnQgaXMgYXR0YWNoZWQuIEdlbmVyYWxseSBmb3IgaW5pdGlhbCBzZXR1cC5cbiAgICovXG4gIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBzY2VuZUVsID0gdGhpcy5lbC5zY2VuZUVsO1xuXG4gICAgdGhpcy5zeXN0ZW0gPSBzY2VuZUVsLnN5c3RlbXNbJ3RyYWNrZWQtY29udHJvbHMtd2VieHInXSB8fCB7Y29udHJvbGxlcnM6IFtdfTtcblxuICAgIHRoaXMucHJldlRpbWUgPSB3aW5kb3cucGVyZm9ybWFuY2Uubm93KCk7XG5cbiAgICAvLyBCdXR0b24gc3RhdGVcbiAgICB0aGlzLmJ1dHRvbnMgPSB7fTtcblxuICAgIC8vIFJvdGF0aW9uXG4gICAgY29uc3Qgcm90YXRpb24gPSB0aGlzLmVsLm9iamVjdDNELnJvdGF0aW9uO1xuICAgIHRoaXMucGl0Y2ggPSBuZXcgVEhSRUUuT2JqZWN0M0QoKTtcbiAgICB0aGlzLnBpdGNoLnJvdGF0aW9uLnggPSByb3RhdGlvbi54O1xuICAgIHRoaXMueWF3ID0gbmV3IFRIUkVFLk9iamVjdDNEKCk7XG4gICAgdGhpcy55YXcucG9zaXRpb24ueSA9IDEwO1xuICAgIHRoaXMueWF3LnJvdGF0aW9uLnkgPSByb3RhdGlvbi55O1xuICAgIHRoaXMueWF3LmFkZCh0aGlzLnBpdGNoKTtcblxuICAgIHRoaXMuX2xvb2tWZWN0b3IgPSBuZXcgVEhSRUUuVmVjdG9yMigpO1xuICAgIHRoaXMuX21vdmVWZWN0b3IgPSBuZXcgVEhSRUUuVmVjdG9yMigpO1xuICAgIHRoaXMuX2RwYWRWZWN0b3IgPSBuZXcgVEhSRUUuVmVjdG9yMigpO1xuXG4gICAgc2NlbmVFbC5hZGRCZWhhdmlvcih0aGlzKTtcbiAgfSxcblxuICAvKipcbiAgICogQ2FsbGVkIHdoZW4gY29tcG9uZW50IGlzIGF0dGFjaGVkIGFuZCB3aGVuIGNvbXBvbmVudCBkYXRhIGNoYW5nZXMuXG4gICAqIEdlbmVyYWxseSBtb2RpZmllcyB0aGUgZW50aXR5IGJhc2VkIG9uIHRoZSBkYXRhLlxuICAgKi9cbiAgdXBkYXRlOiBmdW5jdGlvbiAoKSB7IHRoaXMudGljaygpOyB9LFxuXG4gIC8qKlxuICAgKiBDYWxsZWQgb24gZWFjaCBpdGVyYXRpb24gb2YgbWFpbiByZW5kZXIgbG9vcC5cbiAgICovXG4gIHRpY2s6IGZ1bmN0aW9uICh0LCBkdCkge1xuICAgIHRoaXMudXBkYXRlQnV0dG9uU3RhdGUoKTtcbiAgICB0aGlzLnVwZGF0ZVJvdGF0aW9uKGR0KTtcbiAgfSxcblxuICAvKipcbiAgICogQ2FsbGVkIHdoZW4gYSBjb21wb25lbnQgaXMgcmVtb3ZlZCAoZS5nLiwgdmlhIHJlbW92ZUF0dHJpYnV0ZSkuXG4gICAqIEdlbmVyYWxseSB1bmRvZXMgYWxsIG1vZGlmaWNhdGlvbnMgdG8gdGhlIGVudGl0eS5cbiAgICovXG4gIHJlbW92ZTogZnVuY3Rpb24gKCkgeyB9LFxuXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAqIE1vdmVtZW50XG4gICAqL1xuXG4gIGlzVmVsb2NpdHlBY3RpdmU6IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMuZGF0YS5lbmFibGVkIHx8ICF0aGlzLmlzQ29ubmVjdGVkKCkpIHJldHVybiBmYWxzZTtcblxuICAgIGNvbnN0IGRwYWQgPSB0aGlzLl9kcGFkVmVjdG9yO1xuICAgIGNvbnN0IGpveXN0aWNrID0gdGhpcy5fbW92ZVZlY3RvcjtcblxuICAgIHRoaXMuZ2V0RHBhZChkcGFkKTtcbiAgICB0aGlzLmdldEpveXN0aWNrKEpveXN0aWNrLk1PVkVNRU5ULCBqb3lzdGljayk7XG5cbiAgICBjb25zdCBpbnB1dFggPSBkcGFkLnggfHwgam95c3RpY2sueDtcbiAgICBjb25zdCBpbnB1dFkgPSBkcGFkLnkgfHwgam95c3RpY2sueTtcblxuICAgIHJldHVybiBNYXRoLmFicyhpbnB1dFgpID4gSk9ZU1RJQ0tfRVBTIHx8IE1hdGguYWJzKGlucHV0WSkgPiBKT1lTVElDS19FUFM7XG4gIH0sXG5cbiAgZ2V0VmVsb2NpdHlEZWx0YTogZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IGRwYWQgPSB0aGlzLl9kcGFkVmVjdG9yO1xuICAgIGNvbnN0IGpveXN0aWNrID0gdGhpcy5fbW92ZVZlY3RvcjtcblxuICAgIHRoaXMuZ2V0RHBhZChkcGFkKTtcbiAgICB0aGlzLmdldEpveXN0aWNrKEpveXN0aWNrLk1PVkVNRU5ULCBqb3lzdGljayk7XG5cbiAgICBjb25zdCBpbnB1dFggPSBkcGFkLnggfHwgam95c3RpY2sueDtcbiAgICBjb25zdCBpbnB1dFkgPSBkcGFkLnkgfHwgam95c3RpY2sueTtcbiAgICBjb25zdCBkVmVsb2NpdHkgPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuXG4gICAgaWYgKE1hdGguYWJzKGlucHV0WCkgPiBKT1lTVElDS19FUFMpIHtcbiAgICAgIGRWZWxvY2l0eS54ICs9IGlucHV0WDtcbiAgICB9XG4gICAgaWYgKE1hdGguYWJzKGlucHV0WSkgPiBKT1lTVElDS19FUFMpIHtcbiAgICAgIGRWZWxvY2l0eS56ICs9IGlucHV0WTtcbiAgICB9XG5cbiAgICByZXR1cm4gZFZlbG9jaXR5O1xuICB9LFxuXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAqIFJvdGF0aW9uXG4gICAqL1xuXG4gIGlzUm90YXRpb25BY3RpdmU6IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMuZGF0YS5lbmFibGVkIHx8ICF0aGlzLmlzQ29ubmVjdGVkKCkpIHJldHVybiBmYWxzZTtcblxuICAgIGNvbnN0IGpveXN0aWNrID0gdGhpcy5fbG9va1ZlY3RvcjtcblxuICAgIHRoaXMuZ2V0Sm95c3RpY2soSm95c3RpY2suUk9UQVRJT04sIGpveXN0aWNrKTtcblxuICAgIHJldHVybiBNYXRoLmFicyhqb3lzdGljay54KSA+IEpPWVNUSUNLX0VQUyB8fCBNYXRoLmFicyhqb3lzdGljay55KSA+IEpPWVNUSUNLX0VQUztcbiAgfSxcblxuICB1cGRhdGVSb3RhdGlvbjogZnVuY3Rpb24gKGR0KSB7XG4gICAgaWYgKCF0aGlzLmlzUm90YXRpb25BY3RpdmUoKSkgcmV0dXJuO1xuXG4gICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICBjb25zdCB5YXcgPSB0aGlzLnlhdztcbiAgICBjb25zdCBwaXRjaCA9IHRoaXMucGl0Y2g7XG5cbiAgICAvLyBGaXJzdCBjb3B5IGNhbWVyYSByaWcgcGl0Y2gveWF3LCBpdCBtYXkgaGF2ZSBiZWVuIGNoYW5nZWQgZnJvbVxuICAgIC8vIGFub3RoZXIgY29tcG9uZW50LlxuICAgIHlhdy5yb3RhdGlvbi55ID0gdGhpcy5lbC5vYmplY3QzRC5yb3RhdGlvbi55O1xuICAgIHBpdGNoLnJvdGF0aW9uLnggPSB0aGlzLmVsLm9iamVjdDNELnJvdGF0aW9uLng7XG5cbiAgICBjb25zdCBsb29rVmVjdG9yID0gdGhpcy5fbG9va1ZlY3RvcjtcblxuICAgIHRoaXMuZ2V0Sm95c3RpY2soSm95c3RpY2suUk9UQVRJT04sIGxvb2tWZWN0b3IpO1xuXG4gICAgaWYgKE1hdGguYWJzKGxvb2tWZWN0b3IueCkgPD0gSk9ZU1RJQ0tfRVBTKSBsb29rVmVjdG9yLnggPSAwO1xuICAgIGlmIChNYXRoLmFicyhsb29rVmVjdG9yLnkpIDw9IEpPWVNUSUNLX0VQUykgbG9va1ZlY3Rvci55ID0gMDtcblxuICAgIGxvb2tWZWN0b3IubXVsdGlwbHlTY2FsYXIoZGF0YS5yb3RhdGlvblNlbnNpdGl2aXR5ICogZHQgLyAxMDAwKTtcbiAgICB5YXcucm90YXRpb24ueSAtPSBsb29rVmVjdG9yLng7XG4gICAgcGl0Y2gucm90YXRpb24ueCAtPSBsb29rVmVjdG9yLnk7XG4gICAgcGl0Y2gucm90YXRpb24ueCA9IE1hdGgubWF4KC0gTWF0aC5QSSAvIDIsIE1hdGgubWluKE1hdGguUEkgLyAyLCBwaXRjaC5yb3RhdGlvbi54KSk7XG4gICAgdGhpcy5lbC5vYmplY3QzRC5yb3RhdGlvbi5zZXQocGl0Y2gucm90YXRpb24ueCwgeWF3LnJvdGF0aW9uLnksIDApO1xuICB9LFxuXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAqIEJ1dHRvbiBldmVudHNcbiAgICovXG5cbiAgdXBkYXRlQnV0dG9uU3RhdGU6IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBnYW1lcGFkID0gdGhpcy5nZXRHYW1lcGFkKEhhbmQuUklHSFQpO1xuICAgIGlmICh0aGlzLmRhdGEuZW5hYmxlZCAmJiBnYW1lcGFkKSB7XG5cbiAgICAgIC8vIEZpcmUgRE9NIGV2ZW50cyBmb3IgYnV0dG9uIHN0YXRlIGNoYW5nZXMuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGdhbWVwYWQuYnV0dG9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoZ2FtZXBhZC5idXR0b25zW2ldLnByZXNzZWQgJiYgIXRoaXMuYnV0dG9uc1tpXSkge1xuICAgICAgICAgIHRoaXMuZW1pdChuZXcgR2FtZXBhZEJ1dHRvbkV2ZW50KCdnYW1lcGFkYnV0dG9uZG93bicsIGksIGdhbWVwYWQuYnV0dG9uc1tpXSkpO1xuICAgICAgICB9IGVsc2UgaWYgKCFnYW1lcGFkLmJ1dHRvbnNbaV0ucHJlc3NlZCAmJiB0aGlzLmJ1dHRvbnNbaV0pIHtcbiAgICAgICAgICB0aGlzLmVtaXQobmV3IEdhbWVwYWRCdXR0b25FdmVudCgnZ2FtZXBhZGJ1dHRvbnVwJywgaSwgZ2FtZXBhZC5idXR0b25zW2ldKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5idXR0b25zW2ldID0gZ2FtZXBhZC5idXR0b25zW2ldLnByZXNzZWQ7XG4gICAgICB9XG5cbiAgICB9IGVsc2UgaWYgKE9iamVjdC5rZXlzKHRoaXMuYnV0dG9ucykpIHtcbiAgICAgIC8vIFJlc2V0IHN0YXRlIGlmIGNvbnRyb2xzIGFyZSBkaXNhYmxlZCBvciBjb250cm9sbGVyIGlzIGxvc3QuXG4gICAgICB0aGlzLmJ1dHRvbnMgPSB7fTtcbiAgICB9XG4gIH0sXG5cbiAgZW1pdDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgLy8gRW1pdCBvcmlnaW5hbCBldmVudC5cbiAgICB0aGlzLmVsLmVtaXQoZXZlbnQudHlwZSwgZXZlbnQpO1xuXG4gICAgLy8gRW1pdCBjb252ZW5pZW5jZSBldmVudCwgaWRlbnRpZnlpbmcgYnV0dG9uIGluZGV4LlxuICAgIHRoaXMuZWwuZW1pdChcbiAgICAgIGV2ZW50LnR5cGUgKyAnOicgKyBldmVudC5pbmRleCxcbiAgICAgIG5ldyBHYW1lcGFkQnV0dG9uRXZlbnQoZXZlbnQudHlwZSwgZXZlbnQuaW5kZXgsIGV2ZW50KVxuICAgICk7XG4gIH0sXG5cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICogR2FtZXBhZCBzdGF0ZVxuICAgKi9cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgR2FtZXBhZCBpbnN0YW5jZSBhdHRhY2hlZCB0byB0aGUgY29tcG9uZW50LiBJZiBjb25uZWN0ZWQsXG4gICAqIGEgcHJveHktY29udHJvbHMgY29tcG9uZW50IG1heSBwcm92aWRlIGFjY2VzcyB0byBHYW1lcGFkIGlucHV0IGZyb20gYVxuICAgKiByZW1vdGUgZGV2aWNlLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaGFuZFByZWZlcmVuY2VcbiAgICogQHJldHVybiB7R2FtZXBhZH1cbiAgICovXG4gIGdldEdhbWVwYWQ6IChmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgX3hyR2FtZXBhZHMgPSBbXTtcbiAgICBjb25zdCBfZW1wdHkgPSBbXTtcblxuICAgIHJldHVybiBmdW5jdGlvbiAoaGFuZFByZWZlcmVuY2UpIHtcbiAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9kb25tY2N1cmR5L2FmcmFtZS1wcm94eS1jb250cm9sc1xuICAgICAgY29uc3QgcHJveHlDb250cm9scyA9IHRoaXMuZWwuc2NlbmVFbC5jb21wb25lbnRzWydwcm94eS1jb250cm9scyddO1xuICAgICAgY29uc3QgcHJveHlHYW1lcGFkID0gcHJveHlDb250cm9scyAmJiBwcm94eUNvbnRyb2xzLmlzQ29ubmVjdGVkKClcbiAgICAgICAgJiYgcHJveHlDb250cm9scy5nZXRHYW1lcGFkKDApO1xuICAgICAgaWYgKHByb3h5R2FtZXBhZCkgcmV0dXJuIHByb3h5R2FtZXBhZDtcblxuICAgICAgLy8gaHR0cHM6Ly93d3cudzMub3JnL1RSL3dlYnhyLyNkb20teHJpbnB1dHNvdXJjZS1oYW5kZWRuZXNzXG4gICAgICBfeHJHYW1lcGFkcy5sZW5ndGggPSAwO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnN5c3RlbS5jb250cm9sbGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCB4ckNvbnRyb2xsZXIgPSB0aGlzLnN5c3RlbS5jb250cm9sbGVyc1tpXTtcbiAgICAgICAgY29uc3QgeHJHYW1lcGFkID0geHJDb250cm9sbGVyID8geHJDb250cm9sbGVyLmdhbWVwYWQgOiBudWxsO1xuICAgICAgICBfeHJHYW1lcGFkcy5wdXNoKHhyR2FtZXBhZCk7XG4gICAgICAgIGlmICh4ckdhbWVwYWQgJiYgeHJDb250cm9sbGVyLmhhbmRlZG5lc3MgPT09IGhhbmRQcmVmZXJlbmNlKSByZXR1cm4geHJHYW1lcGFkO1xuICAgICAgfVxuXG4gICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvR2FtZXBhZC9oYW5kXG4gICAgICBjb25zdCBuYXZHYW1lcGFkcyA9IG5hdmlnYXRvci5nZXRHYW1lcGFkcyA/IG5hdmlnYXRvci5nZXRHYW1lcGFkcygpIDogX2VtcHR5O1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuYXZHYW1lcGFkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBuYXZHYW1lcGFkID0gbmF2R2FtZXBhZHNbaV07XG4gICAgICAgIGlmIChuYXZHYW1lcGFkICYmIG5hdkdhbWVwYWQuaGFuZCA9PT0gaGFuZFByZWZlcmVuY2UpIHJldHVybiBuYXZHYW1lcGFkO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gX3hyR2FtZXBhZHNbMF0gfHwgbmF2R2FtZXBhZHNbMF07XG4gICAgfTtcbiAgfSkoKSxcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgc3RhdGUgb2YgdGhlIGdpdmVuIGJ1dHRvbi5cbiAgICogQHBhcmFtICB7bnVtYmVyfSBpbmRleCBUaGUgYnV0dG9uICgwLU4pIGZvciB3aGljaCB0byBmaW5kIHN0YXRlLlxuICAgKiBAcmV0dXJuIHtHYW1lcGFkQnV0dG9ufVxuICAgKi9cbiAgZ2V0QnV0dG9uOiBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRHYW1lcGFkKEhhbmQuUklHSFQpLmJ1dHRvbnNbaW5kZXhdO1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHN0YXRlIG9mIHRoZSBnaXZlbiBheGlzLiBBeGVzIGFyZSBsYWJlbGxlZCAwLU4sIHdoZXJlIDAtMSB3aWxsXG4gICAqIHJlcHJlc2VudCBYL1kgb24gdGhlIGZpcnN0IGpveXN0aWNrLCBhbmQgMi0zIFgvWSBvbiB0aGUgc2Vjb25kLlxuICAgKiBAcGFyYW0gIHtudW1iZXJ9IGluZGV4IFRoZSBheGlzICgwLU4pIGZvciB3aGljaCB0byBmaW5kIHN0YXRlLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IE9uIHRoZSBpbnRlcnZhbCBbLTEsMV0uXG4gICAqL1xuICBnZXRBeGlzOiBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRHYW1lcGFkKGluZGV4ID4gMSA/IEhhbmQuUklHSFQgOiBIYW5kLkxFRlQpLmF4ZXNbaW5kZXhdO1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBzdGF0ZSBvZiB0aGUgc3BlY2lmaWVkIGpveXN0aWNrIGFzIGEgVEhSRUUuVmVjdG9yMi5cbiAgICogQHBhcmFtICB7Sm95c3RpY2t9IHJvbGVcbiAgICogQHBhcmFtICB7VEhSRUUuVmVjdG9yMn0gdGFyZ2V0XG4gICAqIEByZXR1cm4ge1RIUkVFLlZlY3RvcjJ9XG4gICAqL1xuICBnZXRKb3lzdGljazogZnVuY3Rpb24gKGluZGV4LCB0YXJnZXQpIHtcbiAgICBjb25zdCBnYW1lcGFkID0gdGhpcy5nZXRHYW1lcGFkKGluZGV4ID09PSBKb3lzdGljay5NT1ZFTUVOVCA/IEhhbmQuTEVGVCA6IEhhbmQuUklHSFQpO1xuICAgIC8vIGdhbWVwYWQgY2FuIGJlIG51bGwgaGVyZSBpZiBpdCBiZWNvbWVzIGRpc2Nvbm5lY3RlZCBldmVuIGlmIGlzQ29ubmVjdGVkKCkgd2FzIGNhbGxlZFxuICAgIC8vIGluIHRoZSBzYW1lIHRpY2sgYmVmb3JlIGNhbGxpbmcgZ2V0Sm95c3RpY2suXG4gICAgaWYgKCFnYW1lcGFkKSB7XG4gICAgICByZXR1cm4gdGFyZ2V0LnNldCgwLCAwKTtcbiAgICB9XG4gICAgaWYgKGdhbWVwYWQubWFwcGluZyA9PT0gJ3hyLXN0YW5kYXJkJykge1xuICAgICAgLy8gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vZG9ubWNjdXJkeS9hZnJhbWUtZXh0cmFzL2lzc3Vlcy8zMDdcbiAgICAgIHN3aXRjaCAoaW5kZXgpIHtcbiAgICAgICAgY2FzZSBKb3lzdGljay5NT1ZFTUVOVDogcmV0dXJuIHRhcmdldC5zZXQoZ2FtZXBhZC5heGVzWzJdLCBnYW1lcGFkLmF4ZXNbM10pO1xuICAgICAgICBjYXNlIEpveXN0aWNrLlJPVEFUSU9OOiByZXR1cm4gdGFyZ2V0LnNldChnYW1lcGFkLmF4ZXNbMl0sIDApO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBzd2l0Y2ggKGluZGV4KSB7XG4gICAgICAgIGNhc2UgSm95c3RpY2suTU9WRU1FTlQ6IHJldHVybiB0YXJnZXQuc2V0KGdhbWVwYWQuYXhlc1swXSwgZ2FtZXBhZC5heGVzWzFdKTtcbiAgICAgICAgY2FzZSBKb3lzdGljay5ST1RBVElPTjogcmV0dXJuIHRhcmdldC5zZXQoZ2FtZXBhZC5heGVzWzJdLCBnYW1lcGFkLmF4ZXNbM10pO1xuICAgICAgfVxuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuZXhwZWN0ZWQgam95c3RpY2sgaW5kZXggXCIlZFwiLicsIGluZGV4KTtcbiAgfSxcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgc3RhdGUgb2YgdGhlIGRwYWQgYXMgYSBUSFJFRS5WZWN0b3IyLlxuICAgKiBAcGFyYW0ge1RIUkVFLlZlY3RvcjJ9IHRhcmdldFxuICAgKiBAcmV0dXJuIHtUSFJFRS5WZWN0b3IyfVxuICAgKi9cbiAgZ2V0RHBhZDogZnVuY3Rpb24gKHRhcmdldCkge1xuICAgIGNvbnN0IGdhbWVwYWQgPSB0aGlzLmdldEdhbWVwYWQoSGFuZC5MRUZUKTtcbiAgICBpZiAoIWdhbWVwYWQpIHtcbiAgICAgIHJldHVybiB0YXJnZXQuc2V0KDAsIDApO1xuICAgIH1cbiAgICBpZiAoIWdhbWVwYWQuYnV0dG9uc1tHYW1lcGFkQnV0dG9uLkRQQURfUklHSFRdKSB7XG4gICAgICByZXR1cm4gdGFyZ2V0LnNldCgwLCAwKTtcbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldC5zZXQoXG4gICAgICAoZ2FtZXBhZC5idXR0b25zW0dhbWVwYWRCdXR0b24uRFBBRF9SSUdIVF0ucHJlc3NlZCA/IDEgOiAwKVxuICAgICAgKyAoZ2FtZXBhZC5idXR0b25zW0dhbWVwYWRCdXR0b24uRFBBRF9MRUZUXS5wcmVzc2VkID8gLTEgOiAwKSxcbiAgICAgIChnYW1lcGFkLmJ1dHRvbnNbR2FtZXBhZEJ1dHRvbi5EUEFEX1VQXS5wcmVzc2VkID8gLTEgOiAwKVxuICAgICAgKyAoZ2FtZXBhZC5idXR0b25zW0dhbWVwYWRCdXR0b24uRFBBRF9ET1dOXS5wcmVzc2VkID8gMSA6IDApXG4gICAgKTtcbiAgfSxcblxuICAvKipcbiAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBnYW1lcGFkIGlzIGN1cnJlbnRseSBjb25uZWN0ZWQgdG8gdGhlIHN5c3RlbS5cbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGlzQ29ubmVjdGVkOiBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgZ2FtZXBhZCA9IHRoaXMuZ2V0R2FtZXBhZChIYW5kLkxFRlQpO1xuICAgIHJldHVybiAhIShnYW1lcGFkICYmIGdhbWVwYWQuY29ubmVjdGVkKTtcbiAgfSxcblxuICAvKipcbiAgICogUmV0dXJucyBhIHN0cmluZyBjb250YWluaW5nIHNvbWUgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGNvbnRyb2xsZXIuIFJlc3VsdFxuICAgKiBtYXkgdmFyeSBhY3Jvc3MgYnJvd3NlcnMsIGZvciBhIGdpdmVuIGNvbnRyb2xsZXIuXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIGdldElEOiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0R2FtZXBhZChIYW5kLkxFRlQpLmlkO1xuICB9XG59KTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/controls/gamepad-controls.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/controls/index.js":
/*!*************************************************************************************************!*\
  !*** ./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/controls/index.js ***!
  \*************************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("__webpack_require__(/*! ./checkpoint-controls */ \"(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/controls/checkpoint-controls.js\");\n__webpack_require__(/*! ./gamepad-controls */ \"(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/controls/gamepad-controls.js\");\n__webpack_require__(/*! ./keyboard-controls */ \"(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/controls/keyboard-controls.js\");\n__webpack_require__(/*! ./touch-controls */ \"(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/controls/touch-controls.js\");\n__webpack_require__(/*! ./movement-controls */ \"(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/controls/movement-controls.js\");\n__webpack_require__(/*! ./trackpad-controls */ \"(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/controls/trackpad-controls.js\");\n__webpack_require__(/*! ./nipple-controls */ \"(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/controls/nipple-controls.js\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYWZyYW1lLWV4dHJhc0A3LjUuMS9ub2RlX21vZHVsZXMvYWZyYW1lLWV4dHJhcy9zcmMvY29udHJvbHMvaW5kZXguanMiLCJtYXBwaW5ncyI6IkFBQUEsbUJBQU8sQ0FBQyw0SUFBdUI7QUFDL0IsbUJBQU8sQ0FBQyxzSUFBb0I7QUFDNUIsbUJBQU8sQ0FBQyx3SUFBcUI7QUFDN0IsbUJBQU8sQ0FBQyxrSUFBa0I7QUFDMUIsbUJBQU8sQ0FBQyx3SUFBcUI7QUFDN0IsbUJBQU8sQ0FBQyx3SUFBcUI7QUFDN0IsbUJBQU8sQ0FBQyxvSUFBbUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zbWFfcG9zdF9zY2FyY2l0eS8uL25vZGVfbW9kdWxlcy8ucG5wbS9hZnJhbWUtZXh0cmFzQDcuNS4xL25vZGVfbW9kdWxlcy9hZnJhbWUtZXh0cmFzL3NyYy9jb250cm9scy9pbmRleC5qcz9iZWI2Il0sInNvdXJjZXNDb250ZW50IjpbInJlcXVpcmUoJy4vY2hlY2twb2ludC1jb250cm9scycpO1xucmVxdWlyZSgnLi9nYW1lcGFkLWNvbnRyb2xzJyk7XG5yZXF1aXJlKCcuL2tleWJvYXJkLWNvbnRyb2xzJyk7XG5yZXF1aXJlKCcuL3RvdWNoLWNvbnRyb2xzJyk7XG5yZXF1aXJlKCcuL21vdmVtZW50LWNvbnRyb2xzJyk7XG5yZXF1aXJlKCcuL3RyYWNrcGFkLWNvbnRyb2xzJyk7XG5yZXF1aXJlKCcuL25pcHBsZS1jb250cm9scycpO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/controls/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/controls/keyboard-controls.js":
/*!*************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/controls/keyboard-controls.js ***!
  \*************************************************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("/* global AFRAME, THREE */\n/* eslint-disable no-prototype-builtins */\n__webpack_require__(/*! ../../lib/keyboard.polyfill */ \"(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/lib/keyboard.polyfill.js\");\n\nconst PROXY_FLAG = '__keyboard-controls-proxy';\n\nconst KeyboardEvent = window.KeyboardEvent;\n\n/**\n * Keyboard Controls component.\n *\n * Stripped-down version of: https://github.com/donmccurdy/aframe-keyboard-controls\n *\n * Bind keyboard events to components, or control your entities with the WASD keys.\n *\n * Why use KeyboardEvent.code? \"This is set to a string representing the key that was pressed to\n * generate the KeyboardEvent, without taking the current keyboard layout (e.g., QWERTY vs.\n * Dvorak), locale (e.g., English vs. French), or any modifier keys into account. This is useful\n * when you care about which physical key was pressed, rather thanwhich character it corresponds\n * to. For example, if youre a writing a game, you might want a certain set of keys to move the\n * player in different directions, and that mapping should ideally be independent of keyboard\n * layout. See: https://developers.google.com/web/updates/2016/04/keyboardevent-keys-codes\n *\n * @namespace wasd-controls\n * keys the entity moves and if you release it will stop. Easing simulates friction.\n * to the entity when pressing the keys.\n * @param {bool} [enabled=true] - To completely enable or disable the controls\n */\nmodule.exports = AFRAME.registerComponent('keyboard-controls', {\n  schema: {\n    enabled:           { default: true },\n    debug:             { default: false }\n  },\n\n  init: function () {\n    this.dVelocity = new THREE.Vector3();\n    this.localKeys = {};\n    this.listeners = {\n      keydown: this.onKeyDown.bind(this),\n      keyup: this.onKeyUp.bind(this),\n      blur: this.onBlur.bind(this),\n      onContextMenu: this.onContextMenu.bind(this),\n    };\n  },\n\n  /*******************************************************************\n  * Movement\n  */\n\n  isVelocityActive: function () {\n    return this.data.enabled && !!Object.keys(this.getKeys()).length;\n  },\n\n  getVelocityDelta: function () {\n    const data = this.data;\n    const keys = this.getKeys();\n\n    this.dVelocity.set(0, 0, 0);\n    if (data.enabled) {\n      if (keys.KeyW || keys.ArrowUp)    { this.dVelocity.z -= 1; }\n      if (keys.KeyA || keys.ArrowLeft)  { this.dVelocity.x -= 1; }\n      if (keys.KeyS || keys.ArrowDown)  { this.dVelocity.z += 1; }\n      if (keys.KeyD || keys.ArrowRight) { this.dVelocity.x += 1; }\n\n      // Move faster when the shift key is down.\n      if (keys.ShiftLeft) { this.dVelocity = this.dVelocity.multiplyScalar(2); }\n    }\n\n    return this.dVelocity.clone();\n  },\n\n  /*******************************************************************\n  * Events\n  */\n\n  play: function () {\n    this.attachEventListeners();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n  },\n\n  attachEventListeners: function () {\n    window.addEventListener(\"contextmenu\", this.listeners.onContextMenu, false);\n    window.addEventListener(\"keydown\", this.listeners.keydown, false);\n    window.addEventListener(\"keyup\", this.listeners.keyup, false);\n    window.addEventListener(\"blur\", this.listeners.blur, false);\n  },\n\n  onContextMenu: function () {\n    for (const code in this.localKeys) {\n      if (this.localKeys.hasOwnProperty(code)) {\n        delete this.localKeys[code];\n      }\n    }\n  },\n\n  removeEventListeners: function () {\n    window.removeEventListener('keydown', this.listeners.keydown);\n    window.removeEventListener('keyup', this.listeners.keyup);\n    window.removeEventListener('blur', this.listeners.blur);\n  },\n\n  onKeyDown: function (event) {\n    if (AFRAME.utils.shouldCaptureKeyEvent(event)) {\n      this.localKeys[event.code] = true;\n      this.emit(event);\n    }\n  },\n\n  onKeyUp: function (event) {\n    if (AFRAME.utils.shouldCaptureKeyEvent(event)) {\n      delete this.localKeys[event.code];\n      this.emit(event);\n    }\n  },\n\n  onBlur: function () {\n    for (const code in this.localKeys) {\n      if (this.localKeys.hasOwnProperty(code)) {\n        delete this.localKeys[code];\n      }\n    }\n  },\n\n  emit: function (event) {\n    // TODO - keydown only initially?\n    // TODO - where the f is the spacebar\n\n    // Emit original event.\n    if (PROXY_FLAG in event) {\n      // TODO - Method never triggered.\n      this.el.emit(event.type, event);\n    }\n\n    // Emit convenience event, identifying key.\n    this.el.emit(event.type + ':' + event.code, new KeyboardEvent(event.type, event));\n    if (this.data.debug) console.log(event.type + ':' + event.code);\n  },\n\n  /*******************************************************************\n  * Accessors\n  */\n\n  isPressed: function (code) {\n    return code in this.getKeys();\n  },\n\n  getKeys: function () {\n    if (this.isProxied()) {\n      return this.el.sceneEl.components['proxy-controls'].getKeyboard();\n    }\n    return this.localKeys;\n  },\n\n  isProxied: function () {\n    const proxyControls = this.el.sceneEl.components['proxy-controls'];\n    return proxyControls && proxyControls.isConnected();\n  }\n\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYWZyYW1lLWV4dHJhc0A3LjUuMS9ub2RlX21vZHVsZXMvYWZyYW1lLWV4dHJhcy9zcmMvY29udHJvbHMva2V5Ym9hcmQtY29udHJvbHMuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBLG1CQUFPLENBQUMsdUlBQTZCOztBQUVyQzs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLE1BQU07QUFDakI7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLGVBQWU7QUFDeEMseUJBQXlCO0FBQ3pCLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSwwQ0FBMEM7QUFDMUMsMENBQTBDO0FBQzFDLDBDQUEwQztBQUMxQywwQ0FBMEM7O0FBRTFDO0FBQ0EsNEJBQTRCO0FBQzVCOztBQUVBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc21hX3Bvc3Rfc2NhcmNpdHkvLi9ub2RlX21vZHVsZXMvLnBucG0vYWZyYW1lLWV4dHJhc0A3LjUuMS9ub2RlX21vZHVsZXMvYWZyYW1lLWV4dHJhcy9zcmMvY29udHJvbHMva2V5Ym9hcmQtY29udHJvbHMuanM/ZjUxZiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBnbG9iYWwgQUZSQU1FLCBUSFJFRSAqL1xuLyogZXNsaW50LWRpc2FibGUgbm8tcHJvdG90eXBlLWJ1aWx0aW5zICovXG5yZXF1aXJlKCcuLi8uLi9saWIva2V5Ym9hcmQucG9seWZpbGwnKTtcblxuY29uc3QgUFJPWFlfRkxBRyA9ICdfX2tleWJvYXJkLWNvbnRyb2xzLXByb3h5JztcblxuY29uc3QgS2V5Ym9hcmRFdmVudCA9IHdpbmRvdy5LZXlib2FyZEV2ZW50O1xuXG4vKipcbiAqIEtleWJvYXJkIENvbnRyb2xzIGNvbXBvbmVudC5cbiAqXG4gKiBTdHJpcHBlZC1kb3duIHZlcnNpb24gb2Y6IGh0dHBzOi8vZ2l0aHViLmNvbS9kb25tY2N1cmR5L2FmcmFtZS1rZXlib2FyZC1jb250cm9sc1xuICpcbiAqIEJpbmQga2V5Ym9hcmQgZXZlbnRzIHRvIGNvbXBvbmVudHMsIG9yIGNvbnRyb2wgeW91ciBlbnRpdGllcyB3aXRoIHRoZSBXQVNEIGtleXMuXG4gKlxuICogV2h5IHVzZSBLZXlib2FyZEV2ZW50LmNvZGU/IFwiVGhpcyBpcyBzZXQgdG8gYSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBrZXkgdGhhdCB3YXMgcHJlc3NlZCB0b1xuICogZ2VuZXJhdGUgdGhlIEtleWJvYXJkRXZlbnQsIHdpdGhvdXQgdGFraW5nIHRoZSBjdXJyZW50IGtleWJvYXJkIGxheW91dCAoZS5nLiwgUVdFUlRZIHZzLlxuICogRHZvcmFrKSwgbG9jYWxlIChlLmcuLCBFbmdsaXNoIHZzLiBGcmVuY2gpLCBvciBhbnkgbW9kaWZpZXIga2V5cyBpbnRvIGFjY291bnQuIFRoaXMgaXMgdXNlZnVsXG4gKiB3aGVuIHlvdSBjYXJlIGFib3V0IHdoaWNoIHBoeXNpY2FsIGtleSB3YXMgcHJlc3NlZCwgcmF0aGVyIHRoYW53aGljaCBjaGFyYWN0ZXIgaXQgY29ycmVzcG9uZHNcbiAqIHRvLiBGb3IgZXhhbXBsZSwgaWYgeW914oCZcmUgYSB3cml0aW5nIGEgZ2FtZSwgeW91IG1pZ2h0IHdhbnQgYSBjZXJ0YWluIHNldCBvZiBrZXlzIHRvIG1vdmUgdGhlXG4gKiBwbGF5ZXIgaW4gZGlmZmVyZW50IGRpcmVjdGlvbnMsIGFuZCB0aGF0IG1hcHBpbmcgc2hvdWxkIGlkZWFsbHkgYmUgaW5kZXBlbmRlbnQgb2Yga2V5Ym9hcmRcbiAqIGxheW91dC4gU2VlOiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS93ZWIvdXBkYXRlcy8yMDE2LzA0L2tleWJvYXJkZXZlbnQta2V5cy1jb2Rlc1xuICpcbiAqIEBuYW1lc3BhY2Ugd2FzZC1jb250cm9sc1xuICoga2V5cyB0aGUgZW50aXR5IG1vdmVzIGFuZCBpZiB5b3UgcmVsZWFzZSBpdCB3aWxsIHN0b3AuIEVhc2luZyBzaW11bGF0ZXMgZnJpY3Rpb24uXG4gKiB0byB0aGUgZW50aXR5IHdoZW4gcHJlc3NpbmcgdGhlIGtleXMuXG4gKiBAcGFyYW0ge2Jvb2x9IFtlbmFibGVkPXRydWVdIC0gVG8gY29tcGxldGVseSBlbmFibGUgb3IgZGlzYWJsZSB0aGUgY29udHJvbHNcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBBRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ2tleWJvYXJkLWNvbnRyb2xzJywge1xuICBzY2hlbWE6IHtcbiAgICBlbmFibGVkOiAgICAgICAgICAgeyBkZWZhdWx0OiB0cnVlIH0sXG4gICAgZGVidWc6ICAgICAgICAgICAgIHsgZGVmYXVsdDogZmFsc2UgfVxuICB9LFxuXG4gIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmRWZWxvY2l0eSA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG4gICAgdGhpcy5sb2NhbEtleXMgPSB7fTtcbiAgICB0aGlzLmxpc3RlbmVycyA9IHtcbiAgICAgIGtleWRvd246IHRoaXMub25LZXlEb3duLmJpbmQodGhpcyksXG4gICAgICBrZXl1cDogdGhpcy5vbktleVVwLmJpbmQodGhpcyksXG4gICAgICBibHVyOiB0aGlzLm9uQmx1ci5iaW5kKHRoaXMpLFxuICAgICAgb25Db250ZXh0TWVudTogdGhpcy5vbkNvbnRleHRNZW51LmJpbmQodGhpcyksXG4gICAgfTtcbiAgfSxcblxuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAqIE1vdmVtZW50XG4gICovXG5cbiAgaXNWZWxvY2l0eUFjdGl2ZTogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLmRhdGEuZW5hYmxlZCAmJiAhIU9iamVjdC5rZXlzKHRoaXMuZ2V0S2V5cygpKS5sZW5ndGg7XG4gIH0sXG5cbiAgZ2V0VmVsb2NpdHlEZWx0YTogZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7XG4gICAgY29uc3Qga2V5cyA9IHRoaXMuZ2V0S2V5cygpO1xuXG4gICAgdGhpcy5kVmVsb2NpdHkuc2V0KDAsIDAsIDApO1xuICAgIGlmIChkYXRhLmVuYWJsZWQpIHtcbiAgICAgIGlmIChrZXlzLktleVcgfHwga2V5cy5BcnJvd1VwKSAgICB7IHRoaXMuZFZlbG9jaXR5LnogLT0gMTsgfVxuICAgICAgaWYgKGtleXMuS2V5QSB8fCBrZXlzLkFycm93TGVmdCkgIHsgdGhpcy5kVmVsb2NpdHkueCAtPSAxOyB9XG4gICAgICBpZiAoa2V5cy5LZXlTIHx8IGtleXMuQXJyb3dEb3duKSAgeyB0aGlzLmRWZWxvY2l0eS56ICs9IDE7IH1cbiAgICAgIGlmIChrZXlzLktleUQgfHwga2V5cy5BcnJvd1JpZ2h0KSB7IHRoaXMuZFZlbG9jaXR5LnggKz0gMTsgfVxuXG4gICAgICAvLyBNb3ZlIGZhc3RlciB3aGVuIHRoZSBzaGlmdCBrZXkgaXMgZG93bi5cbiAgICAgIGlmIChrZXlzLlNoaWZ0TGVmdCkgeyB0aGlzLmRWZWxvY2l0eSA9IHRoaXMuZFZlbG9jaXR5Lm11bHRpcGx5U2NhbGFyKDIpOyB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuZFZlbG9jaXR5LmNsb25lKCk7XG4gIH0sXG5cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgKiBFdmVudHNcbiAgKi9cblxuICBwbGF5OiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5hdHRhY2hFdmVudExpc3RlbmVycygpO1xuICB9LFxuXG4gIHBhdXNlOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVycygpO1xuICB9LFxuXG4gIGF0dGFjaEV2ZW50TGlzdGVuZXJzOiBmdW5jdGlvbiAoKSB7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJjb250ZXh0bWVudVwiLCB0aGlzLmxpc3RlbmVycy5vbkNvbnRleHRNZW51LCBmYWxzZSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMubGlzdGVuZXJzLmtleWRvd24sIGZhbHNlKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMubGlzdGVuZXJzLmtleXVwLCBmYWxzZSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJibHVyXCIsIHRoaXMubGlzdGVuZXJzLmJsdXIsIGZhbHNlKTtcbiAgfSxcblxuICBvbkNvbnRleHRNZW51OiBmdW5jdGlvbiAoKSB7XG4gICAgZm9yIChjb25zdCBjb2RlIGluIHRoaXMubG9jYWxLZXlzKSB7XG4gICAgICBpZiAodGhpcy5sb2NhbEtleXMuaGFzT3duUHJvcGVydHkoY29kZSkpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMubG9jYWxLZXlzW2NvZGVdO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICByZW1vdmVFdmVudExpc3RlbmVyczogZnVuY3Rpb24gKCkge1xuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5saXN0ZW5lcnMua2V5ZG93bik7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5saXN0ZW5lcnMua2V5dXApO1xuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdibHVyJywgdGhpcy5saXN0ZW5lcnMuYmx1cik7XG4gIH0sXG5cbiAgb25LZXlEb3duOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBpZiAoQUZSQU1FLnV0aWxzLnNob3VsZENhcHR1cmVLZXlFdmVudChldmVudCkpIHtcbiAgICAgIHRoaXMubG9jYWxLZXlzW2V2ZW50LmNvZGVdID0gdHJ1ZTtcbiAgICAgIHRoaXMuZW1pdChldmVudCk7XG4gICAgfVxuICB9LFxuXG4gIG9uS2V5VXA6IGZ1bmN0aW9uIChldmVudCkge1xuICAgIGlmIChBRlJBTUUudXRpbHMuc2hvdWxkQ2FwdHVyZUtleUV2ZW50KGV2ZW50KSkge1xuICAgICAgZGVsZXRlIHRoaXMubG9jYWxLZXlzW2V2ZW50LmNvZGVdO1xuICAgICAgdGhpcy5lbWl0KGV2ZW50KTtcbiAgICB9XG4gIH0sXG5cbiAgb25CbHVyOiBmdW5jdGlvbiAoKSB7XG4gICAgZm9yIChjb25zdCBjb2RlIGluIHRoaXMubG9jYWxLZXlzKSB7XG4gICAgICBpZiAodGhpcy5sb2NhbEtleXMuaGFzT3duUHJvcGVydHkoY29kZSkpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMubG9jYWxLZXlzW2NvZGVdO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICBlbWl0OiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAvLyBUT0RPIC0ga2V5ZG93biBvbmx5IGluaXRpYWxseT9cbiAgICAvLyBUT0RPIC0gd2hlcmUgdGhlIGYgaXMgdGhlIHNwYWNlYmFyXG5cbiAgICAvLyBFbWl0IG9yaWdpbmFsIGV2ZW50LlxuICAgIGlmIChQUk9YWV9GTEFHIGluIGV2ZW50KSB7XG4gICAgICAvLyBUT0RPIC0gTWV0aG9kIG5ldmVyIHRyaWdnZXJlZC5cbiAgICAgIHRoaXMuZWwuZW1pdChldmVudC50eXBlLCBldmVudCk7XG4gICAgfVxuXG4gICAgLy8gRW1pdCBjb252ZW5pZW5jZSBldmVudCwgaWRlbnRpZnlpbmcga2V5LlxuICAgIHRoaXMuZWwuZW1pdChldmVudC50eXBlICsgJzonICsgZXZlbnQuY29kZSwgbmV3IEtleWJvYXJkRXZlbnQoZXZlbnQudHlwZSwgZXZlbnQpKTtcbiAgICBpZiAodGhpcy5kYXRhLmRlYnVnKSBjb25zb2xlLmxvZyhldmVudC50eXBlICsgJzonICsgZXZlbnQuY29kZSk7XG4gIH0sXG5cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgKiBBY2Nlc3NvcnNcbiAgKi9cblxuICBpc1ByZXNzZWQ6IGZ1bmN0aW9uIChjb2RlKSB7XG4gICAgcmV0dXJuIGNvZGUgaW4gdGhpcy5nZXRLZXlzKCk7XG4gIH0sXG5cbiAgZ2V0S2V5czogZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLmlzUHJveGllZCgpKSB7XG4gICAgICByZXR1cm4gdGhpcy5lbC5zY2VuZUVsLmNvbXBvbmVudHNbJ3Byb3h5LWNvbnRyb2xzJ10uZ2V0S2V5Ym9hcmQoKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMubG9jYWxLZXlzO1xuICB9LFxuXG4gIGlzUHJveGllZDogZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IHByb3h5Q29udHJvbHMgPSB0aGlzLmVsLnNjZW5lRWwuY29tcG9uZW50c1sncHJveHktY29udHJvbHMnXTtcbiAgICByZXR1cm4gcHJveHlDb250cm9scyAmJiBwcm94eUNvbnRyb2xzLmlzQ29ubmVjdGVkKCk7XG4gIH1cblxufSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/controls/keyboard-controls.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/controls/movement-controls.js":
/*!*************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/controls/movement-controls.js ***!
  \*************************************************************************************************************/
/***/ ((module) => {

eval("/**\n * Movement Controls\n *\n * @author Don McCurdy <dm@donmccurdy.com>\n */\n\nconst COMPONENT_SUFFIX = '-controls';\nconst MAX_DELTA = 0.2; // ms\nconst EPS = 10e-6;\nconst MOVED = 'moved';\n\nmodule.exports = AFRAME.registerComponent('movement-controls', {\n\n  /*******************************************************************\n   * Schema\n   */\n\n  dependencies: ['rotation'],\n\n  schema: {\n    enabled:            { default: true },\n    controls:           { default: ['gamepad', 'trackpad', 'keyboard', 'touch'] },\n    speed:              { default: 0.3, min: 0 },\n    fly:                { default: false },\n    constrainToNavMesh: { default: false },\n    camera:             { default: '[movement-controls] [camera]', type: 'selector' }\n  },\n\n  /*******************************************************************\n   * Lifecycle\n   */\n\n  init: function () {\n    const el = this.el;\n    if (!this.data.camera) {\n      this.data.camera = el.querySelector('[camera]');\n    }\n    this.velocityCtrl = null;\n\n    this.velocity = new THREE.Vector3();\n    this.heading = new THREE.Quaternion();\n    this.eventDetail = {};\n\n    // Navigation\n    this.navGroup = null;\n    this.navNode = null;\n\n    if (el.sceneEl.hasLoaded) {\n      this.injectControls();\n    } else {\n      el.sceneEl.addEventListener('loaded', this.injectControls.bind(this));\n    }\n  },\n\n  update: function (prevData) {\n    const el = this.el;\n    const data = this.data;\n    const nav = el.sceneEl.systems.nav;\n    if (el.sceneEl.hasLoaded) {\n      this.injectControls();\n    }\n    if (nav && data.constrainToNavMesh !== prevData.constrainToNavMesh) {\n      data.constrainToNavMesh\n        ? nav.addAgent(this)\n        : nav.removeAgent(this);\n    }\n    if (data.enabled !== prevData.enabled) {\n      // Propagate the enabled change to all controls\n      for (let i = 0; i < data.controls.length; i++) {\n        const name = data.controls[i] + COMPONENT_SUFFIX;\n        this.el.setAttribute(name, { enabled: this.data.enabled });\n      }\n    }\n  },\n\n  injectControls: function () {\n    const data = this.data;\n\n    for (let i = 0; i < data.controls.length; i++) {\n      const name = data.controls[i] + COMPONENT_SUFFIX;\n      this.el.setAttribute(name, { enabled: this.data.enabled });\n    }\n  },\n\n  updateNavLocation: function () {\n    this.navGroup = null;\n    this.navNode = null;\n  },\n\n  /*******************************************************************\n   * Tick\n   */\n\n  tick: (function () {\n    const start = new THREE.Vector3();\n    const end = new THREE.Vector3();\n    const clampedEnd = new THREE.Vector3();\n\n    return function (t, dt) {\n      if (!dt) return;\n\n      const el = this.el;\n      const data = this.data;\n\n      if (!data.enabled) return;\n\n      this.updateVelocityCtrl();\n      const velocityCtrl = this.velocityCtrl;\n      const velocity = this.velocity;\n\n      if (!velocityCtrl) return;\n\n      // Update velocity. If FPS is too low, reset.\n      if (dt / 1000 > MAX_DELTA) {\n        velocity.set(0, 0, 0);\n      } else {\n        this.updateVelocity(dt);\n      }\n\n      if (data.constrainToNavMesh\n          && velocityCtrl.isNavMeshConstrained !== false) {\n\n        if (velocity.lengthSq() < EPS) return;\n\n        start.copy(el.object3D.position);\n        end\n          .copy(velocity)\n          .multiplyScalar(dt / 1000)\n          .add(start);\n\n        const nav = el.sceneEl.systems.nav;\n        this.navGroup = this.navGroup === null ? nav.getGroup(start) : this.navGroup;\n        this.navNode = this.navNode || nav.getNode(start, this.navGroup);\n        this.navNode = nav.clampStep(start, end, this.navGroup, this.navNode, clampedEnd);\n        el.object3D.position.copy(clampedEnd);\n      } else if (el.hasAttribute('velocity')) {\n        el.setAttribute('velocity', velocity);\n      } else {\n        el.object3D.position.x += velocity.x * dt / 1000;\n        el.object3D.position.y += velocity.y * dt / 1000;\n        el.object3D.position.z += velocity.z * dt / 1000;\n      }\n\n    };\n  }()),\n\n  /*******************************************************************\n   * Movement\n   */\n\n  updateVelocityCtrl: function () {\n    const data = this.data;\n    if (data.enabled) {\n      for (let i = 0, l = data.controls.length; i < l; i++) {\n        const control = this.el.components[data.controls[i] + COMPONENT_SUFFIX];\n        if (control && control.isVelocityActive()) {\n          this.velocityCtrl = control;\n          return;\n        }\n      }\n      this.velocityCtrl = null;\n    }\n  },\n\n  updateVelocity: (function () {\n    const vector2 = new THREE.Vector2();\n    const quaternion = new THREE.Quaternion();\n\n    return function (dt) {\n      let dVelocity;\n      const el = this.el;\n      const control = this.velocityCtrl;\n      const velocity = this.velocity;\n      const data = this.data;\n\n      if (control) {\n        if (control.getVelocityDelta) {\n          dVelocity = control.getVelocityDelta(dt);\n        } else if (control.getVelocity) {\n          velocity.copy(control.getVelocity());\n          return;\n        } else if (control.getPositionDelta) {\n          velocity.copy(control.getPositionDelta(dt).multiplyScalar(1000 / dt));\n          return;\n        } else {\n          throw new Error('Incompatible movement controls: ', control);\n        }\n      }\n\n      if (el.hasAttribute('velocity') && !data.constrainToNavMesh) {\n        velocity.copy(this.el.getAttribute('velocity'));\n      }\n\n      if (dVelocity && data.enabled) {\n        const cameraEl = data.camera;\n\n        // Rotate to heading\n        quaternion.copy(cameraEl.object3D.quaternion);\n        quaternion.premultiply(el.object3D.quaternion);\n        dVelocity.applyQuaternion(quaternion);\n\n        const factor = dVelocity.length();\n        if (data.fly) {\n          velocity.copy(dVelocity);\n          velocity.multiplyScalar(this.data.speed * 16.66667);\n        } else {\n          vector2.set(dVelocity.x, dVelocity.z);\n          vector2.setLength(factor * this.data.speed * 16.66667);\n          velocity.x = vector2.x;\n          velocity.y = 0;\n          velocity.z = vector2.y;\n        }\n        if (velocity.x !== 0 || velocity.y !== 0 || velocity.z !== 0) {\n          this.eventDetail.velocity = velocity;\n          this.el.emit(MOVED, this.eventDetail);\n        }\n      }\n    };\n\n  }())\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYWZyYW1lLWV4dHJhc0A3LjUuMS9ub2RlX21vZHVsZXMvYWZyYW1lLWV4dHJhcy9zcmMvY29udHJvbHMvbW92ZW1lbnQtY29udHJvbHMuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLDBCQUEwQixlQUFlO0FBQ3pDLDBCQUEwQix1REFBdUQ7QUFDakYsMEJBQTBCLHNCQUFzQjtBQUNoRCwwQkFBMEIsZ0JBQWdCO0FBQzFDLDBCQUEwQixnQkFBZ0I7QUFDMUMsMEJBQTBCO0FBQzFCLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiwwQkFBMEI7QUFDaEQ7QUFDQSxxQ0FBcUMsNEJBQTRCO0FBQ2pFO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUEsb0JBQW9CLDBCQUEwQjtBQUM5QztBQUNBLG1DQUFtQyw0QkFBNEI7QUFDL0Q7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxnREFBZ0QsT0FBTztBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxHQUFHO0FBQ0gsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3NtYV9wb3N0X3NjYXJjaXR5Ly4vbm9kZV9tb2R1bGVzLy5wbnBtL2FmcmFtZS1leHRyYXNANy41LjEvbm9kZV9tb2R1bGVzL2FmcmFtZS1leHRyYXMvc3JjL2NvbnRyb2xzL21vdmVtZW50LWNvbnRyb2xzLmpzPzI0ZmMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBNb3ZlbWVudCBDb250cm9sc1xuICpcbiAqIEBhdXRob3IgRG9uIE1jQ3VyZHkgPGRtQGRvbm1jY3VyZHkuY29tPlxuICovXG5cbmNvbnN0IENPTVBPTkVOVF9TVUZGSVggPSAnLWNvbnRyb2xzJztcbmNvbnN0IE1BWF9ERUxUQSA9IDAuMjsgLy8gbXNcbmNvbnN0IEVQUyA9IDEwZS02O1xuY29uc3QgTU9WRUQgPSAnbW92ZWQnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgnbW92ZW1lbnQtY29udHJvbHMnLCB7XG5cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICogU2NoZW1hXG4gICAqL1xuXG4gIGRlcGVuZGVuY2llczogWydyb3RhdGlvbiddLFxuXG4gIHNjaGVtYToge1xuICAgIGVuYWJsZWQ6ICAgICAgICAgICAgeyBkZWZhdWx0OiB0cnVlIH0sXG4gICAgY29udHJvbHM6ICAgICAgICAgICB7IGRlZmF1bHQ6IFsnZ2FtZXBhZCcsICd0cmFja3BhZCcsICdrZXlib2FyZCcsICd0b3VjaCddIH0sXG4gICAgc3BlZWQ6ICAgICAgICAgICAgICB7IGRlZmF1bHQ6IDAuMywgbWluOiAwIH0sXG4gICAgZmx5OiAgICAgICAgICAgICAgICB7IGRlZmF1bHQ6IGZhbHNlIH0sXG4gICAgY29uc3RyYWluVG9OYXZNZXNoOiB7IGRlZmF1bHQ6IGZhbHNlIH0sXG4gICAgY2FtZXJhOiAgICAgICAgICAgICB7IGRlZmF1bHQ6ICdbbW92ZW1lbnQtY29udHJvbHNdIFtjYW1lcmFdJywgdHlwZTogJ3NlbGVjdG9yJyB9XG4gIH0sXG5cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICogTGlmZWN5Y2xlXG4gICAqL1xuXG4gIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBlbCA9IHRoaXMuZWw7XG4gICAgaWYgKCF0aGlzLmRhdGEuY2FtZXJhKSB7XG4gICAgICB0aGlzLmRhdGEuY2FtZXJhID0gZWwucXVlcnlTZWxlY3RvcignW2NhbWVyYV0nKTtcbiAgICB9XG4gICAgdGhpcy52ZWxvY2l0eUN0cmwgPSBudWxsO1xuXG4gICAgdGhpcy52ZWxvY2l0eSA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG4gICAgdGhpcy5oZWFkaW5nID0gbmV3IFRIUkVFLlF1YXRlcm5pb24oKTtcbiAgICB0aGlzLmV2ZW50RGV0YWlsID0ge307XG5cbiAgICAvLyBOYXZpZ2F0aW9uXG4gICAgdGhpcy5uYXZHcm91cCA9IG51bGw7XG4gICAgdGhpcy5uYXZOb2RlID0gbnVsbDtcblxuICAgIGlmIChlbC5zY2VuZUVsLmhhc0xvYWRlZCkge1xuICAgICAgdGhpcy5pbmplY3RDb250cm9scygpO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbC5zY2VuZUVsLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWRlZCcsIHRoaXMuaW5qZWN0Q29udHJvbHMuYmluZCh0aGlzKSk7XG4gICAgfVxuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gKHByZXZEYXRhKSB7XG4gICAgY29uc3QgZWwgPSB0aGlzLmVsO1xuICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7XG4gICAgY29uc3QgbmF2ID0gZWwuc2NlbmVFbC5zeXN0ZW1zLm5hdjtcbiAgICBpZiAoZWwuc2NlbmVFbC5oYXNMb2FkZWQpIHtcbiAgICAgIHRoaXMuaW5qZWN0Q29udHJvbHMoKTtcbiAgICB9XG4gICAgaWYgKG5hdiAmJiBkYXRhLmNvbnN0cmFpblRvTmF2TWVzaCAhPT0gcHJldkRhdGEuY29uc3RyYWluVG9OYXZNZXNoKSB7XG4gICAgICBkYXRhLmNvbnN0cmFpblRvTmF2TWVzaFxuICAgICAgICA/IG5hdi5hZGRBZ2VudCh0aGlzKVxuICAgICAgICA6IG5hdi5yZW1vdmVBZ2VudCh0aGlzKTtcbiAgICB9XG4gICAgaWYgKGRhdGEuZW5hYmxlZCAhPT0gcHJldkRhdGEuZW5hYmxlZCkge1xuICAgICAgLy8gUHJvcGFnYXRlIHRoZSBlbmFibGVkIGNoYW5nZSB0byBhbGwgY29udHJvbHNcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5jb250cm9scy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBuYW1lID0gZGF0YS5jb250cm9sc1tpXSArIENPTVBPTkVOVF9TVUZGSVg7XG4gICAgICAgIHRoaXMuZWwuc2V0QXR0cmlidXRlKG5hbWUsIHsgZW5hYmxlZDogdGhpcy5kYXRhLmVuYWJsZWQgfSk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIGluamVjdENvbnRyb2xzOiBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5jb250cm9scy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgbmFtZSA9IGRhdGEuY29udHJvbHNbaV0gKyBDT01QT05FTlRfU1VGRklYO1xuICAgICAgdGhpcy5lbC5zZXRBdHRyaWJ1dGUobmFtZSwgeyBlbmFibGVkOiB0aGlzLmRhdGEuZW5hYmxlZCB9KTtcbiAgICB9XG4gIH0sXG5cbiAgdXBkYXRlTmF2TG9jYXRpb246IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLm5hdkdyb3VwID0gbnVsbDtcbiAgICB0aGlzLm5hdk5vZGUgPSBudWxsO1xuICB9LFxuXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAqIFRpY2tcbiAgICovXG5cbiAgdGljazogKGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBzdGFydCA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG4gICAgY29uc3QgZW5kID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcbiAgICBjb25zdCBjbGFtcGVkRW5kID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcblxuICAgIHJldHVybiBmdW5jdGlvbiAodCwgZHQpIHtcbiAgICAgIGlmICghZHQpIHJldHVybjtcblxuICAgICAgY29uc3QgZWwgPSB0aGlzLmVsO1xuICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTtcblxuICAgICAgaWYgKCFkYXRhLmVuYWJsZWQpIHJldHVybjtcblxuICAgICAgdGhpcy51cGRhdGVWZWxvY2l0eUN0cmwoKTtcbiAgICAgIGNvbnN0IHZlbG9jaXR5Q3RybCA9IHRoaXMudmVsb2NpdHlDdHJsO1xuICAgICAgY29uc3QgdmVsb2NpdHkgPSB0aGlzLnZlbG9jaXR5O1xuXG4gICAgICBpZiAoIXZlbG9jaXR5Q3RybCkgcmV0dXJuO1xuXG4gICAgICAvLyBVcGRhdGUgdmVsb2NpdHkuIElmIEZQUyBpcyB0b28gbG93LCByZXNldC5cbiAgICAgIGlmIChkdCAvIDEwMDAgPiBNQVhfREVMVEEpIHtcbiAgICAgICAgdmVsb2NpdHkuc2V0KDAsIDAsIDApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy51cGRhdGVWZWxvY2l0eShkdCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChkYXRhLmNvbnN0cmFpblRvTmF2TWVzaFxuICAgICAgICAgICYmIHZlbG9jaXR5Q3RybC5pc05hdk1lc2hDb25zdHJhaW5lZCAhPT0gZmFsc2UpIHtcblxuICAgICAgICBpZiAodmVsb2NpdHkubGVuZ3RoU3EoKSA8IEVQUykgcmV0dXJuO1xuXG4gICAgICAgIHN0YXJ0LmNvcHkoZWwub2JqZWN0M0QucG9zaXRpb24pO1xuICAgICAgICBlbmRcbiAgICAgICAgICAuY29weSh2ZWxvY2l0eSlcbiAgICAgICAgICAubXVsdGlwbHlTY2FsYXIoZHQgLyAxMDAwKVxuICAgICAgICAgIC5hZGQoc3RhcnQpO1xuXG4gICAgICAgIGNvbnN0IG5hdiA9IGVsLnNjZW5lRWwuc3lzdGVtcy5uYXY7XG4gICAgICAgIHRoaXMubmF2R3JvdXAgPSB0aGlzLm5hdkdyb3VwID09PSBudWxsID8gbmF2LmdldEdyb3VwKHN0YXJ0KSA6IHRoaXMubmF2R3JvdXA7XG4gICAgICAgIHRoaXMubmF2Tm9kZSA9IHRoaXMubmF2Tm9kZSB8fCBuYXYuZ2V0Tm9kZShzdGFydCwgdGhpcy5uYXZHcm91cCk7XG4gICAgICAgIHRoaXMubmF2Tm9kZSA9IG5hdi5jbGFtcFN0ZXAoc3RhcnQsIGVuZCwgdGhpcy5uYXZHcm91cCwgdGhpcy5uYXZOb2RlLCBjbGFtcGVkRW5kKTtcbiAgICAgICAgZWwub2JqZWN0M0QucG9zaXRpb24uY29weShjbGFtcGVkRW5kKTtcbiAgICAgIH0gZWxzZSBpZiAoZWwuaGFzQXR0cmlidXRlKCd2ZWxvY2l0eScpKSB7XG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZSgndmVsb2NpdHknLCB2ZWxvY2l0eSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbC5vYmplY3QzRC5wb3NpdGlvbi54ICs9IHZlbG9jaXR5LnggKiBkdCAvIDEwMDA7XG4gICAgICAgIGVsLm9iamVjdDNELnBvc2l0aW9uLnkgKz0gdmVsb2NpdHkueSAqIGR0IC8gMTAwMDtcbiAgICAgICAgZWwub2JqZWN0M0QucG9zaXRpb24ueiArPSB2ZWxvY2l0eS56ICogZHQgLyAxMDAwO1xuICAgICAgfVxuXG4gICAgfTtcbiAgfSgpKSxcblxuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgKiBNb3ZlbWVudFxuICAgKi9cblxuICB1cGRhdGVWZWxvY2l0eUN0cmw6IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhO1xuICAgIGlmIChkYXRhLmVuYWJsZWQpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gZGF0YS5jb250cm9scy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgY29uc3QgY29udHJvbCA9IHRoaXMuZWwuY29tcG9uZW50c1tkYXRhLmNvbnRyb2xzW2ldICsgQ09NUE9ORU5UX1NVRkZJWF07XG4gICAgICAgIGlmIChjb250cm9sICYmIGNvbnRyb2wuaXNWZWxvY2l0eUFjdGl2ZSgpKSB7XG4gICAgICAgICAgdGhpcy52ZWxvY2l0eUN0cmwgPSBjb250cm9sO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy52ZWxvY2l0eUN0cmwgPSBudWxsO1xuICAgIH1cbiAgfSxcblxuICB1cGRhdGVWZWxvY2l0eTogKGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCB2ZWN0b3IyID0gbmV3IFRIUkVFLlZlY3RvcjIoKTtcbiAgICBjb25zdCBxdWF0ZXJuaW9uID0gbmV3IFRIUkVFLlF1YXRlcm5pb24oKTtcblxuICAgIHJldHVybiBmdW5jdGlvbiAoZHQpIHtcbiAgICAgIGxldCBkVmVsb2NpdHk7XG4gICAgICBjb25zdCBlbCA9IHRoaXMuZWw7XG4gICAgICBjb25zdCBjb250cm9sID0gdGhpcy52ZWxvY2l0eUN0cmw7XG4gICAgICBjb25zdCB2ZWxvY2l0eSA9IHRoaXMudmVsb2NpdHk7XG4gICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhO1xuXG4gICAgICBpZiAoY29udHJvbCkge1xuICAgICAgICBpZiAoY29udHJvbC5nZXRWZWxvY2l0eURlbHRhKSB7XG4gICAgICAgICAgZFZlbG9jaXR5ID0gY29udHJvbC5nZXRWZWxvY2l0eURlbHRhKGR0KTtcbiAgICAgICAgfSBlbHNlIGlmIChjb250cm9sLmdldFZlbG9jaXR5KSB7XG4gICAgICAgICAgdmVsb2NpdHkuY29weShjb250cm9sLmdldFZlbG9jaXR5KCkpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSBlbHNlIGlmIChjb250cm9sLmdldFBvc2l0aW9uRGVsdGEpIHtcbiAgICAgICAgICB2ZWxvY2l0eS5jb3B5KGNvbnRyb2wuZ2V0UG9zaXRpb25EZWx0YShkdCkubXVsdGlwbHlTY2FsYXIoMTAwMCAvIGR0KSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW5jb21wYXRpYmxlIG1vdmVtZW50IGNvbnRyb2xzOiAnLCBjb250cm9sKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoZWwuaGFzQXR0cmlidXRlKCd2ZWxvY2l0eScpICYmICFkYXRhLmNvbnN0cmFpblRvTmF2TWVzaCkge1xuICAgICAgICB2ZWxvY2l0eS5jb3B5KHRoaXMuZWwuZ2V0QXR0cmlidXRlKCd2ZWxvY2l0eScpKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGRWZWxvY2l0eSAmJiBkYXRhLmVuYWJsZWQpIHtcbiAgICAgICAgY29uc3QgY2FtZXJhRWwgPSBkYXRhLmNhbWVyYTtcblxuICAgICAgICAvLyBSb3RhdGUgdG8gaGVhZGluZ1xuICAgICAgICBxdWF0ZXJuaW9uLmNvcHkoY2FtZXJhRWwub2JqZWN0M0QucXVhdGVybmlvbik7XG4gICAgICAgIHF1YXRlcm5pb24ucHJlbXVsdGlwbHkoZWwub2JqZWN0M0QucXVhdGVybmlvbik7XG4gICAgICAgIGRWZWxvY2l0eS5hcHBseVF1YXRlcm5pb24ocXVhdGVybmlvbik7XG5cbiAgICAgICAgY29uc3QgZmFjdG9yID0gZFZlbG9jaXR5Lmxlbmd0aCgpO1xuICAgICAgICBpZiAoZGF0YS5mbHkpIHtcbiAgICAgICAgICB2ZWxvY2l0eS5jb3B5KGRWZWxvY2l0eSk7XG4gICAgICAgICAgdmVsb2NpdHkubXVsdGlwbHlTY2FsYXIodGhpcy5kYXRhLnNwZWVkICogMTYuNjY2NjcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZlY3RvcjIuc2V0KGRWZWxvY2l0eS54LCBkVmVsb2NpdHkueik7XG4gICAgICAgICAgdmVjdG9yMi5zZXRMZW5ndGgoZmFjdG9yICogdGhpcy5kYXRhLnNwZWVkICogMTYuNjY2NjcpO1xuICAgICAgICAgIHZlbG9jaXR5LnggPSB2ZWN0b3IyLng7XG4gICAgICAgICAgdmVsb2NpdHkueSA9IDA7XG4gICAgICAgICAgdmVsb2NpdHkueiA9IHZlY3RvcjIueTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodmVsb2NpdHkueCAhPT0gMCB8fCB2ZWxvY2l0eS55ICE9PSAwIHx8IHZlbG9jaXR5LnogIT09IDApIHtcbiAgICAgICAgICB0aGlzLmV2ZW50RGV0YWlsLnZlbG9jaXR5ID0gdmVsb2NpdHk7XG4gICAgICAgICAgdGhpcy5lbC5lbWl0KE1PVkVELCB0aGlzLmV2ZW50RGV0YWlsKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgfSgpKVxufSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/controls/movement-controls.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/controls/nipple-controls.js":
/*!***********************************************************************************************************!*\
  !*** ./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/controls/nipple-controls.js ***!
  \***********************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var nipplejs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! nipplejs */ \"(ssr)/./node_modules/.pnpm/nipplejs@0.10.2/node_modules/nipplejs/src/index.js\");\n/* global AFRAME, THREE */\n\n\nAFRAME.registerComponent(\"nipple-controls\", {\n  schema: {\n    enabled: { default: true },\n    mode: { default: \"dynamic\", oneOf: [\"static\", \"semi\", \"dynamic\"] },\n    rotationSensitivity: { default: 1.0 },\n    moveJoystickEnabled: { default: true },\n    lookJoystickEnabled: { default: true },\n    sideMargin: { default: \"30px\" },\n    bottomMargin: { default: \"70px\" },\n    moveJoystickPosition: { default: \"left\", oneOf: [\"left\", \"right\"] },\n    lookJoystickPosition: { default: \"right\", oneOf: [\"left\", \"right\"] },\n  },\n\n  init() {\n    this.dVelocity = new THREE.Vector3();\n    this.lookVector = new THREE.Vector2();\n    const lookControls = this.el.querySelector(\"[look-controls]\").components[\"look-controls\"];\n    this.pitchObject = lookControls.pitchObject;\n    this.yawObject = lookControls.yawObject;\n    this.rigRotation = this.el.object3D.rotation;\n    this.moveData = undefined;\n    this.lookData = undefined;\n    this.moving = false;\n    this.rotating = false;\n  },\n\n  update(oldData) {\n    if (\n      this.data.moveJoystickPosition !== oldData.moveJoystickPosition ||\n      this.data.sideMargin !== oldData.sideMargin ||\n      this.data.bottomMargin !== oldData.bottomMargin ||\n      this.data.mode !== oldData.mode\n    ) {\n      this.removeMoveJoystick();\n    }\n    if (\n      this.data.lookJoystickPosition !== oldData.lookJoystickPosition ||\n      this.data.sideMargin !== oldData.sideMargin ||\n      this.data.bottomMargin !== oldData.bottomMargin ||\n      this.data.mode !== oldData.mode\n    ) {\n      this.removeLookJoystick();\n    }\n    if (this.data.enabled && this.data.moveJoystickEnabled) {\n      this.createMoveJoystick();\n    } else {\n      this.removeMoveJoystick();\n    }\n    if (this.data.enabled && this.data.lookJoystickEnabled) {\n      this.createLookJoystick();\n    } else {\n      this.removeLookJoystick();\n    }\n  },\n\n  pause() {\n    this.moving = false;\n    this.rotating = false;\n  },\n\n  remove() {\n    this.removeMoveJoystick();\n    this.removeLookJoystick();\n  },\n\n  isVelocityActive() {\n    return this.data.enabled && this.moving;\n  },\n\n  getVelocityDelta() {\n    this.dVelocity.set(0, 0, 0);\n    if (this.isVelocityActive()) {\n      const force = this.moveData.force < 1 ? this.moveData.force : 1;\n      const angle = this.moveData.angle.radian;\n      const x = Math.cos(angle) * force;\n      const z = -Math.sin(angle) * force;\n      this.dVelocity.set(x, 0, z);\n    }\n    return this.dVelocity; // We don't do a clone() here, the Vector3 will be modified by the calling code but that's fine.\n  },\n\n  isRotationActive() {\n    return this.data.enabled && this.rotating;\n  },\n\n  updateRotation(dt) {\n    if (!this.isRotationActive()) return;\n\n    const force = this.lookData.force < 1 ? this.lookData.force : 1;\n    const angle = this.lookData.angle.radian;\n    const lookVector = this.lookVector;\n    lookVector.x = Math.cos(angle) * force;\n    lookVector.y = Math.sin(angle) * force;\n    lookVector.multiplyScalar((this.data.rotationSensitivity * dt) / 1000);\n\n    this.yawObject.rotation.y -= lookVector.x;\n    let x = this.pitchObject.rotation.x + lookVector.y;\n    x = Math.max(-Math.PI / 2, Math.min(Math.PI / 2, x));\n    this.pitchObject.rotation.x = x;\n  },\n\n  tick: function (t, dt) {\n    this.updateRotation(dt);\n  },\n\n  initLeftZone() {\n    const leftZone = document.createElement(\"div\");\n    leftZone.setAttribute(\"id\", \"joystickLeftZone\");\n    leftZone.setAttribute(\n      \"style\",\n      `position:absolute;${this.data.moveJoystickPosition}:${this.data.sideMargin};bottom:${this.data.bottomMargin};z-index:1`\n    );\n    document.body.appendChild(leftZone);\n    this.leftZone = leftZone;\n  },\n\n  initRightZone() {\n    const rightZone = document.createElement(\"div\");\n    rightZone.setAttribute(\"id\", \"joystickRightZone\");\n    rightZone.setAttribute(\n      \"style\",\n      `position:absolute;${this.data.lookJoystickPosition}:${this.data.sideMargin};bottom:${this.data.bottomMargin};z-index:1`\n    );\n    document.body.appendChild(rightZone);\n    this.rightZone = rightZone;\n  },\n\n  createMoveJoystick() {\n    if (this.moveJoystick) return;\n    this.initLeftZone();\n    const options = {\n      mode: this.data.mode,\n      zone: this.leftZone,\n      color: \"white\",\n      fadeTime: 0,\n    };\n    this.leftZone.style.width = \"100px\";\n    if (this.data.mode === \"static\") {\n      this.leftZone.style.height = \"100px\";\n      options.position = { left: \"50%\", bottom: \"50%\" };\n    } else {\n      this.leftZone.style.height = \"400px\";\n    }\n\n    this.moveJoystick = nipplejs__WEBPACK_IMPORTED_MODULE_0__[\"default\"].create(options);\n    this.moveJoystick.on(\"move\", (evt, data) => {\n      this.moveData = data;\n      this.moving = true;\n    });\n    this.moveJoystick.on(\"end\", (evt, data) => {\n      this.moving = false;\n    });\n  },\n\n  createLookJoystick() {\n    if (this.lookJoystick) return;\n    this.initRightZone();\n    const options = {\n      mode: this.data.mode,\n      zone: this.rightZone,\n      color: \"white\",\n      fadeTime: 0,\n    };\n    this.rightZone.style.width = \"100px\";\n    if (this.data.mode === \"static\") {\n      this.rightZone.style.height = \"100px\";\n      options.position = { left: \"50%\", bottom: \"50%\" };\n    } else {\n      this.rightZone.style.height = \"400px\";\n    }\n\n    this.lookJoystick = nipplejs__WEBPACK_IMPORTED_MODULE_0__[\"default\"].create(options);\n    this.lookJoystick.on(\"move\", (evt, data) => {\n      this.lookData = data;\n      this.rotating = true;\n    });\n    this.lookJoystick.on(\"end\", (evt, data) => {\n      this.rotating = false;\n    });\n  },\n\n  removeMoveJoystick() {\n    if (this.moveJoystick) {\n      this.moveJoystick.destroy();\n      this.moveJoystick = undefined;\n    }\n\n    this.moveData = undefined;\n\n    if (this.leftZone && this.leftZone.parentNode) {\n      this.leftZone.remove();\n      this.leftZone = undefined;\n    }\n  },\n\n  removeLookJoystick() {\n    if (this.lookJoystick) {\n      this.lookJoystick.destroy();\n      this.lookJoystick = undefined;\n    }\n\n    this.lookData = undefined;\n\n    if (this.rightZone && this.rightZone.parentNode) {\n      this.rightZone.remove();\n      this.rightZone = undefined;\n    }\n  },\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYWZyYW1lLWV4dHJhc0A3LjUuMS9ub2RlX21vZHVsZXMvYWZyYW1lLWV4dHJhcy9zcmMvY29udHJvbHMvbmlwcGxlLWNvbnRyb2xzLmpzIiwibWFwcGluZ3MiOiI7O0FBQUE7QUFDZ0M7O0FBRWhDO0FBQ0E7QUFDQSxlQUFlLGVBQWU7QUFDOUIsWUFBWSwwREFBMEQ7QUFDdEUsMkJBQTJCLGNBQWM7QUFDekMsMkJBQTJCLGVBQWU7QUFDMUMsMkJBQTJCLGVBQWU7QUFDMUMsa0JBQWtCLGlCQUFpQjtBQUNuQyxvQkFBb0IsaUJBQWlCO0FBQ3JDLDRCQUE0QiwyQ0FBMkM7QUFDdkUsNEJBQTRCLDRDQUE0QztBQUN4RSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0IsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixFQUFFLCtCQUErQixHQUFHLHNCQUFzQixTQUFTLHdCQUF3QjtBQUNwSDtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsRUFBRSwrQkFBK0IsR0FBRyxzQkFBc0IsU0FBUyx3QkFBd0I7QUFDcEg7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0IsTUFBTTtBQUNOO0FBQ0E7O0FBRUEsd0JBQXdCLGdEQUFRO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCO0FBQzNCLE1BQU07QUFDTjtBQUNBOztBQUVBLHdCQUF3QixnREFBUTtBQUNoQztBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3NtYV9wb3N0X3NjYXJjaXR5Ly4vbm9kZV9tb2R1bGVzLy5wbnBtL2FmcmFtZS1leHRyYXNANy41LjEvbm9kZV9tb2R1bGVzL2FmcmFtZS1leHRyYXMvc3JjL2NvbnRyb2xzL25pcHBsZS1jb250cm9scy5qcz9jNTBhIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGdsb2JhbCBBRlJBTUUsIFRIUkVFICovXG5pbXBvcnQgbmlwcGxlanMgZnJvbSBcIm5pcHBsZWpzXCI7XG5cbkFGUkFNRS5yZWdpc3RlckNvbXBvbmVudChcIm5pcHBsZS1jb250cm9sc1wiLCB7XG4gIHNjaGVtYToge1xuICAgIGVuYWJsZWQ6IHsgZGVmYXVsdDogdHJ1ZSB9LFxuICAgIG1vZGU6IHsgZGVmYXVsdDogXCJkeW5hbWljXCIsIG9uZU9mOiBbXCJzdGF0aWNcIiwgXCJzZW1pXCIsIFwiZHluYW1pY1wiXSB9LFxuICAgIHJvdGF0aW9uU2Vuc2l0aXZpdHk6IHsgZGVmYXVsdDogMS4wIH0sXG4gICAgbW92ZUpveXN0aWNrRW5hYmxlZDogeyBkZWZhdWx0OiB0cnVlIH0sXG4gICAgbG9va0pveXN0aWNrRW5hYmxlZDogeyBkZWZhdWx0OiB0cnVlIH0sXG4gICAgc2lkZU1hcmdpbjogeyBkZWZhdWx0OiBcIjMwcHhcIiB9LFxuICAgIGJvdHRvbU1hcmdpbjogeyBkZWZhdWx0OiBcIjcwcHhcIiB9LFxuICAgIG1vdmVKb3lzdGlja1Bvc2l0aW9uOiB7IGRlZmF1bHQ6IFwibGVmdFwiLCBvbmVPZjogW1wibGVmdFwiLCBcInJpZ2h0XCJdIH0sXG4gICAgbG9va0pveXN0aWNrUG9zaXRpb246IHsgZGVmYXVsdDogXCJyaWdodFwiLCBvbmVPZjogW1wibGVmdFwiLCBcInJpZ2h0XCJdIH0sXG4gIH0sXG5cbiAgaW5pdCgpIHtcbiAgICB0aGlzLmRWZWxvY2l0eSA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG4gICAgdGhpcy5sb29rVmVjdG9yID0gbmV3IFRIUkVFLlZlY3RvcjIoKTtcbiAgICBjb25zdCBsb29rQ29udHJvbHMgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3IoXCJbbG9vay1jb250cm9sc11cIikuY29tcG9uZW50c1tcImxvb2stY29udHJvbHNcIl07XG4gICAgdGhpcy5waXRjaE9iamVjdCA9IGxvb2tDb250cm9scy5waXRjaE9iamVjdDtcbiAgICB0aGlzLnlhd09iamVjdCA9IGxvb2tDb250cm9scy55YXdPYmplY3Q7XG4gICAgdGhpcy5yaWdSb3RhdGlvbiA9IHRoaXMuZWwub2JqZWN0M0Qucm90YXRpb247XG4gICAgdGhpcy5tb3ZlRGF0YSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmxvb2tEYXRhID0gdW5kZWZpbmVkO1xuICAgIHRoaXMubW92aW5nID0gZmFsc2U7XG4gICAgdGhpcy5yb3RhdGluZyA9IGZhbHNlO1xuICB9LFxuXG4gIHVwZGF0ZShvbGREYXRhKSB7XG4gICAgaWYgKFxuICAgICAgdGhpcy5kYXRhLm1vdmVKb3lzdGlja1Bvc2l0aW9uICE9PSBvbGREYXRhLm1vdmVKb3lzdGlja1Bvc2l0aW9uIHx8XG4gICAgICB0aGlzLmRhdGEuc2lkZU1hcmdpbiAhPT0gb2xkRGF0YS5zaWRlTWFyZ2luIHx8XG4gICAgICB0aGlzLmRhdGEuYm90dG9tTWFyZ2luICE9PSBvbGREYXRhLmJvdHRvbU1hcmdpbiB8fFxuICAgICAgdGhpcy5kYXRhLm1vZGUgIT09IG9sZERhdGEubW9kZVxuICAgICkge1xuICAgICAgdGhpcy5yZW1vdmVNb3ZlSm95c3RpY2soKTtcbiAgICB9XG4gICAgaWYgKFxuICAgICAgdGhpcy5kYXRhLmxvb2tKb3lzdGlja1Bvc2l0aW9uICE9PSBvbGREYXRhLmxvb2tKb3lzdGlja1Bvc2l0aW9uIHx8XG4gICAgICB0aGlzLmRhdGEuc2lkZU1hcmdpbiAhPT0gb2xkRGF0YS5zaWRlTWFyZ2luIHx8XG4gICAgICB0aGlzLmRhdGEuYm90dG9tTWFyZ2luICE9PSBvbGREYXRhLmJvdHRvbU1hcmdpbiB8fFxuICAgICAgdGhpcy5kYXRhLm1vZGUgIT09IG9sZERhdGEubW9kZVxuICAgICkge1xuICAgICAgdGhpcy5yZW1vdmVMb29rSm95c3RpY2soKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuZGF0YS5lbmFibGVkICYmIHRoaXMuZGF0YS5tb3ZlSm95c3RpY2tFbmFibGVkKSB7XG4gICAgICB0aGlzLmNyZWF0ZU1vdmVKb3lzdGljaygpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlbW92ZU1vdmVKb3lzdGljaygpO1xuICAgIH1cbiAgICBpZiAodGhpcy5kYXRhLmVuYWJsZWQgJiYgdGhpcy5kYXRhLmxvb2tKb3lzdGlja0VuYWJsZWQpIHtcbiAgICAgIHRoaXMuY3JlYXRlTG9va0pveXN0aWNrKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVtb3ZlTG9va0pveXN0aWNrKCk7XG4gICAgfVxuICB9LFxuXG4gIHBhdXNlKCkge1xuICAgIHRoaXMubW92aW5nID0gZmFsc2U7XG4gICAgdGhpcy5yb3RhdGluZyA9IGZhbHNlO1xuICB9LFxuXG4gIHJlbW92ZSgpIHtcbiAgICB0aGlzLnJlbW92ZU1vdmVKb3lzdGljaygpO1xuICAgIHRoaXMucmVtb3ZlTG9va0pveXN0aWNrKCk7XG4gIH0sXG5cbiAgaXNWZWxvY2l0eUFjdGl2ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhLmVuYWJsZWQgJiYgdGhpcy5tb3Zpbmc7XG4gIH0sXG5cbiAgZ2V0VmVsb2NpdHlEZWx0YSgpIHtcbiAgICB0aGlzLmRWZWxvY2l0eS5zZXQoMCwgMCwgMCk7XG4gICAgaWYgKHRoaXMuaXNWZWxvY2l0eUFjdGl2ZSgpKSB7XG4gICAgICBjb25zdCBmb3JjZSA9IHRoaXMubW92ZURhdGEuZm9yY2UgPCAxID8gdGhpcy5tb3ZlRGF0YS5mb3JjZSA6IDE7XG4gICAgICBjb25zdCBhbmdsZSA9IHRoaXMubW92ZURhdGEuYW5nbGUucmFkaWFuO1xuICAgICAgY29uc3QgeCA9IE1hdGguY29zKGFuZ2xlKSAqIGZvcmNlO1xuICAgICAgY29uc3QgeiA9IC1NYXRoLnNpbihhbmdsZSkgKiBmb3JjZTtcbiAgICAgIHRoaXMuZFZlbG9jaXR5LnNldCh4LCAwLCB6KTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZFZlbG9jaXR5OyAvLyBXZSBkb24ndCBkbyBhIGNsb25lKCkgaGVyZSwgdGhlIFZlY3RvcjMgd2lsbCBiZSBtb2RpZmllZCBieSB0aGUgY2FsbGluZyBjb2RlIGJ1dCB0aGF0J3MgZmluZS5cbiAgfSxcblxuICBpc1JvdGF0aW9uQWN0aXZlKCkge1xuICAgIHJldHVybiB0aGlzLmRhdGEuZW5hYmxlZCAmJiB0aGlzLnJvdGF0aW5nO1xuICB9LFxuXG4gIHVwZGF0ZVJvdGF0aW9uKGR0KSB7XG4gICAgaWYgKCF0aGlzLmlzUm90YXRpb25BY3RpdmUoKSkgcmV0dXJuO1xuXG4gICAgY29uc3QgZm9yY2UgPSB0aGlzLmxvb2tEYXRhLmZvcmNlIDwgMSA/IHRoaXMubG9va0RhdGEuZm9yY2UgOiAxO1xuICAgIGNvbnN0IGFuZ2xlID0gdGhpcy5sb29rRGF0YS5hbmdsZS5yYWRpYW47XG4gICAgY29uc3QgbG9va1ZlY3RvciA9IHRoaXMubG9va1ZlY3RvcjtcbiAgICBsb29rVmVjdG9yLnggPSBNYXRoLmNvcyhhbmdsZSkgKiBmb3JjZTtcbiAgICBsb29rVmVjdG9yLnkgPSBNYXRoLnNpbihhbmdsZSkgKiBmb3JjZTtcbiAgICBsb29rVmVjdG9yLm11bHRpcGx5U2NhbGFyKCh0aGlzLmRhdGEucm90YXRpb25TZW5zaXRpdml0eSAqIGR0KSAvIDEwMDApO1xuXG4gICAgdGhpcy55YXdPYmplY3Qucm90YXRpb24ueSAtPSBsb29rVmVjdG9yLng7XG4gICAgbGV0IHggPSB0aGlzLnBpdGNoT2JqZWN0LnJvdGF0aW9uLnggKyBsb29rVmVjdG9yLnk7XG4gICAgeCA9IE1hdGgubWF4KC1NYXRoLlBJIC8gMiwgTWF0aC5taW4oTWF0aC5QSSAvIDIsIHgpKTtcbiAgICB0aGlzLnBpdGNoT2JqZWN0LnJvdGF0aW9uLnggPSB4O1xuICB9LFxuXG4gIHRpY2s6IGZ1bmN0aW9uICh0LCBkdCkge1xuICAgIHRoaXMudXBkYXRlUm90YXRpb24oZHQpO1xuICB9LFxuXG4gIGluaXRMZWZ0Wm9uZSgpIHtcbiAgICBjb25zdCBsZWZ0Wm9uZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgbGVmdFpvbmUuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJqb3lzdGlja0xlZnRab25lXCIpO1xuICAgIGxlZnRab25lLnNldEF0dHJpYnV0ZShcbiAgICAgIFwic3R5bGVcIixcbiAgICAgIGBwb3NpdGlvbjphYnNvbHV0ZTske3RoaXMuZGF0YS5tb3ZlSm95c3RpY2tQb3NpdGlvbn06JHt0aGlzLmRhdGEuc2lkZU1hcmdpbn07Ym90dG9tOiR7dGhpcy5kYXRhLmJvdHRvbU1hcmdpbn07ei1pbmRleDoxYFxuICAgICk7XG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChsZWZ0Wm9uZSk7XG4gICAgdGhpcy5sZWZ0Wm9uZSA9IGxlZnRab25lO1xuICB9LFxuXG4gIGluaXRSaWdodFpvbmUoKSB7XG4gICAgY29uc3QgcmlnaHRab25lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICByaWdodFpvbmUuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJqb3lzdGlja1JpZ2h0Wm9uZVwiKTtcbiAgICByaWdodFpvbmUuc2V0QXR0cmlidXRlKFxuICAgICAgXCJzdHlsZVwiLFxuICAgICAgYHBvc2l0aW9uOmFic29sdXRlOyR7dGhpcy5kYXRhLmxvb2tKb3lzdGlja1Bvc2l0aW9ufToke3RoaXMuZGF0YS5zaWRlTWFyZ2lufTtib3R0b206JHt0aGlzLmRhdGEuYm90dG9tTWFyZ2lufTt6LWluZGV4OjFgXG4gICAgKTtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHJpZ2h0Wm9uZSk7XG4gICAgdGhpcy5yaWdodFpvbmUgPSByaWdodFpvbmU7XG4gIH0sXG5cbiAgY3JlYXRlTW92ZUpveXN0aWNrKCkge1xuICAgIGlmICh0aGlzLm1vdmVKb3lzdGljaykgcmV0dXJuO1xuICAgIHRoaXMuaW5pdExlZnRab25lKCk7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgIG1vZGU6IHRoaXMuZGF0YS5tb2RlLFxuICAgICAgem9uZTogdGhpcy5sZWZ0Wm9uZSxcbiAgICAgIGNvbG9yOiBcIndoaXRlXCIsXG4gICAgICBmYWRlVGltZTogMCxcbiAgICB9O1xuICAgIHRoaXMubGVmdFpvbmUuc3R5bGUud2lkdGggPSBcIjEwMHB4XCI7XG4gICAgaWYgKHRoaXMuZGF0YS5tb2RlID09PSBcInN0YXRpY1wiKSB7XG4gICAgICB0aGlzLmxlZnRab25lLnN0eWxlLmhlaWdodCA9IFwiMTAwcHhcIjtcbiAgICAgIG9wdGlvbnMucG9zaXRpb24gPSB7IGxlZnQ6IFwiNTAlXCIsIGJvdHRvbTogXCI1MCVcIiB9O1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmxlZnRab25lLnN0eWxlLmhlaWdodCA9IFwiNDAwcHhcIjtcbiAgICB9XG5cbiAgICB0aGlzLm1vdmVKb3lzdGljayA9IG5pcHBsZWpzLmNyZWF0ZShvcHRpb25zKTtcbiAgICB0aGlzLm1vdmVKb3lzdGljay5vbihcIm1vdmVcIiwgKGV2dCwgZGF0YSkgPT4ge1xuICAgICAgdGhpcy5tb3ZlRGF0YSA9IGRhdGE7XG4gICAgICB0aGlzLm1vdmluZyA9IHRydWU7XG4gICAgfSk7XG4gICAgdGhpcy5tb3ZlSm95c3RpY2sub24oXCJlbmRcIiwgKGV2dCwgZGF0YSkgPT4ge1xuICAgICAgdGhpcy5tb3ZpbmcgPSBmYWxzZTtcbiAgICB9KTtcbiAgfSxcblxuICBjcmVhdGVMb29rSm95c3RpY2soKSB7XG4gICAgaWYgKHRoaXMubG9va0pveXN0aWNrKSByZXR1cm47XG4gICAgdGhpcy5pbml0UmlnaHRab25lKCk7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgIG1vZGU6IHRoaXMuZGF0YS5tb2RlLFxuICAgICAgem9uZTogdGhpcy5yaWdodFpvbmUsXG4gICAgICBjb2xvcjogXCJ3aGl0ZVwiLFxuICAgICAgZmFkZVRpbWU6IDAsXG4gICAgfTtcbiAgICB0aGlzLnJpZ2h0Wm9uZS5zdHlsZS53aWR0aCA9IFwiMTAwcHhcIjtcbiAgICBpZiAodGhpcy5kYXRhLm1vZGUgPT09IFwic3RhdGljXCIpIHtcbiAgICAgIHRoaXMucmlnaHRab25lLnN0eWxlLmhlaWdodCA9IFwiMTAwcHhcIjtcbiAgICAgIG9wdGlvbnMucG9zaXRpb24gPSB7IGxlZnQ6IFwiNTAlXCIsIGJvdHRvbTogXCI1MCVcIiB9O1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJpZ2h0Wm9uZS5zdHlsZS5oZWlnaHQgPSBcIjQwMHB4XCI7XG4gICAgfVxuXG4gICAgdGhpcy5sb29rSm95c3RpY2sgPSBuaXBwbGVqcy5jcmVhdGUob3B0aW9ucyk7XG4gICAgdGhpcy5sb29rSm95c3RpY2sub24oXCJtb3ZlXCIsIChldnQsIGRhdGEpID0+IHtcbiAgICAgIHRoaXMubG9va0RhdGEgPSBkYXRhO1xuICAgICAgdGhpcy5yb3RhdGluZyA9IHRydWU7XG4gICAgfSk7XG4gICAgdGhpcy5sb29rSm95c3RpY2sub24oXCJlbmRcIiwgKGV2dCwgZGF0YSkgPT4ge1xuICAgICAgdGhpcy5yb3RhdGluZyA9IGZhbHNlO1xuICAgIH0pO1xuICB9LFxuXG4gIHJlbW92ZU1vdmVKb3lzdGljaygpIHtcbiAgICBpZiAodGhpcy5tb3ZlSm95c3RpY2spIHtcbiAgICAgIHRoaXMubW92ZUpveXN0aWNrLmRlc3Ryb3koKTtcbiAgICAgIHRoaXMubW92ZUpveXN0aWNrID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIHRoaXMubW92ZURhdGEgPSB1bmRlZmluZWQ7XG5cbiAgICBpZiAodGhpcy5sZWZ0Wm9uZSAmJiB0aGlzLmxlZnRab25lLnBhcmVudE5vZGUpIHtcbiAgICAgIHRoaXMubGVmdFpvbmUucmVtb3ZlKCk7XG4gICAgICB0aGlzLmxlZnRab25lID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfSxcblxuICByZW1vdmVMb29rSm95c3RpY2soKSB7XG4gICAgaWYgKHRoaXMubG9va0pveXN0aWNrKSB7XG4gICAgICB0aGlzLmxvb2tKb3lzdGljay5kZXN0cm95KCk7XG4gICAgICB0aGlzLmxvb2tKb3lzdGljayA9IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICB0aGlzLmxvb2tEYXRhID0gdW5kZWZpbmVkO1xuXG4gICAgaWYgKHRoaXMucmlnaHRab25lICYmIHRoaXMucmlnaHRab25lLnBhcmVudE5vZGUpIHtcbiAgICAgIHRoaXMucmlnaHRab25lLnJlbW92ZSgpO1xuICAgICAgdGhpcy5yaWdodFpvbmUgPSB1bmRlZmluZWQ7XG4gICAgfVxuICB9LFxufSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/controls/nipple-controls.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/controls/touch-controls.js":
/*!**********************************************************************************************************!*\
  !*** ./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/controls/touch-controls.js ***!
  \**********************************************************************************************************/
/***/ ((module) => {

eval("/**\n * Touch-to-move-forward controls for mobile.\n */\nmodule.exports = AFRAME.registerComponent('touch-controls', {\n  schema: {\n    enabled: { default: true },\n    reverseEnabled: { default: true }\n  },\n\n  init: function () {\n    this.dVelocity = new THREE.Vector3();\n    this.bindMethods();\n    this.direction = 0;\n  },\n\n  play: function () {\n    this.addEventListeners();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n    this.dVelocity.set(0, 0, 0);\n  },\n\n  remove: function () {\n    this.pause();\n  },\n\n  addEventListeners: function () {\n    const sceneEl = this.el.sceneEl;\n    const canvasEl = sceneEl.canvas;\n\n    if (!canvasEl) {\n      sceneEl.addEventListener('render-target-loaded', this.addEventListeners.bind(this));\n      return;\n    }\n\n    canvasEl.addEventListener('touchstart', this.onTouchStart);\n    canvasEl.addEventListener('touchend', this.onTouchEnd);\n    const vrModeUI = sceneEl.getAttribute('vr-mode-ui');\n    if (vrModeUI && vrModeUI.cardboardModeEnabled) {\n      sceneEl.addEventListener('enter-vr', this.onEnterVR);\n    }\n  },\n\n  removeEventListeners: function () {\n    const canvasEl = this.el.sceneEl && this.el.sceneEl.canvas;\n    if (!canvasEl) { return; }\n\n    canvasEl.removeEventListener('touchstart', this.onTouchStart);\n    canvasEl.removeEventListener('touchend', this.onTouchEnd);\n    this.el.sceneEl.removeEventListener('enter-vr', this.onEnterVR)\n  },\n\n  isVelocityActive: function () {\n    return this.data.enabled && !!this.direction;\n  },\n\n  getVelocityDelta: function () {\n    this.dVelocity.z = this.direction;\n    return this.dVelocity.clone();\n  },\n\n  bindMethods: function () {\n    this.onTouchStart = this.onTouchStart.bind(this);\n    this.onTouchEnd = this.onTouchEnd.bind(this);\n    this.onEnterVR = this.onEnterVR.bind(this);\n  },\n\n  onTouchStart: function (e) {\n    this.direction = -1;\n    if (this.data.reverseEnabled && e.touches && e.touches.length === 2) {\n      this.direction = 1;\n    }\n    e.preventDefault();\n  },\n\n  onTouchEnd: function (e) {\n    this.direction = 0;\n    e.preventDefault();\n  },\n\n  onEnterVR: function () {\n    // This is to make the Cardboard button on Chrome Android working\n    const xrSession = this.el.sceneEl.xrSession;\n    if (!xrSession) { return; }\n    xrSession.addEventListener('selectstart', this.onTouchStart);\n    xrSession.addEventListener('selectend', this.onTouchEnd);\n  }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYWZyYW1lLWV4dHJhc0A3LjUuMS9ub2RlX21vZHVsZXMvYWZyYW1lLWV4dHJhcy9zcmMvY29udHJvbHMvdG91Y2gtY29udHJvbHMuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsZUFBZTtBQUM5QixzQkFBc0I7QUFDdEIsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EscUJBQXFCOztBQUVyQjtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBO0FBQ0EsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3NtYV9wb3N0X3NjYXJjaXR5Ly4vbm9kZV9tb2R1bGVzLy5wbnBtL2FmcmFtZS1leHRyYXNANy41LjEvbm9kZV9tb2R1bGVzL2FmcmFtZS1leHRyYXMvc3JjL2NvbnRyb2xzL3RvdWNoLWNvbnRyb2xzLmpzP2QzMTIiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBUb3VjaC10by1tb3ZlLWZvcndhcmQgY29udHJvbHMgZm9yIG1vYmlsZS5cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBBRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ3RvdWNoLWNvbnRyb2xzJywge1xuICBzY2hlbWE6IHtcbiAgICBlbmFibGVkOiB7IGRlZmF1bHQ6IHRydWUgfSxcbiAgICByZXZlcnNlRW5hYmxlZDogeyBkZWZhdWx0OiB0cnVlIH1cbiAgfSxcblxuICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5kVmVsb2NpdHkgPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuICAgIHRoaXMuYmluZE1ldGhvZHMoKTtcbiAgICB0aGlzLmRpcmVjdGlvbiA9IDA7XG4gIH0sXG5cbiAgcGxheTogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcnMoKTtcbiAgfSxcblxuICBwYXVzZTogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLmRWZWxvY2l0eS5zZXQoMCwgMCwgMCk7XG4gIH0sXG5cbiAgcmVtb3ZlOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5wYXVzZSgpO1xuICB9LFxuXG4gIGFkZEV2ZW50TGlzdGVuZXJzOiBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3Qgc2NlbmVFbCA9IHRoaXMuZWwuc2NlbmVFbDtcbiAgICBjb25zdCBjYW52YXNFbCA9IHNjZW5lRWwuY2FudmFzO1xuXG4gICAgaWYgKCFjYW52YXNFbCkge1xuICAgICAgc2NlbmVFbC5hZGRFdmVudExpc3RlbmVyKCdyZW5kZXItdGFyZ2V0LWxvYWRlZCcsIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcnMuYmluZCh0aGlzKSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY2FudmFzRWwuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHRoaXMub25Ub3VjaFN0YXJ0KTtcbiAgICBjYW52YXNFbC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMub25Ub3VjaEVuZCk7XG4gICAgY29uc3QgdnJNb2RlVUkgPSBzY2VuZUVsLmdldEF0dHJpYnV0ZSgndnItbW9kZS11aScpO1xuICAgIGlmICh2ck1vZGVVSSAmJiB2ck1vZGVVSS5jYXJkYm9hcmRNb2RlRW5hYmxlZCkge1xuICAgICAgc2NlbmVFbC5hZGRFdmVudExpc3RlbmVyKCdlbnRlci12cicsIHRoaXMub25FbnRlclZSKTtcbiAgICB9XG4gIH0sXG5cbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcnM6IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBjYW52YXNFbCA9IHRoaXMuZWwuc2NlbmVFbCAmJiB0aGlzLmVsLnNjZW5lRWwuY2FudmFzO1xuICAgIGlmICghY2FudmFzRWwpIHsgcmV0dXJuOyB9XG5cbiAgICBjYW52YXNFbC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdGhpcy5vblRvdWNoU3RhcnQpO1xuICAgIGNhbnZhc0VsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5vblRvdWNoRW5kKTtcbiAgICB0aGlzLmVsLnNjZW5lRWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignZW50ZXItdnInLCB0aGlzLm9uRW50ZXJWUilcbiAgfSxcblxuICBpc1ZlbG9jaXR5QWN0aXZlOiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YS5lbmFibGVkICYmICEhdGhpcy5kaXJlY3Rpb247XG4gIH0sXG5cbiAgZ2V0VmVsb2NpdHlEZWx0YTogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZFZlbG9jaXR5LnogPSB0aGlzLmRpcmVjdGlvbjtcbiAgICByZXR1cm4gdGhpcy5kVmVsb2NpdHkuY2xvbmUoKTtcbiAgfSxcblxuICBiaW5kTWV0aG9kczogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMub25Ub3VjaFN0YXJ0ID0gdGhpcy5vblRvdWNoU3RhcnQuYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uVG91Y2hFbmQgPSB0aGlzLm9uVG91Y2hFbmQuYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uRW50ZXJWUiA9IHRoaXMub25FbnRlclZSLmJpbmQodGhpcyk7XG4gIH0sXG5cbiAgb25Ub3VjaFN0YXJ0OiBmdW5jdGlvbiAoZSkge1xuICAgIHRoaXMuZGlyZWN0aW9uID0gLTE7XG4gICAgaWYgKHRoaXMuZGF0YS5yZXZlcnNlRW5hYmxlZCAmJiBlLnRvdWNoZXMgJiYgZS50b3VjaGVzLmxlbmd0aCA9PT0gMikge1xuICAgICAgdGhpcy5kaXJlY3Rpb24gPSAxO1xuICAgIH1cbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIH0sXG5cbiAgb25Ub3VjaEVuZDogZnVuY3Rpb24gKGUpIHtcbiAgICB0aGlzLmRpcmVjdGlvbiA9IDA7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICB9LFxuXG4gIG9uRW50ZXJWUjogZnVuY3Rpb24gKCkge1xuICAgIC8vIFRoaXMgaXMgdG8gbWFrZSB0aGUgQ2FyZGJvYXJkIGJ1dHRvbiBvbiBDaHJvbWUgQW5kcm9pZCB3b3JraW5nXG4gICAgY29uc3QgeHJTZXNzaW9uID0gdGhpcy5lbC5zY2VuZUVsLnhyU2Vzc2lvbjtcbiAgICBpZiAoIXhyU2Vzc2lvbikgeyByZXR1cm47IH1cbiAgICB4clNlc3Npb24uYWRkRXZlbnRMaXN0ZW5lcignc2VsZWN0c3RhcnQnLCB0aGlzLm9uVG91Y2hTdGFydCk7XG4gICAgeHJTZXNzaW9uLmFkZEV2ZW50TGlzdGVuZXIoJ3NlbGVjdGVuZCcsIHRoaXMub25Ub3VjaEVuZCk7XG4gIH1cbn0pO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/controls/touch-controls.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/controls/trackpad-controls.js":
/*!*************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/controls/trackpad-controls.js ***!
  \*************************************************************************************************************/
/***/ ((module) => {

eval("/**\n * 3dof (Gear VR, Daydream) controls for mobile.\n */\nmodule.exports = AFRAME.registerComponent('trackpad-controls', {\n  schema: {\n    enabled: { default: true },\n    enableNegX: { default: true },\n    enablePosX: { default: true },\n    enableNegZ: { default: true },\n    enablePosZ: { default: true },\n    mode: { default: 'touch', oneOf: ['swipe', 'touch', 'press'] }\n\n  },\n\n  init: function () {\n    this.dVelocity = new THREE.Vector3();\n    this.zVel      = 0;\n    this.xVel      = 0;\n    this.bindMethods();\n  },\n\n  play: function () {\n    this.addEventListeners();\n  },\n\n  pause: function () {\n    this.removeEventListeners();\n    this.dVelocity.set(0, 0, 0);\n  },\n\n  remove: function () {\n    this.pause();\n  },\n\n  addEventListeners: function () {\n    const data = this.data;\n    const sceneEl = this.el.sceneEl;\n\n    sceneEl.addEventListener('axismove', this.onAxisMove);\n\n    switch (data.mode) {\n      case 'swipe':\n      case 'touch':\n        sceneEl.addEventListener('trackpadtouchstart', this.onTouchStart);\n        sceneEl.addEventListener('trackpadtouchend', this.onTouchEnd);\n        break;\n\n      case 'press':\n        sceneEl.addEventListener('trackpaddown', this.onTouchStart);\n        sceneEl.addEventListener('trackpadup', this.onTouchEnd);\n        break;\n    }\n\n  },\n\n  removeEventListeners: function () {\n    const sceneEl = this.el.sceneEl;\n\n    sceneEl.removeEventListener('axismove', this.onAxisMove);\n    sceneEl.removeEventListener('trackpadtouchstart', this.onTouchStart);\n    sceneEl.removeEventListener('trackpadtouchend', this.onTouchEnd);\n    sceneEl.removeEventListener('trackpaddown', this.onTouchStart);\n    sceneEl.removeEventListener('trackpadup', this.onTouchEnd);\n  },\n\n  isVelocityActive: function () {\n    return this.data.enabled && this.isMoving;\n  },\n\n  getVelocityDelta: function () {\n    this.dVelocity.z = this.isMoving ? -this.zVel : 1;\n    this.dVelocity.x = this.isMoving ? this.xVel : 1;\n    return this.dVelocity.clone();\n  },\n\n  bindMethods: function () {\n    this.onTouchStart = this.onTouchStart.bind(this);\n    this.onTouchEnd = this.onTouchEnd.bind(this);\n    this.onAxisMove = this.onAxisMove.bind(this);\n  },\n\n  onTouchStart: function (e) {\n    switch(this.data.mode){\n      case 'swipe':\n        this.canRecordAxis = true;\n        this.startingAxisData = [];\n        break;\n      case 'touch':\n        this.isMoving = true;\n        break;\n      case 'press':\n        this.isMoving = true;\n        break;\n    }\n\n    e.preventDefault();\n  },\n\n  onTouchEnd: function (e) {\n    if(this.data.mode == 'swipe') {\n        this.startingAxisData = [];\n    }\n\n    this.isMoving = false;\n    e.preventDefault();\n  },\n\n  onAxisMove: function(e){\n    switch (this.data.mode) {\n      case 'swipe':\n        return this.handleSwipeAxis(e);\n      case 'touch':\n      case 'press':\n        return this.handleTouchAxis(e);\n    }\n  },\n\n  handleSwipeAxis: function(e) {\n    const data = this.data;\n    const axisData = e.detail.axis;\n\n    if(this.startingAxisData.length === 0 && this.canRecordAxis){\n      this.canRecordAxis = false;\n      this.startingAxisData[0] = axisData[0];\n      this.startingAxisData[1] = axisData[1];\n    }\n\n    if(this.startingAxisData.length > 0){\n      let velX = 0;\n      let velZ = 0;\n\n      if (data.enableNegX && axisData[0] < this.startingAxisData[0]) {\n        velX = -1;\n      }\n\n      if (data.enablePosX && axisData[0] > this.startingAxisData[0]) {\n        velX = 1;\n      }\n\n      if (data.enablePosZ && axisData[1] > this.startingAxisData[1]) {\n        velZ = -1;\n      }\n\n      if (data.enableNegZ && axisData[1] < this.startingAxisData[1]) {\n        velZ = 1;\n      }\n\n      const absChangeZ  = Math.abs(this.startingAxisData[1] - axisData[1]);\n      const absChangeX  = Math.abs(this.startingAxisData[0] - axisData[0]);\n\n      if (absChangeX > absChangeZ) {\n        this.zVel = 0;\n        this.xVel = velX;\n        this.isMoving = true;\n      } else {\n        this.xVel = 0;\n        this.zVel = velZ;\n        this.isMoving = true;\n      }\n\n    }\n  },\n\n  handleTouchAxis: function(e) {\n    const data = this.data;\n    const axisData = e.detail.axis;\n\n    let velX = 0;\n    let velZ = 0;\n\n    if (data.enableNegX && axisData[0] < 0) {\n      velX = -1;\n    }\n\n    if (data.enablePosX && axisData[0] > 0) {\n      velX = 1;\n    }\n\n    if (data.enablePosZ && axisData[1] > 0) {\n      velZ = -1;\n    }\n\n    if (data.enableNegZ && axisData[1] < 0) {\n      velZ = 1;\n    }\n\n    if (Math.abs(axisData[0]) > Math.abs(axisData[1])) {\n      this.zVel = 0;\n      this.xVel = velX;\n    } else {\n      this.xVel = 0;\n      this.zVel = velZ;\n    }\n\n  }\n\n});\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYWZyYW1lLWV4dHJhc0A3LjUuMS9ub2RlX21vZHVsZXMvYWZyYW1lLWV4dHJhcy9zcmMvY29udHJvbHMvdHJhY2twYWQtY29udHJvbHMuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsZUFBZTtBQUM5QixrQkFBa0IsZUFBZTtBQUNqQyxrQkFBa0IsZUFBZTtBQUNqQyxrQkFBa0IsZUFBZTtBQUNqQyxrQkFBa0IsZUFBZTtBQUNqQyxZQUFZOztBQUVaLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3NtYV9wb3N0X3NjYXJjaXR5Ly4vbm9kZV9tb2R1bGVzLy5wbnBtL2FmcmFtZS1leHRyYXNANy41LjEvbm9kZV9tb2R1bGVzL2FmcmFtZS1leHRyYXMvc3JjL2NvbnRyb2xzL3RyYWNrcGFkLWNvbnRyb2xzLmpzP2ZiMWUiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiAzZG9mIChHZWFyIFZSLCBEYXlkcmVhbSkgY29udHJvbHMgZm9yIG1vYmlsZS5cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBBRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ3RyYWNrcGFkLWNvbnRyb2xzJywge1xuICBzY2hlbWE6IHtcbiAgICBlbmFibGVkOiB7IGRlZmF1bHQ6IHRydWUgfSxcbiAgICBlbmFibGVOZWdYOiB7IGRlZmF1bHQ6IHRydWUgfSxcbiAgICBlbmFibGVQb3NYOiB7IGRlZmF1bHQ6IHRydWUgfSxcbiAgICBlbmFibGVOZWdaOiB7IGRlZmF1bHQ6IHRydWUgfSxcbiAgICBlbmFibGVQb3NaOiB7IGRlZmF1bHQ6IHRydWUgfSxcbiAgICBtb2RlOiB7IGRlZmF1bHQ6ICd0b3VjaCcsIG9uZU9mOiBbJ3N3aXBlJywgJ3RvdWNoJywgJ3ByZXNzJ10gfVxuXG4gIH0sXG5cbiAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZFZlbG9jaXR5ID0gbmV3IFRIUkVFLlZlY3RvcjMoKTtcbiAgICB0aGlzLnpWZWwgICAgICA9IDA7XG4gICAgdGhpcy54VmVsICAgICAgPSAwO1xuICAgIHRoaXMuYmluZE1ldGhvZHMoKTtcbiAgfSxcblxuICBwbGF5OiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVycygpO1xuICB9LFxuXG4gIHBhdXNlOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuZFZlbG9jaXR5LnNldCgwLCAwLCAwKTtcbiAgfSxcblxuICByZW1vdmU6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLnBhdXNlKCk7XG4gIH0sXG5cbiAgYWRkRXZlbnRMaXN0ZW5lcnM6IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhO1xuICAgIGNvbnN0IHNjZW5lRWwgPSB0aGlzLmVsLnNjZW5lRWw7XG5cbiAgICBzY2VuZUVsLmFkZEV2ZW50TGlzdGVuZXIoJ2F4aXNtb3ZlJywgdGhpcy5vbkF4aXNNb3ZlKTtcblxuICAgIHN3aXRjaCAoZGF0YS5tb2RlKSB7XG4gICAgICBjYXNlICdzd2lwZSc6XG4gICAgICBjYXNlICd0b3VjaCc6XG4gICAgICAgIHNjZW5lRWwuYWRkRXZlbnRMaXN0ZW5lcigndHJhY2twYWR0b3VjaHN0YXJ0JywgdGhpcy5vblRvdWNoU3RhcnQpO1xuICAgICAgICBzY2VuZUVsLmFkZEV2ZW50TGlzdGVuZXIoJ3RyYWNrcGFkdG91Y2hlbmQnLCB0aGlzLm9uVG91Y2hFbmQpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAncHJlc3MnOlxuICAgICAgICBzY2VuZUVsLmFkZEV2ZW50TGlzdGVuZXIoJ3RyYWNrcGFkZG93bicsIHRoaXMub25Ub3VjaFN0YXJ0KTtcbiAgICAgICAgc2NlbmVFbC5hZGRFdmVudExpc3RlbmVyKCd0cmFja3BhZHVwJywgdGhpcy5vblRvdWNoRW5kKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gIH0sXG5cbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcnM6IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBzY2VuZUVsID0gdGhpcy5lbC5zY2VuZUVsO1xuXG4gICAgc2NlbmVFbC5yZW1vdmVFdmVudExpc3RlbmVyKCdheGlzbW92ZScsIHRoaXMub25BeGlzTW92ZSk7XG4gICAgc2NlbmVFbC5yZW1vdmVFdmVudExpc3RlbmVyKCd0cmFja3BhZHRvdWNoc3RhcnQnLCB0aGlzLm9uVG91Y2hTdGFydCk7XG4gICAgc2NlbmVFbC5yZW1vdmVFdmVudExpc3RlbmVyKCd0cmFja3BhZHRvdWNoZW5kJywgdGhpcy5vblRvdWNoRW5kKTtcbiAgICBzY2VuZUVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RyYWNrcGFkZG93bicsIHRoaXMub25Ub3VjaFN0YXJ0KTtcbiAgICBzY2VuZUVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RyYWNrcGFkdXAnLCB0aGlzLm9uVG91Y2hFbmQpO1xuICB9LFxuXG4gIGlzVmVsb2NpdHlBY3RpdmU6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhLmVuYWJsZWQgJiYgdGhpcy5pc01vdmluZztcbiAgfSxcblxuICBnZXRWZWxvY2l0eURlbHRhOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5kVmVsb2NpdHkueiA9IHRoaXMuaXNNb3ZpbmcgPyAtdGhpcy56VmVsIDogMTtcbiAgICB0aGlzLmRWZWxvY2l0eS54ID0gdGhpcy5pc01vdmluZyA/IHRoaXMueFZlbCA6IDE7XG4gICAgcmV0dXJuIHRoaXMuZFZlbG9jaXR5LmNsb25lKCk7XG4gIH0sXG5cbiAgYmluZE1ldGhvZHM6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLm9uVG91Y2hTdGFydCA9IHRoaXMub25Ub3VjaFN0YXJ0LmJpbmQodGhpcyk7XG4gICAgdGhpcy5vblRvdWNoRW5kID0gdGhpcy5vblRvdWNoRW5kLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vbkF4aXNNb3ZlID0gdGhpcy5vbkF4aXNNb3ZlLmJpbmQodGhpcyk7XG4gIH0sXG5cbiAgb25Ub3VjaFN0YXJ0OiBmdW5jdGlvbiAoZSkge1xuICAgIHN3aXRjaCh0aGlzLmRhdGEubW9kZSl7XG4gICAgICBjYXNlICdzd2lwZSc6XG4gICAgICAgIHRoaXMuY2FuUmVjb3JkQXhpcyA9IHRydWU7XG4gICAgICAgIHRoaXMuc3RhcnRpbmdBeGlzRGF0YSA9IFtdO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3RvdWNoJzpcbiAgICAgICAgdGhpcy5pc01vdmluZyA9IHRydWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncHJlc3MnOlxuICAgICAgICB0aGlzLmlzTW92aW5nID0gdHJ1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICB9LFxuXG4gIG9uVG91Y2hFbmQ6IGZ1bmN0aW9uIChlKSB7XG4gICAgaWYodGhpcy5kYXRhLm1vZGUgPT0gJ3N3aXBlJykge1xuICAgICAgICB0aGlzLnN0YXJ0aW5nQXhpc0RhdGEgPSBbXTtcbiAgICB9XG5cbiAgICB0aGlzLmlzTW92aW5nID0gZmFsc2U7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICB9LFxuXG4gIG9uQXhpc01vdmU6IGZ1bmN0aW9uKGUpe1xuICAgIHN3aXRjaCAodGhpcy5kYXRhLm1vZGUpIHtcbiAgICAgIGNhc2UgJ3N3aXBlJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlU3dpcGVBeGlzKGUpO1xuICAgICAgY2FzZSAndG91Y2gnOlxuICAgICAgY2FzZSAncHJlc3MnOlxuICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVUb3VjaEF4aXMoZSk7XG4gICAgfVxuICB9LFxuXG4gIGhhbmRsZVN3aXBlQXhpczogZnVuY3Rpb24oZSkge1xuICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7XG4gICAgY29uc3QgYXhpc0RhdGEgPSBlLmRldGFpbC5heGlzO1xuXG4gICAgaWYodGhpcy5zdGFydGluZ0F4aXNEYXRhLmxlbmd0aCA9PT0gMCAmJiB0aGlzLmNhblJlY29yZEF4aXMpe1xuICAgICAgdGhpcy5jYW5SZWNvcmRBeGlzID0gZmFsc2U7XG4gICAgICB0aGlzLnN0YXJ0aW5nQXhpc0RhdGFbMF0gPSBheGlzRGF0YVswXTtcbiAgICAgIHRoaXMuc3RhcnRpbmdBeGlzRGF0YVsxXSA9IGF4aXNEYXRhWzFdO1xuICAgIH1cblxuICAgIGlmKHRoaXMuc3RhcnRpbmdBeGlzRGF0YS5sZW5ndGggPiAwKXtcbiAgICAgIGxldCB2ZWxYID0gMDtcbiAgICAgIGxldCB2ZWxaID0gMDtcblxuICAgICAgaWYgKGRhdGEuZW5hYmxlTmVnWCAmJiBheGlzRGF0YVswXSA8IHRoaXMuc3RhcnRpbmdBeGlzRGF0YVswXSkge1xuICAgICAgICB2ZWxYID0gLTE7XG4gICAgICB9XG5cbiAgICAgIGlmIChkYXRhLmVuYWJsZVBvc1ggJiYgYXhpc0RhdGFbMF0gPiB0aGlzLnN0YXJ0aW5nQXhpc0RhdGFbMF0pIHtcbiAgICAgICAgdmVsWCA9IDE7XG4gICAgICB9XG5cbiAgICAgIGlmIChkYXRhLmVuYWJsZVBvc1ogJiYgYXhpc0RhdGFbMV0gPiB0aGlzLnN0YXJ0aW5nQXhpc0RhdGFbMV0pIHtcbiAgICAgICAgdmVsWiA9IC0xO1xuICAgICAgfVxuXG4gICAgICBpZiAoZGF0YS5lbmFibGVOZWdaICYmIGF4aXNEYXRhWzFdIDwgdGhpcy5zdGFydGluZ0F4aXNEYXRhWzFdKSB7XG4gICAgICAgIHZlbFogPSAxO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBhYnNDaGFuZ2VaICA9IE1hdGguYWJzKHRoaXMuc3RhcnRpbmdBeGlzRGF0YVsxXSAtIGF4aXNEYXRhWzFdKTtcbiAgICAgIGNvbnN0IGFic0NoYW5nZVggID0gTWF0aC5hYnModGhpcy5zdGFydGluZ0F4aXNEYXRhWzBdIC0gYXhpc0RhdGFbMF0pO1xuXG4gICAgICBpZiAoYWJzQ2hhbmdlWCA+IGFic0NoYW5nZVopIHtcbiAgICAgICAgdGhpcy56VmVsID0gMDtcbiAgICAgICAgdGhpcy54VmVsID0gdmVsWDtcbiAgICAgICAgdGhpcy5pc01vdmluZyA9IHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnhWZWwgPSAwO1xuICAgICAgICB0aGlzLnpWZWwgPSB2ZWxaO1xuICAgICAgICB0aGlzLmlzTW92aW5nID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgIH1cbiAgfSxcblxuICBoYW5kbGVUb3VjaEF4aXM6IGZ1bmN0aW9uKGUpIHtcbiAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhO1xuICAgIGNvbnN0IGF4aXNEYXRhID0gZS5kZXRhaWwuYXhpcztcblxuICAgIGxldCB2ZWxYID0gMDtcbiAgICBsZXQgdmVsWiA9IDA7XG5cbiAgICBpZiAoZGF0YS5lbmFibGVOZWdYICYmIGF4aXNEYXRhWzBdIDwgMCkge1xuICAgICAgdmVsWCA9IC0xO1xuICAgIH1cblxuICAgIGlmIChkYXRhLmVuYWJsZVBvc1ggJiYgYXhpc0RhdGFbMF0gPiAwKSB7XG4gICAgICB2ZWxYID0gMTtcbiAgICB9XG5cbiAgICBpZiAoZGF0YS5lbmFibGVQb3NaICYmIGF4aXNEYXRhWzFdID4gMCkge1xuICAgICAgdmVsWiA9IC0xO1xuICAgIH1cblxuICAgIGlmIChkYXRhLmVuYWJsZU5lZ1ogJiYgYXhpc0RhdGFbMV0gPCAwKSB7XG4gICAgICB2ZWxaID0gMTtcbiAgICB9XG5cbiAgICBpZiAoTWF0aC5hYnMoYXhpc0RhdGFbMF0pID4gTWF0aC5hYnMoYXhpc0RhdGFbMV0pKSB7XG4gICAgICB0aGlzLnpWZWwgPSAwO1xuICAgICAgdGhpcy54VmVsID0gdmVsWDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy54VmVsID0gMDtcbiAgICAgIHRoaXMuelZlbCA9IHZlbFo7XG4gICAgfVxuXG4gIH1cblxufSk7XG5cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/controls/trackpad-controls.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/loaders/animation-mixer.js":
/*!**********************************************************************************************************!*\
  !*** ./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/loaders/animation-mixer.js ***!
  \**********************************************************************************************************/
/***/ ((module) => {

eval("const LoopMode = {\n  once: THREE.LoopOnce,\n  repeat: THREE.LoopRepeat,\n  pingpong: THREE.LoopPingPong\n};\n\n/**\n * animation-mixer\n *\n * Player for animation clips. Intended to be compatible with any model format that supports\n * skeletal or morph animations through THREE.AnimationMixer.\n * See: https://threejs.org/docs/?q=animation#Reference/Animation/AnimationMixer\n */\nmodule.exports = AFRAME.registerComponent('animation-mixer', {\n  schema: {\n    clip: { default: '*' },\n    useRegExp: {default: false},\n    duration: { default: 0 },\n    clampWhenFinished: { default: false, type: 'boolean' },\n    crossFadeDuration: { default: 0 },\n    loop: { default: 'repeat', oneOf: Object.keys(LoopMode) },\n    repetitions: { default: Infinity, min: 0 },\n    timeScale: { default: 1 },\n    startAt: { default: 0 }\n  },\n\n  init: function () {\n    /** @type {THREE.Mesh} */\n    this.model = null;\n    /** @type {THREE.AnimationMixer} */\n    this.mixer = null;\n    /** @type {Array<THREE.AnimationAction>} */\n    this.activeActions = [];\n\n    const model = this.el.getObject3D('mesh');\n\n    if (model) {\n      this.load(model);\n    } else {\n      this.el.addEventListener('model-loaded', (e) => {\n        this.load(e.detail.model);\n      });\n    }\n  },\n\n  load: function (model) {\n    const el = this.el;\n    this.model = model;\n    this.mixer = new THREE.AnimationMixer(model);\n    this.mixer.addEventListener('loop', (e) => {\n      el.emit('animation-loop', { action: e.action, loopDelta: e.loopDelta });\n    });\n    this.mixer.addEventListener('finished', (e) => {\n      el.emit('animation-finished', { action: e.action, direction: e.direction });\n    });\n    if (this.data.clip) this.update({});\n  },\n\n  remove: function () {\n    if (this.mixer) this.mixer.stopAllAction();\n  },\n\n  update: function (prevData) {\n    if (!prevData) return;\n\n    const data = this.data;\n    const changes = AFRAME.utils.diff(data, prevData);\n\n    // If selected clips have changed, restart animation.\n    if ('clip' in changes) {\n      this.stopAction();\n      if (data.clip) this.playAction();\n      return;\n    }\n\n    // Otherwise, modify running actions.\n    this.activeActions.forEach((action) => {\n      if ('duration' in changes && data.duration) {\n        action.setDuration(data.duration);\n      }\n      if ('clampWhenFinished' in changes) {\n        action.clampWhenFinished = data.clampWhenFinished;\n      }\n      if ('loop' in changes || 'repetitions' in changes) {\n        action.setLoop(LoopMode[data.loop], data.repetitions);\n      }\n      if ('timeScale' in changes) {\n        action.setEffectiveTimeScale(data.timeScale);\n      }\n    });\n  },\n\n  stopAction: function () {\n    const data = this.data;\n    for (let i = 0; i < this.activeActions.length; i++) {\n      data.crossFadeDuration\n        ? this.activeActions[i].fadeOut(data.crossFadeDuration)\n        : this.activeActions[i].stop();\n    }\n    this.activeActions.length = 0;\n  },\n\n  playAction: function () {\n    if (!this.mixer) return;\n\n    const model = this.model,\n      data = this.data,\n      clips = model.animations || (model.geometry || {}).animations || [];\n\n    if (!clips.length) return;\n\n    const re = data.useRegExp ? data.clip : wildcardToRegExp(data.clip);\n\n    for (let clip, i = 0; (clip = clips[i]); i++) {\n      if (clip.name.match(re)) {\n        const action = this.mixer.clipAction(clip, model);\n\n        action.enabled = true;\n        action.clampWhenFinished = data.clampWhenFinished;\n        if (data.duration) action.setDuration(data.duration);\n        if (data.timeScale !== 1) action.setEffectiveTimeScale(data.timeScale);\n        // animation-mixer.startAt and AnimationAction.startAt have very different meanings.\n        // animation-mixer.startAt indicates which frame in the animation to start at, in msecs.\n        // AnimationAction.startAt indicates when to start the animation (from the 1st frame),\n        // measured in global mixer time, in seconds.\n        action.startAt(this.mixer.time - data.startAt / 1000);\n        action\n          .setLoop(LoopMode[data.loop], data.repetitions)\n          .fadeIn(data.crossFadeDuration)\n          .play();\n        this.activeActions.push(action);\n      }\n    }\n  },\n\n  tick: function (t, dt) {\n    if (this.mixer && !isNaN(dt)) this.mixer.update(dt / 1000);\n  }\n});\n\n/**\n * Creates a RegExp from the given string, converting asterisks to .* expressions,\n * and escaping all other characters.\n */\nfunction wildcardToRegExp(s) {\n  return new RegExp('^' + s.split(/\\*+/).map(regExpEscape).join('.*') + '$');\n}\n\n/**\n * RegExp-escapes all characters in the given string.\n */\nfunction regExpEscape(s) {\n  return s.replace(/[|\\\\{}()[\\]^$+*?.]/g, '\\\\$&');\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYWZyYW1lLWV4dHJhc0A3LjUuMS9ub2RlX21vZHVsZXMvYWZyYW1lLWV4dHJhcy9zcmMvbG9hZGVycy9hbmltYXRpb24tbWl4ZXIuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGNBQWM7QUFDMUIsZ0JBQWdCLGVBQWU7QUFDL0IsZ0JBQWdCLFlBQVk7QUFDNUIseUJBQXlCLGlDQUFpQztBQUMxRCx5QkFBeUIsWUFBWTtBQUNyQyxZQUFZLGlEQUFpRDtBQUM3RCxtQkFBbUIsMkJBQTJCO0FBQzlDLGlCQUFpQixZQUFZO0FBQzdCLGVBQWU7QUFDZixHQUFHOztBQUVIO0FBQ0EsZUFBZSxZQUFZO0FBQzNCO0FBQ0EsZUFBZSxzQkFBc0I7QUFDckM7QUFDQSxlQUFlLDhCQUE4QjtBQUM3Qzs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsMENBQTBDO0FBQzVFLEtBQUs7QUFDTDtBQUNBLHNDQUFzQywwQ0FBMEM7QUFDaEYsS0FBSztBQUNMLHNDQUFzQztBQUN0QyxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHOztBQUVIO0FBQ0E7QUFDQSxvQkFBb0IsK0JBQStCO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHVEQUF1RDs7QUFFdkQ7O0FBRUE7O0FBRUEsMEJBQTBCLG1CQUFtQjtBQUM3QztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCO0FBQzFCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc21hX3Bvc3Rfc2NhcmNpdHkvLi9ub2RlX21vZHVsZXMvLnBucG0vYWZyYW1lLWV4dHJhc0A3LjUuMS9ub2RlX21vZHVsZXMvYWZyYW1lLWV4dHJhcy9zcmMvbG9hZGVycy9hbmltYXRpb24tbWl4ZXIuanM/NDY5MCJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBMb29wTW9kZSA9IHtcbiAgb25jZTogVEhSRUUuTG9vcE9uY2UsXG4gIHJlcGVhdDogVEhSRUUuTG9vcFJlcGVhdCxcbiAgcGluZ3Bvbmc6IFRIUkVFLkxvb3BQaW5nUG9uZ1xufTtcblxuLyoqXG4gKiBhbmltYXRpb24tbWl4ZXJcbiAqXG4gKiBQbGF5ZXIgZm9yIGFuaW1hdGlvbiBjbGlwcy4gSW50ZW5kZWQgdG8gYmUgY29tcGF0aWJsZSB3aXRoIGFueSBtb2RlbCBmb3JtYXQgdGhhdCBzdXBwb3J0c1xuICogc2tlbGV0YWwgb3IgbW9ycGggYW5pbWF0aW9ucyB0aHJvdWdoIFRIUkVFLkFuaW1hdGlvbk1peGVyLlxuICogU2VlOiBodHRwczovL3RocmVlanMub3JnL2RvY3MvP3E9YW5pbWF0aW9uI1JlZmVyZW5jZS9BbmltYXRpb24vQW5pbWF0aW9uTWl4ZXJcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBBRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ2FuaW1hdGlvbi1taXhlcicsIHtcbiAgc2NoZW1hOiB7XG4gICAgY2xpcDogeyBkZWZhdWx0OiAnKicgfSxcbiAgICB1c2VSZWdFeHA6IHtkZWZhdWx0OiBmYWxzZX0sXG4gICAgZHVyYXRpb246IHsgZGVmYXVsdDogMCB9LFxuICAgIGNsYW1wV2hlbkZpbmlzaGVkOiB7IGRlZmF1bHQ6IGZhbHNlLCB0eXBlOiAnYm9vbGVhbicgfSxcbiAgICBjcm9zc0ZhZGVEdXJhdGlvbjogeyBkZWZhdWx0OiAwIH0sXG4gICAgbG9vcDogeyBkZWZhdWx0OiAncmVwZWF0Jywgb25lT2Y6IE9iamVjdC5rZXlzKExvb3BNb2RlKSB9LFxuICAgIHJlcGV0aXRpb25zOiB7IGRlZmF1bHQ6IEluZmluaXR5LCBtaW46IDAgfSxcbiAgICB0aW1lU2NhbGU6IHsgZGVmYXVsdDogMSB9LFxuICAgIHN0YXJ0QXQ6IHsgZGVmYXVsdDogMCB9XG4gIH0sXG5cbiAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgIC8qKiBAdHlwZSB7VEhSRUUuTWVzaH0gKi9cbiAgICB0aGlzLm1vZGVsID0gbnVsbDtcbiAgICAvKiogQHR5cGUge1RIUkVFLkFuaW1hdGlvbk1peGVyfSAqL1xuICAgIHRoaXMubWl4ZXIgPSBudWxsO1xuICAgIC8qKiBAdHlwZSB7QXJyYXk8VEhSRUUuQW5pbWF0aW9uQWN0aW9uPn0gKi9cbiAgICB0aGlzLmFjdGl2ZUFjdGlvbnMgPSBbXTtcblxuICAgIGNvbnN0IG1vZGVsID0gdGhpcy5lbC5nZXRPYmplY3QzRCgnbWVzaCcpO1xuXG4gICAgaWYgKG1vZGVsKSB7XG4gICAgICB0aGlzLmxvYWQobW9kZWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vZGVsLWxvYWRlZCcsIChlKSA9PiB7XG4gICAgICAgIHRoaXMubG9hZChlLmRldGFpbC5tb2RlbCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sXG5cbiAgbG9hZDogZnVuY3Rpb24gKG1vZGVsKSB7XG4gICAgY29uc3QgZWwgPSB0aGlzLmVsO1xuICAgIHRoaXMubW9kZWwgPSBtb2RlbDtcbiAgICB0aGlzLm1peGVyID0gbmV3IFRIUkVFLkFuaW1hdGlvbk1peGVyKG1vZGVsKTtcbiAgICB0aGlzLm1peGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2xvb3AnLCAoZSkgPT4ge1xuICAgICAgZWwuZW1pdCgnYW5pbWF0aW9uLWxvb3AnLCB7IGFjdGlvbjogZS5hY3Rpb24sIGxvb3BEZWx0YTogZS5sb29wRGVsdGEgfSk7XG4gICAgfSk7XG4gICAgdGhpcy5taXhlci5hZGRFdmVudExpc3RlbmVyKCdmaW5pc2hlZCcsIChlKSA9PiB7XG4gICAgICBlbC5lbWl0KCdhbmltYXRpb24tZmluaXNoZWQnLCB7IGFjdGlvbjogZS5hY3Rpb24sIGRpcmVjdGlvbjogZS5kaXJlY3Rpb24gfSk7XG4gICAgfSk7XG4gICAgaWYgKHRoaXMuZGF0YS5jbGlwKSB0aGlzLnVwZGF0ZSh7fSk7XG4gIH0sXG5cbiAgcmVtb3ZlOiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMubWl4ZXIpIHRoaXMubWl4ZXIuc3RvcEFsbEFjdGlvbigpO1xuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gKHByZXZEYXRhKSB7XG4gICAgaWYgKCFwcmV2RGF0YSkgcmV0dXJuO1xuXG4gICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICBjb25zdCBjaGFuZ2VzID0gQUZSQU1FLnV0aWxzLmRpZmYoZGF0YSwgcHJldkRhdGEpO1xuXG4gICAgLy8gSWYgc2VsZWN0ZWQgY2xpcHMgaGF2ZSBjaGFuZ2VkLCByZXN0YXJ0IGFuaW1hdGlvbi5cbiAgICBpZiAoJ2NsaXAnIGluIGNoYW5nZXMpIHtcbiAgICAgIHRoaXMuc3RvcEFjdGlvbigpO1xuICAgICAgaWYgKGRhdGEuY2xpcCkgdGhpcy5wbGF5QWN0aW9uKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gT3RoZXJ3aXNlLCBtb2RpZnkgcnVubmluZyBhY3Rpb25zLlxuICAgIHRoaXMuYWN0aXZlQWN0aW9ucy5mb3JFYWNoKChhY3Rpb24pID0+IHtcbiAgICAgIGlmICgnZHVyYXRpb24nIGluIGNoYW5nZXMgJiYgZGF0YS5kdXJhdGlvbikge1xuICAgICAgICBhY3Rpb24uc2V0RHVyYXRpb24oZGF0YS5kdXJhdGlvbik7XG4gICAgICB9XG4gICAgICBpZiAoJ2NsYW1wV2hlbkZpbmlzaGVkJyBpbiBjaGFuZ2VzKSB7XG4gICAgICAgIGFjdGlvbi5jbGFtcFdoZW5GaW5pc2hlZCA9IGRhdGEuY2xhbXBXaGVuRmluaXNoZWQ7XG4gICAgICB9XG4gICAgICBpZiAoJ2xvb3AnIGluIGNoYW5nZXMgfHwgJ3JlcGV0aXRpb25zJyBpbiBjaGFuZ2VzKSB7XG4gICAgICAgIGFjdGlvbi5zZXRMb29wKExvb3BNb2RlW2RhdGEubG9vcF0sIGRhdGEucmVwZXRpdGlvbnMpO1xuICAgICAgfVxuICAgICAgaWYgKCd0aW1lU2NhbGUnIGluIGNoYW5nZXMpIHtcbiAgICAgICAgYWN0aW9uLnNldEVmZmVjdGl2ZVRpbWVTY2FsZShkYXRhLnRpbWVTY2FsZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgc3RvcEFjdGlvbjogZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmFjdGl2ZUFjdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGRhdGEuY3Jvc3NGYWRlRHVyYXRpb25cbiAgICAgICAgPyB0aGlzLmFjdGl2ZUFjdGlvbnNbaV0uZmFkZU91dChkYXRhLmNyb3NzRmFkZUR1cmF0aW9uKVxuICAgICAgICA6IHRoaXMuYWN0aXZlQWN0aW9uc1tpXS5zdG9wKCk7XG4gICAgfVxuICAgIHRoaXMuYWN0aXZlQWN0aW9ucy5sZW5ndGggPSAwO1xuICB9LFxuXG4gIHBsYXlBY3Rpb246IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMubWl4ZXIpIHJldHVybjtcblxuICAgIGNvbnN0IG1vZGVsID0gdGhpcy5tb2RlbCxcbiAgICAgIGRhdGEgPSB0aGlzLmRhdGEsXG4gICAgICBjbGlwcyA9IG1vZGVsLmFuaW1hdGlvbnMgfHwgKG1vZGVsLmdlb21ldHJ5IHx8IHt9KS5hbmltYXRpb25zIHx8IFtdO1xuXG4gICAgaWYgKCFjbGlwcy5sZW5ndGgpIHJldHVybjtcblxuICAgIGNvbnN0IHJlID0gZGF0YS51c2VSZWdFeHAgPyBkYXRhLmNsaXAgOiB3aWxkY2FyZFRvUmVnRXhwKGRhdGEuY2xpcCk7XG5cbiAgICBmb3IgKGxldCBjbGlwLCBpID0gMDsgKGNsaXAgPSBjbGlwc1tpXSk7IGkrKykge1xuICAgICAgaWYgKGNsaXAubmFtZS5tYXRjaChyZSkpIHtcbiAgICAgICAgY29uc3QgYWN0aW9uID0gdGhpcy5taXhlci5jbGlwQWN0aW9uKGNsaXAsIG1vZGVsKTtcblxuICAgICAgICBhY3Rpb24uZW5hYmxlZCA9IHRydWU7XG4gICAgICAgIGFjdGlvbi5jbGFtcFdoZW5GaW5pc2hlZCA9IGRhdGEuY2xhbXBXaGVuRmluaXNoZWQ7XG4gICAgICAgIGlmIChkYXRhLmR1cmF0aW9uKSBhY3Rpb24uc2V0RHVyYXRpb24oZGF0YS5kdXJhdGlvbik7XG4gICAgICAgIGlmIChkYXRhLnRpbWVTY2FsZSAhPT0gMSkgYWN0aW9uLnNldEVmZmVjdGl2ZVRpbWVTY2FsZShkYXRhLnRpbWVTY2FsZSk7XG4gICAgICAgIC8vIGFuaW1hdGlvbi1taXhlci5zdGFydEF0IGFuZCBBbmltYXRpb25BY3Rpb24uc3RhcnRBdCBoYXZlIHZlcnkgZGlmZmVyZW50IG1lYW5pbmdzLlxuICAgICAgICAvLyBhbmltYXRpb24tbWl4ZXIuc3RhcnRBdCBpbmRpY2F0ZXMgd2hpY2ggZnJhbWUgaW4gdGhlIGFuaW1hdGlvbiB0byBzdGFydCBhdCwgaW4gbXNlY3MuXG4gICAgICAgIC8vIEFuaW1hdGlvbkFjdGlvbi5zdGFydEF0IGluZGljYXRlcyB3aGVuIHRvIHN0YXJ0IHRoZSBhbmltYXRpb24gKGZyb20gdGhlIDFzdCBmcmFtZSksXG4gICAgICAgIC8vIG1lYXN1cmVkIGluIGdsb2JhbCBtaXhlciB0aW1lLCBpbiBzZWNvbmRzLlxuICAgICAgICBhY3Rpb24uc3RhcnRBdCh0aGlzLm1peGVyLnRpbWUgLSBkYXRhLnN0YXJ0QXQgLyAxMDAwKTtcbiAgICAgICAgYWN0aW9uXG4gICAgICAgICAgLnNldExvb3AoTG9vcE1vZGVbZGF0YS5sb29wXSwgZGF0YS5yZXBldGl0aW9ucylcbiAgICAgICAgICAuZmFkZUluKGRhdGEuY3Jvc3NGYWRlRHVyYXRpb24pXG4gICAgICAgICAgLnBsYXkoKTtcbiAgICAgICAgdGhpcy5hY3RpdmVBY3Rpb25zLnB1c2goYWN0aW9uKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgdGljazogZnVuY3Rpb24gKHQsIGR0KSB7XG4gICAgaWYgKHRoaXMubWl4ZXIgJiYgIWlzTmFOKGR0KSkgdGhpcy5taXhlci51cGRhdGUoZHQgLyAxMDAwKTtcbiAgfVxufSk7XG5cbi8qKlxuICogQ3JlYXRlcyBhIFJlZ0V4cCBmcm9tIHRoZSBnaXZlbiBzdHJpbmcsIGNvbnZlcnRpbmcgYXN0ZXJpc2tzIHRvIC4qIGV4cHJlc3Npb25zLFxuICogYW5kIGVzY2FwaW5nIGFsbCBvdGhlciBjaGFyYWN0ZXJzLlxuICovXG5mdW5jdGlvbiB3aWxkY2FyZFRvUmVnRXhwKHMpIHtcbiAgcmV0dXJuIG5ldyBSZWdFeHAoJ14nICsgcy5zcGxpdCgvXFwqKy8pLm1hcChyZWdFeHBFc2NhcGUpLmpvaW4oJy4qJykgKyAnJCcpO1xufVxuXG4vKipcbiAqIFJlZ0V4cC1lc2NhcGVzIGFsbCBjaGFyYWN0ZXJzIGluIHRoZSBnaXZlbiBzdHJpbmcuXG4gKi9cbmZ1bmN0aW9uIHJlZ0V4cEVzY2FwZShzKSB7XG4gIHJldHVybiBzLnJlcGxhY2UoL1t8XFxcXHt9KClbXFxdXiQrKj8uXS9nLCAnXFxcXCQmJyk7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/loaders/animation-mixer.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/loaders/collada-model-legacy.js":
/*!***************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/loaders/collada-model-legacy.js ***!
  \***************************************************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("THREE.ColladaLoader = __webpack_require__(/*! ../../lib/ColladaLoader */ \"(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/lib/ColladaLoader.js\");\n\n/**\n * collada-model-legacy\n *\n * Loader for COLLADA (.dae) format.\n */\nmodule.exports.Component = AFRAME.registerComponent('collada-model-legacy', {\n  schema: {type: 'asset'},\n\n  init: function () {\n    this.model = null;\n    this.loader = new THREE.ColladaLoader();\n  },\n\n  update: function () {\n    var self = this;\n    var el = this.el;\n    var src = this.data;\n    var rendererSystem = this.el.sceneEl.systems.renderer;\n\n    if (!src) { return; }\n\n    this.remove();\n\n    this.loader.load(src, function (colladaModel) {\n      self.model = colladaModel.scene;\n      self.model.traverse(function (object) {\n        if (object.isMesh) {\n          var material = object.material;\n          if (material.color) rendererSystem.applyColorCorrection(material.color);\n          if (material.map) rendererSystem.applyColorCorrection(material.map);\n          if (material.emissive) rendererSystem.applyColorCorrection(material.emissive);\n          if (material.emissiveMap) rendererSystem.applyColorCorrection(material.emissiveMap);\n        }\n      });\n      el.setObject3D('mesh', self.model);\n      el.emit('model-loaded', {format: 'collada', model: self.model});\n    });\n  },\n\n  remove: function () {\n    if (!this.model) { return; }\n    this.el.removeObject3D('mesh');\n  }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYWZyYW1lLWV4dHJhc0A3LjUuMS9ub2RlX21vZHVsZXMvYWZyYW1lLWV4dHJhcy9zcmMvbG9hZGVycy9jb2xsYWRhLW1vZGVsLWxlZ2FjeS5qcyIsIm1hcHBpbmdzIjoiQUFBQSxzQkFBc0IsbUJBQU8sQ0FBQywrSEFBeUI7O0FBRXZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEIsV0FBVyxjQUFjOztBQUV6QjtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsZ0JBQWdCOztBQUVoQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLCtCQUErQixxQ0FBcUM7QUFDcEUsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zbWFfcG9zdF9zY2FyY2l0eS8uL25vZGVfbW9kdWxlcy8ucG5wbS9hZnJhbWUtZXh0cmFzQDcuNS4xL25vZGVfbW9kdWxlcy9hZnJhbWUtZXh0cmFzL3NyYy9sb2FkZXJzL2NvbGxhZGEtbW9kZWwtbGVnYWN5LmpzPzM3MGMiXSwic291cmNlc0NvbnRlbnQiOlsiVEhSRUUuQ29sbGFkYUxvYWRlciA9IHJlcXVpcmUoJy4uLy4uL2xpYi9Db2xsYWRhTG9hZGVyJyk7XG5cbi8qKlxuICogY29sbGFkYS1tb2RlbC1sZWdhY3lcbiAqXG4gKiBMb2FkZXIgZm9yIENPTExBREEgKC5kYWUpIGZvcm1hdC5cbiAqL1xubW9kdWxlLmV4cG9ydHMuQ29tcG9uZW50ID0gQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KCdjb2xsYWRhLW1vZGVsLWxlZ2FjeScsIHtcbiAgc2NoZW1hOiB7dHlwZTogJ2Fzc2V0J30sXG5cbiAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMubW9kZWwgPSBudWxsO1xuICAgIHRoaXMubG9hZGVyID0gbmV3IFRIUkVFLkNvbGxhZGFMb2FkZXIoKTtcbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICB2YXIgc3JjID0gdGhpcy5kYXRhO1xuICAgIHZhciByZW5kZXJlclN5c3RlbSA9IHRoaXMuZWwuc2NlbmVFbC5zeXN0ZW1zLnJlbmRlcmVyO1xuXG4gICAgaWYgKCFzcmMpIHsgcmV0dXJuOyB9XG5cbiAgICB0aGlzLnJlbW92ZSgpO1xuXG4gICAgdGhpcy5sb2FkZXIubG9hZChzcmMsIGZ1bmN0aW9uIChjb2xsYWRhTW9kZWwpIHtcbiAgICAgIHNlbGYubW9kZWwgPSBjb2xsYWRhTW9kZWwuc2NlbmU7XG4gICAgICBzZWxmLm1vZGVsLnRyYXZlcnNlKGZ1bmN0aW9uIChvYmplY3QpIHtcbiAgICAgICAgaWYgKG9iamVjdC5pc01lc2gpIHtcbiAgICAgICAgICB2YXIgbWF0ZXJpYWwgPSBvYmplY3QubWF0ZXJpYWw7XG4gICAgICAgICAgaWYgKG1hdGVyaWFsLmNvbG9yKSByZW5kZXJlclN5c3RlbS5hcHBseUNvbG9yQ29ycmVjdGlvbihtYXRlcmlhbC5jb2xvcik7XG4gICAgICAgICAgaWYgKG1hdGVyaWFsLm1hcCkgcmVuZGVyZXJTeXN0ZW0uYXBwbHlDb2xvckNvcnJlY3Rpb24obWF0ZXJpYWwubWFwKTtcbiAgICAgICAgICBpZiAobWF0ZXJpYWwuZW1pc3NpdmUpIHJlbmRlcmVyU3lzdGVtLmFwcGx5Q29sb3JDb3JyZWN0aW9uKG1hdGVyaWFsLmVtaXNzaXZlKTtcbiAgICAgICAgICBpZiAobWF0ZXJpYWwuZW1pc3NpdmVNYXApIHJlbmRlcmVyU3lzdGVtLmFwcGx5Q29sb3JDb3JyZWN0aW9uKG1hdGVyaWFsLmVtaXNzaXZlTWFwKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBlbC5zZXRPYmplY3QzRCgnbWVzaCcsIHNlbGYubW9kZWwpO1xuICAgICAgZWwuZW1pdCgnbW9kZWwtbG9hZGVkJywge2Zvcm1hdDogJ2NvbGxhZGEnLCBtb2RlbDogc2VsZi5tb2RlbH0pO1xuICAgIH0pO1xuICB9LFxuXG4gIHJlbW92ZTogZnVuY3Rpb24gKCkge1xuICAgIGlmICghdGhpcy5tb2RlbCkgeyByZXR1cm47IH1cbiAgICB0aGlzLmVsLnJlbW92ZU9iamVjdDNEKCdtZXNoJyk7XG4gIH1cbn0pO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/loaders/collada-model-legacy.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/loaders/fbx-model.js":
/*!****************************************************************************************************!*\
  !*** ./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/loaders/fbx-model.js ***!
  \****************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var three_addons_loaders_FBXLoader_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! three/addons/loaders/FBXLoader.js */ \"(ssr)/./node_modules/.pnpm/three@0.164.1/node_modules/three/examples/jsm/loaders/FBXLoader.js\");\n\nTHREE.FBXLoader = three_addons_loaders_FBXLoader_js__WEBPACK_IMPORTED_MODULE_0__.FBXLoader;\n\n/**\n * fbx-model\n *\n * Loader for FBX format.\n */\nAFRAME.registerComponent('fbx-model', {\n  schema: {\n    src:         { type: 'asset' },\n    crossorigin: { default: '' }\n  },\n\n  init: function () {\n    this.model = null;\n  },\n\n  update: function () {\n    const data = this.data;\n    if (!data.src) return;\n\n    this.remove();\n    const loader = new THREE.FBXLoader();\n    if (data.crossorigin) loader.setCrossOrigin(data.crossorigin);\n    loader.load(data.src, this.load.bind(this));\n  },\n\n  load: function (model) {\n    this.model = model;\n    this.el.setObject3D('mesh', model);\n    this.el.emit('model-loaded', {format: 'fbx', model: model});\n  },\n\n  remove: function () {\n    if (this.model) this.el.removeObject3D('mesh');\n  }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYWZyYW1lLWV4dHJhc0A3LjUuMS9ub2RlX21vZHVsZXMvYWZyYW1lLWV4dHJhcy9zcmMvbG9hZGVycy9mYngtbW9kZWwuanMiLCJtYXBwaW5ncyI6Ijs7QUFBOEQ7QUFDOUQsa0JBQWtCLHdFQUFTOztBQUUzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixlQUFlO0FBQ2xDLG1CQUFtQjtBQUNuQixHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLDRCQUE0QjtBQUM5RCxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zbWFfcG9zdF9zY2FyY2l0eS8uL25vZGVfbW9kdWxlcy8ucG5wbS9hZnJhbWUtZXh0cmFzQDcuNS4xL25vZGVfbW9kdWxlcy9hZnJhbWUtZXh0cmFzL3NyYy9sb2FkZXJzL2ZieC1tb2RlbC5qcz8zNDA0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEZCWExvYWRlciB9IGZyb20gJ3RocmVlL2FkZG9ucy9sb2FkZXJzL0ZCWExvYWRlci5qcyc7XG5USFJFRS5GQlhMb2FkZXIgPSBGQlhMb2FkZXI7XG5cbi8qKlxuICogZmJ4LW1vZGVsXG4gKlxuICogTG9hZGVyIGZvciBGQlggZm9ybWF0LlxuICovXG5BRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ2ZieC1tb2RlbCcsIHtcbiAgc2NoZW1hOiB7XG4gICAgc3JjOiAgICAgICAgIHsgdHlwZTogJ2Fzc2V0JyB9LFxuICAgIGNyb3Nzb3JpZ2luOiB7IGRlZmF1bHQ6ICcnIH1cbiAgfSxcblxuICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5tb2RlbCA9IG51bGw7XG4gIH0sXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICBpZiAoIWRhdGEuc3JjKSByZXR1cm47XG5cbiAgICB0aGlzLnJlbW92ZSgpO1xuICAgIGNvbnN0IGxvYWRlciA9IG5ldyBUSFJFRS5GQlhMb2FkZXIoKTtcbiAgICBpZiAoZGF0YS5jcm9zc29yaWdpbikgbG9hZGVyLnNldENyb3NzT3JpZ2luKGRhdGEuY3Jvc3NvcmlnaW4pO1xuICAgIGxvYWRlci5sb2FkKGRhdGEuc3JjLCB0aGlzLmxvYWQuYmluZCh0aGlzKSk7XG4gIH0sXG5cbiAgbG9hZDogZnVuY3Rpb24gKG1vZGVsKSB7XG4gICAgdGhpcy5tb2RlbCA9IG1vZGVsO1xuICAgIHRoaXMuZWwuc2V0T2JqZWN0M0QoJ21lc2gnLCBtb2RlbCk7XG4gICAgdGhpcy5lbC5lbWl0KCdtb2RlbC1sb2FkZWQnLCB7Zm9ybWF0OiAnZmJ4JywgbW9kZWw6IG1vZGVsfSk7XG4gIH0sXG5cbiAgcmVtb3ZlOiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMubW9kZWwpIHRoaXMuZWwucmVtb3ZlT2JqZWN0M0QoJ21lc2gnKTtcbiAgfVxufSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/loaders/fbx-model.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/loaders/gltf-model-legacy.js":
/*!************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/loaders/gltf-model-legacy.js ***!
  \************************************************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const fetchScript = __webpack_require__(/*! ../../lib/fetch-script */ \"(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/lib/fetch-script.js\")();\n\nconst LOADER_SRC = 'https://cdn.jsdelivr.net/gh/mrdoob/three.js@r86/examples/js/loaders/GLTFLoader.js';\n\nconst loadLoader = (function () {\n  let promise;\n  return function () {\n    promise = promise || fetchScript(LOADER_SRC);\n    return promise;\n  };\n}());\n\n/**\n * Legacy loader for glTF 1.0 models.\n * Asynchronously loads THREE.GLTFLoader from jsdelivr.\n */\nmodule.exports = AFRAME.registerComponent('gltf-model-legacy', {\n  schema: {type: 'model'},\n\n  init: function () {\n    this.model = null;\n    this.loader = null;\n    this.loaderPromise = loadLoader().then(() => {\n      this.loader = new THREE.GLTFLoader();\n      this.loader.setCrossOrigin('Anonymous');\n    });\n  },\n\n  update: function () {\n    const self = this;\n    const el = this.el;\n    const src = this.data;\n\n    if (!src) { return; }\n\n    this.remove();\n\n    this.loaderPromise.then(() => {\n      this.loader.load(src, function gltfLoaded (gltfModel) {\n        self.model = gltfModel.scene;\n        self.model.animations = gltfModel.animations;\n        el.setObject3D('mesh', self.model);\n        el.emit('model-loaded', {format: 'gltf', model: self.model});\n      });\n    });\n  },\n\n  remove: function () {\n    if (!this.model) { return; }\n    this.el.removeObject3D('mesh');\n  }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYWZyYW1lLWV4dHJhc0A3LjUuMS9ub2RlX21vZHVsZXMvYWZyYW1lLWV4dHJhcy9zcmMvbG9hZGVycy9nbHRmLW1vZGVsLWxlZ2FjeS5qcyIsIm1hcHBpbmdzIjoiQUFBQSxvQkFBb0IsbUJBQU8sQ0FBQyw2SEFBd0I7O0FBRXBEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsY0FBYzs7QUFFekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsZ0JBQWdCOztBQUVoQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLGtDQUFrQztBQUNuRSxPQUFPO0FBQ1AsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zbWFfcG9zdF9zY2FyY2l0eS8uL25vZGVfbW9kdWxlcy8ucG5wbS9hZnJhbWUtZXh0cmFzQDcuNS4xL25vZGVfbW9kdWxlcy9hZnJhbWUtZXh0cmFzL3NyYy9sb2FkZXJzL2dsdGYtbW9kZWwtbGVnYWN5LmpzP2JlZmUiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZmV0Y2hTY3JpcHQgPSByZXF1aXJlKCcuLi8uLi9saWIvZmV0Y2gtc2NyaXB0JykoKTtcblxuY29uc3QgTE9BREVSX1NSQyA9ICdodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvZ2gvbXJkb29iL3RocmVlLmpzQHI4Ni9leGFtcGxlcy9qcy9sb2FkZXJzL0dMVEZMb2FkZXIuanMnO1xuXG5jb25zdCBsb2FkTG9hZGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgbGV0IHByb21pc2U7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgcHJvbWlzZSA9IHByb21pc2UgfHwgZmV0Y2hTY3JpcHQoTE9BREVSX1NSQyk7XG4gICAgcmV0dXJuIHByb21pc2U7XG4gIH07XG59KCkpO1xuXG4vKipcbiAqIExlZ2FjeSBsb2FkZXIgZm9yIGdsVEYgMS4wIG1vZGVscy5cbiAqIEFzeW5jaHJvbm91c2x5IGxvYWRzIFRIUkVFLkdMVEZMb2FkZXIgZnJvbSBqc2RlbGl2ci5cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBBRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ2dsdGYtbW9kZWwtbGVnYWN5Jywge1xuICBzY2hlbWE6IHt0eXBlOiAnbW9kZWwnfSxcblxuICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5tb2RlbCA9IG51bGw7XG4gICAgdGhpcy5sb2FkZXIgPSBudWxsO1xuICAgIHRoaXMubG9hZGVyUHJvbWlzZSA9IGxvYWRMb2FkZXIoKS50aGVuKCgpID0+IHtcbiAgICAgIHRoaXMubG9hZGVyID0gbmV3IFRIUkVFLkdMVEZMb2FkZXIoKTtcbiAgICAgIHRoaXMubG9hZGVyLnNldENyb3NzT3JpZ2luKCdBbm9ueW1vdXMnKTtcbiAgICB9KTtcbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBzZWxmID0gdGhpcztcbiAgICBjb25zdCBlbCA9IHRoaXMuZWw7XG4gICAgY29uc3Qgc3JjID0gdGhpcy5kYXRhO1xuXG4gICAgaWYgKCFzcmMpIHsgcmV0dXJuOyB9XG5cbiAgICB0aGlzLnJlbW92ZSgpO1xuXG4gICAgdGhpcy5sb2FkZXJQcm9taXNlLnRoZW4oKCkgPT4ge1xuICAgICAgdGhpcy5sb2FkZXIubG9hZChzcmMsIGZ1bmN0aW9uIGdsdGZMb2FkZWQgKGdsdGZNb2RlbCkge1xuICAgICAgICBzZWxmLm1vZGVsID0gZ2x0Zk1vZGVsLnNjZW5lO1xuICAgICAgICBzZWxmLm1vZGVsLmFuaW1hdGlvbnMgPSBnbHRmTW9kZWwuYW5pbWF0aW9ucztcbiAgICAgICAgZWwuc2V0T2JqZWN0M0QoJ21lc2gnLCBzZWxmLm1vZGVsKTtcbiAgICAgICAgZWwuZW1pdCgnbW9kZWwtbG9hZGVkJywge2Zvcm1hdDogJ2dsdGYnLCBtb2RlbDogc2VsZi5tb2RlbH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0sXG5cbiAgcmVtb3ZlOiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCF0aGlzLm1vZGVsKSB7IHJldHVybjsgfVxuICAgIHRoaXMuZWwucmVtb3ZlT2JqZWN0M0QoJ21lc2gnKTtcbiAgfVxufSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/loaders/gltf-model-legacy.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/loaders/index.js":
/*!************************************************************************************************!*\
  !*** ./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/loaders/index.js ***!
  \************************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("__webpack_require__(/*! ./animation-mixer */ \"(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/loaders/animation-mixer.js\");\n__webpack_require__(/*! ./collada-model-legacy */ \"(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/loaders/collada-model-legacy.js\");\n__webpack_require__(/*! ./fbx-model */ \"(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/loaders/fbx-model.js\");\n__webpack_require__(/*! ./gltf-model-legacy */ \"(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/loaders/gltf-model-legacy.js\");\n__webpack_require__(/*! ./object-model */ \"(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/loaders/object-model.js\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYWZyYW1lLWV4dHJhc0A3LjUuMS9ub2RlX21vZHVsZXMvYWZyYW1lLWV4dHJhcy9zcmMvbG9hZGVycy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiQUFBQSxtQkFBTyxDQUFDLG1JQUFtQjtBQUMzQixtQkFBTyxDQUFDLDZJQUF3QjtBQUNoQyxtQkFBTyxDQUFDLHVIQUFhO0FBQ3JCLG1CQUFPLENBQUMsdUlBQXFCO0FBQzdCLG1CQUFPLENBQUMsNkhBQWdCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc21hX3Bvc3Rfc2NhcmNpdHkvLi9ub2RlX21vZHVsZXMvLnBucG0vYWZyYW1lLWV4dHJhc0A3LjUuMS9ub2RlX21vZHVsZXMvYWZyYW1lLWV4dHJhcy9zcmMvbG9hZGVycy9pbmRleC5qcz8xMzdjIl0sInNvdXJjZXNDb250ZW50IjpbInJlcXVpcmUoJy4vYW5pbWF0aW9uLW1peGVyJyk7XG5yZXF1aXJlKCcuL2NvbGxhZGEtbW9kZWwtbGVnYWN5Jyk7XG5yZXF1aXJlKCcuL2ZieC1tb2RlbCcpO1xucmVxdWlyZSgnLi9nbHRmLW1vZGVsLWxlZ2FjeScpO1xucmVxdWlyZSgnLi9vYmplY3QtbW9kZWwnKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/loaders/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/loaders/object-model.js":
/*!*******************************************************************************************************!*\
  !*** ./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/loaders/object-model.js ***!
  \*******************************************************************************************************/
/***/ ((module) => {

eval("/**\n * object-model\n *\n * Loader for THREE.js JSON format. Somewhat confusingly, there are two different THREE.js formats,\n * both having the .json extension. This loader supports only THREE.ObjectLoader, which typically\n * includes multiple meshes or an entire scene.\n *\n * Check the console for errors, if in doubt. You may need to use `json-model` or\n * `blend-character-model` for some .js and .json files.\n *\n * See: https://clara.io/learn/user-guide/data_exchange/threejs_export\n */\nmodule.exports = AFRAME.registerComponent('object-model', {\n  schema: {\n    src:         { type: 'asset' },\n    crossorigin: { default: '' }\n  },\n\n  init: function () {\n    this.model = null;\n  },\n\n  update: function () {\n    let loader;\n    const data = this.data;\n    if (!data.src) return;\n\n    this.remove();\n    loader = new THREE.ObjectLoader();\n    if (data.crossorigin) loader.setCrossOrigin(data.crossorigin);\n    loader.load(data.src, (object) => {\n\n      // Enable skinning, if applicable.\n      object.traverse((o) => {\n        if (o instanceof THREE.SkinnedMesh && o.material) {\n          o.material.skinning = !!((o.geometry && o.geometry.bones) || []).length;\n        }\n      });\n\n      this.load(object);\n    });\n  },\n\n  load: function (model) {\n    this.model = model;\n    this.el.setObject3D('mesh', model);\n    this.el.emit('model-loaded', {format: 'json', model: model});\n  },\n\n  remove: function () {\n    if (this.model) this.el.removeObject3D('mesh');\n  }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYWZyYW1lLWV4dHJhc0A3LjUuMS9ub2RlX21vZHVsZXMvYWZyYW1lLWV4dHJhcy9zcmMvbG9hZGVycy9vYmplY3QtbW9kZWwuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixlQUFlO0FBQ2xDLG1CQUFtQjtBQUNuQixHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0EsS0FBSztBQUNMLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLDZCQUE2QjtBQUMvRCxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zbWFfcG9zdF9zY2FyY2l0eS8uL25vZGVfbW9kdWxlcy8ucG5wbS9hZnJhbWUtZXh0cmFzQDcuNS4xL25vZGVfbW9kdWxlcy9hZnJhbWUtZXh0cmFzL3NyYy9sb2FkZXJzL29iamVjdC1tb2RlbC5qcz81MDJhIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogb2JqZWN0LW1vZGVsXG4gKlxuICogTG9hZGVyIGZvciBUSFJFRS5qcyBKU09OIGZvcm1hdC4gU29tZXdoYXQgY29uZnVzaW5nbHksIHRoZXJlIGFyZSB0d28gZGlmZmVyZW50IFRIUkVFLmpzIGZvcm1hdHMsXG4gKiBib3RoIGhhdmluZyB0aGUgLmpzb24gZXh0ZW5zaW9uLiBUaGlzIGxvYWRlciBzdXBwb3J0cyBvbmx5IFRIUkVFLk9iamVjdExvYWRlciwgd2hpY2ggdHlwaWNhbGx5XG4gKiBpbmNsdWRlcyBtdWx0aXBsZSBtZXNoZXMgb3IgYW4gZW50aXJlIHNjZW5lLlxuICpcbiAqIENoZWNrIHRoZSBjb25zb2xlIGZvciBlcnJvcnMsIGlmIGluIGRvdWJ0LiBZb3UgbWF5IG5lZWQgdG8gdXNlIGBqc29uLW1vZGVsYCBvclxuICogYGJsZW5kLWNoYXJhY3Rlci1tb2RlbGAgZm9yIHNvbWUgLmpzIGFuZCAuanNvbiBmaWxlcy5cbiAqXG4gKiBTZWU6IGh0dHBzOi8vY2xhcmEuaW8vbGVhcm4vdXNlci1ndWlkZS9kYXRhX2V4Y2hhbmdlL3RocmVlanNfZXhwb3J0XG4gKi9cbm1vZHVsZS5leHBvcnRzID0gQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KCdvYmplY3QtbW9kZWwnLCB7XG4gIHNjaGVtYToge1xuICAgIHNyYzogICAgICAgICB7IHR5cGU6ICdhc3NldCcgfSxcbiAgICBjcm9zc29yaWdpbjogeyBkZWZhdWx0OiAnJyB9XG4gIH0sXG5cbiAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMubW9kZWwgPSBudWxsO1xuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gKCkge1xuICAgIGxldCBsb2FkZXI7XG4gICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICBpZiAoIWRhdGEuc3JjKSByZXR1cm47XG5cbiAgICB0aGlzLnJlbW92ZSgpO1xuICAgIGxvYWRlciA9IG5ldyBUSFJFRS5PYmplY3RMb2FkZXIoKTtcbiAgICBpZiAoZGF0YS5jcm9zc29yaWdpbikgbG9hZGVyLnNldENyb3NzT3JpZ2luKGRhdGEuY3Jvc3NvcmlnaW4pO1xuICAgIGxvYWRlci5sb2FkKGRhdGEuc3JjLCAob2JqZWN0KSA9PiB7XG5cbiAgICAgIC8vIEVuYWJsZSBza2lubmluZywgaWYgYXBwbGljYWJsZS5cbiAgICAgIG9iamVjdC50cmF2ZXJzZSgobykgPT4ge1xuICAgICAgICBpZiAobyBpbnN0YW5jZW9mIFRIUkVFLlNraW5uZWRNZXNoICYmIG8ubWF0ZXJpYWwpIHtcbiAgICAgICAgICBvLm1hdGVyaWFsLnNraW5uaW5nID0gISEoKG8uZ2VvbWV0cnkgJiYgby5nZW9tZXRyeS5ib25lcykgfHwgW10pLmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHRoaXMubG9hZChvYmplY3QpO1xuICAgIH0pO1xuICB9LFxuXG4gIGxvYWQ6IGZ1bmN0aW9uIChtb2RlbCkge1xuICAgIHRoaXMubW9kZWwgPSBtb2RlbDtcbiAgICB0aGlzLmVsLnNldE9iamVjdDNEKCdtZXNoJywgbW9kZWwpO1xuICAgIHRoaXMuZWwuZW1pdCgnbW9kZWwtbG9hZGVkJywge2Zvcm1hdDogJ2pzb24nLCBtb2RlbDogbW9kZWx9KTtcbiAgfSxcblxuICByZW1vdmU6IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5tb2RlbCkgdGhpcy5lbC5yZW1vdmVPYmplY3QzRCgnbWVzaCcpO1xuICB9XG59KTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/loaders/object-model.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/misc/checkpoint.js":
/*!**************************************************************************************************!*\
  !*** ./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/misc/checkpoint.js ***!
  \**************************************************************************************************/
/***/ ((module) => {

eval("module.exports = AFRAME.registerComponent('checkpoint', {\n  schema: {\n    offset: {default: {x: 0, y: 0, z: 0}, type: 'vec3'}\n  },\n\n  init: function () {\n    this.active = false;\n    this.targetEl = null;\n    this.fire = this.fire.bind(this);\n    this.offset = new THREE.Vector3();\n  },\n\n  update: function () {\n    this.offset.copy(this.data.offset);\n  },\n\n  play: function () { this.el.addEventListener('click', this.fire); },\n  pause: function () { this.el.removeEventListener('click', this.fire); },\n  remove: function () { this.pause(); },\n\n  fire: function () {\n    const targetEl = this.el.sceneEl.querySelector('[checkpoint-controls]');\n    if (!targetEl) {\n      throw new Error('No `checkpoint-controls` component found.');\n    }\n    targetEl.components['checkpoint-controls'].setCheckpoint(this.el);\n  },\n\n  getOffset: function () {\n    return this.offset.copy(this.data.offset);\n  }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYWZyYW1lLWV4dHJhc0A3LjUuMS9ub2RlX21vZHVsZXMvYWZyYW1lLWV4dHJhcy9zcmMvbWlzYy9jaGVja3BvaW50LmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQSxhQUFhLFVBQVUsaUJBQWlCO0FBQ3hDLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUgsc0JBQXNCLCtDQUErQztBQUNyRSx1QkFBdUIsa0RBQWtEO0FBQ3pFLHdCQUF3QixlQUFlOztBQUV2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zbWFfcG9zdF9zY2FyY2l0eS8uL25vZGVfbW9kdWxlcy8ucG5wbS9hZnJhbWUtZXh0cmFzQDcuNS4xL25vZGVfbW9kdWxlcy9hZnJhbWUtZXh0cmFzL3NyYy9taXNjL2NoZWNrcG9pbnQuanM/YWIzYyJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IEFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgnY2hlY2twb2ludCcsIHtcbiAgc2NoZW1hOiB7XG4gICAgb2Zmc2V0OiB7ZGVmYXVsdDoge3g6IDAsIHk6IDAsIHo6IDB9LCB0eXBlOiAndmVjMyd9XG4gIH0sXG5cbiAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG4gICAgdGhpcy50YXJnZXRFbCA9IG51bGw7XG4gICAgdGhpcy5maXJlID0gdGhpcy5maXJlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vZmZzZXQgPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMub2Zmc2V0LmNvcHkodGhpcy5kYXRhLm9mZnNldCk7XG4gIH0sXG5cbiAgcGxheTogZnVuY3Rpb24gKCkgeyB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5maXJlKTsgfSxcbiAgcGF1c2U6IGZ1bmN0aW9uICgpIHsgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuZmlyZSk7IH0sXG4gIHJlbW92ZTogZnVuY3Rpb24gKCkgeyB0aGlzLnBhdXNlKCk7IH0sXG5cbiAgZmlyZTogZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IHRhcmdldEVsID0gdGhpcy5lbC5zY2VuZUVsLnF1ZXJ5U2VsZWN0b3IoJ1tjaGVja3BvaW50LWNvbnRyb2xzXScpO1xuICAgIGlmICghdGFyZ2V0RWwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignTm8gYGNoZWNrcG9pbnQtY29udHJvbHNgIGNvbXBvbmVudCBmb3VuZC4nKTtcbiAgICB9XG4gICAgdGFyZ2V0RWwuY29tcG9uZW50c1snY2hlY2twb2ludC1jb250cm9scyddLnNldENoZWNrcG9pbnQodGhpcy5lbCk7XG4gIH0sXG5cbiAgZ2V0T2Zmc2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMub2Zmc2V0LmNvcHkodGhpcy5kYXRhLm9mZnNldCk7XG4gIH1cbn0pO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/misc/checkpoint.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/misc/cube-env-map.js":
/*!****************************************************************************************************!*\
  !*** ./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/misc/cube-env-map.js ***!
  \****************************************************************************************************/
/***/ ((module) => {

eval("/**\n * @param  {Array<THREE.Material>|THREE.Material} material\n * @return {Array<THREE.Material>}\n */\nfunction ensureMaterialArray (material) {\n  if (!material) {\n    return [];\n  } else if (Array.isArray(material)) {\n    return material;\n  } else if (material.materials) {\n    return material.materials;\n  } else {\n    return [material];\n  }\n}\n\n/**\n * @param  {THREE.Object3D} mesh\n * @param  {Array<string>} materialNames\n * @param  {THREE.Texture} envMap\n * @param  {number} reflectivity  [description]\n */\nfunction applyEnvMap (mesh, materialNames, envMap, reflectivity) {\n  if (!mesh) return;\n\n  materialNames = materialNames || [];\n\n  mesh.traverse((node) => {\n\n    if (!node.isMesh) return;\n\n    const meshMaterials = ensureMaterialArray(node.material);\n\n    meshMaterials.forEach((material) => {\n\n      if (material && !('envMap' in material)) return;\n      if (materialNames.length && materialNames.indexOf(material.name) === -1) return;\n\n      material.envMap = envMap;\n      material.reflectivity = reflectivity;\n      material.needsUpdate = true;\n\n    });\n\n  });\n}\n\n/**\n * Specifies an envMap on an entity, without replacing any existing material\n * properties.\n */\nmodule.exports = AFRAME.registerComponent('cube-env-map', {\n  multiple: true,\n\n  schema: {\n    path: {default: ''},\n    extension: {default: 'jpg', oneOf: ['jpg', 'png']},\n    enableBackground: {default: false},\n    reflectivity: {default: 1, min: 0, max: 1},\n    materials: {default: []}\n  },\n\n  init: function () {\n    const data = this.data;\n\n    this.texture = new THREE.CubeTextureLoader().load([\n      data.path + 'posx.' + data.extension, data.path + 'negx.' + data.extension,\n      data.path + 'posy.' + data.extension, data.path + 'negy.' + data.extension,\n      data.path + 'posz.' + data.extension, data.path + 'negz.' + data.extension\n    ]);\n    this.texture.format = THREE.RGBAFormat;\n\n    this.object3dsetHandler = () => {\n      const mesh = this.el.getObject3D('mesh');\n      const data = this.data;\n      applyEnvMap(mesh, data.materials, this.texture, data.reflectivity);\n    };\n\n    this.object3dsetHandler();\n    this.el.addEventListener('object3dset', this.object3dsetHandler);\n    \n  },\n\n  update: function (oldData) {\n    const data = this.data;\n    const mesh = this.el.getObject3D('mesh');\n\n    let addedMaterialNames = [];\n    let removedMaterialNames = [];\n\n    if (data.materials.length) {\n      if (oldData.materials) {\n        addedMaterialNames = data.materials.filter((name) => !oldData.materials.includes(name));\n        removedMaterialNames = oldData.materials.filter((name) => !data.materials.includes(name));\n      } else {\n        addedMaterialNames = data.materials;\n      }\n    }\n    if (addedMaterialNames.length) {\n      applyEnvMap(mesh, addedMaterialNames, this.texture, data.reflectivity);\n    }\n    if (removedMaterialNames.length) {\n      applyEnvMap(mesh, removedMaterialNames, null, 1);\n    }\n\n    if (oldData.materials && data.reflectivity !== oldData.reflectivity) {\n      const maintainedMaterialNames = data.materials\n        .filter((name) => oldData.materials.includes(name));\n      if (maintainedMaterialNames.length) {\n        applyEnvMap(mesh, maintainedMaterialNames, this.texture, data.reflectivity);\n      }\n    }\n\n    if (this.data.enableBackground && !oldData.enableBackground) {\n      this.setBackground(this.texture);\n    } else if (!this.data.enableBackground && oldData.enableBackground) {\n      this.setBackground(null);\n    }\n  },\n\n  remove: function () {\n    this.el.removeEventListener('object3dset', this.object3dsetHandler);\n    const mesh = this.el.getObject3D('mesh');\n    const data = this.data;\n\n    applyEnvMap(mesh, data.materials, null, 1);\n    if (data.enableBackground) this.setBackground(null);\n  },\n\n  setBackground: function (texture) {\n    this.el.sceneEl.object3D.background = texture;\n  }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYWZyYW1lLWV4dHJhc0A3LjUuMS9ub2RlX21vZHVsZXMvYWZyYW1lLWV4dHJhcy9zcmMvbWlzYy9jdWJlLWVudi1tYXAuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQSxZQUFZLHNDQUFzQztBQUNsRCxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxJQUFJO0FBQ0o7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBO0FBQ0EsWUFBWSxnQkFBZ0I7QUFDNUIsWUFBWSxlQUFlO0FBQzNCLFlBQVksZUFBZTtBQUMzQixZQUFZLFFBQVE7QUFDcEI7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLEtBQUs7O0FBRUwsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFdBQVcsWUFBWTtBQUN2QixnQkFBZ0Isc0NBQXNDO0FBQ3RELHVCQUF1QixlQUFlO0FBQ3RDLG1CQUFtQiwyQkFBMkI7QUFDOUMsZ0JBQWdCO0FBQ2hCLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zbWFfcG9zdF9zY2FyY2l0eS8uL25vZGVfbW9kdWxlcy8ucG5wbS9hZnJhbWUtZXh0cmFzQDcuNS4xL25vZGVfbW9kdWxlcy9hZnJhbWUtZXh0cmFzL3NyYy9taXNjL2N1YmUtZW52LW1hcC5qcz9mMDc4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQHBhcmFtICB7QXJyYXk8VEhSRUUuTWF0ZXJpYWw+fFRIUkVFLk1hdGVyaWFsfSBtYXRlcmlhbFxuICogQHJldHVybiB7QXJyYXk8VEhSRUUuTWF0ZXJpYWw+fVxuICovXG5mdW5jdGlvbiBlbnN1cmVNYXRlcmlhbEFycmF5IChtYXRlcmlhbCkge1xuICBpZiAoIW1hdGVyaWFsKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkobWF0ZXJpYWwpKSB7XG4gICAgcmV0dXJuIG1hdGVyaWFsO1xuICB9IGVsc2UgaWYgKG1hdGVyaWFsLm1hdGVyaWFscykge1xuICAgIHJldHVybiBtYXRlcmlhbC5tYXRlcmlhbHM7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIFttYXRlcmlhbF07XG4gIH1cbn1cblxuLyoqXG4gKiBAcGFyYW0gIHtUSFJFRS5PYmplY3QzRH0gbWVzaFxuICogQHBhcmFtICB7QXJyYXk8c3RyaW5nPn0gbWF0ZXJpYWxOYW1lc1xuICogQHBhcmFtICB7VEhSRUUuVGV4dHVyZX0gZW52TWFwXG4gKiBAcGFyYW0gIHtudW1iZXJ9IHJlZmxlY3Rpdml0eSAgW2Rlc2NyaXB0aW9uXVxuICovXG5mdW5jdGlvbiBhcHBseUVudk1hcCAobWVzaCwgbWF0ZXJpYWxOYW1lcywgZW52TWFwLCByZWZsZWN0aXZpdHkpIHtcbiAgaWYgKCFtZXNoKSByZXR1cm47XG5cbiAgbWF0ZXJpYWxOYW1lcyA9IG1hdGVyaWFsTmFtZXMgfHwgW107XG5cbiAgbWVzaC50cmF2ZXJzZSgobm9kZSkgPT4ge1xuXG4gICAgaWYgKCFub2RlLmlzTWVzaCkgcmV0dXJuO1xuXG4gICAgY29uc3QgbWVzaE1hdGVyaWFscyA9IGVuc3VyZU1hdGVyaWFsQXJyYXkobm9kZS5tYXRlcmlhbCk7XG5cbiAgICBtZXNoTWF0ZXJpYWxzLmZvckVhY2goKG1hdGVyaWFsKSA9PiB7XG5cbiAgICAgIGlmIChtYXRlcmlhbCAmJiAhKCdlbnZNYXAnIGluIG1hdGVyaWFsKSkgcmV0dXJuO1xuICAgICAgaWYgKG1hdGVyaWFsTmFtZXMubGVuZ3RoICYmIG1hdGVyaWFsTmFtZXMuaW5kZXhPZihtYXRlcmlhbC5uYW1lKSA9PT0gLTEpIHJldHVybjtcblxuICAgICAgbWF0ZXJpYWwuZW52TWFwID0gZW52TWFwO1xuICAgICAgbWF0ZXJpYWwucmVmbGVjdGl2aXR5ID0gcmVmbGVjdGl2aXR5O1xuICAgICAgbWF0ZXJpYWwubmVlZHNVcGRhdGUgPSB0cnVlO1xuXG4gICAgfSk7XG5cbiAgfSk7XG59XG5cbi8qKlxuICogU3BlY2lmaWVzIGFuIGVudk1hcCBvbiBhbiBlbnRpdHksIHdpdGhvdXQgcmVwbGFjaW5nIGFueSBleGlzdGluZyBtYXRlcmlhbFxuICogcHJvcGVydGllcy5cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBBRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ2N1YmUtZW52LW1hcCcsIHtcbiAgbXVsdGlwbGU6IHRydWUsXG5cbiAgc2NoZW1hOiB7XG4gICAgcGF0aDoge2RlZmF1bHQ6ICcnfSxcbiAgICBleHRlbnNpb246IHtkZWZhdWx0OiAnanBnJywgb25lT2Y6IFsnanBnJywgJ3BuZyddfSxcbiAgICBlbmFibGVCYWNrZ3JvdW5kOiB7ZGVmYXVsdDogZmFsc2V9LFxuICAgIHJlZmxlY3Rpdml0eToge2RlZmF1bHQ6IDEsIG1pbjogMCwgbWF4OiAxfSxcbiAgICBtYXRlcmlhbHM6IHtkZWZhdWx0OiBbXX1cbiAgfSxcblxuICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTtcblxuICAgIHRoaXMudGV4dHVyZSA9IG5ldyBUSFJFRS5DdWJlVGV4dHVyZUxvYWRlcigpLmxvYWQoW1xuICAgICAgZGF0YS5wYXRoICsgJ3Bvc3guJyArIGRhdGEuZXh0ZW5zaW9uLCBkYXRhLnBhdGggKyAnbmVneC4nICsgZGF0YS5leHRlbnNpb24sXG4gICAgICBkYXRhLnBhdGggKyAncG9zeS4nICsgZGF0YS5leHRlbnNpb24sIGRhdGEucGF0aCArICduZWd5LicgKyBkYXRhLmV4dGVuc2lvbixcbiAgICAgIGRhdGEucGF0aCArICdwb3N6LicgKyBkYXRhLmV4dGVuc2lvbiwgZGF0YS5wYXRoICsgJ25lZ3ouJyArIGRhdGEuZXh0ZW5zaW9uXG4gICAgXSk7XG4gICAgdGhpcy50ZXh0dXJlLmZvcm1hdCA9IFRIUkVFLlJHQkFGb3JtYXQ7XG5cbiAgICB0aGlzLm9iamVjdDNkc2V0SGFuZGxlciA9ICgpID0+IHtcbiAgICAgIGNvbnN0IG1lc2ggPSB0aGlzLmVsLmdldE9iamVjdDNEKCdtZXNoJyk7XG4gICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhO1xuICAgICAgYXBwbHlFbnZNYXAobWVzaCwgZGF0YS5tYXRlcmlhbHMsIHRoaXMudGV4dHVyZSwgZGF0YS5yZWZsZWN0aXZpdHkpO1xuICAgIH07XG5cbiAgICB0aGlzLm9iamVjdDNkc2V0SGFuZGxlcigpO1xuICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignb2JqZWN0M2RzZXQnLCB0aGlzLm9iamVjdDNkc2V0SGFuZGxlcik7XG4gICAgXG4gIH0sXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiAob2xkRGF0YSkge1xuICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7XG4gICAgY29uc3QgbWVzaCA9IHRoaXMuZWwuZ2V0T2JqZWN0M0QoJ21lc2gnKTtcblxuICAgIGxldCBhZGRlZE1hdGVyaWFsTmFtZXMgPSBbXTtcbiAgICBsZXQgcmVtb3ZlZE1hdGVyaWFsTmFtZXMgPSBbXTtcblxuICAgIGlmIChkYXRhLm1hdGVyaWFscy5sZW5ndGgpIHtcbiAgICAgIGlmIChvbGREYXRhLm1hdGVyaWFscykge1xuICAgICAgICBhZGRlZE1hdGVyaWFsTmFtZXMgPSBkYXRhLm1hdGVyaWFscy5maWx0ZXIoKG5hbWUpID0+ICFvbGREYXRhLm1hdGVyaWFscy5pbmNsdWRlcyhuYW1lKSk7XG4gICAgICAgIHJlbW92ZWRNYXRlcmlhbE5hbWVzID0gb2xkRGF0YS5tYXRlcmlhbHMuZmlsdGVyKChuYW1lKSA9PiAhZGF0YS5tYXRlcmlhbHMuaW5jbHVkZXMobmFtZSkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWRkZWRNYXRlcmlhbE5hbWVzID0gZGF0YS5tYXRlcmlhbHM7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChhZGRlZE1hdGVyaWFsTmFtZXMubGVuZ3RoKSB7XG4gICAgICBhcHBseUVudk1hcChtZXNoLCBhZGRlZE1hdGVyaWFsTmFtZXMsIHRoaXMudGV4dHVyZSwgZGF0YS5yZWZsZWN0aXZpdHkpO1xuICAgIH1cbiAgICBpZiAocmVtb3ZlZE1hdGVyaWFsTmFtZXMubGVuZ3RoKSB7XG4gICAgICBhcHBseUVudk1hcChtZXNoLCByZW1vdmVkTWF0ZXJpYWxOYW1lcywgbnVsbCwgMSk7XG4gICAgfVxuXG4gICAgaWYgKG9sZERhdGEubWF0ZXJpYWxzICYmIGRhdGEucmVmbGVjdGl2aXR5ICE9PSBvbGREYXRhLnJlZmxlY3Rpdml0eSkge1xuICAgICAgY29uc3QgbWFpbnRhaW5lZE1hdGVyaWFsTmFtZXMgPSBkYXRhLm1hdGVyaWFsc1xuICAgICAgICAuZmlsdGVyKChuYW1lKSA9PiBvbGREYXRhLm1hdGVyaWFscy5pbmNsdWRlcyhuYW1lKSk7XG4gICAgICBpZiAobWFpbnRhaW5lZE1hdGVyaWFsTmFtZXMubGVuZ3RoKSB7XG4gICAgICAgIGFwcGx5RW52TWFwKG1lc2gsIG1haW50YWluZWRNYXRlcmlhbE5hbWVzLCB0aGlzLnRleHR1cmUsIGRhdGEucmVmbGVjdGl2aXR5KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5kYXRhLmVuYWJsZUJhY2tncm91bmQgJiYgIW9sZERhdGEuZW5hYmxlQmFja2dyb3VuZCkge1xuICAgICAgdGhpcy5zZXRCYWNrZ3JvdW5kKHRoaXMudGV4dHVyZSk7XG4gICAgfSBlbHNlIGlmICghdGhpcy5kYXRhLmVuYWJsZUJhY2tncm91bmQgJiYgb2xkRGF0YS5lbmFibGVCYWNrZ3JvdW5kKSB7XG4gICAgICB0aGlzLnNldEJhY2tncm91bmQobnVsbCk7XG4gICAgfVxuICB9LFxuXG4gIHJlbW92ZTogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignb2JqZWN0M2RzZXQnLCB0aGlzLm9iamVjdDNkc2V0SGFuZGxlcik7XG4gICAgY29uc3QgbWVzaCA9IHRoaXMuZWwuZ2V0T2JqZWN0M0QoJ21lc2gnKTtcbiAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhO1xuXG4gICAgYXBwbHlFbnZNYXAobWVzaCwgZGF0YS5tYXRlcmlhbHMsIG51bGwsIDEpO1xuICAgIGlmIChkYXRhLmVuYWJsZUJhY2tncm91bmQpIHRoaXMuc2V0QmFja2dyb3VuZChudWxsKTtcbiAgfSxcblxuICBzZXRCYWNrZ3JvdW5kOiBmdW5jdGlvbiAodGV4dHVyZSkge1xuICAgIHRoaXMuZWwuc2NlbmVFbC5vYmplY3QzRC5iYWNrZ3JvdW5kID0gdGV4dHVyZTtcbiAgfVxufSk7Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/misc/cube-env-map.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/misc/grab.js":
/*!********************************************************************************************!*\
  !*** ./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/misc/grab.js ***!
  \********************************************************************************************/
/***/ ((module) => {

eval("/* global CANNON */\n\n/**\n * Based on aframe/examples/showcase/tracked-controls.\n *\n * Handles events coming from the hand-controls.\n * Determines if the entity is grabbed or released.\n * Updates its position to move along the controller.\n */\nmodule.exports = AFRAME.registerComponent('grab', {\n  init: function () {\n    this.system = this.el.sceneEl.systems.physics;\n\n    this.GRABBED_STATE = 'grabbed';\n\n    this.grabbing = false;\n    this.hitEl =      /** @type {AFRAME.Element}    */ null;\n    this.physics =    /** @type {AFRAME.System}     */ this.el.sceneEl.systems.physics;\n    this.constraint = /** @type {CANNON.Constraint} */ null;\n\n    // Bind event handlers\n    this.onHit = this.onHit.bind(this);\n    this.onGripOpen = this.onGripOpen.bind(this);\n    this.onGripClose = this.onGripClose.bind(this);\n  },\n\n  play: function () {\n    const el = this.el;\n    el.addEventListener('hit', this.onHit);\n    el.addEventListener('gripdown', this.onGripClose);\n    el.addEventListener('gripup', this.onGripOpen);\n    el.addEventListener('trackpaddown', this.onGripClose);\n    el.addEventListener('trackpadup', this.onGripOpen);\n    el.addEventListener('triggerdown', this.onGripClose);\n    el.addEventListener('triggerup', this.onGripOpen);\n  },\n\n  pause: function () {\n    const el = this.el;\n    el.removeEventListener('hit', this.onHit);\n    el.removeEventListener('gripdown', this.onGripClose);\n    el.removeEventListener('gripup', this.onGripOpen);\n    el.removeEventListener('trackpaddown', this.onGripClose);\n    el.removeEventListener('trackpadup', this.onGripOpen);\n    el.removeEventListener('triggerdown', this.onGripClose);\n    el.removeEventListener('triggerup', this.onGripOpen);\n  },\n\n  onGripClose: function () {\n    this.grabbing = true;\n  },\n\n  onGripOpen: function () {\n    const hitEl = this.hitEl;\n    this.grabbing = false;\n    if (!hitEl) { return; }\n    hitEl.removeState(this.GRABBED_STATE);\n    this.hitEl = undefined;\n    this.system.removeConstraint(this.constraint);\n    this.constraint = null;\n  },\n\n  onHit: function (evt) {\n    const hitEl = evt.detail.el;\n    // If the element is already grabbed (it could be grabbed by another controller).\n    // If the hand is not grabbing the element does not stick.\n    // If we're already grabbing something you can't grab again.\n    if (hitEl.is(this.GRABBED_STATE) || !this.grabbing || this.hitEl) { return; }\n    hitEl.addState(this.GRABBED_STATE);\n    this.hitEl = hitEl;\n    this.constraint = new CANNON.LockConstraint(this.el.body, hitEl.body);\n    this.system.addConstraint(this.constraint);\n  }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYWZyYW1lLWV4dHJhc0A3LjUuMS9ub2RlX21vZHVsZXMvYWZyYW1lLWV4dHJhcy9zcmMvbWlzYy9ncmFiLmpzIiwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsaUNBQWlDLG1CQUFtQjtBQUNwRCxpQ0FBaUMsbUJBQW1CO0FBQ3BELGlDQUFpQyxtQkFBbUI7O0FBRXBEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0VBQXdFO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc21hX3Bvc3Rfc2NhcmNpdHkvLi9ub2RlX21vZHVsZXMvLnBucG0vYWZyYW1lLWV4dHJhc0A3LjUuMS9ub2RlX21vZHVsZXMvYWZyYW1lLWV4dHJhcy9zcmMvbWlzYy9ncmFiLmpzPzdjYmEiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZ2xvYmFsIENBTk5PTiAqL1xuXG4vKipcbiAqIEJhc2VkIG9uIGFmcmFtZS9leGFtcGxlcy9zaG93Y2FzZS90cmFja2VkLWNvbnRyb2xzLlxuICpcbiAqIEhhbmRsZXMgZXZlbnRzIGNvbWluZyBmcm9tIHRoZSBoYW5kLWNvbnRyb2xzLlxuICogRGV0ZXJtaW5lcyBpZiB0aGUgZW50aXR5IGlzIGdyYWJiZWQgb3IgcmVsZWFzZWQuXG4gKiBVcGRhdGVzIGl0cyBwb3NpdGlvbiB0byBtb3ZlIGFsb25nIHRoZSBjb250cm9sbGVyLlxuICovXG5tb2R1bGUuZXhwb3J0cyA9IEFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgnZ3JhYicsIHtcbiAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuc3lzdGVtID0gdGhpcy5lbC5zY2VuZUVsLnN5c3RlbXMucGh5c2ljcztcblxuICAgIHRoaXMuR1JBQkJFRF9TVEFURSA9ICdncmFiYmVkJztcblxuICAgIHRoaXMuZ3JhYmJpbmcgPSBmYWxzZTtcbiAgICB0aGlzLmhpdEVsID0gICAgICAvKiogQHR5cGUge0FGUkFNRS5FbGVtZW50fSAgICAqLyBudWxsO1xuICAgIHRoaXMucGh5c2ljcyA9ICAgIC8qKiBAdHlwZSB7QUZSQU1FLlN5c3RlbX0gICAgICovIHRoaXMuZWwuc2NlbmVFbC5zeXN0ZW1zLnBoeXNpY3M7XG4gICAgdGhpcy5jb25zdHJhaW50ID0gLyoqIEB0eXBlIHtDQU5OT04uQ29uc3RyYWludH0gKi8gbnVsbDtcblxuICAgIC8vIEJpbmQgZXZlbnQgaGFuZGxlcnNcbiAgICB0aGlzLm9uSGl0ID0gdGhpcy5vbkhpdC5iaW5kKHRoaXMpO1xuICAgIHRoaXMub25HcmlwT3BlbiA9IHRoaXMub25HcmlwT3Blbi5iaW5kKHRoaXMpO1xuICAgIHRoaXMub25HcmlwQ2xvc2UgPSB0aGlzLm9uR3JpcENsb3NlLmJpbmQodGhpcyk7XG4gIH0sXG5cbiAgcGxheTogZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IGVsID0gdGhpcy5lbDtcbiAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdoaXQnLCB0aGlzLm9uSGl0KTtcbiAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdncmlwZG93bicsIHRoaXMub25HcmlwQ2xvc2UpO1xuICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2dyaXB1cCcsIHRoaXMub25HcmlwT3Blbik7XG4gICAgZWwuYWRkRXZlbnRMaXN0ZW5lcigndHJhY2twYWRkb3duJywgdGhpcy5vbkdyaXBDbG9zZSk7XG4gICAgZWwuYWRkRXZlbnRMaXN0ZW5lcigndHJhY2twYWR1cCcsIHRoaXMub25HcmlwT3Blbik7XG4gICAgZWwuYWRkRXZlbnRMaXN0ZW5lcigndHJpZ2dlcmRvd24nLCB0aGlzLm9uR3JpcENsb3NlKTtcbiAgICBlbC5hZGRFdmVudExpc3RlbmVyKCd0cmlnZ2VydXAnLCB0aGlzLm9uR3JpcE9wZW4pO1xuICB9LFxuXG4gIHBhdXNlOiBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgZWwgPSB0aGlzLmVsO1xuICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2hpdCcsIHRoaXMub25IaXQpO1xuICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2dyaXBkb3duJywgdGhpcy5vbkdyaXBDbG9zZSk7XG4gICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignZ3JpcHVwJywgdGhpcy5vbkdyaXBPcGVuKTtcbiAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKCd0cmFja3BhZGRvd24nLCB0aGlzLm9uR3JpcENsb3NlKTtcbiAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKCd0cmFja3BhZHVwJywgdGhpcy5vbkdyaXBPcGVuKTtcbiAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKCd0cmlnZ2VyZG93bicsIHRoaXMub25HcmlwQ2xvc2UpO1xuICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RyaWdnZXJ1cCcsIHRoaXMub25HcmlwT3Blbik7XG4gIH0sXG5cbiAgb25HcmlwQ2xvc2U6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmdyYWJiaW5nID0gdHJ1ZTtcbiAgfSxcblxuICBvbkdyaXBPcGVuOiBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgaGl0RWwgPSB0aGlzLmhpdEVsO1xuICAgIHRoaXMuZ3JhYmJpbmcgPSBmYWxzZTtcbiAgICBpZiAoIWhpdEVsKSB7IHJldHVybjsgfVxuICAgIGhpdEVsLnJlbW92ZVN0YXRlKHRoaXMuR1JBQkJFRF9TVEFURSk7XG4gICAgdGhpcy5oaXRFbCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLnN5c3RlbS5yZW1vdmVDb25zdHJhaW50KHRoaXMuY29uc3RyYWludCk7XG4gICAgdGhpcy5jb25zdHJhaW50ID0gbnVsbDtcbiAgfSxcblxuICBvbkhpdDogZnVuY3Rpb24gKGV2dCkge1xuICAgIGNvbnN0IGhpdEVsID0gZXZ0LmRldGFpbC5lbDtcbiAgICAvLyBJZiB0aGUgZWxlbWVudCBpcyBhbHJlYWR5IGdyYWJiZWQgKGl0IGNvdWxkIGJlIGdyYWJiZWQgYnkgYW5vdGhlciBjb250cm9sbGVyKS5cbiAgICAvLyBJZiB0aGUgaGFuZCBpcyBub3QgZ3JhYmJpbmcgdGhlIGVsZW1lbnQgZG9lcyBub3Qgc3RpY2suXG4gICAgLy8gSWYgd2UncmUgYWxyZWFkeSBncmFiYmluZyBzb21ldGhpbmcgeW91IGNhbid0IGdyYWIgYWdhaW4uXG4gICAgaWYgKGhpdEVsLmlzKHRoaXMuR1JBQkJFRF9TVEFURSkgfHwgIXRoaXMuZ3JhYmJpbmcgfHwgdGhpcy5oaXRFbCkgeyByZXR1cm47IH1cbiAgICBoaXRFbC5hZGRTdGF0ZSh0aGlzLkdSQUJCRURfU1RBVEUpO1xuICAgIHRoaXMuaGl0RWwgPSBoaXRFbDtcbiAgICB0aGlzLmNvbnN0cmFpbnQgPSBuZXcgQ0FOTk9OLkxvY2tDb25zdHJhaW50KHRoaXMuZWwuYm9keSwgaGl0RWwuYm9keSk7XG4gICAgdGhpcy5zeXN0ZW0uYWRkQ29uc3RyYWludCh0aGlzLmNvbnN0cmFpbnQpO1xuICB9XG59KTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/misc/grab.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/misc/index.js":
/*!*********************************************************************************************!*\
  !*** ./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/misc/index.js ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("__webpack_require__(/*! ./checkpoint */ \"(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/misc/checkpoint.js\");\n__webpack_require__(/*! ./cube-env-map */ \"(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/misc/cube-env-map.js\");\n__webpack_require__(/*! ./grab */ \"(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/misc/grab.js\");\n__webpack_require__(/*! ./normal-material */ \"(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/misc/normal-material.js\");\n__webpack_require__(/*! ./sphere-collider */ \"(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/misc/sphere-collider.js\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYWZyYW1lLWV4dHJhc0A3LjUuMS9ub2RlX21vZHVsZXMvYWZyYW1lLWV4dHJhcy9zcmMvbWlzYy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiQUFBQSxtQkFBTyxDQUFDLHNIQUFjO0FBQ3RCLG1CQUFPLENBQUMsMEhBQWdCO0FBQ3hCLG1CQUFPLENBQUMsMEdBQVE7QUFDaEIsbUJBQU8sQ0FBQyxnSUFBbUI7QUFDM0IsbUJBQU8sQ0FBQyxnSUFBbUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zbWFfcG9zdF9zY2FyY2l0eS8uL25vZGVfbW9kdWxlcy8ucG5wbS9hZnJhbWUtZXh0cmFzQDcuNS4xL25vZGVfbW9kdWxlcy9hZnJhbWUtZXh0cmFzL3NyYy9taXNjL2luZGV4LmpzPzIzNzgiXSwic291cmNlc0NvbnRlbnQiOlsicmVxdWlyZSgnLi9jaGVja3BvaW50Jyk7XG5yZXF1aXJlKCcuL2N1YmUtZW52LW1hcCcpO1xucmVxdWlyZSgnLi9ncmFiJyk7XG5yZXF1aXJlKCcuL25vcm1hbC1tYXRlcmlhbCcpO1xucmVxdWlyZSgnLi9zcGhlcmUtY29sbGlkZXInKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/misc/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/misc/normal-material.js":
/*!*******************************************************************************************************!*\
  !*** ./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/misc/normal-material.js ***!
  \*******************************************************************************************************/
/***/ ((module) => {

eval("/**\n * Recursively applies a MeshNormalMaterial to the entity, such that\n * face colors are determined by their orientation. Helpful for\n * debugging geometry\n */\nmodule.exports = AFRAME.registerComponent('normal-material', {\n  init: function () {\n    this.material = new THREE.MeshNormalMaterial({flatShading: true});\n    this.applyMaterial = this.applyMaterial.bind(this);\n    this.el.addEventListener('object3dset', this.applyMaterial);\n    this.applyMaterial();\n  },\n\n  remove: function () {\n    this.el.removeEventListener('object3dset', this.applyMaterial);\n  },\n\n  applyMaterial: function () {\n    this.el.object3D.traverse((node) => {\n      if (node.isMesh) node.material = this.material;\n    });\n  }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYWZyYW1lLWV4dHJhc0A3LjUuMS9ub2RlX21vZHVsZXMvYWZyYW1lLWV4dHJhcy9zcmMvbWlzYy9ub3JtYWwtbWF0ZXJpYWwuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0Qsa0JBQWtCO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3NtYV9wb3N0X3NjYXJjaXR5Ly4vbm9kZV9tb2R1bGVzLy5wbnBtL2FmcmFtZS1leHRyYXNANy41LjEvbm9kZV9tb2R1bGVzL2FmcmFtZS1leHRyYXMvc3JjL21pc2Mvbm9ybWFsLW1hdGVyaWFsLmpzPzFjOWMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBSZWN1cnNpdmVseSBhcHBsaWVzIGEgTWVzaE5vcm1hbE1hdGVyaWFsIHRvIHRoZSBlbnRpdHksIHN1Y2ggdGhhdFxuICogZmFjZSBjb2xvcnMgYXJlIGRldGVybWluZWQgYnkgdGhlaXIgb3JpZW50YXRpb24uIEhlbHBmdWwgZm9yXG4gKiBkZWJ1Z2dpbmcgZ2VvbWV0cnlcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBBRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ25vcm1hbC1tYXRlcmlhbCcsIHtcbiAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMubWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaE5vcm1hbE1hdGVyaWFsKHtmbGF0U2hhZGluZzogdHJ1ZX0pO1xuICAgIHRoaXMuYXBwbHlNYXRlcmlhbCA9IHRoaXMuYXBwbHlNYXRlcmlhbC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignb2JqZWN0M2RzZXQnLCB0aGlzLmFwcGx5TWF0ZXJpYWwpO1xuICAgIHRoaXMuYXBwbHlNYXRlcmlhbCgpO1xuICB9LFxuXG4gIHJlbW92ZTogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignb2JqZWN0M2RzZXQnLCB0aGlzLmFwcGx5TWF0ZXJpYWwpO1xuICB9LFxuXG4gIGFwcGx5TWF0ZXJpYWw6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmVsLm9iamVjdDNELnRyYXZlcnNlKChub2RlKSA9PiB7XG4gICAgICBpZiAobm9kZS5pc01lc2gpIG5vZGUubWF0ZXJpYWwgPSB0aGlzLm1hdGVyaWFsO1xuICAgIH0pO1xuICB9XG59KTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/misc/normal-material.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/misc/sphere-collider.js":
/*!*******************************************************************************************************!*\
  !*** ./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/misc/sphere-collider.js ***!
  \*******************************************************************************************************/
/***/ ((module) => {

eval("/**\n * Based on aframe/examples/showcase/tracked-controls.\n *\n * Implement bounding sphere collision detection for entities with a mesh.\n * Sets the specified state on the intersected entities.\n *\n * @property {string} objects - Selector of the entities to test for collision.\n * @property {string} state - State to set on collided entities.\n *\n */\nmodule.exports = AFRAME.registerComponent('sphere-collider', {\n  schema: {\n    enabled: {default: true},\n    interval: {default: 80},\n    objects: {default: ''},\n    state: {default: 'collided'},\n    radius: {default: 0.05},\n    watch: {default: true}\n  },\n\n  init: function () {\n    /** @type {MutationObserver} */\n    this.observer = null;\n    /** @type {Array<Element>} Elements to watch for collisions. */\n    this.els = [];\n    /** @type {Array<Element>} Elements currently in collision state. */\n    this.collisions = [];\n    this.prevCheckTime = undefined;\n\n    this.eventDetail = {};\n    this.handleHit = this.handleHit.bind(this);\n    this.handleHitEnd = this.handleHitEnd.bind(this);\n  },\n\n  play: function () {\n    const sceneEl = this.el.sceneEl;\n\n    if (this.data.watch) {\n      this.observer = new MutationObserver(this.update.bind(this, null));\n      this.observer.observe(sceneEl, {childList: true, subtree: true});\n    }\n  },\n\n  pause: function () {\n    if (this.observer) {\n      this.observer.disconnect();\n      this.observer = null;\n    }\n  },\n\n  /**\n   * Update list of entities to test for collision.\n   */\n  update: function () {\n    const data = this.data;\n    let objectEls;\n\n    // Push entities into list of els to intersect.\n    if (data.objects) {\n      objectEls = this.el.sceneEl.querySelectorAll(data.objects);\n    } else {\n      // If objects not defined, intersect with everything.\n      objectEls = this.el.sceneEl.children;\n    }\n    // Convert from NodeList to Array\n    this.els = Array.prototype.slice.call(objectEls);\n  },\n\n  tick: (function () {\n    const position = new THREE.Vector3(),\n        meshPosition = new THREE.Vector3(),\n        colliderScale = new THREE.Vector3(),\n        size = new THREE.Vector3(),\n        box = new THREE.Box3(),\n        collisions = [],\n        distanceMap = new Map();\n    return function (time) {\n      if (!this.data.enabled) { return; }\n\n      // Only check for intersection if interval time has passed.\n      const prevCheckTime = this.prevCheckTime;\n      if (prevCheckTime && (time - prevCheckTime < this.data.interval)) { return; }\n      // Update check time.\n      this.prevCheckTime = time;\n\n      const el = this.el,\n          data = this.data,\n          mesh = el.getObject3D('mesh');\n      let colliderRadius;\n\n      if (!mesh) { return; }\n\n      collisions.length = 0;\n      distanceMap.clear();\n      el.object3D.getWorldPosition(position);\n      el.object3D.getWorldScale(colliderScale);\n      colliderRadius = data.radius * scaleFactor(colliderScale);\n      // Update collision list.\n      this.els.forEach(intersect);\n\n      // Emit events and add collision states, in order of distance.\n      collisions\n        .sort((a, b) => distanceMap.get(a) > distanceMap.get(b) ? 1 : -1)\n        .forEach(this.handleHit);\n\n      // Remove collision state from other elements.\n      this.collisions\n        .filter((el) => !distanceMap.has(el))\n        .forEach(this.handleHitEnd);\n\n      // Store new collisions\n      copyArray(this.collisions, collisions);\n\n      // Bounding sphere collision detection\n      function intersect (el) {\n        let radius, mesh, distance, extent;\n\n        if (!el.isEntity) { return; }\n\n        mesh = el.getObject3D('mesh');\n\n        if (!mesh) { return; }\n\n        box.setFromObject(mesh).getSize(size);\n        extent = Math.max(size.x, size.y, size.z) / 2;\n        radius = Math.sqrt(2 * extent * extent);\n        box.getCenter(meshPosition);\n\n        if (!radius) { return; }\n\n        distance = position.distanceTo(meshPosition);\n        if (distance < radius + colliderRadius) {\n          collisions.push(el);\n          distanceMap.set(el, distance);\n        }\n      }\n      // use max of scale factors to maintain bounding sphere collision\n      function scaleFactor (scaleVec) {\n        return Math.max(scaleVec.x, scaleVec.y, scaleVec.z);\n      }\n    };\n  })(),\n\n  handleHit: function (targetEl) {\n    targetEl.emit('hit');\n    targetEl.addState(this.data.state);\n    this.eventDetail.el = targetEl;\n    this.el.emit('hit', this.eventDetail);\n  },\n  handleHitEnd: function (targetEl) {\n    targetEl.emit('hitend');\n    targetEl.removeState(this.data.state);\n    this.eventDetail.el = targetEl;\n    this.el.emit('hitend', this.eventDetail);\n  }\n});\n\nfunction copyArray (dest, source) {\n  dest.length = 0;\n  for (let i = 0; i < source.length; i++) { dest[i] = source[i]; }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYWZyYW1lLWV4dHJhc0A3LjUuMS9ub2RlX21vZHVsZXMvYWZyYW1lLWV4dHJhcy9zcmMvbWlzYy9zcGhlcmUtY29sbGlkZXIuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxRQUFRO0FBQ3RCLGNBQWMsUUFBUTtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsY0FBYztBQUM1QixlQUFlLFlBQVk7QUFDM0IsY0FBYyxZQUFZO0FBQzFCLFlBQVksb0JBQW9CO0FBQ2hDLGFBQWEsY0FBYztBQUMzQixZQUFZO0FBQ1osR0FBRzs7QUFFSDtBQUNBLGVBQWUsa0JBQWtCO0FBQ2pDO0FBQ0EsZUFBZSxnQkFBZ0I7QUFDL0I7QUFDQSxlQUFlLGdCQUFnQjtBQUMvQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esc0NBQXNDLCtCQUErQjtBQUNyRTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0M7O0FBRWhDO0FBQ0E7QUFDQSwwRUFBMEU7QUFDMUU7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxtQkFBbUI7O0FBRW5CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLDRCQUE0Qjs7QUFFNUI7O0FBRUEscUJBQXFCOztBQUVyQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQSx1QkFBdUI7O0FBRXZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0Esa0JBQWtCLG1CQUFtQixPQUFPO0FBQzVDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc21hX3Bvc3Rfc2NhcmNpdHkvLi9ub2RlX21vZHVsZXMvLnBucG0vYWZyYW1lLWV4dHJhc0A3LjUuMS9ub2RlX21vZHVsZXMvYWZyYW1lLWV4dHJhcy9zcmMvbWlzYy9zcGhlcmUtY29sbGlkZXIuanM/NDBiNiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEJhc2VkIG9uIGFmcmFtZS9leGFtcGxlcy9zaG93Y2FzZS90cmFja2VkLWNvbnRyb2xzLlxuICpcbiAqIEltcGxlbWVudCBib3VuZGluZyBzcGhlcmUgY29sbGlzaW9uIGRldGVjdGlvbiBmb3IgZW50aXRpZXMgd2l0aCBhIG1lc2guXG4gKiBTZXRzIHRoZSBzcGVjaWZpZWQgc3RhdGUgb24gdGhlIGludGVyc2VjdGVkIGVudGl0aWVzLlxuICpcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBvYmplY3RzIC0gU2VsZWN0b3Igb2YgdGhlIGVudGl0aWVzIHRvIHRlc3QgZm9yIGNvbGxpc2lvbi5cbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBzdGF0ZSAtIFN0YXRlIHRvIHNldCBvbiBjb2xsaWRlZCBlbnRpdGllcy5cbiAqXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gQUZSQU1FLnJlZ2lzdGVyQ29tcG9uZW50KCdzcGhlcmUtY29sbGlkZXInLCB7XG4gIHNjaGVtYToge1xuICAgIGVuYWJsZWQ6IHtkZWZhdWx0OiB0cnVlfSxcbiAgICBpbnRlcnZhbDoge2RlZmF1bHQ6IDgwfSxcbiAgICBvYmplY3RzOiB7ZGVmYXVsdDogJyd9LFxuICAgIHN0YXRlOiB7ZGVmYXVsdDogJ2NvbGxpZGVkJ30sXG4gICAgcmFkaXVzOiB7ZGVmYXVsdDogMC4wNX0sXG4gICAgd2F0Y2g6IHtkZWZhdWx0OiB0cnVlfVxuICB9LFxuXG4gIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAvKiogQHR5cGUge011dGF0aW9uT2JzZXJ2ZXJ9ICovXG4gICAgdGhpcy5vYnNlcnZlciA9IG51bGw7XG4gICAgLyoqIEB0eXBlIHtBcnJheTxFbGVtZW50Pn0gRWxlbWVudHMgdG8gd2F0Y2ggZm9yIGNvbGxpc2lvbnMuICovXG4gICAgdGhpcy5lbHMgPSBbXTtcbiAgICAvKiogQHR5cGUge0FycmF5PEVsZW1lbnQ+fSBFbGVtZW50cyBjdXJyZW50bHkgaW4gY29sbGlzaW9uIHN0YXRlLiAqL1xuICAgIHRoaXMuY29sbGlzaW9ucyA9IFtdO1xuICAgIHRoaXMucHJldkNoZWNrVGltZSA9IHVuZGVmaW5lZDtcblxuICAgIHRoaXMuZXZlbnREZXRhaWwgPSB7fTtcbiAgICB0aGlzLmhhbmRsZUhpdCA9IHRoaXMuaGFuZGxlSGl0LmJpbmQodGhpcyk7XG4gICAgdGhpcy5oYW5kbGVIaXRFbmQgPSB0aGlzLmhhbmRsZUhpdEVuZC5iaW5kKHRoaXMpO1xuICB9LFxuXG4gIHBsYXk6IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBzY2VuZUVsID0gdGhpcy5lbC5zY2VuZUVsO1xuXG4gICAgaWYgKHRoaXMuZGF0YS53YXRjaCkge1xuICAgICAgdGhpcy5vYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKHRoaXMudXBkYXRlLmJpbmQodGhpcywgbnVsbCkpO1xuICAgICAgdGhpcy5vYnNlcnZlci5vYnNlcnZlKHNjZW5lRWwsIHtjaGlsZExpc3Q6IHRydWUsIHN1YnRyZWU6IHRydWV9KTtcbiAgICB9XG4gIH0sXG5cbiAgcGF1c2U6IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5vYnNlcnZlcikge1xuICAgICAgdGhpcy5vYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICB0aGlzLm9ic2VydmVyID0gbnVsbDtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBsaXN0IG9mIGVudGl0aWVzIHRvIHRlc3QgZm9yIGNvbGxpc2lvbi5cbiAgICovXG4gIHVwZGF0ZTogZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7XG4gICAgbGV0IG9iamVjdEVscztcblxuICAgIC8vIFB1c2ggZW50aXRpZXMgaW50byBsaXN0IG9mIGVscyB0byBpbnRlcnNlY3QuXG4gICAgaWYgKGRhdGEub2JqZWN0cykge1xuICAgICAgb2JqZWN0RWxzID0gdGhpcy5lbC5zY2VuZUVsLnF1ZXJ5U2VsZWN0b3JBbGwoZGF0YS5vYmplY3RzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gSWYgb2JqZWN0cyBub3QgZGVmaW5lZCwgaW50ZXJzZWN0IHdpdGggZXZlcnl0aGluZy5cbiAgICAgIG9iamVjdEVscyA9IHRoaXMuZWwuc2NlbmVFbC5jaGlsZHJlbjtcbiAgICB9XG4gICAgLy8gQ29udmVydCBmcm9tIE5vZGVMaXN0IHRvIEFycmF5XG4gICAgdGhpcy5lbHMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChvYmplY3RFbHMpO1xuICB9LFxuXG4gIHRpY2s6IChmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgcG9zaXRpb24gPSBuZXcgVEhSRUUuVmVjdG9yMygpLFxuICAgICAgICBtZXNoUG9zaXRpb24gPSBuZXcgVEhSRUUuVmVjdG9yMygpLFxuICAgICAgICBjb2xsaWRlclNjYWxlID0gbmV3IFRIUkVFLlZlY3RvcjMoKSxcbiAgICAgICAgc2l6ZSA9IG5ldyBUSFJFRS5WZWN0b3IzKCksXG4gICAgICAgIGJveCA9IG5ldyBUSFJFRS5Cb3gzKCksXG4gICAgICAgIGNvbGxpc2lvbnMgPSBbXSxcbiAgICAgICAgZGlzdGFuY2VNYXAgPSBuZXcgTWFwKCk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0aW1lKSB7XG4gICAgICBpZiAoIXRoaXMuZGF0YS5lbmFibGVkKSB7IHJldHVybjsgfVxuXG4gICAgICAvLyBPbmx5IGNoZWNrIGZvciBpbnRlcnNlY3Rpb24gaWYgaW50ZXJ2YWwgdGltZSBoYXMgcGFzc2VkLlxuICAgICAgY29uc3QgcHJldkNoZWNrVGltZSA9IHRoaXMucHJldkNoZWNrVGltZTtcbiAgICAgIGlmIChwcmV2Q2hlY2tUaW1lICYmICh0aW1lIC0gcHJldkNoZWNrVGltZSA8IHRoaXMuZGF0YS5pbnRlcnZhbCkpIHsgcmV0dXJuOyB9XG4gICAgICAvLyBVcGRhdGUgY2hlY2sgdGltZS5cbiAgICAgIHRoaXMucHJldkNoZWNrVGltZSA9IHRpbWU7XG5cbiAgICAgIGNvbnN0IGVsID0gdGhpcy5lbCxcbiAgICAgICAgICBkYXRhID0gdGhpcy5kYXRhLFxuICAgICAgICAgIG1lc2ggPSBlbC5nZXRPYmplY3QzRCgnbWVzaCcpO1xuICAgICAgbGV0IGNvbGxpZGVyUmFkaXVzO1xuXG4gICAgICBpZiAoIW1lc2gpIHsgcmV0dXJuOyB9XG5cbiAgICAgIGNvbGxpc2lvbnMubGVuZ3RoID0gMDtcbiAgICAgIGRpc3RhbmNlTWFwLmNsZWFyKCk7XG4gICAgICBlbC5vYmplY3QzRC5nZXRXb3JsZFBvc2l0aW9uKHBvc2l0aW9uKTtcbiAgICAgIGVsLm9iamVjdDNELmdldFdvcmxkU2NhbGUoY29sbGlkZXJTY2FsZSk7XG4gICAgICBjb2xsaWRlclJhZGl1cyA9IGRhdGEucmFkaXVzICogc2NhbGVGYWN0b3IoY29sbGlkZXJTY2FsZSk7XG4gICAgICAvLyBVcGRhdGUgY29sbGlzaW9uIGxpc3QuXG4gICAgICB0aGlzLmVscy5mb3JFYWNoKGludGVyc2VjdCk7XG5cbiAgICAgIC8vIEVtaXQgZXZlbnRzIGFuZCBhZGQgY29sbGlzaW9uIHN0YXRlcywgaW4gb3JkZXIgb2YgZGlzdGFuY2UuXG4gICAgICBjb2xsaXNpb25zXG4gICAgICAgIC5zb3J0KChhLCBiKSA9PiBkaXN0YW5jZU1hcC5nZXQoYSkgPiBkaXN0YW5jZU1hcC5nZXQoYikgPyAxIDogLTEpXG4gICAgICAgIC5mb3JFYWNoKHRoaXMuaGFuZGxlSGl0KTtcblxuICAgICAgLy8gUmVtb3ZlIGNvbGxpc2lvbiBzdGF0ZSBmcm9tIG90aGVyIGVsZW1lbnRzLlxuICAgICAgdGhpcy5jb2xsaXNpb25zXG4gICAgICAgIC5maWx0ZXIoKGVsKSA9PiAhZGlzdGFuY2VNYXAuaGFzKGVsKSlcbiAgICAgICAgLmZvckVhY2godGhpcy5oYW5kbGVIaXRFbmQpO1xuXG4gICAgICAvLyBTdG9yZSBuZXcgY29sbGlzaW9uc1xuICAgICAgY29weUFycmF5KHRoaXMuY29sbGlzaW9ucywgY29sbGlzaW9ucyk7XG5cbiAgICAgIC8vIEJvdW5kaW5nIHNwaGVyZSBjb2xsaXNpb24gZGV0ZWN0aW9uXG4gICAgICBmdW5jdGlvbiBpbnRlcnNlY3QgKGVsKSB7XG4gICAgICAgIGxldCByYWRpdXMsIG1lc2gsIGRpc3RhbmNlLCBleHRlbnQ7XG5cbiAgICAgICAgaWYgKCFlbC5pc0VudGl0eSkgeyByZXR1cm47IH1cblxuICAgICAgICBtZXNoID0gZWwuZ2V0T2JqZWN0M0QoJ21lc2gnKTtcblxuICAgICAgICBpZiAoIW1lc2gpIHsgcmV0dXJuOyB9XG5cbiAgICAgICAgYm94LnNldEZyb21PYmplY3QobWVzaCkuZ2V0U2l6ZShzaXplKTtcbiAgICAgICAgZXh0ZW50ID0gTWF0aC5tYXgoc2l6ZS54LCBzaXplLnksIHNpemUueikgLyAyO1xuICAgICAgICByYWRpdXMgPSBNYXRoLnNxcnQoMiAqIGV4dGVudCAqIGV4dGVudCk7XG4gICAgICAgIGJveC5nZXRDZW50ZXIobWVzaFBvc2l0aW9uKTtcblxuICAgICAgICBpZiAoIXJhZGl1cykgeyByZXR1cm47IH1cblxuICAgICAgICBkaXN0YW5jZSA9IHBvc2l0aW9uLmRpc3RhbmNlVG8obWVzaFBvc2l0aW9uKTtcbiAgICAgICAgaWYgKGRpc3RhbmNlIDwgcmFkaXVzICsgY29sbGlkZXJSYWRpdXMpIHtcbiAgICAgICAgICBjb2xsaXNpb25zLnB1c2goZWwpO1xuICAgICAgICAgIGRpc3RhbmNlTWFwLnNldChlbCwgZGlzdGFuY2UpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyB1c2UgbWF4IG9mIHNjYWxlIGZhY3RvcnMgdG8gbWFpbnRhaW4gYm91bmRpbmcgc3BoZXJlIGNvbGxpc2lvblxuICAgICAgZnVuY3Rpb24gc2NhbGVGYWN0b3IgKHNjYWxlVmVjKSB7XG4gICAgICAgIHJldHVybiBNYXRoLm1heChzY2FsZVZlYy54LCBzY2FsZVZlYy55LCBzY2FsZVZlYy56KTtcbiAgICAgIH1cbiAgICB9O1xuICB9KSgpLFxuXG4gIGhhbmRsZUhpdDogZnVuY3Rpb24gKHRhcmdldEVsKSB7XG4gICAgdGFyZ2V0RWwuZW1pdCgnaGl0Jyk7XG4gICAgdGFyZ2V0RWwuYWRkU3RhdGUodGhpcy5kYXRhLnN0YXRlKTtcbiAgICB0aGlzLmV2ZW50RGV0YWlsLmVsID0gdGFyZ2V0RWw7XG4gICAgdGhpcy5lbC5lbWl0KCdoaXQnLCB0aGlzLmV2ZW50RGV0YWlsKTtcbiAgfSxcbiAgaGFuZGxlSGl0RW5kOiBmdW5jdGlvbiAodGFyZ2V0RWwpIHtcbiAgICB0YXJnZXRFbC5lbWl0KCdoaXRlbmQnKTtcbiAgICB0YXJnZXRFbC5yZW1vdmVTdGF0ZSh0aGlzLmRhdGEuc3RhdGUpO1xuICAgIHRoaXMuZXZlbnREZXRhaWwuZWwgPSB0YXJnZXRFbDtcbiAgICB0aGlzLmVsLmVtaXQoJ2hpdGVuZCcsIHRoaXMuZXZlbnREZXRhaWwpO1xuICB9XG59KTtcblxuZnVuY3Rpb24gY29weUFycmF5IChkZXN0LCBzb3VyY2UpIHtcbiAgZGVzdC5sZW5ndGggPSAwO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHNvdXJjZS5sZW5ndGg7IGkrKykgeyBkZXN0W2ldID0gc291cmNlW2ldOyB9XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/misc/sphere-collider.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/pathfinding/index.js":
/*!****************************************************************************************************!*\
  !*** ./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/pathfinding/index.js ***!
  \****************************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("__webpack_require__(/*! ./nav-mesh */ \"(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/pathfinding/nav-mesh.js\");\n__webpack_require__(/*! ./nav-agent */ \"(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/pathfinding/nav-agent.js\");\n__webpack_require__(/*! ./system */ \"(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/pathfinding/system.js\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYWZyYW1lLWV4dHJhc0A3LjUuMS9ub2RlX21vZHVsZXMvYWZyYW1lLWV4dHJhcy9zcmMvcGF0aGZpbmRpbmcvaW5kZXguanMiLCJtYXBwaW5ncyI6IkFBQUEsbUJBQU8sQ0FBQyx5SEFBWTtBQUNwQixtQkFBTyxDQUFDLDJIQUFhO0FBQ3JCLG1CQUFPLENBQUMscUhBQVUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zbWFfcG9zdF9zY2FyY2l0eS8uL25vZGVfbW9kdWxlcy8ucG5wbS9hZnJhbWUtZXh0cmFzQDcuNS4xL25vZGVfbW9kdWxlcy9hZnJhbWUtZXh0cmFzL3NyYy9wYXRoZmluZGluZy9pbmRleC5qcz81OGNlIl0sInNvdXJjZXNDb250ZW50IjpbInJlcXVpcmUoJy4vbmF2LW1lc2gnKTtcbnJlcXVpcmUoJy4vbmF2LWFnZW50Jyk7XG5yZXF1aXJlKCcuL3N5c3RlbScpO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/pathfinding/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/pathfinding/nav-agent.js":
/*!********************************************************************************************************!*\
  !*** ./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/pathfinding/nav-agent.js ***!
  \********************************************************************************************************/
/***/ ((module) => {

eval("module.exports = AFRAME.registerComponent('nav-agent', {\n  schema: {\n    destination: {type: 'vec3'},\n    active: {default: false},\n    speed: {default: 2}\n  },\n  init: function () {\n    this.system = this.el.sceneEl.systems.nav;\n    this.system.addAgent(this);\n    this.group = null;\n    this.path = [];\n    this.raycaster = new THREE.Raycaster();\n  },\n  remove: function () {\n    this.system.removeAgent(this);\n  },\n  update: function () {\n    this.path.length = 0;\n  },\n  updateNavLocation: function () {\n    this.group = null;\n    this.path = [];\n  },\n  tick: (function () {\n    const vDest = new THREE.Vector3();\n    const vDelta = new THREE.Vector3();\n    const vNext = new THREE.Vector3();\n\n    return function (t, dt) {\n      const el = this.el;\n      const data = this.data;\n      const raycaster = this.raycaster;\n      const speed = data.speed * dt / 1000;\n\n      if (!data.active) return;\n\n      // Use PatrolJS pathfinding system to get shortest path to target.\n      if (!this.path.length) {\n        const position = this.el.object3D.position;\n        this.group = this.group || this.system.getGroup(position);\n        this.path = this.system.getPath(position, vDest.copy(data.destination), this.group) || [];\n        el.emit('navigation-start');\n      }\n\n      // If no path is found, exit.\n      if (!this.path.length) {\n        console.warn('[nav] Unable to find path to %o.', data.destination);\n        this.el.setAttribute('nav-agent', {active: false});\n        el.emit('navigation-end');\n        return;\n      }\n\n      // Current segment is a vector from current position to next waypoint.\n      const vCurrent = el.object3D.position;\n      const vWaypoint = this.path[0];\n      vDelta.subVectors(vWaypoint, vCurrent);\n\n      const distance = vDelta.length();\n      let gazeTarget;\n\n      if (distance < speed) {\n        // If <1 step from current waypoint, discard it and move toward next.\n        this.path.shift();\n\n        // After discarding the last waypoint, exit pathfinding.\n        if (!this.path.length) {\n          this.el.setAttribute('nav-agent', {active: false});\n          el.emit('navigation-end');\n          return;\n        }\n\n        vNext.copy(vCurrent);\n        gazeTarget = this.path[0];\n      } else {\n        // If still far away from next waypoint, find next position for\n        // the current frame.\n        vNext.copy(vDelta.setLength(speed)).add(vCurrent);\n        gazeTarget = vWaypoint;\n      }\n\n      // Look at the next waypoint.\n      gazeTarget.y = vCurrent.y;\n      el.object3D.lookAt(gazeTarget);\n\n      // Raycast against the nav mesh, to keep the agent moving along the\n      // ground, not traveling in a straight line from higher to lower waypoints.\n      raycaster.ray.origin.copy(vNext);\n      raycaster.ray.origin.y += 1.5;\n      raycaster.ray.direction = {x:0, y:-1, z:0};\n      const intersections = raycaster.intersectObject(this.system.getNavMesh());\n\n      if (!intersections.length) {\n        // Raycasting failed. Step toward the waypoint and hope for the best.\n        vCurrent.copy(vNext);\n      } else {\n        // Re-project next position onto nav mesh.\n        vDelta.subVectors(intersections[0].point, vCurrent);\n        vCurrent.add(vDelta.setLength(speed));\n      }\n\n    };\n  }())\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYWZyYW1lLWV4dHJhc0A3LjUuMS9ub2RlX21vZHVsZXMvYWZyYW1lLWV4dHJhcy9zcmMvcGF0aGZpbmRpbmcvbmF2LWFnZW50LmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQSxrQkFBa0IsYUFBYTtBQUMvQixhQUFhLGVBQWU7QUFDNUIsWUFBWTtBQUNaLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxjQUFjO0FBQ3pEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsNkNBQTZDLGNBQWM7QUFDM0Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakM7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRztBQUNILENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zbWFfcG9zdF9zY2FyY2l0eS8uL25vZGVfbW9kdWxlcy8ucG5wbS9hZnJhbWUtZXh0cmFzQDcuNS4xL25vZGVfbW9kdWxlcy9hZnJhbWUtZXh0cmFzL3NyYy9wYXRoZmluZGluZy9uYXYtYWdlbnQuanM/YmNhNyJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IEFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgnbmF2LWFnZW50Jywge1xuICBzY2hlbWE6IHtcbiAgICBkZXN0aW5hdGlvbjoge3R5cGU6ICd2ZWMzJ30sXG4gICAgYWN0aXZlOiB7ZGVmYXVsdDogZmFsc2V9LFxuICAgIHNwZWVkOiB7ZGVmYXVsdDogMn1cbiAgfSxcbiAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuc3lzdGVtID0gdGhpcy5lbC5zY2VuZUVsLnN5c3RlbXMubmF2O1xuICAgIHRoaXMuc3lzdGVtLmFkZEFnZW50KHRoaXMpO1xuICAgIHRoaXMuZ3JvdXAgPSBudWxsO1xuICAgIHRoaXMucGF0aCA9IFtdO1xuICAgIHRoaXMucmF5Y2FzdGVyID0gbmV3IFRIUkVFLlJheWNhc3RlcigpO1xuICB9LFxuICByZW1vdmU6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLnN5c3RlbS5yZW1vdmVBZ2VudCh0aGlzKTtcbiAgfSxcbiAgdXBkYXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5wYXRoLmxlbmd0aCA9IDA7XG4gIH0sXG4gIHVwZGF0ZU5hdkxvY2F0aW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5ncm91cCA9IG51bGw7XG4gICAgdGhpcy5wYXRoID0gW107XG4gIH0sXG4gIHRpY2s6IChmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgdkRlc3QgPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuICAgIGNvbnN0IHZEZWx0YSA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7XG4gICAgY29uc3Qgdk5leHQgPSBuZXcgVEhSRUUuVmVjdG9yMygpO1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0LCBkdCkge1xuICAgICAgY29uc3QgZWwgPSB0aGlzLmVsO1xuICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICAgIGNvbnN0IHJheWNhc3RlciA9IHRoaXMucmF5Y2FzdGVyO1xuICAgICAgY29uc3Qgc3BlZWQgPSBkYXRhLnNwZWVkICogZHQgLyAxMDAwO1xuXG4gICAgICBpZiAoIWRhdGEuYWN0aXZlKSByZXR1cm47XG5cbiAgICAgIC8vIFVzZSBQYXRyb2xKUyBwYXRoZmluZGluZyBzeXN0ZW0gdG8gZ2V0IHNob3J0ZXN0IHBhdGggdG8gdGFyZ2V0LlxuICAgICAgaWYgKCF0aGlzLnBhdGgubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IHBvc2l0aW9uID0gdGhpcy5lbC5vYmplY3QzRC5wb3NpdGlvbjtcbiAgICAgICAgdGhpcy5ncm91cCA9IHRoaXMuZ3JvdXAgfHwgdGhpcy5zeXN0ZW0uZ2V0R3JvdXAocG9zaXRpb24pO1xuICAgICAgICB0aGlzLnBhdGggPSB0aGlzLnN5c3RlbS5nZXRQYXRoKHBvc2l0aW9uLCB2RGVzdC5jb3B5KGRhdGEuZGVzdGluYXRpb24pLCB0aGlzLmdyb3VwKSB8fCBbXTtcbiAgICAgICAgZWwuZW1pdCgnbmF2aWdhdGlvbi1zdGFydCcpO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiBubyBwYXRoIGlzIGZvdW5kLCBleGl0LlxuICAgICAgaWYgKCF0aGlzLnBhdGgubGVuZ3RoKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignW25hdl0gVW5hYmxlIHRvIGZpbmQgcGF0aCB0byAlby4nLCBkYXRhLmRlc3RpbmF0aW9uKTtcbiAgICAgICAgdGhpcy5lbC5zZXRBdHRyaWJ1dGUoJ25hdi1hZ2VudCcsIHthY3RpdmU6IGZhbHNlfSk7XG4gICAgICAgIGVsLmVtaXQoJ25hdmlnYXRpb24tZW5kJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gQ3VycmVudCBzZWdtZW50IGlzIGEgdmVjdG9yIGZyb20gY3VycmVudCBwb3NpdGlvbiB0byBuZXh0IHdheXBvaW50LlxuICAgICAgY29uc3QgdkN1cnJlbnQgPSBlbC5vYmplY3QzRC5wb3NpdGlvbjtcbiAgICAgIGNvbnN0IHZXYXlwb2ludCA9IHRoaXMucGF0aFswXTtcbiAgICAgIHZEZWx0YS5zdWJWZWN0b3JzKHZXYXlwb2ludCwgdkN1cnJlbnQpO1xuXG4gICAgICBjb25zdCBkaXN0YW5jZSA9IHZEZWx0YS5sZW5ndGgoKTtcbiAgICAgIGxldCBnYXplVGFyZ2V0O1xuXG4gICAgICBpZiAoZGlzdGFuY2UgPCBzcGVlZCkge1xuICAgICAgICAvLyBJZiA8MSBzdGVwIGZyb20gY3VycmVudCB3YXlwb2ludCwgZGlzY2FyZCBpdCBhbmQgbW92ZSB0b3dhcmQgbmV4dC5cbiAgICAgICAgdGhpcy5wYXRoLnNoaWZ0KCk7XG5cbiAgICAgICAgLy8gQWZ0ZXIgZGlzY2FyZGluZyB0aGUgbGFzdCB3YXlwb2ludCwgZXhpdCBwYXRoZmluZGluZy5cbiAgICAgICAgaWYgKCF0aGlzLnBhdGgubGVuZ3RoKSB7XG4gICAgICAgICAgdGhpcy5lbC5zZXRBdHRyaWJ1dGUoJ25hdi1hZ2VudCcsIHthY3RpdmU6IGZhbHNlfSk7XG4gICAgICAgICAgZWwuZW1pdCgnbmF2aWdhdGlvbi1lbmQnKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2TmV4dC5jb3B5KHZDdXJyZW50KTtcbiAgICAgICAgZ2F6ZVRhcmdldCA9IHRoaXMucGF0aFswXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIElmIHN0aWxsIGZhciBhd2F5IGZyb20gbmV4dCB3YXlwb2ludCwgZmluZCBuZXh0IHBvc2l0aW9uIGZvclxuICAgICAgICAvLyB0aGUgY3VycmVudCBmcmFtZS5cbiAgICAgICAgdk5leHQuY29weSh2RGVsdGEuc2V0TGVuZ3RoKHNwZWVkKSkuYWRkKHZDdXJyZW50KTtcbiAgICAgICAgZ2F6ZVRhcmdldCA9IHZXYXlwb2ludDtcbiAgICAgIH1cblxuICAgICAgLy8gTG9vayBhdCB0aGUgbmV4dCB3YXlwb2ludC5cbiAgICAgIGdhemVUYXJnZXQueSA9IHZDdXJyZW50Lnk7XG4gICAgICBlbC5vYmplY3QzRC5sb29rQXQoZ2F6ZVRhcmdldCk7XG5cbiAgICAgIC8vIFJheWNhc3QgYWdhaW5zdCB0aGUgbmF2IG1lc2gsIHRvIGtlZXAgdGhlIGFnZW50IG1vdmluZyBhbG9uZyB0aGVcbiAgICAgIC8vIGdyb3VuZCwgbm90IHRyYXZlbGluZyBpbiBhIHN0cmFpZ2h0IGxpbmUgZnJvbSBoaWdoZXIgdG8gbG93ZXIgd2F5cG9pbnRzLlxuICAgICAgcmF5Y2FzdGVyLnJheS5vcmlnaW4uY29weSh2TmV4dCk7XG4gICAgICByYXljYXN0ZXIucmF5Lm9yaWdpbi55ICs9IDEuNTtcbiAgICAgIHJheWNhc3Rlci5yYXkuZGlyZWN0aW9uID0ge3g6MCwgeTotMSwgejowfTtcbiAgICAgIGNvbnN0IGludGVyc2VjdGlvbnMgPSByYXljYXN0ZXIuaW50ZXJzZWN0T2JqZWN0KHRoaXMuc3lzdGVtLmdldE5hdk1lc2goKSk7XG5cbiAgICAgIGlmICghaW50ZXJzZWN0aW9ucy5sZW5ndGgpIHtcbiAgICAgICAgLy8gUmF5Y2FzdGluZyBmYWlsZWQuIFN0ZXAgdG93YXJkIHRoZSB3YXlwb2ludCBhbmQgaG9wZSBmb3IgdGhlIGJlc3QuXG4gICAgICAgIHZDdXJyZW50LmNvcHkodk5leHQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gUmUtcHJvamVjdCBuZXh0IHBvc2l0aW9uIG9udG8gbmF2IG1lc2guXG4gICAgICAgIHZEZWx0YS5zdWJWZWN0b3JzKGludGVyc2VjdGlvbnNbMF0ucG9pbnQsIHZDdXJyZW50KTtcbiAgICAgICAgdkN1cnJlbnQuYWRkKHZEZWx0YS5zZXRMZW5ndGgoc3BlZWQpKTtcbiAgICAgIH1cblxuICAgIH07XG4gIH0oKSlcbn0pO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/pathfinding/nav-agent.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/pathfinding/nav-mesh.js":
/*!*******************************************************************************************************!*\
  !*** ./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/pathfinding/nav-mesh.js ***!
  \*******************************************************************************************************/
/***/ ((module) => {

eval("/**\n * nav-mesh\n *\n * Waits for a mesh to be loaded on the current entity, then sets it as the\n * nav mesh in the pathfinding system.\n */\nmodule.exports = AFRAME.registerComponent('nav-mesh', {\n  schema: {\n    nodeName: {type: 'string'}\n  },\n\n  init: function () {\n    this.system = this.el.sceneEl.systems.nav;\n    this.hasLoadedNavMesh = false;\n    this.nodeName = this.data.nodeName;\n    this.el.addEventListener('object3dset', this.loadNavMesh.bind(this));\n  },\n\n  play: function () {\n    if (!this.hasLoadedNavMesh) this.loadNavMesh();\n  },\n\n  loadNavMesh: function () {\n    var self = this;\n    const object = this.el.getObject3D('mesh');\n    const scene = this.el.sceneEl.object3D;\n\n    if (!object) return;\n\n    let navMesh;\n    object.traverse((node) => {\n      if (node.isMesh &&\n          (!self.nodeName || node.name === self.nodeName)) navMesh = node;\n    });\n\n    if (!navMesh) return;\n\n    const navMeshGeometry = navMesh.geometry.clone();\n    navMesh.updateWorldMatrix(true, false);\n    navMeshGeometry.applyMatrix4(navMesh.matrixWorld);\n    this.system.setNavMeshGeometry(navMeshGeometry);\n    this.hasLoadedNavMesh = true;\n  }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYWZyYW1lLWV4dHJhc0A3LjUuMS9ub2RlX21vZHVsZXMvYWZyYW1lLWV4dHJhcy9zcmMvcGF0aGZpbmRpbmcvbmF2LW1lc2guanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZixHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc21hX3Bvc3Rfc2NhcmNpdHkvLi9ub2RlX21vZHVsZXMvLnBucG0vYWZyYW1lLWV4dHJhc0A3LjUuMS9ub2RlX21vZHVsZXMvYWZyYW1lLWV4dHJhcy9zcmMvcGF0aGZpbmRpbmcvbmF2LW1lc2guanM/YWE5ZiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIG5hdi1tZXNoXG4gKlxuICogV2FpdHMgZm9yIGEgbWVzaCB0byBiZSBsb2FkZWQgb24gdGhlIGN1cnJlbnQgZW50aXR5LCB0aGVuIHNldHMgaXQgYXMgdGhlXG4gKiBuYXYgbWVzaCBpbiB0aGUgcGF0aGZpbmRpbmcgc3lzdGVtLlxuICovXG5tb2R1bGUuZXhwb3J0cyA9IEFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgnbmF2LW1lc2gnLCB7XG4gIHNjaGVtYToge1xuICAgIG5vZGVOYW1lOiB7dHlwZTogJ3N0cmluZyd9XG4gIH0sXG5cbiAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuc3lzdGVtID0gdGhpcy5lbC5zY2VuZUVsLnN5c3RlbXMubmF2O1xuICAgIHRoaXMuaGFzTG9hZGVkTmF2TWVzaCA9IGZhbHNlO1xuICAgIHRoaXMubm9kZU5hbWUgPSB0aGlzLmRhdGEubm9kZU5hbWU7XG4gICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdvYmplY3QzZHNldCcsIHRoaXMubG9hZE5hdk1lc2guYmluZCh0aGlzKSk7XG4gIH0sXG5cbiAgcGxheTogZnVuY3Rpb24gKCkge1xuICAgIGlmICghdGhpcy5oYXNMb2FkZWROYXZNZXNoKSB0aGlzLmxvYWROYXZNZXNoKCk7XG4gIH0sXG5cbiAgbG9hZE5hdk1lc2g6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgY29uc3Qgb2JqZWN0ID0gdGhpcy5lbC5nZXRPYmplY3QzRCgnbWVzaCcpO1xuICAgIGNvbnN0IHNjZW5lID0gdGhpcy5lbC5zY2VuZUVsLm9iamVjdDNEO1xuXG4gICAgaWYgKCFvYmplY3QpIHJldHVybjtcblxuICAgIGxldCBuYXZNZXNoO1xuICAgIG9iamVjdC50cmF2ZXJzZSgobm9kZSkgPT4ge1xuICAgICAgaWYgKG5vZGUuaXNNZXNoICYmXG4gICAgICAgICAgKCFzZWxmLm5vZGVOYW1lIHx8IG5vZGUubmFtZSA9PT0gc2VsZi5ub2RlTmFtZSkpIG5hdk1lc2ggPSBub2RlO1xuICAgIH0pO1xuXG4gICAgaWYgKCFuYXZNZXNoKSByZXR1cm47XG5cbiAgICBjb25zdCBuYXZNZXNoR2VvbWV0cnkgPSBuYXZNZXNoLmdlb21ldHJ5LmNsb25lKCk7XG4gICAgbmF2TWVzaC51cGRhdGVXb3JsZE1hdHJpeCh0cnVlLCBmYWxzZSk7XG4gICAgbmF2TWVzaEdlb21ldHJ5LmFwcGx5TWF0cml4NChuYXZNZXNoLm1hdHJpeFdvcmxkKTtcbiAgICB0aGlzLnN5c3RlbS5zZXROYXZNZXNoR2VvbWV0cnkobmF2TWVzaEdlb21ldHJ5KTtcbiAgICB0aGlzLmhhc0xvYWRlZE5hdk1lc2ggPSB0cnVlO1xuICB9XG59KTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/pathfinding/nav-mesh.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/pathfinding/system.js":
/*!*****************************************************************************************************!*\
  !*** ./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/pathfinding/system.js ***!
  \*****************************************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("const { Pathfinding } = __webpack_require__(/*! three-pathfinding */ \"(ssr)/./node_modules/.pnpm/three-pathfinding@1.3.0_three@0.164.1/node_modules/three-pathfinding/dist/three-pathfinding.module.js\");\n\nconst pathfinder = new Pathfinding();\nconst ZONE = 'level';\n\n/**\n * nav\n *\n * Pathfinding system, using PatrolJS.\n */\nmodule.exports = AFRAME.registerSystem('nav', {\n  init: function () {\n    this.navMesh = null;\n    this.agents = new Set();\n  },\n\n  /**\n   * @param {THREE.Geometry} geometry\n   */\n  setNavMeshGeometry: function (geometry) {\n    this.navMesh = new THREE.Mesh(geometry);\n    pathfinder.setZoneData(ZONE, Pathfinding.createZone(geometry));\n    Array.from(this.agents).forEach((agent) => agent.updateNavLocation());\n  },\n\n  /**\n   * @return {THREE.Mesh}\n   */\n  getNavMesh: function () {\n    return this.navMesh;\n  },\n\n  /**\n   * @param {NavAgent} ctrl\n   */\n  addAgent: function (ctrl) {\n    this.agents.add(ctrl);\n  },\n\n  /**\n   * @param {NavAgent} ctrl\n   */\n  removeAgent: function (ctrl) {\n    this.agents.delete(ctrl);\n  },\n\n  /**\n   * @param  {THREE.Vector3} start\n   * @param  {THREE.Vector3} end\n   * @param  {number} groupID\n   * @return {Array<THREE.Vector3>}\n   */\n  getPath: function (start, end, groupID) {\n    return this.navMesh\n      ? pathfinder.findPath(start, end, ZONE, groupID)\n      : null;\n  },\n\n  /**\n   * @param {THREE.Vector3} position\n   * @return {number}\n   */\n  getGroup: function (position) {\n    return this.navMesh\n      ? pathfinder.getGroup(ZONE, position)\n      : null;\n  },\n\n  /**\n   * @param  {THREE.Vector3} position\n   * @param  {number} groupID\n   * @return {Node}\n   */\n  getNode: function (position, groupID) {\n    return this.navMesh\n      ? pathfinder.getClosestNode(position, ZONE, groupID, true)\n      : null;\n  },\n\n  /**\n   * @param  {THREE.Vector3} start Starting position.\n   * @param  {THREE.Vector3} end Desired ending position.\n   * @param  {number} groupID\n   * @param  {Node} node\n   * @param  {THREE.Vector3} endTarget (Output) Adjusted step end position.\n   * @return {Node} Current node, after step is taken.\n   */\n  clampStep: function (start, end, groupID, node, endTarget) {\n    if (!this.navMesh) {\n      endTarget.copy(end);\n      return null;\n    } else if (!node) {\n      endTarget.copy(end);\n      return this.getNode(end, groupID);\n    }\n    return pathfinder.clampStep(start, end, node, ZONE, groupID, endTarget);\n  }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYWZyYW1lLWV4dHJhc0A3LjUuMS9ub2RlX21vZHVsZXMvYWZyYW1lLWV4dHJhcy9zcmMvcGF0aGZpbmRpbmcvc3lzdGVtLmpzIiwibWFwcGluZ3MiOiJBQUFBLFFBQVEsY0FBYyxFQUFFLG1CQUFPLENBQUMsMkpBQW1COztBQUVuRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQSxhQUFhLGdCQUFnQjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0EsYUFBYSxVQUFVO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQSxhQUFhLFVBQVU7QUFDdkI7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBLGNBQWMsZUFBZTtBQUM3QixjQUFjLGVBQWU7QUFDN0IsY0FBYyxRQUFRO0FBQ3RCLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBLGFBQWEsZUFBZTtBQUM1QixjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQSxjQUFjLGVBQWU7QUFDN0IsY0FBYyxRQUFRO0FBQ3RCLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBLGNBQWMsZUFBZTtBQUM3QixjQUFjLGVBQWU7QUFDN0IsY0FBYyxRQUFRO0FBQ3RCLGNBQWMsTUFBTTtBQUNwQixjQUFjLGVBQWU7QUFDN0IsY0FBYyxNQUFNO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zbWFfcG9zdF9zY2FyY2l0eS8uL25vZGVfbW9kdWxlcy8ucG5wbS9hZnJhbWUtZXh0cmFzQDcuNS4xL25vZGVfbW9kdWxlcy9hZnJhbWUtZXh0cmFzL3NyYy9wYXRoZmluZGluZy9zeXN0ZW0uanM/NDQ5ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7IFBhdGhmaW5kaW5nIH0gPSByZXF1aXJlKCd0aHJlZS1wYXRoZmluZGluZycpO1xuXG5jb25zdCBwYXRoZmluZGVyID0gbmV3IFBhdGhmaW5kaW5nKCk7XG5jb25zdCBaT05FID0gJ2xldmVsJztcblxuLyoqXG4gKiBuYXZcbiAqXG4gKiBQYXRoZmluZGluZyBzeXN0ZW0sIHVzaW5nIFBhdHJvbEpTLlxuICovXG5tb2R1bGUuZXhwb3J0cyA9IEFGUkFNRS5yZWdpc3RlclN5c3RlbSgnbmF2Jywge1xuICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5uYXZNZXNoID0gbnVsbDtcbiAgICB0aGlzLmFnZW50cyA9IG5ldyBTZXQoKTtcbiAgfSxcblxuICAvKipcbiAgICogQHBhcmFtIHtUSFJFRS5HZW9tZXRyeX0gZ2VvbWV0cnlcbiAgICovXG4gIHNldE5hdk1lc2hHZW9tZXRyeTogZnVuY3Rpb24gKGdlb21ldHJ5KSB7XG4gICAgdGhpcy5uYXZNZXNoID0gbmV3IFRIUkVFLk1lc2goZ2VvbWV0cnkpO1xuICAgIHBhdGhmaW5kZXIuc2V0Wm9uZURhdGEoWk9ORSwgUGF0aGZpbmRpbmcuY3JlYXRlWm9uZShnZW9tZXRyeSkpO1xuICAgIEFycmF5LmZyb20odGhpcy5hZ2VudHMpLmZvckVhY2goKGFnZW50KSA9PiBhZ2VudC51cGRhdGVOYXZMb2NhdGlvbigpKTtcbiAgfSxcblxuICAvKipcbiAgICogQHJldHVybiB7VEhSRUUuTWVzaH1cbiAgICovXG4gIGdldE5hdk1lc2g6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5uYXZNZXNoO1xuICB9LFxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge05hdkFnZW50fSBjdHJsXG4gICAqL1xuICBhZGRBZ2VudDogZnVuY3Rpb24gKGN0cmwpIHtcbiAgICB0aGlzLmFnZW50cy5hZGQoY3RybCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7TmF2QWdlbnR9IGN0cmxcbiAgICovXG4gIHJlbW92ZUFnZW50OiBmdW5jdGlvbiAoY3RybCkge1xuICAgIHRoaXMuYWdlbnRzLmRlbGV0ZShjdHJsKTtcbiAgfSxcblxuICAvKipcbiAgICogQHBhcmFtICB7VEhSRUUuVmVjdG9yM30gc3RhcnRcbiAgICogQHBhcmFtICB7VEhSRUUuVmVjdG9yM30gZW5kXG4gICAqIEBwYXJhbSAge251bWJlcn0gZ3JvdXBJRFxuICAgKiBAcmV0dXJuIHtBcnJheTxUSFJFRS5WZWN0b3IzPn1cbiAgICovXG4gIGdldFBhdGg6IGZ1bmN0aW9uIChzdGFydCwgZW5kLCBncm91cElEKSB7XG4gICAgcmV0dXJuIHRoaXMubmF2TWVzaFxuICAgICAgPyBwYXRoZmluZGVyLmZpbmRQYXRoKHN0YXJ0LCBlbmQsIFpPTkUsIGdyb3VwSUQpXG4gICAgICA6IG51bGw7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7VEhSRUUuVmVjdG9yM30gcG9zaXRpb25cbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0R3JvdXA6IGZ1bmN0aW9uIChwb3NpdGlvbikge1xuICAgIHJldHVybiB0aGlzLm5hdk1lc2hcbiAgICAgID8gcGF0aGZpbmRlci5nZXRHcm91cChaT05FLCBwb3NpdGlvbilcbiAgICAgIDogbnVsbDtcbiAgfSxcblxuICAvKipcbiAgICogQHBhcmFtICB7VEhSRUUuVmVjdG9yM30gcG9zaXRpb25cbiAgICogQHBhcmFtICB7bnVtYmVyfSBncm91cElEXG4gICAqIEByZXR1cm4ge05vZGV9XG4gICAqL1xuICBnZXROb2RlOiBmdW5jdGlvbiAocG9zaXRpb24sIGdyb3VwSUQpIHtcbiAgICByZXR1cm4gdGhpcy5uYXZNZXNoXG4gICAgICA/IHBhdGhmaW5kZXIuZ2V0Q2xvc2VzdE5vZGUocG9zaXRpb24sIFpPTkUsIGdyb3VwSUQsIHRydWUpXG4gICAgICA6IG51bGw7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBwYXJhbSAge1RIUkVFLlZlY3RvcjN9IHN0YXJ0IFN0YXJ0aW5nIHBvc2l0aW9uLlxuICAgKiBAcGFyYW0gIHtUSFJFRS5WZWN0b3IzfSBlbmQgRGVzaXJlZCBlbmRpbmcgcG9zaXRpb24uXG4gICAqIEBwYXJhbSAge251bWJlcn0gZ3JvdXBJRFxuICAgKiBAcGFyYW0gIHtOb2RlfSBub2RlXG4gICAqIEBwYXJhbSAge1RIUkVFLlZlY3RvcjN9IGVuZFRhcmdldCAoT3V0cHV0KSBBZGp1c3RlZCBzdGVwIGVuZCBwb3NpdGlvbi5cbiAgICogQHJldHVybiB7Tm9kZX0gQ3VycmVudCBub2RlLCBhZnRlciBzdGVwIGlzIHRha2VuLlxuICAgKi9cbiAgY2xhbXBTdGVwOiBmdW5jdGlvbiAoc3RhcnQsIGVuZCwgZ3JvdXBJRCwgbm9kZSwgZW5kVGFyZ2V0KSB7XG4gICAgaWYgKCF0aGlzLm5hdk1lc2gpIHtcbiAgICAgIGVuZFRhcmdldC5jb3B5KGVuZCk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9IGVsc2UgaWYgKCFub2RlKSB7XG4gICAgICBlbmRUYXJnZXQuY29weShlbmQpO1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0Tm9kZShlbmQsIGdyb3VwSUQpO1xuICAgIH1cbiAgICByZXR1cm4gcGF0aGZpbmRlci5jbGFtcFN0ZXAoc3RhcnQsIGVuZCwgbm9kZSwgWk9ORSwgZ3JvdXBJRCwgZW5kVGFyZ2V0KTtcbiAgfVxufSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/pathfinding/system.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/primitives/a-grid.js":
/*!****************************************************************************************************!*\
  !*** ./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/primitives/a-grid.js ***!
  \****************************************************************************************************/
/***/ ((module) => {

eval("/**\n * Flat grid.\n *\n * Defaults to 75x75.\n */\nmodule.exports = AFRAME.registerPrimitive('a-grid', {\n  defaultComponents: {\n    geometry: {\n      primitive: 'plane',\n      width: 75,\n      height: 75\n    },\n    rotation: {x: -90, y: 0, z: 0},\n    material: {\n      src: 'url(https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v1.16.3/assets/grid.png)',\n      repeat: '75 75'\n    }\n  },\n  mappings: {\n    width: 'geometry.width',\n    height: 'geometry.height',\n    src: 'material.src'\n  }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYWZyYW1lLWV4dHJhc0A3LjUuMS9ub2RlX21vZHVsZXMvYWZyYW1lLWV4dHJhcy9zcmMvcHJpbWl0aXZlcy9hLWdyaWQuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxlQUFlLG1CQUFtQjtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3NtYV9wb3N0X3NjYXJjaXR5Ly4vbm9kZV9tb2R1bGVzLy5wbnBtL2FmcmFtZS1leHRyYXNANy41LjEvbm9kZV9tb2R1bGVzL2FmcmFtZS1leHRyYXMvc3JjL3ByaW1pdGl2ZXMvYS1ncmlkLmpzPzQ2NzEiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBGbGF0IGdyaWQuXG4gKlxuICogRGVmYXVsdHMgdG8gNzV4NzUuXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gQUZSQU1FLnJlZ2lzdGVyUHJpbWl0aXZlKCdhLWdyaWQnLCB7XG4gIGRlZmF1bHRDb21wb25lbnRzOiB7XG4gICAgZ2VvbWV0cnk6IHtcbiAgICAgIHByaW1pdGl2ZTogJ3BsYW5lJyxcbiAgICAgIHdpZHRoOiA3NSxcbiAgICAgIGhlaWdodDogNzVcbiAgICB9LFxuICAgIHJvdGF0aW9uOiB7eDogLTkwLCB5OiAwLCB6OiAwfSxcbiAgICBtYXRlcmlhbDoge1xuICAgICAgc3JjOiAndXJsKGh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9kb25tY2N1cmR5L2FmcmFtZS1leHRyYXNAdjEuMTYuMy9hc3NldHMvZ3JpZC5wbmcpJyxcbiAgICAgIHJlcGVhdDogJzc1IDc1J1xuICAgIH1cbiAgfSxcbiAgbWFwcGluZ3M6IHtcbiAgICB3aWR0aDogJ2dlb21ldHJ5LndpZHRoJyxcbiAgICBoZWlnaHQ6ICdnZW9tZXRyeS5oZWlnaHQnLFxuICAgIHNyYzogJ21hdGVyaWFsLnNyYydcbiAgfVxufSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/primitives/a-grid.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/primitives/a-ocean.js":
/*!*****************************************************************************************************!*\
  !*** ./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/primitives/a-ocean.js ***!
  \*****************************************************************************************************/
/***/ ((module) => {

eval("/**\n * Flat-shaded ocean primitive.\n *\n * Based on a Codrops tutorial:\n * http://tympanus.net/codrops/2016/04/26/the-aviator-animating-basic-3d-scene-threejs/\n */\nmodule.exports.Primitive = AFRAME.registerPrimitive('a-ocean', {\n  defaultComponents: {\n    ocean: {},\n    rotation: {x: -90, y: 0, z: 0}\n  },\n  mappings: {\n    width: 'ocean.width',\n    depth: 'ocean.depth',\n    density: 'ocean.density',\n    amplitude: 'ocean.amplitude',\n    amplitudeVariance: 'ocean.amplitudeVariance',\n    speed: 'ocean.speed',\n    speedVariance: 'ocean.speedVariance',\n    color: 'ocean.color',\n    opacity: 'ocean.opacity'\n  }\n});\n\nmodule.exports.Component = AFRAME.registerComponent('ocean', {\n  schema: {\n    // Dimensions of the ocean area.\n    width: {default: 10, min: 0},\n    depth: {default: 10, min: 0},\n\n    // Density of waves.\n    density: {default: 10},\n\n    // Wave amplitude and variance.\n    amplitude: {default: 0.1},\n    amplitudeVariance: {default: 0.3},\n\n    // Wave speed and variance.\n    speed: {default: 1},\n    speedVariance: {default: 2},\n\n    // Material.\n    color: {default: '#7AD2F7', type: 'color'},\n    opacity: {default: 0.8}\n  },\n\n  /**\n   * Use play() instead of init(), because component mappings  unavailable as dependencies  are\n   * not guaranteed to have parsed when this component is initialized.\n   */\n  play: function () {\n    const el = this.el;\n    const data = this.data;\n    let material = el.components.material;\n\n    const geometry = new THREE.PlaneGeometry(data.width, data.depth, data.density, data.density);\n    this.waves = [];\n    const posAttribute = geometry.getAttribute('position');\n    for (let i = 0; i < posAttribute.count; i++) {\n      this.waves.push({\n        z: posAttribute.getZ(i),\n        ang: Math.random() * Math.PI * 2,\n        amp: data.amplitude + Math.random() * data.amplitudeVariance,\n        speed: (data.speed + Math.random() * data.speedVariance) / 1000 // radians / frame\n      });\n    }\n\n    if (!material) {\n      material = {};\n      material.material = new THREE.MeshPhongMaterial({\n        color: data.color,\n        transparent: data.opacity < 1,\n        opacity: data.opacity,\n        flatShading: true,\n      });\n    }\n\n    this.mesh = new THREE.Mesh(geometry, material.material);\n    el.setObject3D('mesh', this.mesh);\n  },\n\n  remove: function () {\n    this.el.removeObject3D('mesh');\n  },\n\n  tick: function (t, dt) {\n    if (!dt) return;\n\n    const posAttribute = this.mesh.geometry.getAttribute('position');\n    for (let i = 0; i < posAttribute.count; i++){\n      const vprops = this.waves[i];\n      const value = vprops.z + Math.sin(vprops.ang) * vprops.amp;\n      posAttribute.setZ(i, value);\n      vprops.ang += vprops.speed * dt;\n    }\n    posAttribute.needsUpdate = true;\n  }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYWZyYW1lLWV4dHJhc0A3LjUuMS9ub2RlX21vZHVsZXMvYWZyYW1lLWV4dHJhcy9zcmMvcHJpbWl0aXZlcy9hLW9jZWFuLmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBLGFBQWE7QUFDYixlQUFlO0FBQ2YsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVELHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0EsWUFBWSxvQkFBb0I7QUFDaEMsWUFBWSxvQkFBb0I7O0FBRWhDO0FBQ0EsY0FBYyxZQUFZOztBQUUxQjtBQUNBLGdCQUFnQixhQUFhO0FBQzdCLHdCQUF3QixhQUFhOztBQUVyQztBQUNBLFlBQVksV0FBVztBQUN2QixvQkFBb0IsV0FBVzs7QUFFL0I7QUFDQSxZQUFZLGtDQUFrQztBQUM5QyxjQUFjO0FBQ2QsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQix3QkFBd0I7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDs7QUFFQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0Esb0JBQW9CLHdCQUF3QjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zbWFfcG9zdF9zY2FyY2l0eS8uL25vZGVfbW9kdWxlcy8ucG5wbS9hZnJhbWUtZXh0cmFzQDcuNS4xL25vZGVfbW9kdWxlcy9hZnJhbWUtZXh0cmFzL3NyYy9wcmltaXRpdmVzL2Etb2NlYW4uanM/ZmUxOCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEZsYXQtc2hhZGVkIG9jZWFuIHByaW1pdGl2ZS5cbiAqXG4gKiBCYXNlZCBvbiBhIENvZHJvcHMgdHV0b3JpYWw6XG4gKiBodHRwOi8vdHltcGFudXMubmV0L2NvZHJvcHMvMjAxNi8wNC8yNi90aGUtYXZpYXRvci1hbmltYXRpbmctYmFzaWMtM2Qtc2NlbmUtdGhyZWVqcy9cbiAqL1xubW9kdWxlLmV4cG9ydHMuUHJpbWl0aXZlID0gQUZSQU1FLnJlZ2lzdGVyUHJpbWl0aXZlKCdhLW9jZWFuJywge1xuICBkZWZhdWx0Q29tcG9uZW50czoge1xuICAgIG9jZWFuOiB7fSxcbiAgICByb3RhdGlvbjoge3g6IC05MCwgeTogMCwgejogMH1cbiAgfSxcbiAgbWFwcGluZ3M6IHtcbiAgICB3aWR0aDogJ29jZWFuLndpZHRoJyxcbiAgICBkZXB0aDogJ29jZWFuLmRlcHRoJyxcbiAgICBkZW5zaXR5OiAnb2NlYW4uZGVuc2l0eScsXG4gICAgYW1wbGl0dWRlOiAnb2NlYW4uYW1wbGl0dWRlJyxcbiAgICBhbXBsaXR1ZGVWYXJpYW5jZTogJ29jZWFuLmFtcGxpdHVkZVZhcmlhbmNlJyxcbiAgICBzcGVlZDogJ29jZWFuLnNwZWVkJyxcbiAgICBzcGVlZFZhcmlhbmNlOiAnb2NlYW4uc3BlZWRWYXJpYW5jZScsXG4gICAgY29sb3I6ICdvY2Vhbi5jb2xvcicsXG4gICAgb3BhY2l0eTogJ29jZWFuLm9wYWNpdHknXG4gIH1cbn0pO1xuXG5tb2R1bGUuZXhwb3J0cy5Db21wb25lbnQgPSBBRlJBTUUucmVnaXN0ZXJDb21wb25lbnQoJ29jZWFuJywge1xuICBzY2hlbWE6IHtcbiAgICAvLyBEaW1lbnNpb25zIG9mIHRoZSBvY2VhbiBhcmVhLlxuICAgIHdpZHRoOiB7ZGVmYXVsdDogMTAsIG1pbjogMH0sXG4gICAgZGVwdGg6IHtkZWZhdWx0OiAxMCwgbWluOiAwfSxcblxuICAgIC8vIERlbnNpdHkgb2Ygd2F2ZXMuXG4gICAgZGVuc2l0eToge2RlZmF1bHQ6IDEwfSxcblxuICAgIC8vIFdhdmUgYW1wbGl0dWRlIGFuZCB2YXJpYW5jZS5cbiAgICBhbXBsaXR1ZGU6IHtkZWZhdWx0OiAwLjF9LFxuICAgIGFtcGxpdHVkZVZhcmlhbmNlOiB7ZGVmYXVsdDogMC4zfSxcblxuICAgIC8vIFdhdmUgc3BlZWQgYW5kIHZhcmlhbmNlLlxuICAgIHNwZWVkOiB7ZGVmYXVsdDogMX0sXG4gICAgc3BlZWRWYXJpYW5jZToge2RlZmF1bHQ6IDJ9LFxuXG4gICAgLy8gTWF0ZXJpYWwuXG4gICAgY29sb3I6IHtkZWZhdWx0OiAnIzdBRDJGNycsIHR5cGU6ICdjb2xvcid9LFxuICAgIG9wYWNpdHk6IHtkZWZhdWx0OiAwLjh9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFVzZSBwbGF5KCkgaW5zdGVhZCBvZiBpbml0KCksIGJlY2F1c2UgY29tcG9uZW50IG1hcHBpbmdzIOKAkyB1bmF2YWlsYWJsZSBhcyBkZXBlbmRlbmNpZXMg4oCTIGFyZVxuICAgKiBub3QgZ3VhcmFudGVlZCB0byBoYXZlIHBhcnNlZCB3aGVuIHRoaXMgY29tcG9uZW50IGlzIGluaXRpYWxpemVkLlxuICAgKi9cbiAgcGxheTogZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IGVsID0gdGhpcy5lbDtcbiAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhO1xuICAgIGxldCBtYXRlcmlhbCA9IGVsLmNvbXBvbmVudHMubWF0ZXJpYWw7XG5cbiAgICBjb25zdCBnZW9tZXRyeSA9IG5ldyBUSFJFRS5QbGFuZUdlb21ldHJ5KGRhdGEud2lkdGgsIGRhdGEuZGVwdGgsIGRhdGEuZGVuc2l0eSwgZGF0YS5kZW5zaXR5KTtcbiAgICB0aGlzLndhdmVzID0gW107XG4gICAgY29uc3QgcG9zQXR0cmlidXRlID0gZ2VvbWV0cnkuZ2V0QXR0cmlidXRlKCdwb3NpdGlvbicpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcG9zQXR0cmlidXRlLmNvdW50OyBpKyspIHtcbiAgICAgIHRoaXMud2F2ZXMucHVzaCh7XG4gICAgICAgIHo6IHBvc0F0dHJpYnV0ZS5nZXRaKGkpLFxuICAgICAgICBhbmc6IE1hdGgucmFuZG9tKCkgKiBNYXRoLlBJICogMixcbiAgICAgICAgYW1wOiBkYXRhLmFtcGxpdHVkZSArIE1hdGgucmFuZG9tKCkgKiBkYXRhLmFtcGxpdHVkZVZhcmlhbmNlLFxuICAgICAgICBzcGVlZDogKGRhdGEuc3BlZWQgKyBNYXRoLnJhbmRvbSgpICogZGF0YS5zcGVlZFZhcmlhbmNlKSAvIDEwMDAgLy8gcmFkaWFucyAvIGZyYW1lXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoIW1hdGVyaWFsKSB7XG4gICAgICBtYXRlcmlhbCA9IHt9O1xuICAgICAgbWF0ZXJpYWwubWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWwoe1xuICAgICAgICBjb2xvcjogZGF0YS5jb2xvcixcbiAgICAgICAgdHJhbnNwYXJlbnQ6IGRhdGEub3BhY2l0eSA8IDEsXG4gICAgICAgIG9wYWNpdHk6IGRhdGEub3BhY2l0eSxcbiAgICAgICAgZmxhdFNoYWRpbmc6IHRydWUsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB0aGlzLm1lc2ggPSBuZXcgVEhSRUUuTWVzaChnZW9tZXRyeSwgbWF0ZXJpYWwubWF0ZXJpYWwpO1xuICAgIGVsLnNldE9iamVjdDNEKCdtZXNoJywgdGhpcy5tZXNoKTtcbiAgfSxcblxuICByZW1vdmU6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmVsLnJlbW92ZU9iamVjdDNEKCdtZXNoJyk7XG4gIH0sXG5cbiAgdGljazogZnVuY3Rpb24gKHQsIGR0KSB7XG4gICAgaWYgKCFkdCkgcmV0dXJuO1xuXG4gICAgY29uc3QgcG9zQXR0cmlidXRlID0gdGhpcy5tZXNoLmdlb21ldHJ5LmdldEF0dHJpYnV0ZSgncG9zaXRpb24nKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBvc0F0dHJpYnV0ZS5jb3VudDsgaSsrKXtcbiAgICAgIGNvbnN0IHZwcm9wcyA9IHRoaXMud2F2ZXNbaV07XG4gICAgICBjb25zdCB2YWx1ZSA9IHZwcm9wcy56ICsgTWF0aC5zaW4odnByb3BzLmFuZykgKiB2cHJvcHMuYW1wO1xuICAgICAgcG9zQXR0cmlidXRlLnNldFooaSwgdmFsdWUpO1xuICAgICAgdnByb3BzLmFuZyArPSB2cHJvcHMuc3BlZWQgKiBkdDtcbiAgICB9XG4gICAgcG9zQXR0cmlidXRlLm5lZWRzVXBkYXRlID0gdHJ1ZTtcbiAgfVxufSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/primitives/a-ocean.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/primitives/a-tube.js":
/*!****************************************************************************************************!*\
  !*** ./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/primitives/a-tube.js ***!
  \****************************************************************************************************/
/***/ ((module) => {

eval("/**\n * Tube following a custom path.\n *\n * Usage:\n *\n * ```html\n * <a-tube path=\"5 0 5, 5 0 -5, -5 0 -5\" radius=\"0.5\"></a-tube>\n * ```\n */\nmodule.exports.Primitive = AFRAME.registerPrimitive('a-tube', {\n  defaultComponents: {\n    tube:           {},\n  },\n  mappings: {\n    path:           'tube.path',\n    segments:       'tube.segments',\n    radius:         'tube.radius',\n    'radial-segments': 'tube.radialSegments',\n    closed:         'tube.closed'\n  }\n});\n\nmodule.exports.Component = AFRAME.registerComponent('tube', {\n  schema: {\n    path:           {default: []},\n    segments:       {default: 64},\n    radius:         {default: 1},\n    radialSegments: {default: 8},\n    closed:         {default: false}\n  },\n\n  init: function () {\n    const el = this.el,\n        data = this.data;\n    let material = el.components.material;\n\n    if (!data.path.length) {\n      console.error('[a-tube] `path` property expected but not found.');\n      return;\n    }\n\n    const curve = new THREE.CatmullRomCurve3(data.path.map(function (point) {\n      point = point.split(' ');\n      return new THREE.Vector3(Number(point[0]), Number(point[1]), Number(point[2]));\n    }));\n    const geometry = new THREE.TubeGeometry(\n      curve, data.segments, data.radius, data.radialSegments, data.closed\n    );\n\n    if (!material) {\n      material = {};\n      material.material = new THREE.MeshPhongMaterial();\n    }\n\n    this.mesh = new THREE.Mesh(geometry, material.material);\n    this.el.setObject3D('mesh', this.mesh);\n  },\n\n  update: function (prevData) {\n    if (!Object.keys(prevData).length) return;\n\n    this.remove();\n    this.init();\n  },\n\n  remove: function () {\n    if (this.mesh) this.el.removeObject3D('mesh');\n  }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYWZyYW1lLWV4dHJhc0A3LjUuMS9ub2RlX21vZHVsZXMvYWZyYW1lLWV4dHJhcy9zcmMvcHJpbWl0aXZlcy9hLXR1YmUuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0Esc0JBQXNCO0FBQ3RCLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQsd0JBQXdCO0FBQ3hCO0FBQ0EscUJBQXFCLFlBQVk7QUFDakMscUJBQXFCLFlBQVk7QUFDakMscUJBQXFCLFdBQVc7QUFDaEMscUJBQXFCLFdBQVc7QUFDaEMscUJBQXFCO0FBQ3JCLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zbWFfcG9zdF9zY2FyY2l0eS8uL25vZGVfbW9kdWxlcy8ucG5wbS9hZnJhbWUtZXh0cmFzQDcuNS4xL25vZGVfbW9kdWxlcy9hZnJhbWUtZXh0cmFzL3NyYy9wcmltaXRpdmVzL2EtdHViZS5qcz83ZTEwIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVHViZSBmb2xsb3dpbmcgYSBjdXN0b20gcGF0aC5cbiAqXG4gKiBVc2FnZTpcbiAqXG4gKiBgYGBodG1sXG4gKiA8YS10dWJlIHBhdGg9XCI1IDAgNSwgNSAwIC01LCAtNSAwIC01XCIgcmFkaXVzPVwiMC41XCI+PC9hLXR1YmU+XG4gKiBgYGBcbiAqL1xubW9kdWxlLmV4cG9ydHMuUHJpbWl0aXZlID0gQUZSQU1FLnJlZ2lzdGVyUHJpbWl0aXZlKCdhLXR1YmUnLCB7XG4gIGRlZmF1bHRDb21wb25lbnRzOiB7XG4gICAgdHViZTogICAgICAgICAgIHt9LFxuICB9LFxuICBtYXBwaW5nczoge1xuICAgIHBhdGg6ICAgICAgICAgICAndHViZS5wYXRoJyxcbiAgICBzZWdtZW50czogICAgICAgJ3R1YmUuc2VnbWVudHMnLFxuICAgIHJhZGl1czogICAgICAgICAndHViZS5yYWRpdXMnLFxuICAgICdyYWRpYWwtc2VnbWVudHMnOiAndHViZS5yYWRpYWxTZWdtZW50cycsXG4gICAgY2xvc2VkOiAgICAgICAgICd0dWJlLmNsb3NlZCdcbiAgfVxufSk7XG5cbm1vZHVsZS5leHBvcnRzLkNvbXBvbmVudCA9IEFGUkFNRS5yZWdpc3RlckNvbXBvbmVudCgndHViZScsIHtcbiAgc2NoZW1hOiB7XG4gICAgcGF0aDogICAgICAgICAgIHtkZWZhdWx0OiBbXX0sXG4gICAgc2VnbWVudHM6ICAgICAgIHtkZWZhdWx0OiA2NH0sXG4gICAgcmFkaXVzOiAgICAgICAgIHtkZWZhdWx0OiAxfSxcbiAgICByYWRpYWxTZWdtZW50czoge2RlZmF1bHQ6IDh9LFxuICAgIGNsb3NlZDogICAgICAgICB7ZGVmYXVsdDogZmFsc2V9XG4gIH0sXG5cbiAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IGVsID0gdGhpcy5lbCxcbiAgICAgICAgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICBsZXQgbWF0ZXJpYWwgPSBlbC5jb21wb25lbnRzLm1hdGVyaWFsO1xuXG4gICAgaWYgKCFkYXRhLnBhdGgubGVuZ3RoKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbYS10dWJlXSBgcGF0aGAgcHJvcGVydHkgZXhwZWN0ZWQgYnV0IG5vdCBmb3VuZC4nKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBjdXJ2ZSA9IG5ldyBUSFJFRS5DYXRtdWxsUm9tQ3VydmUzKGRhdGEucGF0aC5tYXAoZnVuY3Rpb24gKHBvaW50KSB7XG4gICAgICBwb2ludCA9IHBvaW50LnNwbGl0KCcgJyk7XG4gICAgICByZXR1cm4gbmV3IFRIUkVFLlZlY3RvcjMoTnVtYmVyKHBvaW50WzBdKSwgTnVtYmVyKHBvaW50WzFdKSwgTnVtYmVyKHBvaW50WzJdKSk7XG4gICAgfSkpO1xuICAgIGNvbnN0IGdlb21ldHJ5ID0gbmV3IFRIUkVFLlR1YmVHZW9tZXRyeShcbiAgICAgIGN1cnZlLCBkYXRhLnNlZ21lbnRzLCBkYXRhLnJhZGl1cywgZGF0YS5yYWRpYWxTZWdtZW50cywgZGF0YS5jbG9zZWRcbiAgICApO1xuXG4gICAgaWYgKCFtYXRlcmlhbCkge1xuICAgICAgbWF0ZXJpYWwgPSB7fTtcbiAgICAgIG1hdGVyaWFsLm1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hQaG9uZ01hdGVyaWFsKCk7XG4gICAgfVxuXG4gICAgdGhpcy5tZXNoID0gbmV3IFRIUkVFLk1lc2goZ2VvbWV0cnksIG1hdGVyaWFsLm1hdGVyaWFsKTtcbiAgICB0aGlzLmVsLnNldE9iamVjdDNEKCdtZXNoJywgdGhpcy5tZXNoKTtcbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uIChwcmV2RGF0YSkge1xuICAgIGlmICghT2JqZWN0LmtleXMocHJldkRhdGEpLmxlbmd0aCkgcmV0dXJuO1xuXG4gICAgdGhpcy5yZW1vdmUoKTtcbiAgICB0aGlzLmluaXQoKTtcbiAgfSxcblxuICByZW1vdmU6IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5tZXNoKSB0aGlzLmVsLnJlbW92ZU9iamVjdDNEKCdtZXNoJyk7XG4gIH1cbn0pO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/primitives/a-tube.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/primitives/index.js":
/*!***************************************************************************************************!*\
  !*** ./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/primitives/index.js ***!
  \***************************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("__webpack_require__(/*! ./a-grid */ \"(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/primitives/a-grid.js\");\n__webpack_require__(/*! ./a-ocean */ \"(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/primitives/a-ocean.js\");\n__webpack_require__(/*! ./a-tube */ \"(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/primitives/a-tube.js\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vYWZyYW1lLWV4dHJhc0A3LjUuMS9ub2RlX21vZHVsZXMvYWZyYW1lLWV4dHJhcy9zcmMvcHJpbWl0aXZlcy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiQUFBQSxtQkFBTyxDQUFDLG9IQUFVO0FBQ2xCLG1CQUFPLENBQUMsc0hBQVc7QUFDbkIsbUJBQU8sQ0FBQyxvSEFBVSIsInNvdXJjZXMiOlsid2VicGFjazovL3NtYV9wb3N0X3NjYXJjaXR5Ly4vbm9kZV9tb2R1bGVzLy5wbnBtL2FmcmFtZS1leHRyYXNANy41LjEvbm9kZV9tb2R1bGVzL2FmcmFtZS1leHRyYXMvc3JjL3ByaW1pdGl2ZXMvaW5kZXguanM/NWEwMiJdLCJzb3VyY2VzQ29udGVudCI6WyJyZXF1aXJlKCcuL2EtZ3JpZCcpO1xucmVxdWlyZSgnLi9hLW9jZWFuJyk7XG5yZXF1aXJlKCcuL2EtdHViZScpO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/aframe-extras@7.5.1/node_modules/aframe-extras/src/primitives/index.js\n");

/***/ })

};
;